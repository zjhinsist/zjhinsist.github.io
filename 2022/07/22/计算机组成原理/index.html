<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>计算机组成原理教程 | Nuyoah</title><meta name="keywords" content="计算机基础"><meta name="author" content="Nuyoah"><meta name="copyright" content="Nuyoah"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="计算机组成原理教程"><meta name="application-name" content="计算机组成原理教程"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="计算机组成原理教程"><meta property="og:url" content="http://262259.xyz/2022/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/index.html"><meta property="og:site_name" content="Nuyoah"><meta property="og:description" content="该文章图片比较多注意流量消耗"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://s2.loli.net/2022/11/21/IQmvSdtKfOAjikn.webp"><meta property="article:author" content="Nuyoah"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2022/11/21/IQmvSdtKfOAjikn.webp"><meta name="description" content="该文章图片比较多注意流量消耗"><link rel="shortcut icon" href="https://s1.ax1x.com/2022/11/27/zUFla6.png"><link rel="canonical" href="http://262259.xyz/2022/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"404！加载失败！","backTitle":"加载成功！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo.262259.xyz/',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":"a665f8c80fd739329dd0d3f3fe7d90fc"},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Nuyoah","link":"链接: ","source":"来源: Nuyoah","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Nuyoah',
  title: '计算机组成原理教程',
  postAI: '',
  pageFillDescription: ' 第一章：计算机系统概述,  计算机的发展,  计算机硬件的基本组成,  早期冯诺依曼机的结构,  现代计算机的结构,  各个硬件的工作原理,  主存储器的基本组成,  运算器的基本组成,  控制器的基本组成,  计算机的工作过程,  计算机系统的层次结构,  计算机性能指标,  存储器性能指标,  CPU性能指标,  系统整体性能指标,  第二章：数据的表示和运算,  进位计数制,  BCD码 （Binary-Coded Decimal）,  8421码,  余三码,  2421码,  字符与字符串,  英文字符在计算机内的表示,  中文字符在计算机内的表示,  字符串的存储,  数据校验码,  校验原理,  奇偶校验码,  海明校验码,  循环冗余校验码,  定点数的表示,  无符号数的表示,  原码,  反码,  补码,  移码,  定点数的运算,  移位运算,  加法运算,  乘法运算,  原码的乘法运算,  补码的乘法运算,  除法运算,  除法运算思想,  恢复余数法,  加减交替法(不恢复余数法),  补码的除法运算：,  数据强制转换,  数据的存储和排列,  大小端模式,  边界对齐,  浮点数的表示,  浮点数表示标准IEEE754,  浮点数表示范围,  浮点数的运算,  加减运算,  强制类型转换,  电路的基本原理加法器的设计,  算数逻辑单元ALU,  最基本的逻辑运算,  加法器ALU的改进,  如何更快的产生进位,  并行加法器的优化,  ALU优化,  第三章：存储系统,  存储器的基本概念,  存储器的层次结构,  存储器的分类（从不同角度进行分类）,  层次分类：,  存储介质,  存取方式,  信息的可更改性,  信息的可保存性,  存储器的性能指标,  主存储器的基本组成,  半导体元件的原理,  存储芯片的基本原理,  如何实现不同的寻址方式,  SRAM和DRAM,  DRAM的刷新,  只读存储器ROM,  存储器与CPU的链接,  单块存储芯片与CPU的连接,  位扩展,  字扩展,  字位同时扩展,  译码器,  双口RAM和多模块存储器,  提升主存速度,  内存条插入方法：低位交叉存储器,  Cache基本原理基本概念,  Cache工作原理,  局部性原理,  性能分析,  有待解决的问题,  Cache与主存的三种映射方式,  全相联映射,  直接映射（只能存放在固定位置）,  组相联映射,  Cache替换算法,  Cache写策略,  写命中,  写不命中,  多级Cache,  页式存储器,  虚地址 vs 实地址,  逻辑页号→主存块号,  虚拟存储器,  第四章：指令系统,  指令格式,  指令-按指令长度分类,  指令-按操作码的长度分类,  指令-按操作类型分类,  扩展操作码,  指令寻址,  顺序寻址,  跳跃寻址,  数据寻址,  直接寻址,  间接寻址,  寄存器寻址,  寄存器间接寻址,  隐含寻址,  立即寻址,  偏移寻址,  基址寻址,  变址寻址,  相对寻址,  堆栈寻址,  CISC 和 RISC,  第五章：中央处理器,  CPU的功能和基本结构,  CPU的功能,  运算器和控制器的基本功能,  运算器的基本结构,  控制器的基本结构,  CPU的基本结构,  指令执行过程,  指令周期,  指令周期流程,  指令周期的数据流-取指周期,  指令周期的数据流-间址周期,  指令周期的数据流-执行周期,  指令周期的数据流-中断周期,  指令执行方案,  数据通路的功能,  单总线结构,  单总线结构：例题,  专用通路结构,  专用通路结构：例题,  硬布线控制器的设计,  硬布线控制器,  硬部件控制器的设计,  微程序控制器的基本原理,  微程序控制器设计思路,  微程序控制器的基本结构,  微控制器的工作原理,  微指令的设计,  微程序控制器的工作原理,  微命令的格式,  微指令的编码方式,  微指令的地址形成方式,  例题：断定方式,  微程序控制单元的设计,  微程序设计分类,  微程序控制器和硬布线控制器的对比,  指令流水线的基本概念,  指令流水的定义,  流水线表示方法,  流水线的性能指标,  指令流水线的影响因素和分类,  机器周期的设置,  结构相关(资源冲突),  数据相关(数据冲突),  控制相关(控制冲突),  流水线的分类,  流水线的多发技术,  五段式指令流水线,  第六章：总线,  总线的概述,  总线的定义：,  总线的特点,  总线的特性,  串行总线和并行总线,  片内总线系统总线和通信总线,  系统总线的结构,  总线的性能指标,  总线的仲裁,  仲裁的基本概念,  集中仲裁方式：,  总线的操作和定时,  总线传输的四个阶段,  同步定时方式,  异步定时方式,  半同步通信,  分离式通信,  总线标准,  总线标准的基本概念,  系统总线的标准,  局部总线标准,  设备总线标准,  第七章：IO系统,  IO系统的基本概念,  主机如何与IO设备进行交互,  IO控制方式简介,  DMA控制方式,  通道的控制方式,  IO系统的基本组成,  IO设备,  外部设备,  输入设备,  输出设备,  外存设备,  IO接口,  IO接口的作用,  IO接口,  接口与端口,  程序查询方式,  程序查询方式例题,  程序中断的作用和原理,  中断的基本概念,  中断请求的分类,  中断请求标记,  中断判优,  中断处理过程,  多重中断,  中断屏蔽技术,  拓展,  程序中断控制方式,  DMA方式,  DMA传送过程,  DMA传送解决方案,  DMA方式的特点第一章计算机系统概述计算机的发展什么是计算机系统计算机系统硬件软件计算机性能的好坏取决于软硬件的总和软件系统软件应用软件用来管理整个计算机系统操作系统数据库管理系统标准程序库网络软件语言处理程序服务程序按任务需编制成各种程序抖音王者荣耀迅雷硬件的发展发展阶段时间逻辑元件速度次秒内存外存影响第一代电子管几千几万汞延迟线磁鼓穿孔卡带纸袋体积超大耗电量超大使用纸带机编程第二代晶体管几万几十万磁芯存储器磁带体积功耗降低出现面向过程的程序设计语言有了操作系统维形第三代中小规模集成电路几十万几百万半导体存储器磁带磁盘计算机主要用于科学计算等专业用途高级语言迅速发展开始有了分时操作系统第四代现在大规模超大规模集成电路上千万万亿半导体存储器磁带磁盘光盘半导体存储器出现许多微处理器微型计算机年贝尔实验室发明了晶体管年肖克利在硅谷创建肖克利实验室股份有限公司年八叛徒创立仙童半导体公司年仙童半导体公司发明集成电路年摩尔筹人离开仙童创立年仙童销售部负责人桑德斯离开仙童创立摩尔定律揭示了信息技术进步的速度集成电路上可容纳的晶体管数目约每隔个月便会增加一倍整体性能也将提升一倍半导体存储器的发展年仙童公司生产出第一个较大容量的半导体存储器半导体存储器单芯片容量软件的发展语言的发展机器语言汇编语言操作系统的发展目前发展趋势两极分化一极是微型计算机向更微型化网络化高性能多用途方向发展另一极是巨型机向更巨型化超高速并行处理智能化方向发展计算机硬件的基本组成早期冯诺依曼机的结构原先早期的计算机是手动接线来控制计算冯诺依曼提出存储程序的概念存储程序的概念是指将指令以二进制代码的形式事先输入计算机的主存储器然后按其在存储器中的首地址执行程序的第一条指令以后就按该程序的规定顺序执行其他指令直至程序执行结束第一台冯诺依曼计算机冯诺依曼计算机的特点计算机有大部件组成指令和数据以同等地位存于存储器并且可以按照地址寻访指令和数据用二进制表示指令由操作码和地址码组成存储程序以运算器为中心现代计算机的结构现代计算机的结构以存储器为中心解放运算器运算器控制器各个硬件的工作原理主存储器的基本组成存储地址寄存器存储数据存储器使用从存储区中读取数据首先需要把想要读取的数据地址放到地址寄存器中主存储器用中的地址从存储体中找到数据并将数据放到寄存器中从中获取数据使用向存储区写入数据首先需要把想要写入的数据地址放到地址寄存器中并将想要写入的数据放到寄存器中主存储器用中的地址将中的数据存放到中存储体的结构存储单元每个存储单元存放一串二进制代码存储字存储单元中二进制代码的组合存储字长存储单元中二进制代码的位数存储元即存储二进制的电子元件每个存储元可存例子位总共有个存储单元位每个存储单元可以存放一个字的大小为一个字节个字节字的大小由机器决定运算器的基本组成运算器用于实现算术运算如加减乘除逻辑运算如与或非累加器用于存放操作数或运算结果乘商寄存器在乘除运算时用于存放操作数或运算结果通用的操作数寄存器用于存放操作数算术逻辑单元通过内部复杂的电路实现算数运算逻辑运算加减乘除被加数和被减数差乘积高位被除数余数乘数乘积低位商加数减数被乘数除数控制器的基本组成控制单元分析指令给出控制信号指令寄存器存放当前执行的指令程序计数器存放下一条指令地址有自动加功能完成一条指令的过程前两步统称为取值取指令分析指令执行指令计算机的工作过程计算机系统的层次结构从上到下越来越基础虚拟机器高级语言程序用汇编程序翻译成汇编语言程序虚拟机器汇编语言程序用用汇编程序翻译成机器语言程序和机器语言是一一对应的虚拟机器操作系统机器向上提供广义指令系统调用传统机器用机器语言的程序执行二进制指令微程序机器微指令系统由硬件直接执行微指令是硬件是软件下层是上层的基础上层是下层的扩展三种级别的语言机器语言二进制代码汇编语言助记符高级语言高级语言需要通过编译程序编译器翻译成汇编语言汇编语言通过汇编程序汇编器翻译成机器语言有的高级语言也通过编译程序编译器直接翻译成机器语言或者通过解释程序解释器翻译成机器语言编译程序将高级语言编写的源程序全部语句一次全部翻译成机器语言程序而后再执行机器语言程序只需翻译一次解释程序将源程序的一条语句翻译成对应于机器语言的语句并立即执行紧接着再翻译下一句每次执行都要翻译计算机体系结构机器语言程序员所见到的计算机系统的属性概念性的结构与功能特性指令系统数据类型寻址技术机理如何设计硬件与软件之间的接口有无乘法指令计算机组成原理实现计算机体系结构所体现的属性对程序员透明具体指令的实现如何用硬件实现所定义的接口如何实现乘法指令计算机性能指标存储器性能指标地址寄存器的位数反应存储单元的个数最多支持多少个数据存储器的位数存储字长每个存储单元的大小总容量存储单元个数存储字长存储单元个数存储字长为位为位总容量性能指标主频内数字脉冲信号振荡的频率主频时钟频率时钟周期单位赫兹执行一条指令所需要的周期数不同指令不同甚至相同的指令也可能出现变化执行一条指令的耗时时钟周期毫秒微秒纳秒皮秒飞秒阿秒仄秒幺秒毫秒微秒纳秒皮秒飞秒阿秒仄秒幺秒毫秒微秒纳秒皮秒飞秒阿秒仄秒幺秒某主频为某程序包含条指令平均来看指令的该程序在该上执行需要多久执行时间整个程序的耗时时钟周期数主频指令条数主频每秒执行多少指令主频平均每秒执行多少次浮点运算此处工为数量单位千百万十亿万亿系统整体性能指标数据通路带宽数据总线一次所能并行传送信息的位数各硬件部件通过数据总线传输数据吞吐量指系统在单位时间内处理请求的数量它取决于信息能多快地输入内存能多快地取指令数据能多快地从内存取出或存入以及所得结果能多快地从内存送给一台外部设备这些步骤中的每一步都关系到主存因此系统吞吐量主要取决于主存的存取周期响应时向指从用户向计算机发送一个请求到系统对该请求做出响应并获得它所需要的结果的等待时间通常包括时间运行一个程序所花费的时间与等待时间用于磁盘访问存储器访问操作操作系统开销等时间基准程序是用来测量计算机处理速度的一种实用程序以便于被测量的计算机性能可以与运行相同程序的其它计算机性能进行比较问主频高的一定比主频低的快吗不一定如两个的主频为平均的主频平均问若两个的平均相同那么一定更快吗也不一定还要看指令系统如不支持乘法指令只能用多次加法实现乘法而支持乘法指令问基准程序执行得越快说明机器性能越好吗基准程序中的语句存在频度差异运行结果也不能完全说明问题第二章数据的表示和运算进位计数制古印度人发明了阿拉伯数字反应了符号位的权重基数每个数码位所用到的不同符号的个数进制的基数为二进制八进制十进制十六进制计算机一般使用二进制来表示可使用两个稳定状态的物理器件表示正好对应逻辑值假真方便实现逻辑运算可很方便地使用逻辑门电路实现算术运算任意进制转换成进制每一位的数据乘上该位的位权二进制八进制十六进制二进制八进制十六进制二进制八进制如二进制八进制位一组每组转换成对应的八进制符号二进制八进制二进制十六进制如二进制十六进制位一组每组转换成对应的十六进制符号二进制十六进制八进制二进制如二进制位一组每组转换成对应的八进制符号八进制二进制十六进制二进制如二进制位一组每组转换成对应的十六进制符号十六进制二进制十进制任意进制基本方法整数除基取余法小数乘基取整法进阶方法拼凑法真值和机器数真值机器数真值符合人类习惯的数字机器数数字实际存到机器里的形式正负号需要被数字化码用二进制编码的十进制码二进制方便计算机处理十进制符合人类习惯转换麻烦快速转换一一对应码的映射关系余三码余三码码码改变权值定义字符与字符串英文字符在计算机内的表示码数字字母符号一共个字符位二进制编码即可例题例已知的码值为字符存放在某存储单元中求中存放的内容首先明确中存放的是的码二进制形式再由的码值推出的码值思路是第个字母是第个字母则的码值对应二进制为故中存放的内容为思路的码值写成二进制为是第个字母是第个字母故对应中存放内容为例已知的码值为字符存放在存储单元中字符存放在存储单元中求中存放的内容中内容为中内容为中文字符在计算机内的表示汉字各种符号共个区位码直观方便人类理解个区每区个位置啊表明啊这个汉字在区位码中的第个区第一个位置国标码防止信息交换的时候与控制通讯字符冲突将区位码转换成进制都加上防止信息交换的时候与控制通讯字符冲突因为码前个为控制通讯字符机内码在国标码之上加上汉字的输入通过输入法软件将我们输入编码转换成国标码然后通过系统或者应用软件将国标码转换成汉字内码汉字的输出将汉字内码转换成字形码或者将汉字内码转换成国标码然后再有国标码转换成汉字形码字符串的存储英文字符某计算机按字节编址从地址为的单元开始存储字符串各字符的编码很多语言中作为字符串结尾标志中文字符某计算机按字节编址从地址为的单元开始存储字符串啊各字符的编码啊机内码很多语言中作为字符串结尾标志在所有计算机中多字节数据都被存放在连续的字节序列中根据数据中各字节的排列顺序不同可能有大端模式小端模式数据校验码校验原理在两台计算机发送文件的时候可能由于某种环境影响导致某个二进制为发生突变码距为信息编码如果我们再发送的时候第一位二进制码发生突变变成了那么接收方接收到的字符是这样就会出现错误码距为信息编码如果我们在原先的基础上加上一个字符那么我们在传送的时候不管哪一位发生突变我们都能发现这个数据错误了由若干位代码组成的一个字叫码字将两个码字逐位进行对比具有不同的位的个数称为两个码字间的距离一种编码方案可能有若干个合法码字各合法码字间的最小距离称为码距当时无检错能力当时有检错能力当时若设计合理可能具有检错纠错能力奇偶校验码奇校验码整个校验码有效信息位和校验位中的个数为奇数偶校验码整个校验码有效信息位和校验位中的个数为偶数给出两个编码和的奇校验码和偶校验码设最高位为校验位余位是信息位则对应的奇偶校验码为奇校验偶校验偶校验的硬件实现各信息进行异或模加运算得到的结果即为偶校验位异或求偶校验位进行偶校验所有位进行异或若结果为说明出错错误海明校验码理查德卫斯里汉明图灵奖设计思路将信息位分组进行偶校验多个校验位多个校验位标注出错位置多个校验位能携带多种状态信息对错错在哪校验位数的确定设我们有个信息位个检验位一共有种状态信息位校验位其中每一位都可能出错海明码的求解步骤信息位确定海明码的位数设信息位共位校验位共位对应的海明码为确定校验位的分布校验位放在海明位号为的位置上信息位按顺序放到其余位置求校验位的值先把数据位的下表改成二进制三个分组分别进行偶校验代表进制中的第一位代表进制中的第二位代表进制中的第三位纠错校验方程接收到接收到出错我们从表中得到这个位置出错全校验位海明码的检错纠错能力纠错能力位检错能力一位校验方程如果和同时出错的话最后得到的结果为但是指向的数据是但是这时候并不是出错了无法区分是一位错还是两位错需加上全校验位对整体进行偶校验全全前几位进行偶校验的结果且全体偶校验成功无错误且全体偶校验失败有位错纠正即可且全体偶校验成功有位错需重传循环冗余校验码循环冗余校验码的思想数据发送接受方约定一个除数个信息位个校验位作为被除数添加校验位后需保证除法的余数为收到数据后进行除法检查余数是否为若余数非说明出错则进行重传或纠错设生成多项式为信息码为求对应的码确定以及生成多项式对应的二进制码信息码的长度生成多项式最高次幂校验码位数生成多项式对应二进制码移位信息码左移位低位补零结果相除对移位后的信息码用生成多项式就行模除法产生余数模除模减对应的码检查和纠错发送记为接收用进行模除余数为代表没有出错接收用进行模除余数为代表出错为什么不代表出错接受余数出错位从上面这个表得出如果出现的话可能是第二位也可能是第位但是上面这种情况并不代表循环冗余校验码没有纠错的能力上面这种情况的出现只是代表了信息位太长所以循环冗余校验码失去了它校验的能力如果我们的信息位变成了生成多项式是使用对进行模二除法得出余数为码为接受余数出错位上面这种情况下循环冗余校验码就可以实现纠错功能个信息位个校验位若生成多项式选择得当且则码可以纠正位错误理论上可以证明循环冗余校验码的检错能力有以下特点可检测出所有奇数个错误可检测出所有双比特的错误可检测出所有小于等于校验位长度的连续错误循环冗余校验码为什么循环接受余数出错位使用上一位余数对生成多项式进行模二除法前提是需要将余数扩充为和生乘多项式位数一样的数据发现最后结果就是下一位余数这就是循环冗余定点数的表示无符号数的表示无符号数整个机器字长的全部二进制位均为数值位没有符号位相当于数的绝对值位的无符号数表示范围为通常只有无符号整数而没有无符号小数原码原码用尾数表示真值的绝对值符号位对应正负若机器字长位原码整数的表示范围关于原点对称真值有和两种形式若机械字长位原码小数的表示范围关于原点对称真值有和两种形式反码反码若符号位为则反码与原码相同若符号位为则数值位全部取反若机器字长位反码整数的表示范围关于原点对称真值有和两种形式若机器字长位反码小数的表示范围关于原点对称真值有和两种形式反码只是原码转变为补码的一个中间状态实际中并没什么卵用补码补码正数的补码原码负数的补码反码末位要考虑进位原原原原原原反反反反反反补补补补补补注意补码的真值只有一种表示形式定点整数补码补补补表示若机器字长位补码整数的表示范围比原码多表示一个定点小数补码补补补表示若机器字长位补码小数的表示范围比原码多表示一个移码移码补码的基础上将符号位取反注意移码只能用于表示整数技巧由补快速求补的方法符号位数值位全部取反末位定点数的运算计算机中采用位符号位判断时为了节省时间通常将符号位产生的进位与最高有效位产生的进位异或结果作为判断结果为则不溢出为则溢出移位运算算数移位原码算数位移反码算数位移补码算数位移原码的算数移位符号位保持不变仅对数值位进行移位右移高位补低位舍弃若舍弃的位则相当于若舍弃的位则会丢失精度左移低位补高位舍弃若舍弃的位则相当于若舍弃的位则会出现严重误差反码的算数移位正数的反码与原码相同因此对正数反码的移位运算也和原码相同右移高位补低位舍弃算数位不变左移低位补高位舍弃算数位不变负数的反码数值位与原码相反因此负数反码的移位运算规则如下右移高位补低位舍弃算数位不变左移低位补高位舍弃算数位不变补码的算数移位正数的补码与原码相同因此对正数补码的移位运算也和原码相同右移高位补低位舍弃左移低位补高位舍弃负数补码反码末位导致反码最右边几个连续的都因进位而变为直到进位碰到第一个为止规律负数补码中最右边的及其右边同原码最右边的的左边同反码负数补码的算数移位规则如下右移同反码高位补低位舍弃左移同原码低位补高位舍弃最后结果为不左移左移一位左移两位逻辑移位逻辑右移高位补低位舍弃逻辑左移低位补高位舍弃可以把逻辑移位看作是对无符号数的算数移位循环移位左移的时候将最高位的数据放到最低位右移的时候将最低位的数据放到最高位加法运算原码的加减法原码的加法运算正正绝对值做加法结果为负可能会溢出负负负负绝对值做加法结果为负可能会溢出负负正负绝对值大的减绝对值小的符号同绝对值大的数负正绝对值大的减绝对值小的符号同绝对值大的数原码的减法运算减数符号取反转变为加法正负正正负正负负正正正负负正负负补码的加减法设机器字长为位含位符号位求补补补和补补补原码补码负数补原数值位取反负数补码中最右边的及其右边同原码最右边的的左边同反码补补补补补补补补补原码真值补补补补补补补补补真值补补补补补补连同符号位一起取反加对于补码来说无论加法还是减法最后都会转变成加法由加法器实现运算符号位也参与运算溢出判断只有正数正数才会上溢正正负只有负数负数才会下溢负负正补补补补补补方法一采用一位符号位设的符号为的符号为运算结果的符号为则溢出逻辑表达式为其中各个部分内部采用与运算部分之间采用或运算若表示无溢出若表示有溢出逻辑表达式与如表示与与仅当均为时为中有一个或多个为则为或如表示或或仅当均为时为中有一个或多个为则为方法二采用一位符号位根据数据位进位情况判断溢出符号位的进位最高数值位的进位表示上溢表示下溢即与不同时有溢出处理不同的逻辑符号异或溢出逻辑判断表达式为若表示无溢出表示有溢出方法三双符号位正数符号为负数符号为补补补补补补表示上溢表示下溢双符号位补码又称模补码大于等于的都舍去单符号位补码又称模补码大于等于的都舍去符号扩展正整数原反补码的表示都一样正小数原反补码的表示都一样负整数负小数原码反码补码定点整数的符号扩展在原符号位和数值位中间添加新位正数都添负数原码添负数反补码添定点小数的符号扩展在原符号位和数值位后面添加新位正数都添负数原补码添负数反码添乘法运算原码的乘法运算考虑用机器实现实际数字有正负符号位如何处理乘积的位数扩大一倍如何处理个位积都要保存下来最后统一相加加减乘除被加数和被减数差乘积高位被除数余数乘数乘积低位商加数减数被乘数除数原码一位乘法其中乘法中存放的是乘积的高位乘积乘积的低位被乘数符号位单独处理符号位两位数据异或得到的数值位取绝对值进行乘法运算设机器字长为位含位符号位原原采用原码一位乘法求在进行运算的时候先让清零然后判断中的低位如果是的话就让寄存区中的数据和相加运算结果放到中然后让和中的所有数据进行逻辑右移如果是的话就让中的数据加上零最后一个是符号位不用参与运算补码的乘法运算补码一位乘法进行轮加法移位最后再多来一次加法每次加法可能补补每次移位是补码的算数右移符号位参与运算设机器字长为位含位符号位采用算法求补补补和中存放的是被乘数和乘数的带符号位的补码轮加法算数右移加法规则如下辅助位中最低位时补辅助位中最低位时辅助位中最低位时补补码的算数右移符号位不动数值位右移正数右移补除法运算除法运算思想加减乘除被加数和被减数差乘积高位被除数余数乘数乘积低位商加数减数被乘数除数除法操作被除数余数商除数恢复余数法恢复余数法机械算法计算机默认商如果算出来的余数为负数的话我们需要恢复原来的数据然后在进行商零所以称为恢复余数法恢复余数法手算法在进行除法的时候需要先算出来除数的绝对值被除数的绝对值被除数绝对值的补码被除数绝对值的负数的补码恢复余数法当余数为负时商并除数再左移再除数加减交替法不恢复余数法加减交替法当余数为负时商并左移再除数定点小数的除法前提被除数一定要小于除数因为如果被除数大于除数的话最后的结果就会是大于的数据定点小数无法表示大于一的数据补码的除法运算符号位参与运算设机器字长为位含位符号位采用补码加减交替除法求补补补补码除法符号位参与运算被除数余数除数采用双符号位第一步的时候被除数和除数同号则被除数减去除数异号则被除数加上除数余数和除数同号商余数左移一位减去除数余数和除数异号商余数左移一位加上除数重复次数据强制转换数据的存储和排列大小端模式大端模式低地址放高位数据高地址放低位数据开始的时候放大数据所以称为大端小端模式低地址放低位数据高地址放高位数据开始的时候放小数据所以称为小端边界对齐现代计算机通常是按字节编址即每个字节对应个地址通常也支持按字按半字按字节寻址假设存储字长为位则个字半字每次访存只能读写个字边界对齐方式边界不对齐方式我们在语言中定义一个结构体的时候我们定一个个型数据一个型变量一个型变量如果不使用边界对齐方式的话先存放三个型数组然后在存放半个型变量第二行第一个存放半个行变量不浪费空间但是读取的时候需要读取两次如果采用边界对齐的话可以浪费空间但是可以节约读取速度浮点数的表示定点数的局限性如果我们想要表示这个数据的话我们是用一个型定点整数表示即可如果我们想要表示这个数据的话我们是用一个型定点整数表示但是如果我们想要表示一个长度为十位的数据的话那么也无法表示这个数据如果超出整形表示范围的话我们就需要使用浮点数来表示浮点数的表示其中是阶码是尾数阶码常用补码或移码表示的定点整数尾数常用原码或补码表示的定点小数阶码反应浮点数的表示范围以及小数点的实际位置尾数数值部分的位数反应浮点数的精度浮点数尾数规格化规格化浮点数规定尾数的最高数值位必须是一个有效值左规当浮点数运算的结果为非规格化时要进行规格化处理将尾数算数左移一位阶码减就像科学计数法中我们需要保证最高位的数据位有意义不能够是所以如果位数的最高位非符号位为零的话需要左规右规当浮点数运算的结果尾数出现溢出双符号位为或时将尾数算数右移一位阶码加规格化特点用原码表示的尾数进往规格化正数为的形式其最大值表示为最小值表示为尾数的表示范围为负数为的形式其最大值表示为最小值表示为尾数的表示范围为规格化的原码尾数最高数值一定是用补码表示的尾数进行规格化正数为的形式其最大值表示为最小值表示为尾数的表示范围为负数为的形式其最大值表示为最小值表示为尾数的表示范围为规格化的补码尾数符号位与最高数值位一定相反浮点数表示标准移码的表示一般情况下是让补码数值为取反得到移码但是真实的移码运算规则是真实值偏置值正常情况下偏置值为这种情况下偏置值为的单精度浮点数的值时多少数符是个负数尾数部分隐含最高位尾数真值移码若看作无符号数单精度浮点型偏移量阶码真值移码偏移量浮点数真值单精度浮点型能表示的最小绝对值最大绝对值是多少最小绝对值尾数全为阶码真值最小对应移码机器数此时整体的真值为为什么阶码最小值是因为表示全零和全需要用来表示特殊的作用最大绝对值尾数全为阶码真值最大对应移码机器数此时整体的真值为浮点数表示范围单精度浮点型能表示的最小绝对值最大绝对值是多少最小绝对值尾数全为阶码真值最小对应移码机器数此时整体的真值为若要表示的数绝对值还要更小怎么办这时候就需要应用我们之前所提到的阶码全零或者全的情况了如果把阶码看成无符号小数的话那么他所表示的范围为抛去阶码全零和全一这两种情况就是去掉和那么只有当阶码表示范围在的时候才正常当阶码全为尾数不全为时表示非规格化小数阶码真值设置为固定设置为定值隐含位变为这样就可以表示当阶码全为尾数全为时表示真值当阶码全为表示真值当阶码全为尾数全为时表示无穷大当阶码全为尾数不全为时表示非数值由浮点数确定真值阶码不是全也不是全根据某浮点数确定数符阶码尾数的分布确定尾数注意补充最高的隐含位确定阶码的真值移码偏置值可将移码看作无符号数用无符号数的值减去偏置值偏置值偏置值偏置值浮点数的运算加减运算对阶小阶向大阶对齐方便处理位数尾数加减规格化如果尾数加减出现类似时需要左规如果尾数加减出现类似时需要右规舍入若规定只能保留位有效尾数多余的直接砍掉若砍掉部分非则入也可以采用四舍五入的原则当舍弃位时高位入溢出若规定阶码不能超过两位则运算后阶码超出范围则溢出只有阶码的溢出才是真正的溢出尾数溢出的话可以采用规格化来处理舍入法类似于十进制数运算中的四舍五入法即在尾数右移时被移去的最高数值位为则舍去被移去的最高数值位为则在尾数的末位加这样做可能会使尾数又溢出此时需再做一次右规恒置法尾数右移时不论丢掉的最高数值位是还是都使右移后的尾数末位恒置这种方法同样有使尾数变大和变小的两种可能强制类型转换范围精度从小到大转换过程没有损失可能损失精度可能溢出及损失精度表示整数范围有效数字位表示整数及小数范围有效数字位电路的基本原理加法器的设计算数逻辑单元算术运算加减乘除等逻辑运算与或非异或等辅助功能移位求补等普通的的模型是输入信号是由产生的控制信号是输出结果四输入模型最基本的逻辑运算与或非非我们可以看出与和或操作都是两个数据进行操作非操作是一个数据优先级与或类比乘法加法先算与再算或分配律结合律结合律本质上逻辑表达式是对电路的数学化描述简化逻辑表达式就是在简化电路就是在省钱与非或非异或同或用门电路实现异或操作一位全加器串行加法器串行加法器只有一个全加器数据逐位串行送入加法器中进行运算进位触发器用来寄存进位信号以便参与下一次运算如果操作数长位加法就要分次进行每次产生一位和并且串行逐位地送回寄存器并行加法器串行进位的并行加法器把个全加器串接起来就可进行两个位数的相加串行进位又称为行波进位每一级进位直接依赖于前一级的进位即进位信号是逐级形成的加法器的改进前面得出串行进位的并行加法器中计算速度取决于进位产生和传递的速度如何更快的产生进位总归能够展开到记作结论第位向更高位的进位可根据被加数加数的第位再结合即可确定并行加法器的优化我们通过观察发现第一步算出来的和和和我们在计算的时候需要用到所以我们在第一步计算完和的时候需要链接一个线路将和传递到更高位的计算模块中去同理第二步算出来的和和和我们在计算的时候需要用到所以我们在第二步计算完和的时候需要链接一个线路将和传递到更高位的计算模块中去这时候每一步的计算复杂度就会小很多不用等待下一步运算结果出来之后再开始计算并行进位的并行加法器各级进位信号同时形成又称为先行进位同时进位但是我们发现随着我们的迭代公式增加我们的方程复杂度越来越大这时候我们需要进行截断处理我们以四个方程为一组来进行计算由个和一些新的线路运算逻辑组成我们称为进位传递函数为进位产生函数如果和和和都为的话那么一定会向上产生进位所以称为进位产生函数和和和共同与操作来确定是否进位因为是从低位过来的所以决定是否向高位出传递单级先行进位方式又称为组内并行组间串行进位方式组内并行每一个加法器内部都是安装上面优化的方法来进行并行操作的组间串行每一个组之间有一个先后顺序来依此进行组内进位信号记称为组进位产生函数称为组进位传递函数核心特性根据本组的个输入位即可确定本组的和组间进位信号通过观察组内进位和组间进位信号我们可以发现这两个的方式形式都类似如果我们改变一下输入的话我们就可以得出再改进多级先进进位方式获得组内并行组间并行进位方式优化原理和相似初始优化第三章存储系统存储器的基本概念存储器的层次结构注有的教材把安装在电脑内部的磁盘称为辅存把盘光盘等称为外存也有的教材把磁盘盘光盘等统称为辅存或外存辅存中的数据要调用主存后才能够被访问主存辅存实现虚拟存储系统解决了主存容量不够的问题主存解决了主存与速度不匹配的问题存储器的分类从不同角度进行分类层次分类高速缓存主存储器主存内存辅助存储器其中高速缓存和主存储器都是可以直接被读写的辅助存储器中的数据之后调用到主存中才能够被访问存储介质半导体存储器主存以半导体部件存储信息磁表面存储器磁带磁盘以磁性材料存储信息光存储器以光介质存储信息存取方式随机存取存储器读写任何一个存储单元所需时间都相同与存储单元所在的物理位置无关顺序存取存储器读写一个存储单元所需时间取决于存储单元所在的物理位置直接存取存储器既有随机存取特性也有顺序存取特性先直接选取信息所在区域然后按顺序方式存取串行访问存储器读写某个存储单元所需时间与存储单元的物理位置有关相联存储器即可以按内容访问的存储器可以按照内容检索到存储位置进行读快表就是一种相联存储器信息的可更改性读写存储器即可读也可写如磁盘内存只读存储器只能读不能写如实体音乐专辑通常采用实体电影采用蓝光光碟通常写在中信息的可保存性断电后存储信息消失的存储器易失性存储器主存断电后存储信息依然保持的存储器非易失性存储器磁盘光盘信息读出后原存储信息被破坏破坏性读出如芯片读出数据后要进行重写信息读出后原存储信息不被破坏非破坏性读出如芯片磁盘光盘存储器的性能指标存储容量存储字数字长如位位数反映存储字长单位成本每位价格总成本总容量存储速度数据传输率数据的宽度存储周期存取时间存取时间是指从启动一次存储器操作到完成该操作所经历的时间分为读出时间和写入时间存取周期存取周期又称为读写周期或访问周期它是指存储器进行一次完整的读写操作所需的全部时间即连续两次独立地访问存储器操作读或写操作之间所需的最小时间间隔主存带宽主存带宽又称数据传输率表示每秒从主存进出信息的最大数量单位为字秒字节秒或位秒主存储器的基本组成半导体元件的原理为什么称作半导体这种元器件在特定情况下可以导通存储元的基本图示管可理解为一种电控开关输入电压达到某个阈值时管就可以接通是一个半导体元件当电容中有电的时候表明这个电容存放的数据是当电容中没有电的时候表明这个电容存放的数据是因为电容的一端是接地的所以就看另一端的电容板上电压是高电压还是低电压上述存储元存数据和写数据的方式读给管一个高电压让这个电路接通如果电容中有电的话电子就会顺着导线向外流动外部感受到高电压表明这时候从中读取了如果电容中没有电的话外部的会感受到低电压那么表明这时候从中读取了数据写给管一个高电压让这个电路接通如果想要写入数据的话我们就给外部一个低电压那么电容中还是不存电如果想要写入数据的话我们给外部一个高电压那么电容中会存电存储芯片的基本原理如果先要获取中存放地址的数据需要经过以下步骤先通过译码器翻译成机械码例如图中中的地址为表明现在要读取第个单元的数据这时候我们通过译码器将地址信息为号的字选线设置为高电平这时候第个单元的数据开始进行读取将读取的数据放到数据总线上去改进添加控制电路因为地址总线放入中的数据是以高低电压为信号的所以我们需要在其电压稳定之后再讲中的数据放到译码器中我们在中电流稳定的时候才能将数据放到数据总线中外接线片选线和上面有一个横线表明低电平有效读写控制线两根读写线允许写允许读一根读写线低电平写高电平读移码驱动保证译码器输出的电信号稳定其实就是把电信号放大的一个部件片选线来控制那个存储芯片有效因为一个存储器中有很多个存储芯片每一个存储芯片都有一定数量的金属引脚数量每一个地址线对应着一个金属引脚每一个数据线对应着一个金属引脚片选线对应着一个金属引脚读写控制线至少对应着两个引脚位地址个存储单元总容量存储单元个数存储字长位的存储芯片常见的描述位即位即位即如何实现不同的寻址方式总容量为地址线根按字节寻址个单元每个单元按字寻址个单元每个单元按半字寻址个单元每个单元按双字寻址个单元每个单元和随机存储器即动态用于主存即静态用于高频考点和的对比栅极电容读出管接通电容放电数据线上产生电流电容放电信息被破坏是破坏性读出读出后应有重写操作也称再生读写速度更慢读出管接通后数据线上无电流每个存储元制造成本更低集成度高功耗低之内必须刷新一次给电容充电双稳态触犯器输出高低输出低高读出数据触发器状态保持稳定是非破坏性读出读写速度更快每个存储元制造成本更高集成度低只要不断电触发器的状态就不会改变的刷新多久需要刷新一次刷新周期一般为每次刷新多少存储单元以行地址为单位每次刷新一行存储单元为什么需要使用行列地址减少选通线的数量简单存储器行列存储器如根选通线根选通线如何刷新有硬件支持读写一行的信息之后重新写入占用一个读写周期再什么时候刷新存取周期假设内部结构排列成的形式读写周期共个周期第一种方式每次读写完都刷新一行系统的存取周期变为前时间用于正常读写后时间用于刷新某行第二种方式内集中安排时间全部刷新系统的存取周期还是有一段时间专门用于刷新无法访问存储器称为访存死区第三种方式内每行刷新次即可内需要产生次刷新请求每隔一次每内有的死时间因为中的行列地址所以我们在计算地址线地址引脚减半只读存储器芯片易失性断电后数据消失芯片非易失性断电后数据不会丢失掩模式只读存储器广家按照客户需求在芯片生产过程中直接写入信息之后任何人不可重写只能读出可靠性高灵活性差生产周期长只适合批量定制可编程只读存储器用户可用专门的写入器写入信息写一次之后就不可更改可擦除可编程只读存储器允许用户写入信息之后用某种方法擦除数据可进行多次重写用紫外线照射分钟擦除所有信息也常记为第一个是可用电擦除的方式擦除特定的字闪速存储器注盘卡就是闪存在基础上发展而来断电后也能保存信息且可进行多次快速擦除重写注意由于闪存需要先擦除在写入因此闪存的写速度要比读速度更慢固态硬盘由控制单元存储单元芯片构成与闪速存储器的核心区别在于控制单元不一样但存储介质都类似可进行多次快速擦除重写速度快功耗低价格高目前个人电脑上常用取代传统的机械硬盘计算机内的重要主板上的芯片存储了自举装入程序负责引导装入操作系统开机逻辑上主存由组成且二者常统一编址很多芯片虽然名字是但很多也可以写闪存的写速度一般比读速度更慢因为写入前要先擦除芯片是易失性的芯片是非易失性的很多也具有随机存取的特性存储器与的链接单块存储芯片与的连接解决数据总线宽度存储芯片字长使用位扩展和字扩展现代计算机结构一般主存中有多个存储芯片上面有横杆的是低电平有效上面没杠的是高电平有效如果让多个芯片之间互相连接位扩展例如上面这张图每一个芯片的地址为为位操作但是地址总线为位所以如果只有一个芯片的话无法满足一次性读取的位数这时候我们需要使用位扩展将多片一位芯片扩展为多位芯片字扩展看下面这个图片数据位都占满了但是扩展位没有全部使用这时候我们需要使用位扩展来解决这个问题解决方法一线选法使用多余的地址线来控制每一个芯片为每一个芯片都使用一个地址线所以称为线选法但是如果我们和都是的话那么芯片一和芯片二都会输出数据会导致出错解决方法二采用译码器线选法译码片选法条线个选片信号条线个选片信号电路简单电路复杂地址空间不连续地址空间连续字位同时扩展译码器这里的译码器多了一个使能信号和片选线控制信号功能类似使能信号的功能能够让地址信号稳定后才向存储器发出请求信号双口和多模块存储器存在的问题存储周期可以连续读写的最短时间间隔芯片的恢复时间比较长有可能是存取时间的几倍的恢复时间较短如存取时间为存取周期为问题多核都要访存怎么办的读写速度主存快很多主存恢复时间太长怎么办提升主存速度双口需要有两组完全独立的数据线地址线控制线中也要有更复杂的控制电路两个端口对同一主存操作有以下种情况两个端口同时对不同的地址单元存取数据允许操作两个端口同时对同一地址单元读出数据允许操作两个端口同时对同一地址单元写入数据禁止操作写入错误两个端口同时对同一地址单元一个写入数据另一个读出数据禁止操作读出错误解决方法置忙信号为多模块存储器高体交叉编址的多位存储器连续存储的时候按地址依此读取是一个内存读取的低位交叉编址的多位存储器连续存储的时候按地址依此读取是多个内存读取的每个存储体存取周期为存取时间为假设连续读取个存储字耗时宏观上读写个字的时间接近为什么要探讨连续访问的情况在写程序的时候如果没有特殊情况的话我们都是按照程序顺序依此进行的在实际应用的时候许多数据都是按照连续存储的例如数组应该取几个体采用流水线的方式并行存取宏观上并行微观上串行宏观上一个存储周期内体交叉存储器可以提供的数据量为单个模块的倍存取周期为存取时间为为了使流水线不间断应保证模块数存取周期为总线传输周期为为了使流水线不间断应保证模块数这时候需要需要等待这时候需要会闲置这时候得到充分的利用完美衔接特点每个模块都有相同的容量和存取速度各模块都有独立的读写控制电路地址寄存器和数据寄存器它们既能并行工作又能交叉工作单体多字存储器每个存储单元存储个字总线宽度也为个字一次并行读出个字每次只能同时取个字不能单独取其中某个字指令和数据在主存内必须是连续存放的内存条插入方法低位交叉存储器例如这个主板上的有四个内存条插口如何插入内存条实现高位交叉的多体存储器相当于单纯的扩容插入颜色不同的内存条插口形成高位交叉多体存储器如何插入内存条实现低位交叉的多体存储器俗称双通道插入颜色相同的内存条插口形成低位交叉多体存储器买内存条时可挑选相同主频相同容量的两根来组成双通道如果主频不同的话按照低频率的内存条的频率来进行读取数据频率高的那个内存条会进行降频处理如果容量不同的话多出来的容量会形成高位交叉多体存储器速度还是慢基本原理基本概念虽然我们通过双端口多块存储器提高存储器的工作速度但是优化之后的速度还是与的速度差异很大这时候我们引入主存来改善存储体系的速度程序访问的局部性原理工作原理我们在运行程序的时候分为以下几个步骤首先从辅存中读取数据到内存中这样辅存中的数据才能够被访问我们将内存中这一时间段内需要经常使用的数据放到中通过向或者内存中读取数据来进行数据处理实际上被集成在内部用实现速度快成本高局部性原理空间局部性在最近的未来要用到的信息指令和数据很可能与现在正在使用的信息在存储空间上是邻近的例如数组顺序执行的指令代码时间局部性在最近的未来要用到的信息很可能是现在正在使用的信息循环结构的指令代码基于局部性原理不难想到可以把目前访问的地址周围的部分数据放到中程序是顺序存储的数组按行存储程序是跳序存储的数组按列存储由于数组在内存中的存储方式以按行顺序存储的所以在执行程序的时候大概率会将后面一部分放到中但是由于不是按照顺序存储的所以程序运行时间大概率比慢的多性能分析设为访问一次所需时间为访问一次主存所需时间命中率欲访问的信息已在中的比率就是想要访问的数据已经放到中的概率缺失未命中率访问时间先访问若未命中在访问主存主存系统的平均访问时间为同时访问和主存若命中则立即停止访问主存假设的速度是主存的倍且的命中率为则采用后存储器性能提高多少设和主存同时被访问若命中则中断访问主存设的存取周期为则主存的存取周期为若和主存同时访问命中时访问时间为未命中时访问时间为平均访问时间为故性能为原来的倍若先访问再访问主存命中时访问时间为未命中时访问时间为平均访问时间为故性能为原来的倍有待解决的问题基于局部性原理不难想到可以把目前访问的地址周围的部分数据放到中如何界定周围将主存的存储空间分块如每为一块主存与之间以块为单位进行数据交换主存地址共位块号块内地址位位整个主存被分为块操作系统中通常将主存中的一个块也称为一个页页面页框中的块也称为行注意每次在主存中访问的数据块一定会立即被调入如何区分与主存的数据块对应关系和主存的映射方式很小主存很大如果满了怎么办替换算法修改了中的数据副本如何确保主存中数据母本的一致性写策略与主存的三种映射方式全相联映射主存块可以放在的任意位置直接映射每个主存块只能放到一个特定的位置块号主存块号总块数组相联映射块分为若干组每个主存块可放到特定分组中的任意一个位置组号主存块号分组数全相联映射假设某个计算机的主存地址空间大小为按字节编址其数据有个行即块与主存块的大小相等行长为主存的地址共位主存块号块内地址位位访问主存地址主存地址的前位对比中所有块的标记若标记匹配且有效位则命中访问块内地址为的单元若未命中或有效位则正常访问主存直接映射只能存放在固定位置假设某个计算机的主存地址空间大小为按字节编址其数据有个行行长为直接映射主存块在中的位置主存块号取余总块数缺点其他有空闲的块但是号主存块不能够使用这里标记位是位能否优化一下若总块数则主存块号末尾位直接反映它在中的位置将主存块号的其余位作为标记即可访问主存地址根据主存块号的后位确定行若主存块号的前位与标记匹配且有效位则命中访问块内地址为的单元若未命中或有效位则正常访问主存组相联映射访问主存地址根据主存块号的后位确定所属分组号若主存块号的前位与分组内的某个标记匹配且效位则命中访问块内地址为的单元替换算法替换算法只会用到全相联映射和组相联映射直接映射无需考虑替换算法随机算法随机算法一若已满则随机选择一块替换设总共有个块初始整个为空采用全相联映射依次访问主存块随机算法实现简单但完全没考虑局部性原理命中率低实际效果很不稳定先进先出算法先进先出算法一若已满则替换最先被调入的块设总共有个块初始整个为空采用全相联映射依次访问主存块先进先出算法实现简单最开始按放入之后轮流替换依然没考虑局部性原理最先被调入的块也有可能是被频繁访问的抖动现象频繁的换入换出现象刚被替换的块很快又被调入近期最少使用近期最少使用算法为每一个块设置一个计数器用于记录每个块已经有多久没被访问了当满后替换计数器最大的设总共有个块初始整个为空采用全相联映射依次访问主存块我们在做题的时候选择近期最少使用的数据的方式可以是从该列向前寻找列找出最近没有被使用的数据并将它替换块的总数则计数器只需位且装满后所有计数器的值一定不重复命中时所命中的行的计数器清零比其低的计数器加其余不变未命中且还有空闲行时新装入的行的计数器置其余非空闲行全加未命中且无空闲行时计数值最大的行的信息块被淘汰新装行的块的计数器置其余全算法基于局部性原理近期被访问过的主存块在不久的将来也很有可能被再次访问因此淘汰蹻久没被访问过的块是合理的算法的实际运行效果优秀命中率高若被频繁访问的主存块数量行的数量则有可能发生抖动如最近不经常使用最不经常使用算法为每一个块设置一个计数器用于记录每个块被访问过几次当满后替换计数器最小的设总共有个块初始整个为空采用全相联映射依次访问主存块计数器的范围很大的数这时候我们需要给计数器分配一个比较大的空间新调入的块计数器之后每被访问一次计数器需要替换时选择计数器最小的一行算法曾经被经常访问的主存块在未来不一定会用到如微信视频聊天相关的块并没有很好地遵循局部性原理因此实际运行效果不如写策略这是我们只是讨论写命中和写不命中两种情况为什么不讨论读操作因为只要是读操作就一定不会出现数据不一致的问题写命中写回法写回法当对写命中时只修改的内容而不立即写入主存只有当此块被换出时才写回主存减少了访存次数但存在数据不一致的隐患全写法全写法写直通法当对写命中时必须把数据同时写入和主存一般使用写缓冲使用写缓冲写的速度很快若写操作不频繁则效果很好若写操作很频繁可能会因为写缓冲饱和而发生阻塞写不命中写分配法写分配法当对写不命中时把主存中的块调入在中修改通常搭配写回法使用写回法当对写命中时只修改的内容而不立即写入主存只有当此块被换出的时候才写会主存非写分配法非写分配法当对写不命中时只写入主存不调入搭配全写法使用全写法写直通法当对写命中时必须把数据同时写入和主存一般使用写缓冲多级现代计算机常采用多级离越近的速度越快容量越小离越远的速度越慢容量越大各级之间常采用全写法非写分配注主存之间常采用写回法写分配法页式存储器我们在运行程序的时候有可能这个程序运行所需要的内存很大无法直接全部放进主存可能主存空间不够为了解决这个页面我们通常可以将一个程序分为大小相等的一个个页每个页面的大小和主存一个单元的大小相等把分好的页面离散的放入主存中这时候可以提高主存利用率不再需要连续的内存地址了页式存储系统一个程序进程在逻辑上被分为若干个大小相等的页面页面大小与块的大小相同每个页面可以离散地放入不同的主存块中虚地址实地址逻辑地址虚地址程序员视角看到的地址物理地址实地址实际在主存中的地址取变量至寄存器机器指令操作码地址码使用逻辑地址程序员视角整个程序共地址范围变量的逻辑地址变量的逻辑地址逻辑页号页内地址若干位位主存大小是主存的物理地址共位主存块号块内地址位位变量的物理地址变量的物理地址逻辑页号主存块号通常使用页表来记录逻辑页号到物理页号的的映射逻辑页号主存页号执行的机器指令中使用的是逻辑地址因此需要通页表将逻辑地址转为物理地址页表的作用记录了每个逻辑页面存放在哪个主存块中变量的逻辑地址变量的物理地址增加快表注意区别快表中存储的是页表项的副本中存储的是主存块的副本读取文件全部过程虚拟存储器用户所感受到的内存比实际的内存要大很多这就是虚拟存储器逻辑页号主存块号外村块号有效位访问位脏位页式虚拟存储器有效位这个页面是否已调入主存脏位这个页面是否被修改过引用位用于页面置换算法比如可以用来统计这个页面被访问过多少次物理页即主存块号磁盘地址即这个页面的数据在磁盘中的存放位置存储器的层次化结构主存辅存实现虚拟存储系统解决了主存容量不够的问题操作系统决定哪些页面调入主存一主存解决了主存与速度不匹配的问题硬件决定那些主存块调入段式虚拟存储器段式虚拟存储器按照功能模块拆分如段是自己的代码段是库函数代码段是变量页式虚拟存储器拆分成大小相等的页面段式虚拟存储器的结构段页式虚拟存储器把程序按逻辑结构分段每段再划分为固定大小的页主存空间也划分为大小相等的页程序对主存的调入调出仍以页为基本传送单位每个程序对应一个段表每段对应一个页表虚拟地址段号段内页号页内地址第四章指令系统指令格式指令的定义指令又称机器指令是指示计算机执行某种操作的命令是计算机运行的最小功能单位一台计算机的所有指令的集合构成该机的指令系统也称为指令集注一台计算机只能执行自己指令系统中的指令不能执行其他系统的指令架构架构指令格式一条指令就是机器语言的一个语句它是一组有意义的二进制代一条指令通常要包括操作码字段和地址码字段两部分一条指令可能包含个个个个个地址码根据地址码数目不同可以将指令分为零地址指令一地址指令二地址指令零地址指令不需要操作数如空操作停机关中断等指令堆栈计算机两个操作数隐含存放在栈顶和次栈顶计算结果压回栈顶一级地址指令只需要单操作数如加减取反求补等指令含义完成一条指令需要次访存取指读写需要两个操作数但其中一个操作数隐含在某个寄存器如隐含在指令含义完成一条指令需要次访存取指读注指某个主存地址类似语言指针表示所指向的地址中的内容指针所指置的内容二三地址指令常用于需要两个操作数的算术运算逻辑运算相关指令指令含义默认存回完成一条指令需要访存次取指读读写常用于需要两个操作数的算术运算逻辑运算相关指令指令含义完成一条指令需要访存次取指读读写四地址指令指令含义下一条将要执行指令的地址完成一条指令需要访存次取指读读写正常情况下取指令之后指向下一条指令四地址指令执行指令后将的值修改位所指地址地址码的位数有什么影响位地址码的直接寻址范围若指令总长度固定变则地址码数量越多每个地址块的位数越短寻址能力越差指令按指令长度分类指令字长一条指令的总长度可能会变机器字长进行一次整数运算所能处理的二进制数据的位数通常和直接相关存储字长一个存储单元中的二进制代码位数通常和位数相同半字长指令单字长指令双字长指令指令长度是机器字长的多少倍指令字长会影响取指令所需时间如机器字长存储字长则取一条双字长指令需要两次访存定长指令字结构指令系统少所有指令的长度都相等变长指令字结构指令系统中各种指令的长度不等指令按操作码的长度分类定长操作码指令系统中所有指令的操作码长度都相同位条指令控制器的译码电路设计简单但灵活性较低可变长操作码指令系统中各指令的操作码长度可变控制器的译码电路设计复杂但灵活性较高指令按操作类型分类数据传送类进行主存与之间的数据传送数据传送作用把存储器中的数据放到寄存器中作用把寄存器中的数据放到存储器中运算类算术逻辑操作算术加减乘除增减求补浮点运算十进制运算逻辑与或非异或位操作位测试位清除位求反移位操作算术移位逻辑移位循环移位带进位和不带进位程序控制类改变程序执行的顺序转移操作无条件转移条件转移结果为结果溢出结果有进位调用和返回和陷阱与陷阱指令输入输出类进行与设备之间的数据传送输入输出操作寄存器与端口之间的数据传送端口即接口中的寄存器扩展操作码指令由操作码和若干个地址码组成定长指令字结构指令系统中所有指令的长度都相等变长指令字结构指令系统中各种指令的长度不等定长操作码指令系统中所有指令的操作码长度都相同可变长操作码指令系统中各指令的操作码长度可变定长指令字结构可变长操作码扩展操作码指令格式不同地址数的指令使用不同长度的操作码扩展操作码举例指令字长为位每个地址码占位前位为基本操作码字段另有个位长的地址字段和位基本操作码若全部用于三地址指令则有条但至少须将留作扩展操作码之用即三地址指令为条留作扩展操作码之用二地址指令为条留作扩展操作码之用一地址指令为条零地址指令为条在设计扩展操伤码指令格式时必须注意以下两点不允许短码是长码的前缀即短操作码不能与长操作码的前面部分的代码相同各指令的操作码一定不能重复通常情况下对使用频率较高的指令分配较短的操作码对使用频率较低的指令分配较长的操作码从而尽可能减少指令译码和分析的时间设地址长度为上一层留出种状态下一层可扩展出种状态小结操作码指出指令中该指令应该执行什么性质的操作和具有何种功能操作码是识别指令了解指令功能与区分操作数地址内容的组成和使用方法等的关键信息例如指出是算术加运算还是减运算是程序转移还是返回操作操作码分类定长操作码在指令字的最高位部分分配固定的若干位定长表示操作码一般位操作码字段的指令系统最大能够表示条指令优定长操作码对于简化计算机硬件设计提高指令译码和识别速度很有利缺指令数量增加时会占用更多固定位留给表示操作数地址的位数受限扩展操作码不定长操作码全部指令的操作码字段的位数不固定且分散地放在指令字的不同位置上最常见的变长操作码方法是扩展操作码使操作码的长度随地址码的减少而增加不同地址数的指令可以具有不同长度的操作码从而在满足需要的前提下有效地缩短指令字长优在指令字长有限的前提下仍保持比较丰富的指令种类缺增加了指令译码和分析的难度使控制器的设计复杂化指令寻址指令寻址如何确定下一条指令的存放地址指令结构顺序寻址其中表示个指令字长实际加的值会因指令长度编址方式而不同如果主存中是按字节编值的并且一条指令的长度为比特位那么不能够让简单的加来获取下一条指令存放的地址这时候需要让才能获取下一条指令的地址如果是采用变长指令结构的话操作方式又不一样指令寻址下一条欲执行指令的地址始终由程序计数器给出该系统采用定长指令字结构指令字长存储字长主存按字编址指令寻址方式该系统采用定长指令字结构指令字长存储字长主存按字节编址指令寻址方式该系统采用变长指令字结构指令字长存储字长主存按字编址读入一个字根据操作码判断这条指令的总字节数修改的值根据指令的类型可能还要进行多次访存每次读入一个字跳跃寻址跳跃寻址由转移指令指出该系统采用定长指令字结构指令字长存储字长主存按字编址无条件转移把中的内容改成当执行的时候都是顺序寻址直接让指向下一个位置的指令即可在执行语句的时候会执行跳转让跳转到的位置数据寻址数据寻址确定本条指令的地址码指明的真实地址接下来会涉及到隐含寻址立即寻址直接寻址间接寻址寄存器寻址寄存器间接寻址相对寻址基址寻址变址寻址堆栈寻址中寻址方式所以我们使用位数据来表示寻址特征求出操作数的真实地址称为有效地址二地址指令直接寻址直接寻址指令字中的形式地址就是操作数的真实地址即一条指令的执行取指令访存次执行指令访存次暂不考虑存结果共访存次优点简单指令执行阶段仅访问一次主存不需专门计算操作数的地址缺点的位数决定了该指令操作数的寻址范围操作数的地址不易修改范围小不易修改间接寻址间接寻址指令的地址字段给出的形式地址不是操作数的真正地址而是操作数有效地址所在的存储单元的地址也就是操作数地址的地址即优点可扩大寻址范围有效地址的位数大于形式地址的位数实际寻址大小是的大小便于编制程序用间接寻址可以方便地完成子程序返回缺点指令在执行阶段要多次访存一次间址需两次访存多次寻址需根据存储字的最高位确定几次访存寄存器寻址寄存器寻址在指令字中直接给出操作数所在的寄存器编号即其操作数在由所指的寄存器内一条指令的执行取指令访存次执行指令访存次暂不考虑存结果共访存次优点指令在执行阶段不访问主存只访问寄存器指令字短且执行速度快支持向量矩阵运算缺点寄存器价格昂贵计算机中寄存器个数有限寄存器间接寻址寄存器间接寻址寄存器中给出的不是一个操作数而是操作数所在主存单元的地址即一条指令的执行取指令访存次执行指令访存次暂不考虑存结果共访存次特点与一般间接寻址相比速度更快但指令的执行阶段需要访问主存因为操作数在主存中隐含寻址隐含寻址不是明显地给出操作数的地址而是在指令中隐含着操作数的地址优点有利于缩短指令字长缺点需增加存储操作数或隐含地址的硬件立即寻址立即寻址形式地址就是操作数本身又称为立即数一般采用补码形式表示立即寻址特征一条指令的执行取指令访存次执行指令访存次暂不考虑存结果共访存次优点指令执行阶段不访问主存指令执行时间最短缺点的位数限制了立即数的范围如的位数为且立即数采用补码时可表示的数据范围为偏移寻址这三种方式区别在于偏移的起点不一样基址寻址以程序的起始存放地址作为起点变址寻址程序员自己决定从哪里作为起点相对寻址以程序计数器所指地址作为起点基址寻址基址寻址将中基址寄存器的内容加指令格式中的形式地址而形成操作数的有效地址即优点便于程序浮动方便实现多道程序并发运行一一一一拓展程序运行前将的值修改为该程序的起始地址存在操作系统中专用寄存器通用寄存器注基址寄存器是面向操作系统的其内容由操作系统或管理程序确定在程序执行过程中基址寄存器的内容不变作为基地址形式地址可变作为偏移量当采用通用寄存器作为基址寄存器时可由用户决定哪个寄存器作为基址寄存器但其内容仍由操作系统确定优点可扩大寻址范围基址寄存器的位数大于形式地址的位数用户不必考虑自己的程序存于主存的哪一空间区域故有利于多道程序设计以及可用于编制浮动程序整个程序在内存里边的浮动变址寻址变址寻址有效地址等于指令字中的形式地址与变址寄存器的内容相加之和即其中可为变址寄存器专用也可用通用寄存器作为变址寄存器注变址寄存器是面向用户的在程序执行过程中变址寄存器的内容可由用户改变作为偏移量形式地址不变作为基地址相对寻址相对寻址把程序计数器的内容加上指令格式中的形式地址而形成操作数的有效地址即其中是相对于所指地址的位移量可正可负补码表示是相对下一条指令地址的偏移量没有采用相对寻址的时候如果我们想要移动一下改代码的位置的话这时候如果在采用上面的方式的话则会出现错误在执行到的时候程序会跳转到主存地址为的位置这显然不是我们想要的相对寻址其中是相对于所指地址的位移量可正可负补码表示优点这段代码在程序内浮动时不用更改跳转指令的地址码但是这有一个问题我们的基地址一直是解决方发加法指令的地址码可采用分段方式解决即程序段数据段分开在每一段的地址都相对不变优点操作数的地址不是固定的它随着值的变化而变化并且与指令地址之间总是相差一个固定值因此便于程序浮动一段代码在程序内部的浮动相对寻址广泛应用于转移指令硬件视角通过指令比较和如实质上是用相减的结果信息会记录在程序状态字寄存器中根据的某几个标志位进行条件判断来决定是否转移中有几个比特位记录上次运算的结果进位借位标志最高位有进位借位时零标志运算结果为则否则符号标志运算结果为负否则为溢出标志运算结果有溢出否则为堆栈寻址堆栈寻址操作数存放在堆栈中隐含使用堆栈指针作为操作数地址堆栈是存储器或专用寄存器组中一块特定的按后进先出原则管理的存储区该存储区中被读写单元的地址是用一个特定的寄存器给出的该寄存器称为堆栈指针和设计思路一条指令完成一个复杂的基本功能代表架构主要用于笔记本台式机等语言中库函数设计思路一条指令完成一个基本动作多条指令组合完成一个复杂的基本功能代表架构主要用于手机平板等单纯语言设计一套能实现整数矩阵加减乘运算的指令集的思路除了提供整数的加减乘指令除之外还提供矩阵的加法指令矩阵的减法指令矩阵的乘法指令一条指令可以由一个专门的电路完成有的复杂指令用纯硬件实现很困难采用存储程序的设计思想由一个比较通用的电路配合存储部件完成一条指令的思路只提供整数的加减乘指令一条指令一个电路电路设相对简单功耗更低并行流水线第五章中央处理器的功能和基本结构的功能指令控制完成取指令分析指令和执行指令的操作即程序的顺序控制操作控制一条指令的功能往往是由若干操作信号的组合来实现的管理并产生由内存取出的每条指令的操作信号把各种操作信号送往相应的部件从而控制这些部件按指令的要求进行动作时间控制对各种操作加以时间上的控制时间控制要为每条指令按时间顺序提供应有的控制信号数据加工对数据进行算术和逻辑运算中断处理对计算机运行过程中出现的异常情况和特殊请求进行处理运算器和控制器的基本功能运算器控制器运算器对数据进行加工控制器协调并控制计算机各部件执行程序的指令序列基本功能包括取指令分析指令执行指令取指令自动形成指令地址自动发出取指令的命令分析指令操作码译码分析本条指令要完成什么操作产生操作数的有效地址执行指令根据分析指令得到的操作命令和操作数地址形成操作信号控制序列控制运算器存储器以及设备完成相应的操作中断处理管理总线及输入输出处理异常情况如掉电和特殊请求如打印机请求打印一行字符运算器的基本结构专用数据通路方式专用数据通路方式根据指令执行过程中的数据和地址的流动方向安排连接线路如果直接用导线连接相当于多个寄存器同时并且一直向传输数据解决方法使用多路选择器根据控制信号选择一路输出解决方法使用三态门可以控制每一路是否输出如为时中的数据输出到端为时中的数据无法输出到端解决方法解决方法其中是通用寄存器例如有些计算机中使用的寄存器如等内部单总线方式所需要的元件算术逻辑单元主要功能是进行算术逻辑运算通用寄存器组如等用于存放操作数包括源操作数目的操作数及中间结果和各种地址信息等是堆栈指针用于指示栈顶的地址暂存寄存器用于暂存从主存读来的数据这个数据不能存放在通用寄存器中否则会破坏其原有内容如两个操作数分别来自主存和最后结果存回那么从主存中取来的操作数直接放入暂存器就不会破坏运算前的内容累加寄存器它是一个通用寄存器用于暂时存放运算的结果信息用于实现加法运算程序状态字寄存器保留由算术逻辑运算指令或测试指令的结果而建立的各种状态信息如溢出标志符号标志零标志进位标志等中的这些位参与并决定微操作的形成移位器对运算结果进行移位运算计数器控制乘除运算的操作步数内部单总线方式将所有寄存器的输入端和输出端都连接到一条公共的通路上结构简单容易实现但数据传输存在较多冲突的现象性能较低例如上面这个图如果我们想要将和中的数据放到中如果他们两个寄存器同时向数据总线传输数据的话的两端可能会接收到冲突的数据解决方法添加一个暂存寄存器可以吧先输入的数据先放到暂存寄存器中等下一个数据过来之后在一起运算我们还可以给输出端加一个寄存器当运算结果稳定之后再将结果送到数据总线中去控制器的基本结构程序计数器用于指出下一条指令在主存中的存放地址就是根据的内容去主存中取指令的因程序中指令通常是顺序执行的所以有自增功能指令寄存器用于保存当前正在执行的那条指令指令译码器仅对操作码字段进行译码向控制器提供特定的操作信号微操作信号发生器根据的内容指令的内容状态信息及时序信号产生控制整个计算机系统所需的各种控制信号其结构有组合逻辑型和存储逻辑型两种时序系统用于产生各种时序信号它们都是由统一时钟分频得到存储器地址寄存器用于存放所要访问的主存单元的地址存储器数据寄存器用于存放向主存写入的信息或从主存中读出的信息的基本结构指令执行过程指令周期指令周期从主存中每取出并执行一条指令所需的全部时间指令周期常常用若干机器周期来表示机器周期又叫周期一个机器周期又包含若干时钟周期也称为节拍周期或时钟周期它是操作的最基本单位每个指令周期内机器周期数可以不等每个机器周期内的节拍数也可以不等指令周期流程四个工作周期都有访存操作只是访存的目的不同取指周期是为了取指令间址周期是为了取有效地址执行周期是为了取操作数中断周期是为了保存程序断点指令周期的数据流取指周期当前指令地址送至存储器地址寄存器记做发出控制信号经控制总线传到主存这里是读信号记做将所指主存中的内容经数据总线送入记做将中的内容此时是指令送入记做发出控制信景形成下一条指令地址记做指令周期的数据流间址周期将指令的地址码送入记做或发出控制信号启动主存做读操作记做将所指主存中的内容经数据总线送入记做将有效地址送至指令的地址码字段记做指令周期的数据流执行周期执行周期的任务是根据中的指令字的操作码和操作数通过操作产生执行结果不同指令的执行周期操作不同因此没有统一的数据流向指令周期的数据流中断周期中断暂停当前任务去完成其他任务为了能够恢复当前任务需要保存断点一般使用堆栈来保存断点这里用表示栈顶地址假设指向栈顶元素进栈操作是先修改指针后存入数据控制将减修改后的地址送入记做本质上是将断点存入某个存储单元假设其地址为故可记做获取断点需要存放的堆栈寄存器的地址发出控制信号启动主存做写操作记做执行堆栈寄存器的写操作将断点内容送入记做将中的数据放到中准备写入堆栈寄存器中控制将中断服务程序的入口地址由向量地址形成部件产生送入记做向量地址记录中断数据的首地址指令执行方案一个指令周期通常要包括几个时间段执行步骤每个步骤完成指令的一部分功能几个依次执行的步骤完成这条指令的全部功能方案单指令周期对所有指令都选用相同的执行时间来完成指令之间串行执行指令周期取决于执行时间最长的指令的执行时间对于那些本来可以在更短时间内完成的指令要使用这个较长的周期来完成会降低整个系统的运行速度方案多指令周期对不同类型的指令选用不同的执行步骤来完成指令之间串行执行可选用不同个数的时钟周期来完成不同指令的执行过程需要更复杂的硬件设计方案流水线方案在每一个时钟周期启动一条指令尽量让多条指令同时运行但各自处在不同的执行步骤中指令之间并行执行数据通路的功能单总线结构内部总线是指同一部件如内部连接各寄存器及运算部件之间的总线系统总线是指同一台计算机系统的各部件如内存通道和各类接口间互相连接的总线寄存器之间数据传送比如把内容送至实现传送操作的流程及控制信号为有效内容送总线有效总线内容送主存与之间的数据传送比如从主存读取指令实现传送操作的流程及控制信号为和有效现行指令地址发读命令通过控制总线发出图中未画出有效执行算术或逻辑运算比如一条加法指令微操作序列及控制信号为和有效发读命令数据线有效和有效操作数和有效向发送加命令和有效结果单总线结构例题设有如图所示的单总线结构分析指令的指令流程和控制信号分析指令功能和指令周期功能取指周期间址周期执行周期写出各阶段的指令流程取值周期公共操作时序微操作有效控制信号先获取这条指令获取这条指令的内容将这条指令的内容放到寄存器中指令译码间址周期完成取数操作被加数在主存中加数已经放在寄存器中时序微操作有效控制信号将这条指令的间接地址放到中从内存中读取这个数据的有效地址获取这个数据的有效地址将这个地址放到寄存器中执行周期完成取数操作被加数在主存中加数已经放在寄存器中时序微操作有效控制信号将和寄存器中的数据相加向发控制信号将结果放到中准备写入到专用通路结构有效主存有效控制单元向主存发送读命令有效有效有效专用通路结构例题下图是一个简化了的与主存连接结构示意图图中省略了所有的多路选择器其中有一个累加寄存器一个状态数据寄存器和其他个寄存器主存地址寄存器主存数据寄存器程序寄存器和指令寄存器各部件及其之间的连线表示数据通路箭头表示信息传递方向要求请写出图中个寄存器的名称能自动是内容是地址送故是与微操作信号发生器相连是与主存相连的寄存器是和是则是简述图中取指令的数据通路微操作信号发生器简述数据在运算器和主存之间进行存取访问的数据通路运算器中不能够存数据所以这题是问的到主存之间的数据的存取存取的数据放到中设数据地址已放入取存简述完成指令的数据通路为主存地址的功能为简述完成指令的数据通路为主存地址的功能为简述完成指令的数据通路为主存地址的功能为硬布线控制器的设计一条指令分为四个周期取指周期间值周期执行周期中断周期发出一个微命令可完成对应微操作如微命令使得有效完成对应的微操作根据指令操作码目前的机器周期节拍信号机器状态条件即可确定现在这个节拍下应该发出哪些微命令一个节拍内可以并行完成多个相容的微操作同一个微操作可能在不同指令的不同阶段被使用不同指令的执行周期所需节拍数各不相同为了简化设计选择定长的机器周期以可能出现的最大节拍数为准通常以访存所需节拍数作为参考若实际所需节拍数较少可将微操作安排在机器周期未尾几个节拍上进行硬布线控制器根据指令操作码目前的机器周期节拍信号机器状态条件即可确定现在这个节拍下应该发出哪些微命令所有指令的取指周期节拍下一定要完成则可知微操作对应的逻辑表达式与电路微操作命令的逻辑表达式硬部件控制器的设计探讨如何得到一个微操作与之对应的电路设计步骤分析每个阶段的微操作序列取值间址执行中断四个阶段确定哪些指令在什么阶段在什么条件下会使用到的微操作选择的控制方式采用定长机器周期还是不定长机器周期每个机器周期安排几个节拍假设采用同步控制方式定长机器周期一个机器周期内安排个节拍安排微操作时序如何用个节拍完成整个机器周期内的所有微操作电路设计确定每个微操作命令的逻辑表达式并用电路实现分析每一个阶段的微操作序列取指周期所有指令都一样注是指令译码器间址周期所有指令都一样执行周期各不相同指令清零取数指令把所指内容取到无条件转移非条件转移当为负时转移安排微操作时序原则原则一微操作的先后顺序不得随意更改原则二被控对象不同的微操作尽量安排在一个节拍内完成原则三占用时间较短的微操作尽量安排在一个节拍内完成并允许有先后顺序取指周期的微操作时序存储器空闲即可在之后在之后在之后在之后从主存取数据用时较长因此必须一个时钟周期才能保证微操作的完成是内部寄存器的数据传送速度很快因此在一个时钟周期内可以紧接着完成也就是可以一次同时发出两个微命令间值周期的微操作时序电路的设计列出操作时间表写微操作命令的最简表达式有可能使用到所有情况微操作命令的逻辑表达式画出逻辑图硬布线控制器的特点指令越多设计和实现就越复杂因此一般用于精简指令集系统如果扩充一条新的指令则控制器的设计就需要大改因此扩充指令较困难由于使用纯硬件实现控制因此执行速度很快微操作控制信号由组合逻辑电路即时产生微程序控制器的基本原理硬布线控制器微操作控制信号由组合逻辑电路根据当前的指令码状态和时序包含机器周期节拍即时产生使用纯硬件来实现微程序控制器设计思路采用存储程序的思想出厂前将所有指令的微程序存入控制器存储器中什么是微程序程序由指令序列组成微程序由微指令序列组成每一种指令对应一个微程序指令是对程序执行步骤的描述微指令是对指令执行步骤的描述微命令与微操作一一对应微指令中可能包含多个微命令指令是对微指令功能的封装微程序控制器的基本结构思考所有指令的取指周期间址周期中断周期所对应的微指令序列都一样是否可以共享使用微控制器的工作原理取指周期间址周期中断周期所对应的微指令序列都一样可以一起使用故如果某指令系统中有条机器指令则中微程序段有些地方认为取值间址中断执行是一个微程序的个数至少是个因为一些早期的物联网设备的可以不提供间接寻址和中断功能微指令的设计微程序控制器的工作原理微指令的具体格式应该怎么设计如何根据微指令发出相应的微命令微命令与微操作一一对应一个微命令对应一根输出线有的微命令可以并行执行因此一条微指令可以包含多个微命令微命令的格式相容性微命令可以并行完成的微命令互斥性微命令不允许并行完成的微命令水平型微指令一条微指令能房义多个可并行的微命令基本格式优点微程序短执行速度快缺点微指令长编写微程序较麻烦垂直型微指令一条微指令只能定义一个微命令由微操作码字段规定具体功能优点微指令短简单规整便于编写微程序缺点微程序长执行速度慢工作效率低混合型微指令在垂直型的基础上增加一些不太复杂的并行操作微指令较短仍便于编写微程序也不长执行速度加快微指令的编码方式微指令的编码方式又称为微指令的控制方式它是指如何对微指令的控制字段进行编码以形成控制信号编码的目标是在保证速度的情况下尽量缩短微指令字长直接编码直接控制方式在微指令的操作控制字段中每一位代表一个微操作命令某位为表示该控制信号有效其优点简单直观执行速度快操作并行性好其缺点微指令字长过长个微命令就要求微指令的操作字段有位造成控存容量极大字段直接编码方式将微指令的控制字段分成若干段每段经译码后发出控制信号微命令字段分段的原则互斥性微命令分在同一段内相容性微命令分在不同段内每个小段中包含的信息位不能太多否则将增加译码线路的复杂性和译码时间一般每个小段还要留出一个状态表示本字段不发出任何微命令因此当某字段的长度为位时最多只能表示个互斥的微命令通常用表示不操作其优点可以缩短微指令字长其缺点要通过译码电路后再发出微命令因此比直接编码方式慢问某计算机的控制器采用微程序控制方式微指令中的操作控制字段采用字段直接编码法共有个微命令构成个互斥类分别包含和个微命令则操作控制字段至少有多少位答第个互斥类有个微命令要留出个状态表示不操作所以需要表示种不同的状态故需要个二进制位以此类推后面个互斥类各需要表示种不同的状态分别对应个二进制位故操作控制字段的总位数为位若采用直接编码的方式则控制字段需要位字段间接编码方式一个字段的某些微命令需由另一个字段中的某些微命令来解释由于不是靠字段直接译码发出的微命令故称为字段间接编码又称隐式编码其优点可进一步缩短微指令字长其缺点削弱了微指令的并行控制能力故通常作为字段直接编码方式的一种辅助手段微指令的地址形成方式微指令的下地址字段指出微指令格式中设置一个下地址字段由微指令的下地址字段直接指出后继微指令的地址这种方式又称为断定方式根据机器指令的操作码形成当机器指令取至指令寄存器后微指令的地址由操作码经微地址形成部件形成增量计数器法分支转移转移方式指明判别条件转移地址指明转移成功后的去向通过测试网络由硬件产生微程序入口地址第一条微指令地址由专门硬件产生用专门的硬件记录取指周期微程序首地址中断周期由硬件产生中断周期微程序首地址用专门的硬件记录例题断定方式某计算机采用微程序控制器共有条指令公共的取指令微程序包含条微指令各指令对应的微程序平均由条微指令组成采用断定法下地址字段法确定下条微指令地址则微指令中下地址字段的位数至少是多少位总共需要存储多少条微指令条标注出个不同的位置至少需要多少个二进制位下地址字段的位数至少是位微程序控制单元的设计设计步骤分析每个阶段的微操作序列写出对应机器指令的微操作命令及节拍安排确定微指令格式编写微指令码点取指周期硬布线控制器的节拍安排将分析完的指令直接放到对应的线路上将对应的线路导通取指周期微程序控制器的节拍安排分为三条微指令微地址形成部件但是实际上取值周期微程序控制器的节拍安排在每一条微指令下面都需要有一条指令来确定下一条指令的位置微指令需要使用节拍确定下一条微指令的地址微指令需要使用节拍确定下一条微指令的地址微指令微地址形成部件微地址形成部件根据指令操作码确定其执行周期微指令序列的首地址显然微程序控制器的速度比硬布线控制器更慢微程序控制单元的设计步骤分析每个阶段的微操作序列写出对应机器指令的微操作命令及节拍安排写出每个周期所需要的微操作参照硬布线补充微程序控制器特有的微操作取指周期执行周期确定微指令格式根据微操作个数决定采用何种编码方式以确定微指令的操作控制字段的位数根据中存储的微指令总数确定微指令的顺序控制字段的位数最后按操作控制字段位数和顺序控制字段位数就可确定微指令字长编写微指令码点根据操作控制字段每一位代表的微操作命令编写每一条微指令的码点微程序设计分类静态微程序设计和动态微程序设计静态微程序无需改变采用动态通过改变微指令和微程序改变机器指令有利于仿真采用毫微程序设计毫微程序设计的基本概念微程序设计用微程序解释机器指令毫微程序设计用毫微程序解释微程序微程序控制器和硬布线控制器的对比微程序控制器硬布线控制器工作原理微操作控制信号以微程序的形式存放在控制存储器中执行指令时读出即可微操作控制信号由组合逻辑电路根据当前的指令码状态和时序即时产生执行速度慢快规整性较规整烦琐不规整应用场景易于扩充易扩充修改困难指令流水线的基本概念指令流水的定义一条指令的执行过程可以分成多个阶段或过程根据计算机的不同具体的分法也不同取指根据内容访问主存储器取出一条指令送到中分析对指令操作码进行译码按照给定的寻址方式和地址字段中的内容形成操作数的有效地址并从有效地址中取出操作数执行根据操作码字段完成指令规定的功能即把运算结果写到通用寄存器或主存中设取指分析执行个阶段的时间都相等用表示按以下几种执行方式分析条指令的执行时间顺序执行方式总耗时传统冯诺依曼机采用顺序执行方式又称串行执行方式优点控制简单硬件代价小缺点执行指令的速度较慢在任何时刻处理机中只有一条指令在执行各功能部件的利用率很低一次重叠方式总耗时优点程序的执行时间缩短了缺点需要付出硬件上较大开销的代价控制过程也比顺序执行复杂了二次重叠方式总耗时与顺序执行方式相比指令的执行时间缩短近这是一种理想的指令执行方式在正常情况下注也可以把每条指令的执行过程分成个或个阶段分成个阶段是比较常见的做法流水线表示方法流水线的性能指标吞吐率吞吐率是指在单位时间内流水线所完成的任务数量或是输出结果的数量设任务数为处理完成个任务所用的时间为则计算流水线吞吐率的最基本的公式为理想情况下流水线的时空图如下当连续输入的任务时得最大吞吐率为一条指令的执行分为个阶段每个阶段耗时一般取一个时钟周期流水线的实际吞吐率为加速比完成同样一批任务不使用流水线所用的时间与使用流水线所用的时间之比设表示不使用流水线时的执行时间即顺序执行所用的时间表示使用流水线时的执行时间则计算流水线加速比的基本公式为理想情况下流水线时空图一条指令的执行分为个阶段每个阶段耗时一般取一个时钟周期单独完成一个任务耗时为则顺序完成个任务耗时实际加速比为当连续输入的任务时最大加速比为效率流水线的设备利用率称为流水线的效率在时空图上流水线的效率定义为完成个任务占用的时空区有效面积与个任务所用的时间与个流水段所围成的时空区总面积之比则流水线效率的一般公式为个任务占用的时空区有效面积个任务所用的时间与个流水段所围成的时空区总面积个任务占用的时空区有效面积个任务所用的时间与个流水段所围成的时空区总面积个任务所用的时间与个流水段所围成的时空区总面积个任务占用的时空区有效面积当连续输入的任务时最高效率为为指令流水线的影响因素和分类机器周期的设置取值阶段指令译码阶段还包括对寄存器的读取操作将本条指令所需要的数据放到这个段的锁存器中指令执行阶段访存阶段写会阶段五段式基于架构提出的是世界上第一个精简指令集的系统为方便流水线的设计将每个阶段的耗时取成一样以最长耗时为准即此处应将机器周期设置为流水线每一个功能段部件后面都要有一个缓冲寄存器或称为锁存器其作用是保存本流水段的执行结果提供给下一流水段使用缓冲器的作用因为各个阶段都是以最长时间段的时间来确定的所以在短时间段的阶段下如果提前弄好了那么会将结果放在缓冲寄存器中等待时间到了之后再将数据放到下一个数据块中结构相关资源冲突由于多条指令在同一时刻争用同一资源而形成的冲突称为结构相关解决办法后一相关指令暂停一周期资源重复配置数据存储器指令存储器数据相关数据冲突数据相关指在一个程序中存在必须等前一条指令执行完才能执行后一条指令的情况则这两条指令即为数据相关其中第一条指令的运算结果需要作为后续指令的参数如下图所示我们在第一条指令还没有执行完毕的时候就需要读取中的数据这时候会造成数据冲突解决办法把遇到数据相关的指令及其后续指令都暂停一至几个时钟周期直到数据相关问题消失后再继续执行可分为硬件阻塞和软件插入两种方法数据旁路技术转发机制我们在运算完结果之后不一定需要放到寄存器中然后再从寄存器中读取我们可以在运算结果运算完毕之后直接将数据放到运算器中进行运算省略了放到寄存器中这一步编译优化通过编译器调整指令顺序来解决数据冲突我们可以先将后面指令中没有用到第一条指令运算结果的指令先放到第一条指令后面这样的话等无管理指令执行完毕之后结果也就放回到相应的寄存器中去了这时候也不影响后面指令的运行控制相关控制冲突当流水线遇到转移指令和其他改变值的指令而造成断流时会引起控制冲突解决办法转移指令分支预测简单预测永远猜或动态预测根据历史情况动态调整预取转移成功和不成功两个控制流方向上的目标指令加快和提前形成条件码提高转移方向的猜准率流水线的分类根据使用等级分类根据流水线使用的级别的不同流水线可分为部件功能级流水线处理机级流水线和处理机间流水线部件功能级流水就是将复杂的算术逻辑运算组成流水线工作方式例如可将浮点加法操作分成求阶差对阶尾数相加以及结果规格化等个子过程处理机级流水是把一条指令解释过程分成多个子过程如前面提到的取指译码执行访存及写回个子过程处理机间流水是一种宏流水其中每一个处理机完成某一专门任务各个处理机所得到的结果需存放在与下一个处理机所共享的存储器中根据流水线的功能分类按流水线可以完成的功能流水线可分为单功能流水线和多功能流水线单功能流水线指只能实现一种固定的专门功能的流水线多功能流水线指通过各段间的不同连接方式可以同时或不同时地实现多种功能的流水线根据同一时间内各段之间的连接方式按同一时间内各段之间的连接方式流水线可分为静态流水线和动态流水线静态流水线指在同一时间内流水线的各段只能按同一种功能的连接方式工作动态流水线指在同一时间内当某些段正在实现某种运算时另一些段却正在进行另一种运算这样对提高流水线的效率很有好处但会使流水线控制变得很复杂按照各功能段之间是否有返回信号按流水线的各个功能段之间是否有反馈信号影流水线可分为线性流水线与非线性流水线线性流水线从输人到输出每个功能段只允许经过一次不存在反馈回路非线性流水线存在反馈回路从输入到输出过程中某些功能段将数次通过流水线这种流水线适合进行线性递归的运算流水线的多发技术超标量技术每个时钟周期内可并发多条独立指令要配置多个功能部件不能调整指令的执行顺序这里需要和乱序发射对比起来通过编译优化技术把可并行执行的指令搭配起来超流水技术在一个时钟周期内再分段段在一个时钟周期内一个功能部件使用多次次不能调整指令的执行顺序靠编译程序解决优化问题在这个例题中流水线速度是原来的三倍超长指令字由编译程序挖掘出指令间潜在的并行性将多条能并行操作的指令组合成一条具有多个操作码字段的超长指令字可达几百位采用多个处理部件五段式指令流水线取指译码取数执行访存写回寄存器我们常用的指令是否都需要执行这五个段呢考试中常见的五类指令运算类指令指令指令条件转移指令无条件转移指令运算类指令的执行过程没有访存操作因为运算的操作码都是来自寄存器或者立即数然后再写会寄存器中注指源操作数指目的操作数运算类指令根据从指令取指令至段的锁存器取出操作数至段锁存器运算将结果存入段锁存器空段将运算结果写回指定寄存器运算类指令举例指令的汇编格式功能加法指令两个寄存器相加加法指令寄存器与立即数相加算数左移指令指令的执行过程指令根据从指令取指令至段的锁存器将基址寄存器的值放到锁存器将偏移量的值放到运算得到有效地址从数据中取数并放入锁存器将取出的数写回寄存器指令的汇编格式功能通常处理器只有取数和存数指令才能访问主存指令的执行过程指令根据从指令取指令至段的锁存器将基址寄存器的值放到锁存器将偏移量的值放到将要存的数放到运算得到有效地址并将锁存器的内容放到锁存器写入数据空段指令的汇编格式功能通常处理器只有取数和存数指令才能访问主存有条件转移指令的执行过程条件转移指令根据从指令取指令至段的锁存器进行比较的两个数放入锁存器偏移量放入运算比较两个数将目标值写回左图没画全空段很多教材把写回的功能段称为段其耗时比段更短可安排在段时间丙完成指令的汇编格式功能偏移量若则指令字长偏移量指令字长否则指令字长偏移量若则指令字长偏移量指令字长否则指令字长通常处理器只有取数和存数指令才能访问主存无条件转移指令的执行过程无条件转移指令根据从指令取指令至段的锁存器偏移量放入将目标值写回空段空段段耗时比段更短可安排在段时间内完成段越早完成就越能避免控制冲突当然也有的地方会在段时间内才修改的值指令的汇编格式偏移量指令字长偏移量指令字长第六章总线总线简图总线的物理实现如上图根信号线组成一根总线所有硬件部件都可以通过这根总线传递数据可并行发送数据同一时刻只能有一个部件发送数据但是可有多个部件接受数据总线的概述总线的定义总线是一组能为多个部伴分时共享的公共信息传送线路为什么要用总线早期计算机外部设备少时大多采用分散连接方式不易实现随时增减外部设备为了更好地解决设备和主机之间连接的灵活性问题计算机的结构从分散连接发展为总线连接总线的特点总线是一组能为多个部件分时共享的公共信息传送线路共享是指总线上可以挂接多个部件各个部件之间互相交换的信息都可以通过这组线路分时共享分时是指同一时刻只允许有一个部件向总线发送信息如果系统中有多个部件则它们只能分时地向总线发送信息总线的特性机械特性尺寸形状管脚数排列顺序电气特性传输方向和有效的电平范围功能特性每根传输线的功能地址数据控制时间特性信号的时序关系串行总线和并行总线优点只需要一条传输线成本低廉广泛应用于长距离传输应用于计算机内部时可以节省布线空间缺点在数据发送和接收的时候要进行拆卸和装配要考虑串行并行转换的问题优点总线的逻辑时序比较简单电路实现起来比较容易缺点信号线数量多占用更多的布线空间远距离传输成本高昂由于工作频率较高时并行的信号线之间会产生严重干扰对每条线等长的要求也越高所以无法持续提升工作频率注意串行总线的速度不一定比并行总线速度慢片内总线系统总线和通信总线片内总线片内总线是芯片内部的总线它是芯片内部寄存器与寄存器之间寄存器与之间的公共连接线系统总线系统总线是计算机系统内各功能部件主存接口之间相互连接的总线按系统总线传输信息内容的不同又可分为类数据总线地址总线和控制总线数据总线传输各功能部件之间的数据信息包括指令和操作数位数根数与机器字长存储字长有关双向地址总线传输地址信息包括主存单元或端口的地址位数根数与主存地址空间大小及设备数量有关单向只有向各个设备发送信号控制总线传输控制信息一根控制线传输一个信号对单根控制线来说是单向的对整体来说是双向的有出送出的控制命令有入主存或外设返回的反馈信号通信总线通信总线是用于计算机系统之间或计算机系统与其他系统如远程通信设备测试设备之间信息传送的总线通信总线也称为外部总线系统总线的结构单总线结构注单总线并不是指只有一根信号线系统总线按传送信息的不同可以细分为地址总线数据总线和控制总线结构主存设备通过接口都连接在一组总线上允许设备之间设备和之间或设备与主存之间直接交换信息优点结构简单成本低易于接入新的设备缺点带宽低负载重多个部件只能争用唯一的总线且不支持并发传送操作系统总线非常快但是有一些外部设备的速度非常慢这就会导致系统总线在接受外部设备的信息的时候会导致速度浪费双总线结构支持突发猝发传送送出一个地址收到多个地址连续的数据向主存发送一个信息但是主存中往往是需要多个地址连续存储的这时候就可以送出一个地址收到多个地址连续的数据了通道是具有特殊功能的处理器通道程序放在主存中结构双总线结构有两条总线一条是主存总线用于主存和通道之间进行数据传送另一条是总线用于多个外部设备与通道之间进行数据传送优点将较低速的设备从单总线上分离出来实现存储器总线和总线分离缺点需要增加通道等硬件设备三总线结构将设备再次分为快速的设备和慢速的设备快速的设备通过总线和主存访问慢速的设备通过总线和交互结构三总线结构是在计算机系统各部件之间采用条各自独立的总线来构成信息通路这条总线分别为主存总线总线和直接内存访问总线优点提高了设备的性能使其更快地响应命令提高系统吞吐量缺点系统工作效率较低三总线中同一时刻只能有一个总线在工作所以效率比较低四总线结构桥接器用于连接不同的总线具有数据缓冲转换和控制功能靠近的总线速度较快每级总线的设计遵循总线标准总线的性能指标总线周期与总线时钟周期的关系比较魔幻大多数情况下一个总线周期包含多个总线时钟周期有的时候一个总线周期就是一个总线时钟周期有的时候一个总线时钟周期可包含多个总线周期总线的传输周期总线周期一次总线操作所需的时间包括申请阶段寻址阶段传输阶段和结束阶段通常由若干个总线时钟周期构成就是一组数据传送所需要的时间总线时钟周期即机器的时钟周期计算机有一个统一的时钟以控制整个计算机的各个部件总线也要受此时钟的控制时钟周期的频率总线的工作频率总线上各种操作的频率为总线周期的倒数若总线周期个时钟周期则总线的工作频率时钟频率实际上指一秒内传送几次数据总线的时钟频率即机器的时钟频率为时钟周期的倒数若时钟周期为则时钟频率为实际上指一秒内有多少个时钟周期总线宽度又称为总线位宽它是总线上同时能够传输的数据位数通常是指数据总线的根数如根称为位总线总线带宽可理解为总线的数据传输率即单位时间内总线上可传输数据的位数通常用每秒钟传送信息的字节数来衡量单位可用字节秒表示总线带宽总线工作频率总线宽度总线工作频率总线宽度注总线带宽是指总线本身所能达到的最高传输速率在计算实际的有效数据传输率时要用实际传输的数据量除以耗时例某同步总线采用数据线和地址线复用方式其中地址数据线有根总线时钟频率为每个时钟周期传送两次数据上升淞和下降沿各传送一次数据该总线的最大数据传输率总线带宽是多少若该总线支持突发猝发传输方式传输一个地址占用一个时钟周期则一次主存写总线事务传输位数据所需要的时间至少是多少答每个时钟周期传送两次数据总线工作频率是时钟频率的两倍总线工作频率总线宽度总线带宽总线工作频率总线宽度突发猝发传输方式一次总线事务中主设备只需给出一个首地址从攻备肌能从首地址开始的若干连续单元读出或写入多个数据发送首地址占用个时钟周期位数据需传输次占用个时钟周期一个时钟周期总耗时这里可以的出来串行总线的速度不一定比并行总线的速度慢因为总线带宽总线工作频率总线宽度工作频率相问时串行总线传输速度比并行总线慢并行总线的工作频率无法持续捷阍而串行总线可以通过不断提高工作频率来提高传输速度最终超过并行总线总线复用总线复用是指一种信号线在不同的时间传输不同的信息可以使用较少的线传输更多的信息从而节省了空间和成本信号线数地址总线数据总线和控制总线种总线数的总和称为信号线数总线的仲裁如何解决多个设备争用总线的问题仲裁的基本概念同一时刻只能有一个设备控制总线传输操作可以有一个或多个设备从总线接收数据将总线上所连接的各类设备按其对总线有无控制功能分为主设备获得总线控制权的设备从设备被主设备访问的设备只能响应从主设备发来的各种总线命令为什么要仲裁总线作为一种共享设备不可避免地会出现同一时刻有多个主设备竞争总线控制权的问题总线仲裁的定义多个主设备同时竞争主线控制权时以某种方式选择一个主设备优先获得总线控制权称为总线仲裁总线仲裁分类集中仲裁方式链式查询方式计数器定时查询方式独立请求方式分布仲裁方式集中仲裁方式工作流程主设备发出请求信号若多个主设备同时要使用总线则由总线控制器的判优仲裁逻辑按一定的优先等级顺序确定哪个主设备能使用总线获得总线使用权的主设备开始传送数据链式查询总线忙信号的建立者是获得总线控制权的设备优先级离总线控制器越近的部件其优先级越高离总线控制器越远的部件其优先级越低优点个链式查询方式优先级固定只需很少几根控制线就能按一定优先次序实现总线控制结构简单扩充容易缺点对硬件电路的故障敏感并且优先级不能改变当优先级高的部件频繁请求使用总线时会使优先级较低的部件长期不能使用总线计数器查询方式结构特点用一个计数器控制总线使用权相对链式查询方式多了一组设备地址线少了一根总线响应线它仍共用一根总线请求线当总线控制器收到总线请求信号判断总线空闲时计数器开始计数计数值通过设备地址线发向各个部件当地址线上的计数值与请求使用总线设备的地址一致时该设备获得总线控制权同时中止计数器的计数及查询优点计数初始值可以改变优先次序计数每次从开始设备的优先级就按顺序排列固定不变计数从上一次的终点开始此时设备使用总线的优先级相等计数器的初值还可以由程序设置对电路的故障没有链式敏感缺点增加了控制线数若设备有个则需条控制线控制相对比链式查询相对复杂独立请求方式当总线上的部件需要使用总线时经各自的总线请求线发送总线请求信号在总线控制器中排队当总线控制器按一定的优先次序决定批准某个部件的请求时则给该部件发送总线响应信号结构特点每一个设备均有一对总线请求线和总线允许线优点响应速度快总线允许信号直接从控制器发送到有关设备不必在设备间传递或者查询对优先次序的控制相当灵活缺点控制线数量多若设备有个则需要条控制线其中为线用于设备向总线控制部件反馈已经是否正在使用总线总线的控制逻辑更加复杂链式查询计数器查询独立请求控制线路总线请求总线允许总线忙总线请求总线允许总线忙总线请求总线允许总线忙优点优先级固定结构简单扩充容易优先级较灵活响应速度快优先级灵活缺点对电路故障敏感优先级不灵活控制线较多控制相对复杂控制线多控制复杂总线忙信号的建立者是获得总线控制权的设备特点不需要中央仲裁器每个潜在的主模块都有自己的仲裁器和仲裁号多个仲裁器竞争使用总线当设备有总线请求时它们就把各自唯一的中裁号发送到共享的仲裁总线上每个仲裁器将从仲裁总线上得到的仲裁号与自己的仲裁号进行比较如果仲裁总线上的号优先级高则它的总线请求不予响应并撤销它的仲裁号最后获胜者的仲裁号保留在仲裁总线上总线的操作和定时占用总线的一对设备如何进行数据传输总线传输的四个阶段总线周期的四个阶段申请分配阶段由需要使用总线的主模块或主设备提出申请经总线仲裁机构决定将下一传输周期的总线使用权授予某一申请者也可将此阶段细分为传输请求和总线仲裁两个阶段寻址阶段获得使用权的主模块通过总线发出本次要访问的从模块的地址及有关命令启动参与本次传输的从模块传输阶段主模块和从模块进行数据交换可单向或双向进行数据传送结束阶段主模块的有关信息均从系统总线上撤除让出总线使用权总线定时是指总线在双方交换数据的过程中需要时间上配合关系的控制这种控制称为总线定时它的实质是一种协议或规则方式方法同步通信同步定时方式由统一时钟控制数据传送异步通信异步定时方式采用应答方式没有公共时钟标准半同步通信同步异步结合分离式通信充分挖掘系统总线每瞬间的潜力同步定时方式同步定时方式是指系统采用一个统一的时钟信号来协调发送和接收双方的传送定时关系若干个时钟产生相等的时间间隔每个间隔构成一个总线周期在一个总线周期中发送方和接收方可进行一次数据传送因为采用统一的时钟每个部件或设备发送或接收信息都在固定的总线传送周期中一个总线的传送周期结束下一个总线传送周期开始优点传送速度快具有较高的传输速率总线控制逻辑简单缺点主从设备属于强制性同步不能及时进行数据通信的有效性检验可靠性较差同步通信适用于总线长度较短及总线所接部件的存取时间比较接近的系统读命令假设作为主设备某个输入设备作为从设备在时刻的上升沿给出地址信息在的上升沿给出读命令低电平有效与地址信息相符合的输入设备按命令进行一系列的内部操作且必须在的上升沿来之前将所需的数据送到数据总线上在时钟周期内将数据线上的信息传送到其内部寄存器中在的上升沿撤销读命令输入设备不再向数据总线上传送数据撤销它对数据总线的驱动如果从设备跟不上节奏在给不出数据就会出错异步定时方式在异步定时方式中没有统一的时钟也没有固定的时间间隔完全依靠传送双方相互制约的握手信号来实现定时控制主设备提出交换信息的请求信号经接口传送到从设备从设备接到主设备的请求后通过接口向主设备发出回答信号优点总线周期长度可变能保证两个工作速度相差很大的部件或设备之间可靠地进行信息交换自动适应时间的配合缺点比同步控制方式稍复杂一些速度比同步定时方式慢根据请求和回答信号的撤销是否互锁分为以下种类型不互锁方式速度最快可靠性最差主设备发出请求信号后不必等到接到从设备的回答信号而是经过一段时间便撤销请求信号从设备在接到请求信号后发出回答信号并经过一段时间自动撤销回答信号双方不存在互锁关系半互锁方式主设备发出请求信号后必须待接到从设备的回答信号后才撤销请求信号有互锁的关系从设备在接到请求信号后发出回答信号但不必等待获知主设备的请求信号已经撤销而是隔一段时间后自动撤销回答信号不存在互锁关系全互锁方式最可靠速度最慢主设备发出请求信号后必须待从设备回答后才撤销请求信号从设备发出回答信号必须待获知主设备请求信号已撤销后再撤销其回答信号双方存在互锁关系半同步通信同步发送方用系统时钟前沿发信号接收方用系统时钟后沿判断识别异步允许不同速度的模块和谐工作半同步通信统一时钟的基础上增加一个等待响应信号当节拍完成之后如果数据没有准备好的话则使用信号来等待数据的填充填充完毕之后在进行分离式通信上述三种通信的共同点一个总线传输周期以输入数据为例主模块发地址命令使用总线从模块准备数据不使用总线总线空闲从模块向主模块发数据使用总线分离式通信的一个总线传输周期子周期主模块申请占用总线使用完后放弃总线的使用权子周期从模块申请占用总线将各种信息送至总线上特点各模块均有权申请占用总线采用同步方式通信不等对方回答各模块准备数据时不占用总线总线利用率提高总线标准总线标准的基本概念总线标准是国际上公布或推荐的互连各个模块的标准它是把各种不同的模块组成计算机系统时必须遵守的规范按总线标准设计的接口可视为通用接口在接口的两端任何一方只需根据总线标准的要求完成自身方面的功能要求而无须了解对方接口的要求根据总线在计算机系统中的位置可分为系统总线通常与直接相连用于连接与北桥芯片或与主存等局部总线没有直接与连接通常是连接高速的北桥芯片用于连接了很多重要的硬件部件如显千声卡等设备总线通信总线通常由南桥芯片控制用于连接计算机与计算机或连接计算机与外部设备系统总线的标准总线标准全称工作频率数据线最大速度特点并行总线系统总线并行总线系统总线被称为总线数据传送需要或接口来管理不支持总线仲裁与的总线完全兼容从中分离出了总线控制权支持多个总线主控器和突发传送还有的前端总线和总线局部总线标准总线标准全称工作频率数据线最大速度特点并行总线局部总线是针对多媒体要求高速传送活动图像的大量数据应运而生的主要是依靠来运行的随着速度越来越快渐渐跟不上的速度被淘汰总线标准全称工作频率数据线最大速度特点并行总线局部总线是由北桥芯片来控制的特点高性能不依附于某个具体的处理器支持突发传送良好的兼容性支持即插即用支持多主设备具有与处理器和存储器子系统完全并行操作的能力提供数据和地址奇偶校验的能力可扩充性好可采用多层结构提高驱动能力采用多路复用技术减少了总线引脚个数总线标准全称工作频率数据线最大速度特点并行总线局部总线加速图形接口接口这是显示卡专用的局部总线是基于版规范并进行扩充修改而成总线标准全称工作频率数据线最大速度特点以上串行是一种点对点串行连接的设备连接方式点对点意味着每一个设备都拥有自己独立的数据连接各个设备之间并发的数据传输互不影响在传输速率方面总线利用串行的连接特点将能轻松将数据传输速度提到一个很高的频率达到远超出总线的传输速率与此同时总线支持双向传输模式还可以运行全双工模式支持热拔插设备总线标准总线标准全称工作频率数据线最大速度特点串行通信总线是应用于串行二进制交换的数据终端设备和数据通信设备之间的标准接口总线标准全称工作频率数据线最大速度特点智能通用接口小型计算机系统接口是一种用于计算机和智能设备之间硬盘软驱光驱打印机扫描仪等系统级接口的独立处理器标准是一种智能的通用接口标准总线标准全称工作频率数据线最大速度特点便携设备接口用于早期计算机之间进行数据交换相当于存储卡总线标准全称工作频率数据线最大速度特点设备总线串行属于设备总线是设备和设备控制器之间的接口可以热插拔即插即用具有很强的连接能力和很好的可扩充性采用菊花链形式将众多外设连接起来可使用集线器链式连接个外设标准统一以前大家常见的是接口的硬盘串口的鼠标键盘并口的打印机扫描仪可是有了之后这些应用外设统统可以用同样的标准与个人电脑连接这时就有了硬盘鼠标打印机等等高速传输连接电缆轻巧可为低压外设供电差模信号根据的压差来确定数据差模信号的抗干扰能力很强因此工作频率可以很高注意每次只能传送数据总线标准全称工作频率数据线最大速度特点硬盘光驱接口并行用于硬盘的接口最初被称为接口后来扩展为磁带机可移动磁盘磁盘等设备的接口硬盘和光驱通过接口与主板连接总线标准全称工作频率数据线最大速度特点串行硬盘接口由于采用串行接口而闻名与并行相比具有比较大的优势以连续串行的方式传送数据可以在较少的位宽下使用较高的工作频率来提高数据传输的带宽一次只会传送位数据这样能减少接口的针脚数目使连接电缆数目变少效率也会更高同时还能降低系统能耗减小系统复杂性趋势串行总线代替并行总线为何串行总线能够取代并行总线并行总线用根线每次传送个比特用高低电平表示通常采用同步定时方式由于线间信号干扰因此总线工作频率不能太高另外各条线不能有长度差长距离并行传输时工艺难度大串行总线用两根线每次传送一个比特采用差模信号表示通常采用异步定时的方式总线工作频率可以很高现在的串行总线通常基于包传输如为一个数据包包与包之间有先后关系因此可以用多个数据通路分别串行传输多个数据包因此某种程度上现在的串行总线也有并行的特点第七章系统系统的基本概念就是输入输出设备就是可以将数据输入到计算机或者可以接收计算机输出数据的外部设备主机如何与设备进行交互接口又称控制器设备控制器负责协调主机与外部设备之间的数据传输控制器多种多样也会制定相应的标准如用于控制设备的接口用于控制硬盘的接口等控制器就是一块芯片常被集成在主板上控制方式简介数据流键盘接口的数据寄存器数据总线某寄存器主存变量的对应位置等待键盘完成程序查询方式不断轮询检查控制器中的状态寄存器检测到状态为已完成之后再从数据寄存器取出输入数据程序中断方式等待键盘时可以先去执行其他程序键盘完成后控制器向发出中断请求响应中断请求并取走输入数据思考对于快速的设备如磁盘每准备好一个字就给发送一次中断请求会导致什么问题答需要花费大量的时间来处理中断程序服务利用率严重下降控制方式直接内存访问和接口之间的交互是通过总线来进行交互的控制方式主存与高速设备之间有一条直接数据通路总线向接口发出读写命令指明主存地址磁盘地址读写数据量等参数控制器自动控制磁盘与主存的数据读写每完成一整块数据读写如为一整块才向发出一次中断请求控制器与主存每次传送个字当传送完一整块数据后才向发出中断请求通道的控制方式有的商用中型机大型机可能会接上超多的设备如果都让来管理那么就太累了这时候就可以引入通道这种方式来代替与接口进行交互通道可以理解为是弱鸡版的通道可以识别并执行一系列通道指令通道指令种类功能通常比较单一通道的运行过程向通道发出指令指明通道程序在内存中的位置并指明要操作的是哪个设备然后就可以去干别的事情了通道执行内存中的通道程序控制设备完成一系列的任务通道执行完规定的任务之后向发出中断请求之后对中断请求进行处理系统的基本组成一般来说系统由软件和硬件两部分构成硬件包括外部设备接口总线等软件包括驱动程序用户程序管理程序升级补丁等通常采用指令和通道指令实现主机和设备的信息交换指令指令的一部分操作码识别指令命令码表明这条指令需要做什么操作设备码对那个设备进行操作通道指令通道能识别的指令通道程序提前编好放到主存中在含有通道的计算机中执行指令对通道发出命令由通道执行一系列通道指令代替对设备进行管理设备外部设备外部设备也称外围设备是除了主机以外的能直接或间接与计算机交换信息的装置输入设备用于向计算机系统输入命令和文本数据等信息的部件键盘和鼠标是最基本的输入设备键盘鼠标键盘键盘是最常用的输入设备通过它可发出命令或输入数据每个键相当于一个开关当按下键时电信号连通当松开键时弹簧把键弹起电信号断开键盘输入信息可分为个步骤查出按下的是哪个键将该键翻译成能被主机接收的编码如码将编码传送给主机鼠标鼠标是常用的定位输入设备它把用户的操作与计算机屏幕上的位置信息相联系常用的鼠标有机械式和光电式两种工作原理当鼠标在平面上移动时其底部传感器把运动的方向和距离检测出来从而控制光标做相应运动输出设备用于将计算机系统中的信息输出到计算机外部进行显示交换等的部件显示器和打印机是最基本的输出设备显示器按显示设备所用的显示器件分类按所显示的信息内容分类阴极射线管显示器液晶显示器显示器字符显示器图形显示器图像显示器屏幕大小以对角线长度表示常用的有英寸等分辨率所能表示的像素个数屏幕上的每一个光点就是一个像素以宽高的像素的乘积表示例如和等灰度级灰度级是指黑白显示器中所显示的像素点的亮暗差别在彩色显示器中则表现为颜色的不同灰度级越多图像层次越清楚逼真典型的有位级位等位可以表示种不同的亮度或颜色刷新光点只能保持极短的时间便会消失为此必须在光点消失之前再重新扫描显示一遍这个过程称为刷新刷新频率单位时间内扫描整个屏幕内容的次数按照人的视觉生理刷新频率大于时才不会感到闪烁通常显示器刷新频率在显示存储器也称刷新存储器为了不断提高刷新图像的信号必须把一帧图像信息存储在刷新存储器中其存储容量由图像分辨率和灰度级决定分辨率越高灰度级越多刷新存储器容量越大容量分辨率灰度级位数带宽分辨率灰度级位数帧频注现代计算机中显存除了作为当前显示帧的缓存还会用于保存即将渲染的图像数据集成显卡计算机中通常分配一片内存作为显存阴极射线管显示器液晶显示器发光二极管显示器显示器主要由电子枪偏转线圈荫罩高压石墨电极和荧光粉涂层及玻璃外壳部分组成具有可视角度大无坏点色彩还原度高色度均匀可调节的多分辨率模式响应时间极短等优点原理利用液晶的电光效应由图像信号电压直接控制薄膜晶体管再间接控制液晶分子的光学特性来实现图像的显示特点体积小重量轻省电无辐射绿色环保画面柔不伤眼等原理通过控制半导体发光二极管进行显示用来显示文字图形图像等各种信息与是两种不同的显示技术是由液态晶体组成的显示屏而则是由发光二极管组成的显示屏与相比显示器在亮度功耗可视角度和刷新速率等方面都更具优势字符型显示器图形显示器显示字符的方法以点阵为基础点阵是指由个点组成的阵列点阵的多少取决于显示字符的质量和字符窗口的大小字符窗口是指每个字符在屏幕上所占的点数它包括字符显示点阵和字符间隔将点阵存入由构成的字符发生器中在进行光栅扫描的过程中从字符发生器中依次读出某个字符的点阵按照点阵中和代码不同控制扫描电子束的开或关从而在屏幕上显示出字符对应于每个字符窗口所需显示字符的代码被存放在视频存储器中以备刷新阴极射线管显示字符的方式先通过接口电路将键盘输入的信息或者主机先要显示的信息的码放到显示存储器中在引进射线管控制器的操作下将显示存储器中的字符一个个的发射到字符发生器中中除了处理电信号外还有一个来存放对应码的字形码根据扫描方式的不同可以分为光栅扫描显示器和随机扫描显示器将所显示图形的一组坐标点和绘图命令组成显示文件存放在缓冲存储器中缓存中的显示文件传送给矢量线段产生器产生相应的模拟电压直接控制电子束在屏幕上的移动为了在屏幕上保留持久稳定的图像需要按一定的频率对屏幕进行反复刷新这种显示器的优点是分辨率高且显示的曲线平滑目前高质量的图形显示器采用这种随机扫描方式缺点是当显示复杂图形时会有闪烁感打印机打印机是计算机的输出设备之一用于将计算机处理结果打印在相关介质上按印字原理不同可分为击打式打印机非击打式打印机利用机械动作使印字机构与色带和纸相撞而打印字符优设备成本低印字质量好防伪性好缺噪声大速度慢非击打式打印机采用电磁光喷墨等物理化学方法来印刷字符优速度快噪声小缺成本高按打印机工作方式不同可分为串行打印机行式打印机逐字打印速度慢逐行打印速度快按工作方式可分为针式打印机喷墨式打印机激光打印机原理在联机状态下主机发出打印命令经接口检测和控制电路间歇驱动纵向送纸和打印头横向移动同时驱动打印机间歇冲击色带在纸上打印出所需内容特点针式打印机擅长多层复写打印实现各种票据或蜡纸等的打印它工作原理简单造价低廉耗材色带便宜但打印分辨率和打印速度不够高原理带电的喷墨雾点经过电极偏转后直接在纸上形成所需字形彩色喷墨打印机基于三基色原理即分别喷射种颜色墨滴按一定的比例混合出所要求的颜色特点打印噪声小可实现高质量彩色打印通常打印速度比针式打印机快但防水性差高质量打印需要专用打印纸原理计算机输出的二进制信息经过调制后的激光束扫描在感光鼓上形成潜像再经过显影转印和定影便在纸上得到所需的字符或图像特点打印质量高速度快噪声小处理能力强但耗材多价格较贵不能复写打印多份且对纸张的要求高激光打印机是将激光技术和电子显像技术相结合的产物感光鼓也称为硒鼓是激光打印机的核心部件外存设备是指除计算机内存及缓存等以外的存储器硬磁盘光盘等是最基本的外存设备外存储器计算机的外存储器又称为辅助存储器目前主要使用磁表面存储器所谓磁表面存储是指把某些磁性材料薄薄地涂在金属铝或塑料表面上作为载磁体来存储信息磁盘存储器磁带存储器和磁鼓存储器均属于磁表面存储器磁表面存储器的优点存储容量大位价格低记录介质可以重复使用记录信息可以长期保存而不丢失甚至可以脱机存档非破坏性读出读出时不需要再生磁表面存储器的缺点存取速度慢机械结构复杂对工作环境要求较高外存储器既可以作为输入设备也可以作为输出设备既可以存数据也可以读数据磁盘存储器磁盘设备的组成存储区域一块硬盘含有若干个记录面每个记录面划分为若干条磁道而每条磁道又划分为若干个扇区扇区也称块是磁盘读写的最小单位也就是说磁盘按块存取磁头数即记录面数表示硬盘总共有多少个磁头磁头用于读取写入盘片上记录面的信息一个记录面对应一个磁头柱面数表示硬盘每一面盘片上有多少条磁道在一个盘组中不同记录面的相同编号位置的诸磁道构成一个圆柱面扇区数表示每一条磁道上有多少个扇区硬盘存储器硬盘存储器由磁盘驱动器磁盘控制器和盘片组成磁盘驱动器核心部件是磁头组件和盘片组件温彻斯特盘是一种可移动头固定盘片的硬盘存储器磁盘控制器是硬盘存储器和主机的接口主流的标准有等磁盘的性能指标磁盘的容量一个磁盘所能存储的字节总数称为磁盘容量磁盘容量有非格式化容量和格式化容量之分非格式化容量是指磁记录表面可以利用的磁化单元总数格式化容量是指按照某种特定的记录格式所能存储信息的总量记录密度记录密度是指盘片单位面积上记录的二进制的信息量通常以道密度位密度和面密度表示道密度是沿磁盘半径方向单位长度上的磁道数位密度是磁道单位长度上能记录的二进制代码位数面密度是位密度和道密度的乘积注意磁盘所有磁道记录的信息量一定是相等的并不是圆越大信息越多故每个磁道的位密度都不同平均存取时间平均存取时间寻道时间磁头移动到目的磁道旋转延迟时间磁头定位到所在扇区传输时间传输数据所花费的时间数据传输率磁盘存储器在单位时间内向主机传送数据的字节数称为数据传输率假设磁盘转数为转秒每条磁道容量为个字节则数据传输率为磁盘地址主机向磁盘控制器发送寻址信息磁盘的地址一般如图所示若系统中有个驱动器每个驱动器带一个磁盘每个磁盘个磁道个盘面每个盘面划分为个扇区则每个扇区地址要位二进制代码硬盘的工作过程硬盘的主要操作是寻址读盘写盘每个操作都对应一个控制字硬盘工作时第一步是取控制字第二步是执行控制字硬盘属于机械式部件其读写操作是串行的不可能在同一时刻既读又写也不可能在同一时刻读两组数据或写两组数据磁盘阵列廉价冗余磁盘阵列是将多个独立的物理磁盘组成一个独立的逻辑盘数据在多个物理盘上分割交叉存储并行访问具有更好的存储性能可靠性和安全性的分级如下所示在的几种方案中无论何时有磁盘损坏都可以随时拔出受损的磁盘再插入好的磁盘而数据不会损坏从上到下安全性和可靠性依此提高无冗余和无校验的磁盘阵列把连续多个数据块交替地存放在不同物理磁盘的扇区中几个磁盘交叉并行读写不仅扩大了存储容量而且提高了磁盘数据存取速度但没有容错能力镜像磁盘阵列是为了提高可靠性使两个磁盘同时进行读写互为备份如果一个磁盘出现故障可从另一磁盘中读出数据两个磁盘当一个磁盘使用意味着容量减少一半采用纠错的海明码的磁盘阵列位交叉奇偶校验的磁盘阵列块交叉奇偶校验的磁盘阵列无独立校验的奇偶校验磁盘阵列通过同时使用多个磁盘提高了传输率通过在多个磁盘上并行存取来大幅提高存储系统的数据吞吐量通过镜像功能可以提高安全可靠性通过数据校验可以提供容错能力光盘存储器光盘存储器是利用光学原理读写信息的存储装置它采用聚焦激光束对盘式介质以非接触的方式记录信息特点存储密度高携带方便成本低容量大存储期限长容易保存等光盘的类型如下只读型光盘只能读出其中内容不能写入或修改只可写入一次信息之后不可修改可读可写光盘可以重复读写高容量的表示通用数字化多功能光盘固态硬盘在微小型高档笔记本电脑中采用高性能作为硬盘来记录数据这种硬盘称固态硬盘固态硬盘除了需要外还需要其他硬件和软件的支持注闪存是在的基础上发展起来的本质上是只读存储器接口又称控制器设备控制器负责协调主机与外部设备之间的数据传输接口的作用数据缓冲通过数据缓冲寄存器达到主机和外设工作速度的匹配错误或状态监测通过状态寄存器反馈设备的各种错误状态信息供查用控制和定时接收从控制总线发来的控制信号时钟信号数据格式转换串并并串等格式转换与主机和设备通信实现主机接口一设备之间的通信接口主机侧内部接口内部接口与系统总线相连实质上是与内存相连数据的传输方式只能是并行传输这种说法不完全正确并行传输是年以前用的方法现在在慢慢的转换成串行方法设备侧外部接口外部接口通过接口电缆与外设相连外部接口的数据传输可能是串行方式因此接口需具有串并转换功能发命令发送命令字到控制寄存器向设备发送命令需要驱动程序的协助读状态从状态寄存器读取状态字获得设备或控制器的状态信息读写数据从数据缓冲寄存器发送或读取数据完成主机与外设的数据交换控制寄存器状态寄存器在使用时间上是错开的因此有的接口中可将二者合二为一控制器中的各种寄存器称为端口如何确定要操作的设备每个设备对应一组寄存器操作不同的寄存器就是在操作不同的设备接口与端口接口是指电路中可以被直接访问的寄存器如何访问不同的端口统一编制和独立编制统一编制靠不同的地址码区分内存和设备访存类的指令都可以访问端口因为不同地址对应的内存单元不同机器常用独立编制靠不同的指令区分内存和设备只能用专门的指令访问端口处理器常用就是指令统一编制和独立编制的优缺点统一编址把端口当做存储器的单元进行地址分配用统一的访存指令就可以访问端口又称存储器映射方式靠不同的地址码区分内存和设备地址要求相对固定在地址的某部分如系统总线中地址线共根则可以访问的存储单元个数为个假设要给个端口编址表示地址为主存单元地址表示主存单元地址为地址表示地址为主存单元地址优点不需要专门的输入输出指令所有访存指令都可直接访问端口程序设计灵活性高端口有较大的编址空间读写控制逻辑电路简单缺点端口占用了主存地址空间使主存地址空间变小外设寻址时间长地址位数多地址译码速度慢独立编制端口地址与存储器地址无关独立编址需要设置专门的输入输出指令访问端口又称映射方式靠不同的指令区分内存和设备优点使用专用指令程序编制清晰端口地址位数少地址译码速度快端口的地址不右用主存地址空间缺点指令类型少一般只能对端口进行传送操作接口的类型按数据传送方式可分为并行接口一个字节或一个字所有位同时传送串行接口一位一位地传送注这里所说的数据传送方式指的是外设和接口一侧的传送方式而在主机和接口一侧数据总是并行传送的接口要完成数据格式转换按主机访问设备的控制方式可分为程序查询接口中断接口接口按功能选择的灵活性可分为可编程接口不可编程接口程序查询方式中的指令实例把端口的数据输入到寄存器把寄存器的数据输出到端口模拟打印三个字符先通过指令把我们需要打印的字符放到的寄存器中经过打印机的驱动处理可以把打印机启动的指令放到的寄存器中现在需要吧打印机启动命令放到接口的控制寄存器中先通过地址线指明我们需要的写入的端口在通过控制线指明我们需要的操作写操作在通过数据线把打印机启动的指令放到控制寄存器中控制逻辑根据发来的指令来给打印机发出控制信号当打印机启动完成之后会给状态控制寄存器返回一个的信号一直通过指令轮回检查接口的状态控制器如果没有准备好的话则会一直检查如果准备好的话则会进行下一步操作将我们需要打印的字符通过地址线指明我们需要放入寄存器的地址在通过控制线表明我们这次的操作是写操作然后通过数据线将我们需要打印的字符放到数据缓冲寄存器中我们在通过控制逻辑将我们需要打印的数据放到打印机的设备控制逻辑单元中然后打印这样循环三次即可打印出程序查询方式例题在程序查询方式的输入输出系统中假设不考虑处理时间每一个查询操作需要个时钟周期的时钟频率为现有鼠标和硬盘两个设备而且必须每秒对鼠标进行次查询硬盘以位字长为单位传输数据即每位被查询一次传输率为求对这两个设备查询所花费的时间比率由此可得出什么结论时间的角度一个时钟周期为一个查询操作耗时鼠标每秒查询鼠标耗时查询鼠标所花费的时间比率对鼠标的查询基本不影响的性能硬盘每位需要查询一次每秒传送每秒需要查询次查询硬盘耗时查询硬盘所花费的时间比率将全部时间都用于对硬盘的查询也不能满足磁盘传输的要求频率的角度的时钟频率为即每秒个时钟周期鼠标每秒查询鼠标占用的时钟周期数查询鼠树所花费的时间比率对鼠标的查询基本不影响的性能硬盘每秒需要查询次每秒查询硬盘占用的时钟周期数查询硬盘所花费的时间比率将全部时间都用于对硬盘的查询也不能满足磁盘传输的要求一旦启动必须停止现行程序的运行并在现行程序中插入一段程序主要特点有踏步等待现象与串行工作优点接口设计简单设备量少缺点在信息传送过程中要花费很多时间用于查询和等待而且如果采用独占查询则在一段时间内只能和一台外设交换信息效率大大降低独占查询的时间都在查询状态完全串行定时查询在保证数据不丢失的情况下每隔一段时间就查询一次状态查询的间隔内可以执行其他程序程序中断的作用和原理中断的基本概念程序中断是指在计算机执行现行程序的过程中出现某些急需处理的异常情况或特殊请求暂时中止现行程序而转去对这些异常情况或特殊请求进行处理在处理完毕后又自动返回到现行程序的断点处继续执行原程序工作流程中断请求中断源向发送中断请求信号中断响应响应中断的条件中断判优多个中断源同时提出请求时通过中断判优逻辑响应一个中断源中断处理中断隐指令中断服务程序中断请求的分类狭义的中断分为非屏蔽中断关中断也会被相应断点可屏蔽中断关中断不会被相应关中断的作用实现原子操作表示开中断允许中断表示关中断不允许中断中断命令存放在中中断请求标记如何判断那个设备发来的中断信号每个中断源向发出中断请求的时间是随机的为了记录中断事件并区分不同的中断源中断系统需对每个中断源设置中断请求标记触发器当其状态为时表示中断源有请求这些触发器可组成中断请求标记寄存器该寄存器可集中在中也可分散在各个中断源中对于外中断是在统一的时刻即每条指令执行阶段结束前向接口发出中断查询信号以获取的中断请求也就是说响应中断的时间是在每条指令执行阶段的结束时刻响应中断必须满足以下个条件中断源有中断请求允许中断即开中断一条指令执行完毕且没有更紧迫的任务中断判优中断判优既可以用硬件实现也可用软件实现硬件实现是通过硬件排队器实现的它既可以设置在中也可以分散在各个中断源中软件实现是通过查询程序实现的优先级的设置硬件故障中断属于最高级其次是软件中断非屏蔽中断优于可屏蔽中断请求优于设备传送的中断请求高速设备优于低速设备输入设备优于输出设备实时设备优于普通设备中断处理过程中断隐指令的主要任务关中断在中断服务程序中为了保护中断现场即主要寄存器中的内容期间不被新的中断所打断必须关中断从而保证被中断的程序在中断服务程序执行完毕之后能接着正确地执行下去保存断点为了保证在中断服务程序执行完毕后能正确地返回到原来的程序必须将原来程序的断点即程序计数器的内容保存起来可以存入堆栈也可以存入指定单元引出中断服务程序引出中断服务程序的实质就是取出中断服务程序的入口地址并传送给程序计数器引出终端服务程序有两种方式软件查询法硬件向量查询法硬件向量查询法由硬件产生向量地址再由向量地址找到中断程序入口地址中断服务程序查询到中断服务程序存放的位置之后就开始执行中断服务程序中断服务程序的主要任务保护现场保存通用寄存器和状态寄存器的内容保存寄存器的值以便返回原程序后可以恢复环境可使用堆栈也可以使用特定存储单元中断服务设备服务主体部分如通过程序控制需打印的字符代码送入打印机的缓冲存储器中中断服务的过程中有可能修改寄存器的值恢复现场通过出栈指令或取数指令把之前保存的信息送回寄存器中把原程序算到一般的值恢复原样中断返回通过中断返回指令回到原程序断点处单重中断执行中断服务程序时不响应新的中断请求多重中断单重中断执行中断服务程序时不响应新的中断请求多重中断又称中断嵌套执行中断服务程序时可响应新的中断请求中断屏蔽技术中断屏蔽技术主要用于多重中断要具备多重中断的功能须满足下列条件在中断服务程序中提前设置开中断指令优先级别高的中断源有权中断优先级别低的中断源每个中断源都有一个屏蔽触发器表示屏蔽该中断源的请求表示可以正常申请所有屏蔽触发器组合在一起便构成一个屏蔽字寄存器屏蔽字寄存器的内容称为屏蔽字屏蔽字设置的规律一般用表示屏蔽表示正常申请每个中断源对应一个屏蔽字在处理该中断源的中断服务程序时屏蔽寄存器中的内容为该中断源对应的屏蔽字屏蔽字中越多优先级越高每个屏蔽字中至少有一个至少要能屏蔽自身的中断设某机有个中断源其硬件排队优先次序为现要求将中断处理次序改为写出每个中断源对应的屏蔽字按下图所示的时间轴给出的个中断源的请求时刻画出执行程序的轨迹设每个中断源的中断服务程序时间均为拓展开关中断标志当时表示开中断当时表示关中断可屏蔽中断请求信号输入用来申请一个硬件中断当时若保持高电平则在当前指令执行完毕后就进入中断响应周期非屏蔽中断输入信号与信号类似但中断不必检查标志位是否为常用于处理电源掉电紧急情况中断响应信号输出响应输入该引脚常用来选通中断向量码以响应中断请求中断程序先通过终端接口向中断控制器的中断请求寄存器中发送中断信号不管多少个中断程序中断控制器一律接受然后通过中断控制器里面的数据总线向控制逻辑发送信号控制逻辑通过接口向的接口发送中断信号让知道现在有一个中断程序过来了需要他处理如果检测没有关中断的话则通过接口向中断控制器的接口发送信息我可以处理中断信号但是你需要告诉我我需要处理那个中断信号因为中断控制器可能接收到了多个中断信号所以这时候需要通过优先权电路确定需要处理那个中断信号通过优先权电路筛选出来之后通过终端服务寄存器的处理我们可以得出我们所要处理的中断信号的类型号中断服务寄存器通过数据总线告诉需要处理那个中断程序然后就开始执行程序中断控制方式程序中断控制方式具体操作当需要接受外部设备中的数据的时候可以先让外部设备输入数据等数据输入完毕之后外部设备通过中断操作向发出终端操作等到执行完这条指令的之后开始检测中断信号开始处理这个终端操作先通过关中断防止别的中断程序在进行插入保存断点开始执行中断服务程序执行的时候先要保护现场将正在用的寄存器中的数据都保存下来然后通过中断服务程序控制数据传送最后恢复现场继续执行个指令设备继续输入数据方式向控制器指明要输入还是输出要传送多少个数据数据在主存外设中的地址接受外设发出的请求外设传送一个字的请求并向发出总线请求响应此总线请求发出总线响应信号接管总线控制权进入操作周期确定传送数据的主存单元地址及长度并能自动修改主存地址计数和传送长度计数规定数据在主存和外设间的传送方向发出读写等控制信号执行数据传送操作向报告操作的结束注意在传送过程中控制器将接管的地址总线数据总线和控制总线的主存控制信号被禁止使用而当传送结束后将恢复的一切权利并开始执行其操作传送过程预处理主存起始地址设备地址传送数据个数启动设备数据传送继续执行主程序同时完成一批数据的传送后处理中断服务程序做结束处理继续执行主程序传送解决方案上面这种方式采用的是和共用同一根主线所以不会发生主存访问冲突如果采用下面这个三总线方式的话可能会出现和对主存访问冲突解决方法停止访问主存控制简单处于不工作状态或保持状态未充分发挥对主存的利用率与交替访存不需要总线使用权的申请建立和归还过程硬件逻辑更为复杂周期挪用周期窃取访问主存有三种可能此时不访存不冲突正在访存存取周期结束让出总线与同时访存访存优先方式的特点主存和接口之间有一条直接数据通路由于方式传送数据不需要经过因此不必中断现行程序与主机并行工作程序和传送并行工作方式具有下列特点它使主存与的固定联系脱钩主存既可被访问又可被外设访问在数据块传送时主存地址的确定传送数据的计数等都由硬件电路直接实现主存中要开辟专用缓冲区及时供给和接收外设的数据传送速度快和外设并行工作提高了系统效率在传送开始前要通过程序进行预处理结束后要通过中断方式进行后处理中断数据传送程序控制程序的切换保存和恢复现场硬件控制只需要进行预处理和后处理即可中断请求传送数据后处理相应指令执行周期结束后相应中断每个机器周期结束均可总线空闲时即可相应请求场景控制低速设备控制器控制高速设备优先级优先级低于优先级高于中断异常处理能处理异常事件仅传送数据',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-13 19:16:06',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mycss.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 7.1.1"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://s1.ax1x.com/2022/11/27/zUFla6.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://262259.xyz/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://262259.xyz/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">管理</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://qexo.262259.xyz/" title="博客后端"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://unpkg.com/qexo-static@1.4.0/assets/img/brand/qexo.png" alt="博客后端"/><span class="back-menu-item-text">博客后端</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Nuyoah</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://s2.loli.net/2022/08/16/weL31EHsON5ldDU.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/08/16/weL31EHsON5ldDU.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s2.loli.net/2022/08/16/2yRjVx9gFKQaidA.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/08/16/2yRjVx9gFKQaidA.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Gitee/" style="font-size: 1.05rem;">Gitee<sup>1</sup></a><a href="/tags/JAVA/" style="font-size: 1.05rem; font-weight: 500; color: var(--anzhiyu-lighttext)">JAVA<sup>5</sup></a><a href="/tags/JS/" style="font-size: 1.05rem;">JS<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>7</sup></a><a href="/tags/Spring/" style="font-size: 1.05rem;">Spring<sup>2</sup></a><a href="/tags/hexo/" style="font-size: 1.05rem;">hexo<sup>4</sup></a><a href="/tags/win10/" style="font-size: 1.05rem;">win10<sup>1</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/" style="font-size: 1.05rem;">个人日记<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 1.05rem;">人工智能<sup>15</sup></a><a href="/tags/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E4%BA%8E%E9%80%BB%E8%BE%91/" style="font-size: 1.05rem;">数字电路于逻辑<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/" style="font-size: 1.05rem;">算法实现<sup>12</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">计算机基础<sup>13</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url">计算机基础</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>计算机基础</span></a></span></div></div><h1 class="post-title" itemprop="name headline">计算机组成原理教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-07-22T07:43:20.000Z" title="发表于 2022-07-22 15:43:20">2022-07-22</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-06-13T11:16:06.540Z" title="更新于 2023-06-13 19:16:06">2023-06-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">55.3k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>178分钟</span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为石家庄"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>石家庄</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://s2.loli.net/2022/11/21/IQmvSdtKfOAjikn.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://262259.xyz/2022/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"><header><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url">计算机基础</a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url">计算机基础</a><h1 id="CrawlerTitle" itemprop="name headline">计算机组成原理教程</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Nuyoah</span><time itemprop="dateCreated datePublished" datetime="2022-07-22T07:43:20.000Z" title="发表于 2022-07-22 15:43:20">2022-07-22</time><time itemprop="dateCreated datePublished" datetime="2023-06-13T11:16:06.540Z" title="更新于 2023-06-13 19:16:06">2023-06-13</time></header><h1 id="第一章计算机系统概述"><a class="markdownIt-Anchor" href="#第一章计算机系统概述"></a> 第一章：计算机系统概述</h1>
<h2 id="计算机的发展"><a class="markdownIt-Anchor" href="#计算机的发展"></a> 计算机的发展</h2>
<div class="tip "><p>什么是计算机系统</p>
</div>
<p>计算机系统 = 硬件 + 软件</p>
<p>计算机性能的好坏取决于“软”“硬”件的总和</p>
<p>软件：</p>
<div class="tabs" id="软件"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="软件-1">系统软件</button><button type="button" class="tab " data-href="软件-2">应用软件</button></ul><div class="tab-contents"><div class="tab-item-content active" id="软件-1"><ul>
<li>用来管理整个计算机系统</li>
<li>操作系统，数据库管理系统(DBMS）、标准程序库，网络软件、语言处理程序、服务程序</li>
</ul></div><div class="tab-item-content" id="软件-2"><ul>
<li>按任务需编制成各种程序</li>
<li>抖音，王者荣耀，迅雷…</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<div class="tip "><p>硬件的发展</p>
</div>
<table>
<thead>
<tr>
<th style="text-align:center">发展阶段</th>
<th style="text-align:center">时间</th>
<th style="text-align:center">逻辑元件</th>
<th style="text-align:center">速度（次/秒）</th>
<th style="text-align:center">内存</th>
<th style="text-align:center">外存</th>
<th>影响</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">第一代</td>
<td style="text-align:center">1946-1957</td>
<td style="text-align:center">电子管</td>
<td style="text-align:center">几千-几万</td>
<td style="text-align:center">汞延迟线，磁鼓</td>
<td style="text-align:center">穿孔卡带，纸袋</td>
<td>体积超大，耗电量超大<br />使用纸带机编程</td>
</tr>
<tr>
<td style="text-align:center">第二代</td>
<td style="text-align:center">1958-1964</td>
<td style="text-align:center">晶体管</td>
<td style="text-align:center">几万-几十万</td>
<td style="text-align:center">磁芯存储器</td>
<td style="text-align:center">磁带</td>
<td>体积、功耗降低<br/>出现面向过程的程序设计语言:FORTRAN<br />有了操作系统维形</td>
</tr>
<tr>
<td style="text-align:center">第三代</td>
<td style="text-align:center">1964-1971</td>
<td style="text-align:center">中小规模集成电路</td>
<td style="text-align:center">几十万-几百万</td>
<td style="text-align:center">半导体存储器</td>
<td style="text-align:center">磁带，磁盘</td>
<td>计算机主要用于科学计算等专业用途<br />高级语言迅速发展<br/>开始有了分时操作系统</td>
</tr>
<tr>
<td style="text-align:center">第四代</td>
<td style="text-align:center">1972-现在</td>
<td style="text-align:center">大规模，超大规模集成电路</td>
<td style="text-align:center">上千万-万亿</td>
<td style="text-align:center">半导体存储器</td>
<td style="text-align:center">磁带，磁盘，光盘，半导体存储器</td>
<td>出现许多微处理器，微型计算机</td>
</tr>
</tbody>
</table>
<ul>
<li>1947年，贝尔实验室，发明了“<span class='p red'>晶体管</span>”</li>
<li>1955年，肖克利在硅谷创建肖克利实验室股份有限公司</li>
<li>1957年，八叛徒(traitorous eight)创立仙童半导体公司.</li>
<li>1959年，仙童半导体公司发明“<span class='p red'>集成电路</span>”</li>
<li>1968年，摩尔筹人离开仙童，创立Intel</li>
<li>1969年，仙童销售部负责人桑德斯离开仙童，创立AMD</li>
</ul>
<p>摩尔定律：</p>
<ul>
<li>揭示了信息技术进步的速度</li>
<li>集成电路上可容纳的晶体管数目，约每隔18个月便会增加一倍，整体性能也将提升一倍</li>
</ul>
<p>半导体存储器的发展：</p>
<ul>
<li>1970年，仙童公司生产出第一个较大容量的半导体存储器</li>
<li>半导体存储器单芯片容量:1KB、4KB、16KB、64KB、256KB、1MB、4MB、16MB、64MB、256MB、1GB…</li>
</ul>
<div class="tip "><p>软件的发展</p>
</div>
<p>语言的发展：</p>
<ul>
<li>机器语言</li>
<li>汇编语言</li>
<li>FORTRAN</li>
<li>PASCAL</li>
<li>C++</li>
<li>JAVA</li>
</ul>
<p>操作系统的发展</p>
<ul>
<li>dos</li>
<li>windows</li>
</ul>
<div class="tip "><p>目前发展趋势</p>
</div>
<p>“两极”分化:</p>
<ul>
<li>一极是微型计算机向更微型化、网络化、高性能、多用途方向发展;</li>
<li>另一极是巨型机向更巨型化、超高速、并行处理、智能化方向发展。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/hToKM9aCJOqi67E.png" alt="image-20220920102154067" /></p>
<h2 id="计算机硬件的基本组成"><a class="markdownIt-Anchor" href="#计算机硬件的基本组成"></a> 计算机硬件的基本组成</h2>
<h3 id="早期冯诺依曼机的结构"><a class="markdownIt-Anchor" href="#早期冯诺依曼机的结构"></a> 早期冯诺依曼机的结构</h3>
<p>原先早期的计算机是ENIAC（手动接线来控制计算）</p>
<p>冯诺依曼提出<span class='p red'>存储程序</span>的概念：</p>
<ul>
<li>“存储程序”的概念是指<span class='p red'>将指令以二进制代码的形式事先输入计算机的主存储器</span>，然后按其在存储器中的首地址执行程序的第一条指令，以后就按该程序的规定顺序执行其他指令，直至程序执行结束。</li>
<li>第一台冯诺依曼计算机：EDVAC</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/caxv4KM9EAjeypk.png" alt="image-20220722155311901" /></p>
<p>冯诺依曼计算机的特点：</p>
<ol>
<li>计算机有5大部件组成</li>
<li>指令和数据以同等地位存于存储器并且可以按照地址寻访</li>
<li>指令和数据用二进制表示</li>
<li>指令由操作码和地址码组成</li>
<li>存储程序</li>
<li>
<span class='p red'>以运算器为中心</span>.
</li>
</ol>
<h3 id="现代计算机的结构"><a class="markdownIt-Anchor" href="#现代计算机的结构"></a> 现代计算机的结构</h3>
<p>现代计算机的结构：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Fn8f1BZQVbmsJEr.png" alt="image-20220722160620869" /></p>
<p>以<span class='p red'>存储器为中心</span>，解放运算器</p>
<ul>
<li>
<mark class="hl-label red">CPU</mark>  = 运算器 + 控制器
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/d4iBTeqDmVwPX2S.png" alt="image-20220920103700234" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/YDdmjSlK29qEVpe.png" alt="image-20220920103722028" /></p>
<h2 id="各个硬件的工作原理"><a class="markdownIt-Anchor" href="#各个硬件的工作原理"></a> 各个硬件的工作原理</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/tE4xcTYDL8g5QaO.png" alt="image-20220920103958342" /></p>
<h3 id="主存储器的基本组成"><a class="markdownIt-Anchor" href="#主存储器的基本组成"></a> 主存储器的基本组成</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/rn1bqNPF4EBiVAM.png" alt="image-20220920104744889" /></p>
<p>Memory Address Register(存储<span class='p red'>地址寄存器</span>)</p>
<p>Memory Data Register(存储<span class='p red'>数据存储器</span>)</p>
<ul>
<li>使用CPU从存储区中读取数据
<ul>
<li>首先需要把想要读取的数据地址放到 MAR 地址寄存器中</li>
<li>主存储器，用MAR中的地址，从存储体中找到数据，并将数据放到MDR寄存器中</li>
<li>CPU从MDR中获取数据</li>
</ul>
</li>
<li>使用CPU向存储区写入数据
<ul>
<li>首先需要把想要写入的数据地址放到 MAR 地址寄存器中，并将想要写入的数据放到MDR寄存器中</li>
<li>主存储器，用MAR中的地址，将MDR中的数据存放到MAR中</li>
</ul>
</li>
</ul>
<p>存储体的结构：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/2YGvL1XBiUWpR6m.png" alt="image-20220920144139183" /></p>
<ul>
<li>
<span class='p red'>存储单元</span>:每个存储单元存放一串二进制代码
</li>
<li>
<span class='p red'>存储字(word)</span>:存储单元中二进制代码的组合
</li>
<li>
<span class='p red'>存储字长</span>:存储单元中二进制代码的位数
</li>
<li>
<span class='p red'>存储元</span>:即存储二进制的电子元件，每个存储元可存1bit
</li>
</ul>
<p>例子：</p>
<ul>
<li>MAR = 4位 ，总共有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">2^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span> 个存储单元</li>
<li>MDR=16位，每个存储单元可以存放16bit， 一个字的大小为16bit</li>
<li>一个<span class='p red'>字节（Byte）</span> = 8bit， 1B = 1个字节， 1b = 1bit</li>
<li>字的大小由机器决定</li>
</ul>
<h3 id="运算器的基本组成"><a class="markdownIt-Anchor" href="#运算器的基本组成"></a> 运算器的基本组成</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/zRskxtZDXPKaeY6.png" alt="image-20220920145908988" /></p>
<p>运算器:用于实现算术运算（如<span class='p red'>:加减乘除</span>）、逻辑运算（如:与或非)</p>
<ul>
<li>
<span class='p red'>ACC:累加器</span>，用于存放操作数，或运算结果。
</li>
<li>
<span class='p red'>MQ:乘商寄存器</span>，在乘、除运算时，用于存放操作数或运算结果。
</li>
<li>
<span class='p red'>X：通用的操作数寄存器</span>，用于存放操作数
</li>
<li>
<span class='p red'>ALU:算术逻辑单元</span>，通过内部复杂的电路实现算数运算、逻辑运算
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">加</th>
<th style="text-align:center">减</th>
<th style="text-align:center">乘</th>
<th style="text-align:center">除</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Accumulator(ACC)</td>
<td style="text-align:center">被加数，和</td>
<td style="text-align:center">被减数，差</td>
<td style="text-align:center">乘积高位</td>
<td style="text-align:center">被除数，余数</td>
</tr>
<tr>
<td style="text-align:center">Multiple-Quotient Register(MQ)</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">乘数，乘积低位</td>
<td style="text-align:center">商</td>
</tr>
<tr>
<td style="text-align:center">Arithmetic and Logic Unit(X, ALU)</td>
<td style="text-align:center">加数</td>
<td style="text-align:center">减数</td>
<td style="text-align:center">被乘数</td>
<td style="text-align:center">除数</td>
</tr>
</tbody>
</table>
<h3 id="控制器的基本组成"><a class="markdownIt-Anchor" href="#控制器的基本组成"></a> 控制器的基本组成</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/XJeTchS2jNI7Bd5.png" alt="image-20220920150610647" /></p>
<ul>
<li>
<span class='p red'>CU(Control Unit)</span>:控制单元，分析指令，给出控制信号
</li>
<li>
<span class='p red'>lR(Instruction Register)</span>:指令寄存器,存放当前执行的指令
</li>
<li>
<span class='p red'>PC(Program Counter)</span>:程序计数器,存放下一条指令地址，有自动加1功能
</li>
</ul>
<p>完成一条指令的过程（<span class='p red'>前两步统称为取值</span> ）</p>
<ul>
<li>取指令		PC</li>
<li>分析指令     IR</li>
<li>执行指令     CU</li>
</ul>
<h3 id="计算机的工作过程"><a class="markdownIt-Anchor" href="#计算机的工作过程"></a> 计算机的工作过程</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/reJmUTwltHgvoKu.png" alt="image-20220921082336364" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/VpFIdh7i8o9w6AB.png" alt="image-20220921083017708" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/XfW3wMa5qpIiRxt.png" alt="image-20220921082942675" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/FVMURQIjGgo4i1e.png" alt="image-20220921083255543" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/dmT7lZkpLc1uJRo.png" alt="image-20220921083523352" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/lApBF4dxy5PtmfE.png" alt="image-20220921083641397" /></p>
<h2 id="计算机系统的层次结构"><a class="markdownIt-Anchor" href="#计算机系统的层次结构"></a> 计算机系统的层次结构</h2>
<p>从上到下越来越基础</p>
<ul>
<li>虚拟机器M4（高级语言程序）
<ul>
<li>用<span class='p red'>汇编程序翻译</span>成汇编语言程序</li>
<li>y = a*b+c</li>
</ul>
</li>
<li>虚拟机器M3（汇编语言程序）
<ul>
<li>用<span class='p red'>用汇编程序</span>翻译成机器语言程序</li>
<li>和机器语言是一一对应的</li>
<li>LOAD 5</li>
<li>MUL 6</li>
</ul>
</li>
<li>虚拟机器M2（操作系统机器）
<ul>
<li>向上提供“广义指令”（系统调用）</li>
</ul>
</li>
<li>传统机器M1（用机器语言的 程序）
<ul>
<li>执行二进制指令</li>
</ul>
</li>
<li>微程序机器M0（微指令系统）
<ul>
<li>由硬件直接执行微指令</li>
</ul>
</li>
</ul>
<p>M0-M1 是硬件</p>
<p>M2-M4 是软件</p>
<ul>
<li>
<span class='p red'>下层是上层的基础，上层是下层的扩展</span>
</li>
</ul>
<div class="tip "><p>三种级别的语言</p>
</div>
<ul>
<li>机器语言：二进制代码
<ul>
<li>00010101011101</li>
</ul>
</li>
<li>汇编语言：助记符
<ul>
<li>LOAD 5</li>
<li>MUL 6</li>
</ul>
</li>
<li>高级语言：C、C++
<ul>
<li>y = a*b+c</li>
</ul>
</li>
</ul>
<p>高级语言需要通过<span class='p red'>编译程序（编译器）</span> 翻译成汇编语言。</p>
<p>汇编语言通过<span class='p red'>汇编程序（汇编器）</span>翻译成机器语言</p>
<p>有的高级语言也通过<span class='p red'>编译程序（编译器）</span>直接翻译成机器语言，或者通过<span class='p red'>解释程序（解释器）</span>翻译成机器语言</p>
<ul>
<li>编译程序:将高级语言编写的源程序全部语句一次全部翻译成机器语言程序，而后再执行机器语言程序（只需翻译一次)</li>
<li>解释程序:将源程序的一条语句翻译成对应于机器语言的语句，并立即执行。紧接着再翻译下一句(每次执行都要翻译)</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/mbHW9UZVO5I83Gi.png" alt="image-20220921092210422" /></p>
<p>计算机体系结构：</p>
<ul>
<li>机器语言程序员所见到的计算机系统的属性概念性的结构与功能特性(指令系统、数据类型、寻址技术、I/O机理）</li>
<li>如何设计硬件与软件之间的接口</li>
<li>有无乘法指令</li>
</ul>
<p>计算机组成原理：</p>
<ul>
<li>实现计算机体系结构所体现的属性，对程序员“透明”(具体指令的实现）</li>
<li>如何用硬件实现所定义的接口</li>
<li>如何实现乘法指令</li>
</ul>
<h2 id="计算机性能指标"><a class="markdownIt-Anchor" href="#计算机性能指标"></a> 计算机性能指标</h2>
<h3 id="存储器性能指标"><a class="markdownIt-Anchor" href="#存储器性能指标"></a> 存储器性能指标</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/rn1bqNPF4EBiVAM.png" alt="image-20220920104744889" /></p>
<p>MAR：</p>
<ul>
<li>地址寄存器</li>
<li>MAR的位数，反应存储单元的个数（最多支持多少个）</li>
</ul>
<p>MDR</p>
<ul>
<li>数据存储器</li>
<li>MDR的位数“存储字长”，每个存储单元的大小</li>
</ul>
<p>总容量</p>
<ul>
<li>存储单元个数x存储字长bit 1Byte = 8bit</li>
<li>存储单元个数×存储字长/8 Byte</li>
</ul>
<p>Eg：MAR为32位，MDR为8位， 总容量： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup><mo>∗</mo><mn>8</mn><mi>b</mi><mi>i</mi><mi>t</mi><mo>=</mo><mn>4</mn><mi>G</mi></mrow><annotation encoding="application/x-tex">2^{32}*8bit=4G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord mathdefault">G</span></span></span></span></p>
<table>
<thead>
<tr>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
<th style="text-align:center">6</th>
<th style="text-align:center">7</th>
<th style="text-align:center">8</th>
<th style="text-align:center">9</th>
<th>10</th>
<th style="text-align:center">11</th>
<th style="text-align:center">12</th>
<th style="text-align:center">13</th>
<th style="text-align:center">14</th>
<th style="text-align:center">15</th>
<th style="text-align:center">16</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">4</td>
<td style="text-align:center">8</td>
<td style="text-align:center">16</td>
<td style="text-align:center">32</td>
<td style="text-align:center">64</td>
<td style="text-align:center">128</td>
<td style="text-align:center">256</td>
<td style="text-align:center">512</td>
<td>1024</td>
<td style="text-align:center">2048</td>
<td style="text-align:center">4096</td>
<td style="text-align:center">8192</td>
<td style="text-align:center">16384</td>
<td style="text-align:center">32768</td>
<td style="text-align:center">65536</td>
</tr>
</tbody>
</table>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>10</mn></msup><mo>:</mo><mi>k</mi><mo separator="true">,</mo><msup><mn>2</mn><mn>20</mn></msup><mo>:</mo><mi>M</mi><mo separator="true">,</mo><msup><mn>2</mn><mn>30</mn></msup><mo>:</mo><mi>G</mi><mo separator="true">,</mo><msup><mn>2</mn><mn>40</mn></msup><mo>:</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">2^{10}:k, 2^{20}:M, 2^{30}:G, 2^{40}:T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span></span></p>
<h3 id="cpu性能指标"><a class="markdownIt-Anchor" href="#cpu性能指标"></a> CPU性能指标</h3>
<p>CPU主频：CPU内数字脉冲信号振荡的频率</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/PBkiROQ4FYcEzwZ.png" alt="image-20220921095601648" /></p>
<ul>
<li>
<span class='p red'>CPU主频(时钟频率)</span> = 1/CPU时钟周期， 单位：赫兹， Hz
</li>
<li>
<span class='p red'>CPI (Clock cycle Per Instruction)</span>:执行一条指令所需要的周期数
<ul>
<li>不同指令，CPI不同，甚至相同的指令，CPI也可能出现变化</li>
</ul>
</li>
<li>
<span class='p red'>执行一条指令的耗时</span>=CPI*CPU时钟周期
</li>
</ul>
<div class="tip warning"><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi>K</mi><mi>h</mi><mi>z</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mi>h</mi><mi>z</mi><mo separator="true">,</mo><mn>1</mn><mi>M</mi><mi>h</mi><mi>z</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mi>h</mi><mi>z</mi><mo separator="true">,</mo><mn>1</mn><mi>G</mi><mi>h</mi><mi>z</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mi>h</mi><mi>z</mi><mo separator="true">,</mo><mn>1</mn><mi>T</mi><mi>h</mi><mi>z</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup><mi>h</mi><mi>z</mi><mo separator="true">,</mo><mn>1</mn><mi>P</mi><mi>h</mi><mi>z</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>15</mn></msup><mi>h</mi><mi>z</mi><mo separator="true">,</mo><mn>1</mn><mi>E</mi><mi>h</mi><mi>z</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup><mi>h</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">1Khz=10^3hz,1Mhz=10^6hz,1Ghz=10^9hz,1Thz=10^{12}hz,1Phz=10^{15}hz,1Ehz=10^{18}hz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord mathdefault">G</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">5</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">8</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></p>
</div>
<div class="tip warning"><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mi>m</mi><mi>s</mi><mo stretchy="false">(</mo><mi mathvariant="normal">毫</mi><mi mathvariant="normal">秒</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mi>μ</mi><mi>s</mi><mo stretchy="false">(</mo><mi mathvariant="normal">微</mi><mi mathvariant="normal">秒</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mi>n</mi><mi>s</mi><mo stretchy="false">(</mo><mi mathvariant="normal">纳</mi><mi mathvariant="normal">秒</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup><mi>p</mi><mi>s</mi><mo stretchy="false">(</mo><mi mathvariant="normal">皮</mi><mi mathvariant="normal">秒</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>15</mn></msup><mi>f</mi><mi>s</mi><mo stretchy="false">(</mo><mi mathvariant="normal">飞</mi><mi mathvariant="normal">秒</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup><mi>a</mi><mi>s</mi><mo stretchy="false">(</mo><mi mathvariant="normal">阿</mi><mi mathvariant="normal">秒</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>21</mn></msup><mi>z</mi><mi>m</mi><mo stretchy="false">(</mo><mi mathvariant="normal">仄</mi><mi mathvariant="normal">秒</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>24</mn></msup><mi>y</mi><mi>m</mi><mo stretchy="false">(</mo><mi mathvariant="normal">幺</mi><mi mathvariant="normal">秒</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">1s=10^3ms(毫秒)=10^6μs(微秒)=10^9ns(纳秒)=10^{12}ps(皮秒)=10^{15}fs(飞秒)=10^{18}as(阿秒)=10^{21}zm(仄秒)=10^{24}ym(幺秒)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord cjk_fallback">毫</span><span class="mord cjk_fallback">秒</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord cjk_fallback">微</span><span class="mord cjk_fallback">秒</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord cjk_fallback">纳</span><span class="mord cjk_fallback">秒</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord cjk_fallback">皮</span><span class="mord cjk_fallback">秒</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">5</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord cjk_fallback">飞</span><span class="mord cjk_fallback">秒</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">8</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord cjk_fallback">阿</span><span class="mord cjk_fallback">秒</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">m</span><span class="mopen">(</span><span class="mord cjk_fallback">仄</span><span class="mord cjk_fallback">秒</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault">m</span><span class="mopen">(</span><span class="mord cjk_fallback">幺</span><span class="mord cjk_fallback">秒</span><span class="mclose">)</span></span></span></span></p>
</div>
<p>Eg:某CPU主频为1000Hz，某程序包含100条指令，平均来看指令的CPI=3，该程序在该CPU上执行需要多久?</p>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>100</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>1</mn><mo>÷</mo><mn>1000</mn><mo>=</mo><mn>0.3</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">100\times3\times1\div1000=0.3s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord mathdefault">s</span></span></span></span></p>
</li>
<li>
<span class='p red'>CPU执行时间</span>（整个程序的耗时）=CPU时钟周期数/主频=(指令条数*CPI)/主频
</li>
<li>
<span class='p red'>IPS(Instructions Per Second)</span>: 每秒执行多少指令      IPS = 主频/平均CPI
<ul>
<li>KIPS</li>
<li>MIPS</li>
</ul>
</li>
<li>
<span class='p red'>FLOPS (Floating-point Operations Per Second)</span>: 每秒执行多少次浮点运算
<ul>
<li>KFLOPS</li>
<li>MFLOPS</li>
<li>GFLOPS</li>
<li>TFLOPS</li>
<li>此处K、M、G、工为数量单位K=Kilo=千=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>，M=Million=百万=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">10^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span>，G=Giga=十亿=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>，T=Tera=万亿=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">10^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
</ul>
<h3 id="系统整体性能指标"><a class="markdownIt-Anchor" href="#系统整体性能指标"></a> 系统整体性能指标</h3>
<ul>
<li>
<span class='p red'>数据通路带宽</span>:数据总线一次所能并行传送信息的位数（各硬件部件通过数据总线传输数据)
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/litwW21IHa5JBPq.png" alt="image-20220921103004467" /></p>
<ul>
<li>
<span class='p red'>吞吐量</span>:指系统在单位时间内处理请求的数量。它取决于信息能多快地输入内存，CPU能多快地取指令，数据能多快地从内存取出或存入，以及所得结果能多快地从内存送给一台外部设备。这些步骤中的每一步都关系到主存，因此，系统吞吐量主要取决于主存的存取周期。
</li>
<li>
<span class='p red'>响应时向</span>:指从用户向计算机发送一个请求，到系统对该请求做出响应并获得它所需要的结果的等待时间。
<ul>
<li>通常包括CPU时间（运行一个程序所花费的时间）与等待时间（用于磁盘访问、存储器访问、I/O操作、操作系统开销等时间)。</li>
</ul>
</li>
<li>
<span class='p red'>基准程序</span>:是用来测量计算机处理速度的一种实用程序，以便于被测量的计算机性能可以与运行相同程序的其它计算机性能进行比较。
</li>
</ul>
<p>Eg:</p>
<ul>
<li>问:主频高的CPU一定比主频低的CPU快吗?<br />
不一定，如两个CPU，A的主频为2GHz，平均CPI=10;B的主频1GHz，平均CPI=1…</li>
<li>问:若A、B两个CPU的平均CPI相同，那么A一定更快吗?<br />
也不一定，还要看指令系统，如A不支持乘法指令，只能用多次加法实现乘法;而B支持乘法指令。</li>
<li>问:基准程序执行得越快说明机器性能越好吗?<br />
基准程序中的语句存在频度差异，运行结果也不能完全说明问题</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/onztDuFceCi8ahj.png" alt="image-20220921103612021" /></p>
<h1 id="第二章数据的表示和运算"><a class="markdownIt-Anchor" href="#第二章数据的表示和运算"></a> 第二章：数据的表示和运算</h1>
<h2 id="进位计数制"><a class="markdownIt-Anchor" href="#进位计数制"></a> 进位计数制</h2>
<p>古印度人发明了阿拉伯数字：1,2,3,4,5,6,7,8,9,0，反应了符号位的权重</p>
<ul>
<li>
<span class='p red'>基数</span>：每个数码位所用到的不同符号的个数，r进制的基数为r
</li>
<li>二进制: 0,1</li>
<li>八进制：0,1,2,3,4,5,6,7</li>
<li>十进制：0,1,2,3,4,5,6,7,8,9</li>
<li>十六进制：0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F</li>
</ul>
<p>计算机一般使用二进制来表示：</p>
<ul>
<li>可使用两个稳定状态的物理器件表示</li>
<li>0，1正好对应逻辑值假、真。方便实现逻辑运算</li>
<li>可很方便地使用逻辑门电路实现算术运算</li>
</ul>
<div class="tip "><p>任意进制转换成10进制</p>
</div>
<ul>
<li>每一位的数据乘上该位的位权</li>
<li>二进制:10010010.110                 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>×</mo><msup><mn>2</mn><mn>7</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mn>2</mn><mn>4</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>2</mn></mrow></msup><mo>=</mo><mn>146.75</mn></mrow><annotation encoding="application/x-tex">1 \times 2^7 +1 \times 2^4+1 \times2^1+1\times 2^{-1}+1 \times 2^{-2}=146.75</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">4</span><span class="mord">6</span><span class="mord">.</span><span class="mord">7</span><span class="mord">5</span></span></span></span><br />
八进制:251.5                                <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>×</mo><msup><mn>8</mn><mn>2</mn></msup><mo>+</mo><mn>5</mn><mo>×</mo><msup><mn>8</mn><mn>1</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mn>8</mn><mn>0</mn></msup><mo>+</mo><mn>5</mn><mo>×</mo><msup><mn>8</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>168.625</mn></mrow><annotation encoding="application/x-tex">2\times8^2 +5\times8^1+1\times8^0+5\times8^{-1} = 168.625</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">8</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">8</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">8</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">8</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">8</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span></span></span></span><br />
十六进制: AE86.1                         <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn><mo>×</mo><mn>1</mn><msup><mn>6</mn><mn>3</mn></msup><mo>+</mo><mn>14</mn><mo>×</mo><mn>1</mn><msup><mn>6</mn><mn>2</mn></msup><mo>+</mo><mn>8</mn><mo>×</mo><mn>1</mn><msup><mn>6</mn><mn>1</mn></msup><mo>+</mo><mn>6</mn><mo>×</mo><mn>1</mn><msup><mn>6</mn><mn>0</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><mn>1</mn><msup><mn>6</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>44678.0625</mn></mrow><annotation encoding="application/x-tex">10\times16^3+ 14\times16^2+8\times16^1+6\times16^0+1\times16^{-1} = 44678.0625</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">4</span><span class="mord">6</span><span class="mord">7</span><span class="mord">8</span><span class="mord">.</span><span class="mord">0</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span></span></span></span></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">-3</th>
<th style="text-align:center">-2</th>
<th style="text-align:center">-1</th>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
<th style="text-align:center">6</th>
<th style="text-align:center">7</th>
<th style="text-align:center">8</th>
<th style="text-align:center">9</th>
<th>10</th>
<th style="text-align:center">11</th>
<th style="text-align:center">12</th>
<th style="text-align:center">13</th>
<th style="text-align:center">14</th>
<th style="text-align:center">15</th>
<th style="text-align:center">16</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0.125</td>
<td style="text-align:center">0.25</td>
<td style="text-align:center">0.5</td>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">4</td>
<td style="text-align:center">8</td>
<td style="text-align:center">16</td>
<td style="text-align:center">32</td>
<td style="text-align:center">64</td>
<td style="text-align:center">128</td>
<td style="text-align:center">256</td>
<td style="text-align:center">512</td>
<td>1024</td>
<td style="text-align:center">2048</td>
<td style="text-align:center">4096</td>
<td style="text-align:center">8192</td>
<td style="text-align:center">16384</td>
<td style="text-align:center">32768</td>
<td style="text-align:center">65536</td>
</tr>
</tbody>
</table>
<div class="tip "><p>二进制 &lt;-&gt; 八进制，十六进制</p>
</div>
<ul>
<li>
<mark class="hl-label red">二进制→八进制</mark> 
<ul>
<li>如: 1111000010.01101二进制→八进制</li>
<li>3位一组，每组转换成对应的八进制符号</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">二进制</th>
<th style="text-align:center">001</th>
<th style="text-align:center">111</th>
<th style="text-align:center">000</th>
<th style="text-align:center">010</th>
<th style="text-align:center">.</th>
<th style="text-align:center">011</th>
<th style="text-align:center">010</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">八进制</td>
<td style="text-align:center">1</td>
<td style="text-align:center">7</td>
<td style="text-align:center">0</td>
<td style="text-align:center">2</td>
<td style="text-align:center">.</td>
<td style="text-align:center">3</td>
<td style="text-align:center">2</td>
</tr>
</tbody>
</table>
<ul>
<li>
<mark class="hl-label red">二进制→十六进制</mark> 
<ul>
<li>如: 1111000010.01101二进制→十六进制</li>
<li>4位一组，每组转换成对应的十六进制符号</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">二进制</th>
<th style="text-align:center">0011</th>
<th style="text-align:center">1100</th>
<th style="text-align:center">0010</th>
<th style="text-align:center">.</th>
<th style="text-align:center">0110</th>
<th style="text-align:center">1000</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">十六进制</td>
<td style="text-align:center">3</td>
<td style="text-align:center">C</td>
<td style="text-align:center">2</td>
<td style="text-align:center">.</td>
<td style="text-align:center">6</td>
<td style="text-align:center">8</td>
</tr>
</tbody>
</table>
<ul>
<li>
<mark class="hl-label red">八进制→二进制</mark> 
<ul>
<li>如: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>251.</mn><msub><mn>5</mn><mn>8</mn></msub></mrow><annotation encoding="application/x-tex">251.5_8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">1</span><span class="mord">.</span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>→二进制</li>
<li>3位一组，每组转换成对应的八进制符号</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">八进制</th>
<th style="text-align:center">2</th>
<th style="text-align:center">5</th>
<th style="text-align:center">1</th>
<th style="text-align:center">.</th>
<th style="text-align:center">5</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">二进制</td>
<td style="text-align:center">010</td>
<td style="text-align:center">101</td>
<td style="text-align:center">001</td>
<td style="text-align:center">.</td>
<td style="text-align:center">101</td>
</tr>
</tbody>
</table>
<ul>
<li>
<mark class="hl-label red">十六进制→二进制</mark> 
<ul>
<li>如: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>E</mi><mn>86.</mn><msub><mn>1</mn><mn>16</mn></msub></mrow><annotation encoding="application/x-tex">AE86.1_{16}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">8</span><span class="mord">6</span><span class="mord">.</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>→二进制</li>
<li>4位一组，每组转换成对应的十六进制符号</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">十六进制</th>
<th style="text-align:center">A</th>
<th style="text-align:center">E</th>
<th style="text-align:center">8</th>
<th style="text-align:center">6</th>
<th style="text-align:center">.</th>
<th style="text-align:center">1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">二进制</td>
<td style="text-align:center">1010</td>
<td style="text-align:center">1110</td>
<td style="text-align:center">1000</td>
<td style="text-align:center">0110</td>
<td style="text-align:center">.</td>
<td style="text-align:center">0001</td>
</tr>
</tbody>
</table>
<div class="tip "><p>十进制→任意进制</p>
</div>
<ul>
<li>基本方法
<ul>
<li>整数：<span class='p red'>除基取余法</span></li>
<li>小数：<span class='p red'>乘基取整法</span></li>
</ul>
</li>
<li>进阶方法：
<ul>
<li>拼凑法</li>
<li>260.75 = 256 + 4  + 0.5 + 0.25   =&gt; 100000100.11</li>
</ul>
</li>
</ul>
<div class="tip "><p>真值和机器数</p>
</div>
<p>+15 = 0   1111  真值  机器数</p>
<p>-8  =   1   1000</p>
<p>真值：符合人类习惯的数字<br />
机器数：数字实际存到机器里的形式，正负号需要被“数字化”</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/olJ9z2vQLxykUsd.png" alt="image-20220921150806305" /></p>
<h2 id="bcd码-binary-coded-decimal"><a class="markdownIt-Anchor" href="#bcd码-binary-coded-decimal"></a> BCD码 （Binary-Coded Decimal）</h2>
<div class="tip "><p>用二进制编码的十进制</p>
</div>
<h3 id="8421码"><a class="markdownIt-Anchor" href="#8421码"></a> 8421码</h3>
<p>二进制：0，1，														方便计算机处理</p>
<p>十进制：0，1，2，3，4，5，6，7，8，9			符合人类习惯</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>n</mi></msub><mo>×</mo><msup><mi>r</mi><mi>n</mi></msup><mo>+</mo><msub><mi>K</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>×</mo><msup><mi>r</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mo>⋅</mo><mo>⋅</mo><mo>⋅</mo><mo>+</mo><msub><mi>K</mi><mn>2</mn></msub><mo>×</mo><msup><mi>r</mi><mn>2</mn></msup><mo>+</mo><msub><mi>K</mi><mn>1</mn></msub><mo>×</mo><msup><mi>r</mi><mn>1</mn></msup><mo>+</mo><mi>K</mi><mn>0</mn><mo>×</mo><msup><mi>r</mi><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">K_n \times r^n + K_{n-1} \times r^{n-1}+\cdot\cdot\cdot+K_2 \times r^2+ K_1 \times r^1+ K0 \times r^0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.7977219999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.947438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>转换麻烦</p>
<p>快速转换:一一对应			BCD : Binary-Coded Decimal</p>
<ul>
<li>
<mark class="hl-label red">8421码的映射关系</mark> 
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
<th style="text-align:center">6</th>
<th style="text-align:center">7</th>
<th style="text-align:center">8</th>
<th style="text-align:center">9</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0000</td>
<td style="text-align:center">0001</td>
<td style="text-align:center">0010</td>
<td style="text-align:center">0011</td>
<td style="text-align:center">0100</td>
<td style="text-align:center">0101</td>
<td style="text-align:center">0110</td>
<td style="text-align:center">0111</td>
<td style="text-align:center">1000</td>
<td style="text-align:center">1001</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/28U7IA6L3tdFmPx.png" alt="image-20220921161044764" /></p>
<h3 id="余三码"><a class="markdownIt-Anchor" href="#余三码"></a> 余三码</h3>
<ul>
<li>
<mark class="hl-label red">余三码8421+$0011_2$</mark> 
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
<th style="text-align:center">6</th>
<th style="text-align:center">7</th>
<th style="text-align:center">8</th>
<th style="text-align:center">9</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0011</td>
<td style="text-align:center">0100</td>
<td style="text-align:center">0101</td>
<td style="text-align:center">0110</td>
<td style="text-align:center">0111</td>
<td style="text-align:center">1000</td>
<td style="text-align:center">1001</td>
<td style="text-align:center">1010</td>
<td style="text-align:center">1011</td>
<td style="text-align:center">1100</td>
</tr>
</tbody>
</table>
<h3 id="2421码"><a class="markdownIt-Anchor" href="#2421码"></a> 2421码</h3>
<mark class="hl-label red">2421码改变权值定义</mark> 
<table>
<thead>
<tr>
<th style="text-align:center">0</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
<th style="text-align:center">6</th>
<th style="text-align:center">7</th>
<th style="text-align:center">8</th>
<th style="text-align:center">9</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0000</td>
<td style="text-align:center">0001</td>
<td style="text-align:center">0010</td>
<td style="text-align:center">0011</td>
<td style="text-align:center">0100</td>
<td style="text-align:center">1011</td>
<td style="text-align:center">1100</td>
<td style="text-align:center">1101</td>
<td style="text-align:center">1110</td>
<td style="text-align:center">1111</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/6NiHQWRCc2kZlaU.png" alt="image-20220921161538749" /></p>
<h2 id="字符与字符串"><a class="markdownIt-Anchor" href="#字符与字符串"></a> 字符与字符串</h2>
<h3 id="英文字符在计算机内的表示"><a class="markdownIt-Anchor" href="#英文字符在计算机内的表示"></a> 英文字符在计算机内的表示</h3>
<div class="tip "><p>ASCII码</p>
</div>
<p>数字，字母，符号 →  一共128个字符  → 7位二进制编码即可</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/17sGHFMADfpXuWn.png" alt="image-20220921163034679" /></p>
<div class="tip "><p>例题</p>
</div>
<p>例1:已知‘A’的ASCII码值为65，字符‘H’存放在某存储单元M中，求M中存放的内容。</p>
<ul>
<li>首先明确，M中存放的是‘H’的ASCIlI码(二进制形式)。</li>
<li>再由‘A’的码值推出‘H’的码值:</li>
<li>思路1.
<ul>
<li>A是第1个字母，H是第8个字母，则H的码值=65+(8-1)= 72</li>
<li>72对应二进制为100 1000，故M中存放的内容为0100 1000</li>
</ul>
</li>
<li>思路2.
<ul>
<li>A的码值65写成二进制为0100 0001，A是第1个字母</li>
<li>H是第8个字母，故对应0100 1000，M中存放内容为0100 1000</li>
</ul>
</li>
</ul>
<p>例2:已知‘h’的ASCI码值为104，字符‘a’存放在存储单元M1中，字符‘z’存放在存储单元M2中，求M1、M2中存放的内容。</p>
<ul>
<li>a : 104-(8-1)=97—&gt;M1中内容为0110 0001</li>
<li>z : 104+(26-8)=122→M2中内容为0111 1010</li>
</ul>
<h3 id="中文字符在计算机内的表示"><a class="markdownIt-Anchor" href="#中文字符在计算机内的表示"></a> 中文字符在计算机内的表示</h3>
<p>GB 2312-80：汉字 + 各种符号共7445个</p>
<ul>
<li>
<span class='p green'>区位码</span> 直观，方便人类理解
<ul>
<li>94个区，每区94个位置</li>
<li>啊 ： 16      01，表明“啊”这个汉字在区位码中的第16个区，第一个位置</li>
</ul>
</li>
<li>
<span class='p red'>国标码</span>， 防止信息交换的时候与“控制/通讯字符”冲突
<ul>
<li>将区位码转换成16进制</li>
<li>都加上20H，防止信息交换的时候与“控制/通讯字符”冲突，因为ASCII码前32个为“控制/通讯字符”</li>
<li>16    01  → 10H   01H   →(+20H)   30H   21H</li>
</ul>
</li>
<li>
<span class='p red'>机内码</span>
<ul>
<li>在国标码之上加上80H</li>
</ul>
</li>
<li>
<p>汉字的输入</p>
<ul>
<li>通过输入法软件将我们<span class='p red'>输入编码</span>转换成国标码，然后通过系统或者应用软件将国标码转换成汉字内码</li>
</ul>
</li>
<li>
<p>汉字的输出</p>
<ul>
<li>将汉字内码转换成字形码</li>
<li>或者将汉字内码转换成国标码，然后再有国标码转换成汉字形码</li>
</ul>
</li>
</ul>
<h3 id="字符串的存储"><a class="markdownIt-Anchor" href="#字符串的存储"></a> 字符串的存储</h3>
<div class="tip "><p>英文字符</p>
</div>
<p>某计算机按字节编址，从地址为2的单元开始，存储字符串“abc”</p>
<ul>
<li>
<p>各字符的ASCII编码</p>
<ul>
<li>a: 0110 0001 = 61H</li>
<li>b: 0110 0010= 62H</li>
<li>c: 0110 0011= 63H</li>
<li>\0: 0000 0000= O0H      很多语言中，’\0’作为字符串结尾标志</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/fDlO8UoXH1kYdJy.png" alt="image-20220922085342804" /></p>
</li>
</ul>
<div class="tip "><p>中文字符</p>
</div>
<p>某计算机按字节编址，从地址为2的单元开始，存储字符串“abc啊”</p>
<ul>
<li>各字符的ASCII编码
<ul>
<li>a: 0110 0001 = 61H</li>
<li>b: 0110 0010= 62H</li>
<li>c: 0110 0011= 63H</li>
<li>啊: 机内码=B0 A1 H</li>
<li>\0: 0000 0000= O0H      很多语言中，’\0’作为字符串结尾标志</li>
</ul>
</li>
<li>在所有计算机中，<span class='p red'>多字节数据</span>都被<span class='p red'>存放在连续的字节序列</span>中。根据数据中各字节的排列顺序不同，可能有“大端模式”、“小端模式”</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/i7xyV9sogvY2OK1.png" alt="image-20220922085943593" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/AGnRCgIDvtr3aPX.png" alt="image-20220922085602634" /></p>
<h2 id="数据校验码"><a class="markdownIt-Anchor" href="#数据校验码"></a> 数据校验码</h2>
<h3 id="校验原理"><a class="markdownIt-Anchor" href="#校验原理"></a> 校验原理</h3>
<p>在两台计算机发送文件的时候，可能由于某种环境影响，导致某个二进制为发生突变</p>
<p>Eg1：	码距为1</p>
<table>
<thead>
<tr>
<th style="text-align:center">信息</th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">编码</td>
<td style="text-align:center">00</td>
<td style="text-align:center">01</td>
<td style="text-align:center">10</td>
<td style="text-align:center">11</td>
</tr>
</tbody>
</table>
<p>如果我们再发送A的时候，第一位二进制码发生突变，变成了1，那么<span class='p red'>接收方接收到的字符是C</span>这样就会出现错误</p>
<p>Eg2： 码距为2</p>
<table>
<thead>
<tr>
<th style="text-align:center">信息</th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">编码</td>
<td style="text-align:center">100</td>
<td style="text-align:center">001</td>
<td style="text-align:center">010</td>
<td style="text-align:center">111</td>
</tr>
</tbody>
</table>
<p>如果我们在原先的基础上加上一个字符，那么我们在传送A的时候，不管哪一位发生突变，<span class='p red'>我们都能发现这个数据错误了</span>.</p>
<p>由若干位代码组成的一个字叫<span class='p red'>码字</span>。</p>
<p>将两个码字逐位进行对比，具有不同的位的个数称为<span class='p red'>两个码字间的距离</span>。</p>
<p>一种编码方案可能有若干个合法码字，各合法码字间的最小距离称为&quot;<span class='p red'>码距</span>&quot;。</p>
<p>当d=1时，无检错能力;当d=2时，有检错能力;当d≥3时，若设计合理，可能具有检错、纠错能力</p>
<h3 id="奇偶校验码"><a class="markdownIt-Anchor" href="#奇偶校验码"></a> 奇偶校验码</h3>
<p>奇校验码:整个校验码（有效信息位和校验位）中“1&quot;的个数为奇数。</p>
<p>偶校验码:整个校验码（有效信息位和校验位）中“1”的个数为偶数。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Qbwms4yTtcB2S8r.png" alt="image-20220922091957008" /></p>
<p>Eg：</p>
<p>给出两个编码1001101和1010111的奇校验码和偶校验码。设最高位为校验位，余7位是信息位，则对应的奇偶校验码为:</p>
<ul>
<li>奇校验:
<ul>
<li>
<span class='p red'>1</span>1001101
</li>
<li>
<span class='p red'>0</span>1010111
</li>
</ul>
</li>
<li>偶校验:
<ul>
<li>
<span class='p red'>0</span>1001101
</li>
<li>
<span class='p red'>1</span>1010111
</li>
</ul>
</li>
<li>偶校验的硬件实现:
<ul>
<li>各信息进行异或（模2加）运算，得到的结果即为偶校验位</li>
<li>异或 ⊕
<ul>
<li>0⊕0 = 0</li>
<li>0⊕1 = 1</li>
<li>1⊕0 = 1</li>
<li>1⊕1 = 0</li>
</ul>
</li>
<li>求偶校验位:
<ul>
<li>1⊕0⊕0⊕1⊕1⊕0⊕1=0</li>
<li>1⊕0⊕1⊕0⊕1⊕1⊕1=1</li>
</ul>
</li>
<li>进行偶校验（所有位进行异或，若结果为1说明出错)
<ul>
<li>0⊕1⊕0⊕0⊕1⊕1⊕0⊕1=0</li>
<li>1⊕1⊕0⊕1⊕0⊕1⊕1⊕0=1 <span class='p red'>错误</span></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/e1CsxXEwau3YKqQ.png" alt="image-20220922092856685" /></p>
<h3 id="海明校验码"><a class="markdownIt-Anchor" href="#海明校验码"></a> 海明校验码</h3>
<p>理查德·卫斯里·汉明	Richard Hamming	<span class='p red'>图灵奖</span></p>
<div class="tip "><p>设计思路</p>
</div>
<p>将信息位<span class='p red'>分组</span>进行<span class='p red'>偶校验</span>→多个校验位→多个校验位标注出错位置</p>
<p>多个校验位能携带多种状态信息，(对/错，错在哪)</p>
<ul>
<li>
<span class='p red'>校验位数的确定</span>
<ul>
<li>设我们有 n 个信息位， k 个检验位  一共有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>种状态</li>
<li>信息位 + 校验位 = n+k，其中每一位都可能出错</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup><mo>≥</mo><mi>n</mi><mo>+</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^k≥n+k+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.985078em;vertical-align:-0.13597em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
</ul>
</li>
</ul>
<div class="tip "><p>海明码的求解步骤</p>
</div>
<p>信息位：1010</p>
<ol>
<li>
<p>确定海明码的位数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup><mo>≥</mo><mi>n</mi><mo>+</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^k≥n+k+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.985078em;vertical-align:-0.13597em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> ， n = 4，k = 3</p>
<p>设信息位<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>4</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mn>1010</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D_4D_3D_2D_1(1010)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mclose">)</span></span></span></span>，共4位，校验位<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>3</mn></msub><msub><mi>P</mi><mn>3</mn></msub><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_3P_3P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，共3位，对应的海明码为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mn>7</mn></msub><msub><mi>H</mi><mn>6</mn></msub><msub><mi>H</mi><mn>5</mn></msub><msub><mi>H</mi><mn>4</mn></msub><msub><mi>H</mi><mn>3</mn></msub><msub><mi>H</mi><mn>2</mn></msub><msub><mi>H</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">H_7H_6H_5H_4H_3H_2H_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p>
</li>
<li>
<p>确定校验位的分布</p>
</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">H7</th>
<th style="text-align:center">H6</th>
<th style="text-align:center">H5</th>
<th style="text-align:center">H4</th>
<th style="text-align:center">H3</th>
<th style="text-align:center">H2</th>
<th style="text-align:center">H1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">D4</td>
<td style="text-align:center">D3</td>
<td style="text-align:center">D2</td>
<td style="text-align:center">P3</td>
<td style="text-align:center">D1</td>
<td style="text-align:center">P2</td>
<td style="text-align:center">P1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center"></td>
<td style="text-align:center">0</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>校验位<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，放在海明位号为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.824664em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>的位置上</p>
<p>信息位按顺序放到其余位置</p>
<ol start="3">
<li>
<p>求校验位的值</p>
<p>先把数据位的下表改成二进制：</p>
<p>D1: H3	→ 011</p>
<p>D2: H5	→ 101</p>
<p>D3: H6	→ 110</p>
<p>D4: H7	→ 111</p>
<p>三个分组,分别进行偶校验</p>
<p>P1代表2进制中的第一位 P1 = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mn>3</mn></msub><msub><mi>H</mi><mn>5</mn></msub><msub><mi>H</mi><mn>7</mn></msub></mrow><annotation encoding="application/x-tex">H_3H_5H_7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">D_1D_2D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 0⊕1⊕1 = 0</p>
<p>P2代表2进制中的第二位 P2 = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mn>3</mn></msub><msub><mi>H</mi><mn>6</mn></msub><msub><mi>H</mi><mn>7</mn></msub></mrow><annotation encoding="application/x-tex">H_3H_6H_7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">D_1D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 0⊕0⊕1 = 1</p>
<p>P3代表2进制中的第三位 P3 = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mn>5</mn></msub><msub><mi>H</mi><mn>6</mn></msub><msub><mi>H</mi><mn>7</mn></msub></mrow><annotation encoding="application/x-tex">H_5H_6H_7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">D_2D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 1⊕0⊕1 = 0</p>
</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">H7</th>
<th style="text-align:center">H6</th>
<th style="text-align:center">H5</th>
<th style="text-align:center">H4</th>
<th style="text-align:center">H3</th>
<th style="text-align:center">H2</th>
<th style="text-align:center">H1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">D4</td>
<td style="text-align:center">D3</td>
<td style="text-align:center">D2</td>
<td style="text-align:center">P3</td>
<td style="text-align:center">D1</td>
<td style="text-align:center">P2</td>
<td style="text-align:center">P1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<ol start="4">
<li>纠错</li>
</ol>
<p>​		校验方程：</p>
<p>​		<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>1</mn></msub><mo>=</mo><msub><mi>P</mi><mn>1</mn></msub><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_1 = P_1D_1D_2D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>​		<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>2</mn></msub><mo>=</mo><msub><mi>P</mi><mn>2</mn></msub><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_2 = P_2D_1D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>​		<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>3</mn></msub><mo>=</mo><msub><mi>P</mi><mn>3</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_3 = P_3D_2D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>​		接收到：1010010</p>
<p>​		 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>1</mn></msub><mo>=</mo><msub><mi>P</mi><mn>1</mn></msub><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">S_1 = P_1D_1D_2D_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 0⊕0⊕1⊕1 = 0</p>
<p>​		<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>2</mn></msub><mo>=</mo><msub><mi>P</mi><mn>2</mn></msub><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_2 = P_2D_1D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 1⊕0⊕0⊕1 = 0</p>
<p>​		<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>3</mn></msub><mo>=</mo><msub><mi>P</mi><mn>3</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_3 = P_3D_2D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 0⊕1⊕0⊕1 = 0</p>
<p>​		接收到：10100<span class='p red'>0</span>0</p>
<p>​		 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>1</mn></msub><mo>=</mo><msub><mi>P</mi><mn>1</mn></msub><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">S_1 = P_1D_1D_2D_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 0⊕0⊕1⊕1 = 0</p>
<p>​		<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>2</mn></msub><mo>=</mo><msub><mi>P</mi><mn>2</mn></msub><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_2 = P_2D_1D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = <span class='p red'>0</span>⊕0⊕0⊕1 = <span class='p red'>1</span>.</p>
<p>​		<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>3</mn></msub><mo>=</mo><msub><mi>P</mi><mn>3</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_3 = P_3D_2D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 0⊕1⊕0⊕1 = 0</p>
<p>​		010出错 我们从表中得到010(2)这个位置出错</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/KvWbJ8BatHGId5f.png" alt="image-20220922101725547" /></p>
 <div class="tip "><p>全校验位</p>
</div>
<p>海明码的检错、纠错能力:</p>
<ul>
<li>纠错能力—(1位)</li>
<li>检错能力一(2位)</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">H7</th>
<th style="text-align:center">H6</th>
<th style="text-align:center">H5</th>
<th style="text-align:center">H4</th>
<th style="text-align:center">H3</th>
<th style="text-align:center">H2</th>
<th style="text-align:center">H1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">D4</td>
<td style="text-align:center">D3</td>
<td style="text-align:center">D2</td>
<td style="text-align:center">P3</td>
<td style="text-align:center">D1</td>
<td style="text-align:center">P2</td>
<td style="text-align:center">P1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>校验方程：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>1</mn></msub><mo>=</mo><msub><mi>P</mi><mn>1</mn></msub><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">S_1 = P_1D_1D_2D_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>2</mn></msub><mo>=</mo><msub><mi>P</mi><mn>2</mn></msub><msub><mi>D</mi><mn>1</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_2 = P_2D_1D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>3</mn></msub><mo>=</mo><msub><mi>P</mi><mn>3</mn></msub><msub><mi>D</mi><mn>2</mn></msub><msub><mi>D</mi><mn>3</mn></msub><msub><mi>D</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_3 = P_3D_2D_3D_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>如果P1和P2同时出错的话 最后得到的结果为 011 但是011指向的数据是D1，但是这时候并不是D1出错了，<span class='p red'>无法区分是一位错还是两位错</span></p>
<p>需加上“<mark class="hl-label red">全校验位</mark> ”，对整体进行偶校验</p>
<table>
<thead>
<tr>
<th style="text-align:center">H8</th>
<th style="text-align:center">H7</th>
<th style="text-align:center">H6</th>
<th style="text-align:center">H5</th>
<th style="text-align:center">H4</th>
<th style="text-align:center">H3</th>
<th style="text-align:center">H2</th>
<th style="text-align:center">H1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">P全</td>
<td style="text-align:center">D4</td>
<td style="text-align:center">D3</td>
<td style="text-align:center">D2</td>
<td style="text-align:center">P3</td>
<td style="text-align:center">D1</td>
<td style="text-align:center">P2</td>
<td style="text-align:center">P1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>P全 = 前几位进行偶校验的结果</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>3</mn></msub><msub><mi>S</mi><mn>2</mn></msub><msub><mi>S</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">S_3S_2S_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>=000 且全体偶校验<span class='p red'>成功</span>→无错误<br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>3</mn></msub><msub><mi>S</mi><mn>2</mn></msub><msub><mi>S</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">S_3S_2S_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>≠000 且全体偶校验<span class='p red'>失败</span>→有1位错，纠正即可</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>3</mn></msub><msub><mi>S</mi><mn>2</mn></msub><msub><mi>S</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">S_3S_2S_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>≠000 且全体偶校验<span class='p red'>成功</span>→有2位错，需重传</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/6iB4ma3RcFeMxgX.png" alt="image-20220922102816653" /></p>
<h3 id="循环冗余校验码"><a class="markdownIt-Anchor" href="#循环冗余校验码"></a> 循环冗余校验码</h3>
<p>Cyclic Redundancy Check，CRC</p>
<p>循环冗余校验码的思想:</p>
<ul>
<li>
<p>数据发送、接受方约定一个“<span class='p red'>除数</span>”</p>
</li>
<li>
<span class='p red'>K个信息位+R个校验位</span>作为“<span class='p red'>被除数</span>”，添加校验位后需保证<span class='p red'>除法</span>的余数为0
</li>
<li>
<p>收到数据后，进行<span class='p red'>除法</span>检查余数是否为</p>
</li>
<li>
<p>0若余数非0说明出错，则进行重传或纠错</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ZJaP4kYdtKfseGL.png" alt="image-20220922145715874" /></p>
<p>Eg :</p>
<p>设生成多项式为G(x)=x3+x2+1，信息码为101001，求对应的CRC码。</p>
<ol>
<li>
<p>确定K、R以及生成多项式对应的二进制码</p>
<p>K=<span class='p red'>信息码的长度</span>= 6，R=<span class='p red'>生成多项式最高次幂</span>=3→<span class='p red'>校验码位数</span>N=K+R=9</p>
<p>生成多项式Gx = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>×</mo><msup><mi>X</mi><mn>3</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mi>X</mi><mn>1</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mi>X</mi><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">1\times X^3 + 1\times X^2 + 0\times X^1 + 1\times X^0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span>，对应二进制码<span class='p red'>1101</span>.</p>
</li>
<li>
<p>移位：</p>
<p>信息码左移R位，低位补零      结果：<span class='p red'>101001000</span></p>
</li>
<li>
<p>相除：</p>
<p>对移位后的信息码，用生成多项式就行<span class='p red'>模2除</span>法，产生余数</p>
<p>模2除， 模2减：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/CWOLxtFfzubArMG.png" alt="image-20220922155041924" /></p>
<ul>
<li>
<span class='p red'>对应的CRC码101001001</span>
</li>
</ul>
<ol start="4">
<li>
<p>检查和纠错</p>
<p>发送:101001001   记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mn>9</mn></msub><msub><mi>C</mi><mn>8</mn></msub><msub><mi>C</mi><mn>7</mn></msub><msub><mi>C</mi><mn>6</mn></msub><msub><mi>C</mi><mn>5</mn></msub><msub><mi>C</mi><mn>4</mn></msub><msub><mi>C</mi><mn>3</mn></msub><msub><mi>C</mi><mn>2</mn></msub><msub><mi>C</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">C_9C_8C_7C_6C_5C_4C_3C_2C_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>接收:101001001    用1101进行模2除, 余数为000，代表没有出错</p>
<p>接收:101001011     用1101进行模2除，余数为010，<del>代表C2出错</del>.</p>
</li>
<li>
<p>为什么010不代表C2出错</p>
</li>
</ol>
</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">接受</th>
<th style="text-align:center">余数</th>
<th style="text-align:center">出错位</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">101001000</td>
<td style="text-align:center">001</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">101001011</td>
<td style="text-align:center">010</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">101001101</td>
<td style="text-align:center">100</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">101000001</td>
<td style="text-align:center">101</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">101011001</td>
<td style="text-align:center">111</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">101101001</td>
<td style="text-align:center">011</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:center">100001001</td>
<td style="text-align:center">110</td>
<td style="text-align:center">7</td>
</tr>
<tr>
<td style="text-align:center">111001001</td>
<td style="text-align:center">001</td>
<td style="text-align:center">8</td>
</tr>
<tr>
<td style="text-align:center">001001001</td>
<td style="text-align:center">010</td>
<td style="text-align:center">9</td>
</tr>
</tbody>
</table>
<p>从上面这个表得出，如果出现010的话可能是第二位，也可能是第9位</p>
<div class="tip warning"><p>但是上面这种情况，并不代表循环冗余校验码没有纠错的能力</p>
</div>
<ul>
<li>
<p>上面这种情况的出现只是代表了<span class='p red'>信息位</span>太长，所以循环冗余校验码失去了它校验的能力</p>
</li>
<li>
<p>如果我们的信息位变成了：0100， 生成多项式是：Gx = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>×</mo><msup><mi>X</mi><mn>3</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mn>0</mn><mo>×</mo><msup><mi>X</mi><mn>1</mn></msup><mo>+</mo><mn>1</mn><mo>×</mo><msup><mi>X</mi><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">1\times X^3 + 1\times X^2 + 0\times X^1 + 1\times X^0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>使用010000对1101进行模二除法，得出余数为011</p>
</li>
<li>
<p>CRC码为：0100011</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">接受</th>
<th style="text-align:center">余数</th>
<th style="text-align:center">出错位</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0100010</td>
<td style="text-align:center">001</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">0100001</td>
<td style="text-align:center">010</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">0100111</td>
<td style="text-align:center">100</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">0101011</td>
<td style="text-align:center">101</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">0110011</td>
<td style="text-align:center">111</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">0000011</td>
<td style="text-align:center">011</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:center">1100011</td>
<td style="text-align:center">110</td>
<td style="text-align:center">7</td>
</tr>
</tbody>
</table>
<p>上面这种情况下，循环冗余校验码就可以实现纠错功能</p>
<ul>
<li>
<span class='p red'>K个信息位，R个校验位，若生成多项式选择得当，且$2^R≥K+R+1$，则CRC码可以纠正1位错误</span>
</li>
</ul>
<p>理论上可以证明循环冗余校验码的检错能力有以下特点:</p>
<ol>
<li>可检测出所有奇数个错误;</li>
<li>可检测出所有双比特的错误;</li>
<li>可检测出所有小于等于校验位长度的连续错误;</li>
</ol>
<p>循环冗余校验码：<span class='p red'>为什么循环</span></p>
<table>
<thead>
<tr>
<th style="text-align:center">接受</th>
<th style="text-align:center">余数</th>
<th style="text-align:center">出错位</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">101001000</td>
<td style="text-align:center">001</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">101001011</td>
<td style="text-align:center">010</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">101001101</td>
<td style="text-align:center">100</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">101000001</td>
<td style="text-align:center">101</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">101011001</td>
<td style="text-align:center">111</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">101101001</td>
<td style="text-align:center">011</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:center">100001001</td>
<td style="text-align:center">110</td>
<td style="text-align:center">7</td>
</tr>
<tr>
<td style="text-align:center">111001001</td>
<td style="text-align:center">001</td>
<td style="text-align:center">8</td>
</tr>
<tr>
<td style="text-align:center">001001001</td>
<td style="text-align:center">010</td>
<td style="text-align:center">9</td>
</tr>
</tbody>
</table>
<p>使用上一位余数对生成多项式进行模二除法（前提是需要将余数扩充为和生乘多项式位数一样的数据），发现最后结果就是<span class='p red'>下一位余数</span>，这就是循环冗余</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/MjSxPaiCdHB5fRk.png" alt="image-20220922152847298" /></p>
<h2 id="定点数的表示"><a class="markdownIt-Anchor" href="#定点数的表示"></a> 定点数的表示</h2>
<h3 id="无符号数的表示"><a class="markdownIt-Anchor" href="#无符号数的表示"></a> 无符号数的表示</h3>
<ul>
<li>
<span class='p red'>无符号数</span>:整个机器字长的全部二进制位均为数值位，没有符号位，相当于数的绝对值。
</li>
<li>n位的无符号数<span class='p red'>表示范围</span>为：0 ~ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>
<span class='p red'>通常只有无符号整数，而没有无符号小数</span>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/G5AaxLE2vlY9wFz.png" alt="image-20220923091243501" /></p>
<h3 id="原码"><a class="markdownIt-Anchor" href="#原码"></a> 原码</h3>
<ul>
<li>
<mark class="hl-label red">原码</mark> ：用尾数表示真值的绝对值，符号位“0/1”对应“正/负”
</li>
</ul>
<p>若机器字长n+1位，<span class='p red'>原码整数</span>的表示范围:<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>≤</mo><mi>x</mi><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-(2^n-1) ≤x≤2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>(关于原点对称)</p>
<p>真值0有+0和-0两种形式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/2FeEl9wNjcO1ka6.png" alt="image-20220923093448693" /></p>
<p>若机械字长n+1位，<span class='p red'>原码小数</span>的表示范围：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup><mo stretchy="false">)</mo><mo>≤</mo><mi>x</mi><mo>≤</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">-(1-2^{-n}) ≤x≤1-2^{-n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> 关于原点对称</p>
<p>真值0有+0和-0两种形式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/qMEBL3k49tcynVU.png" alt="image-20220923094246118" /></p>
<h3 id="反码"><a class="markdownIt-Anchor" href="#反码"></a> 反码</h3>
<p>反码:</p>
<ul>
<li>若符号位为0，<span class='p red'>则反码与原码相同</span></li>
<li>若符号位为1，<span class='p red'>则数值位全部取反</span></li>
</ul>
<p>若机器字长n+1位，<span class='p red'>反码整数</span>的表示范围:<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>≤</mo><mi>x</mi><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-(2^n-1) ≤x≤2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>(关于原点对称)</p>
<p>真值0有+0和-0两种形式</p>
<p>若机器字长n+1位，<span class='p red'>反码小数</span>的表示范围:<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo><mo>≤</mo><mi>x</mi><mo>≤</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">-(1-2^n) ≤x≤1-2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>(关于原点对称)</p>
<p>真值0有+0和-0两种形式</p>
<ul>
<li>
<mark class="hl-label red">“反码”只是“原码”转变为“补码”的一个中间状态，实际中并没什么卵用</mark> 
</li>
</ul>
<h3 id="补码"><a class="markdownIt-Anchor" href="#补码"></a> 补码</h3>
<p>补码:</p>
<ul>
<li>正数的补码=原码</li>
<li>负数的补码=反码末位+1（要考虑进位)</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Vyd3e2lXY9QhTMf.png" alt="image-20220923145127171" /></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mo>+</mo><mn>0</mn><msub><mo stretchy="false">]</mo><mi mathvariant="normal">原</mi></msub><mo>=</mo><mn>00000000</mn></mrow><annotation encoding="application/x-tex">[+0]_原 = 00000000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">+</span><span class="mord">0</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">原</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>0</mn><msub><mo stretchy="false">]</mo><mi mathvariant="normal">原</mi></msub><mo>=</mo><mn>10000000</mn></mrow><annotation encoding="application/x-tex">[-0]_原 = 10000000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">0</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">原</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mo>+</mo><mn>0</mn><msub><mo stretchy="false">]</mo><mi mathvariant="normal">反</mi></msub><mo>=</mo><mn>00000000</mn></mrow><annotation encoding="application/x-tex">[+0]_反 = 00000000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">+</span><span class="mord">0</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">反</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>0</mn><msub><mo stretchy="false">]</mo><mi mathvariant="normal">反</mi></msub><mo>=</mo><mn>11111111</mn></mrow><annotation encoding="application/x-tex">[-0]_反 = 11111111</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">0</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">反</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mo>+</mo><mn>0</mn><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mo stretchy="false">[</mo><mo>−</mo><mn>0</mn><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mn>00000000</mn></mrow><annotation encoding="application/x-tex">[+0]_补 = [-0]_补 = 00000000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">+</span><span class="mord">0</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">0</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span></p>
<ul>
<li>
<mark class="hl-label red">注意!补码的真值0只有一种表示形式</mark> .
</li>
<li>
<p>定点整数补码<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><msub><mi>x</mi><mi mathvariant="normal">补</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x_补]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>=1,0000000表示<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>=</mo><mo>−</mo><msup><mn>2</mn><mn>7</mn></msup></mrow><annotation encoding="application/x-tex">x=-2^7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span></span></span></span>若机器字长n+1位，补码整数的表示范围:<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><msup><mn>2</mn><mi>n</mi></msup><mo>≤</mo><mi>x</mi><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-2^n\leq x \leq 2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.800362em;vertical-align:-0.13597em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> （比原码多表示一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">-2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span> )<br />
定点小数补码<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><msub><mi>x</mi><mi mathvariant="normal">补</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x_补]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>=1.0000000表示x=-1 若机器字长n+1位，补码小数的表示范围:<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mn>1</mn><mo>≤</mo><mi>x</mi><mo>≤</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">-1 ≤x≤1-2^{-n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>(比原码多表示一个-1 )</p>
</li>
</ul>
<h3 id="移码"><a class="markdownIt-Anchor" href="#移码"></a> 移码</h3>
<ul>
<li>
<span class='p red'>移码</span>:(补码的基础上将符号位取反。<span class='p red'>注意:移码只能用于表示整数</span>.
</li>
</ul>
<p>技巧:由[x]补快速求[-x]补的方法：符号位、数值位全部取反，末位+1</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/3o6WeHjnOCqdhgu.png" alt="image-20220923151212544" /></p>
<h2 id="定点数的运算"><a class="markdownIt-Anchor" href="#定点数的运算"></a> 定点数的运算</h2>
<div class="tip warning"><p>计算机中采用1位符号位判断时，为了节省时间，通常将符号位产生的进位与最高有效位产生的进位异或结果作为判断，结果为0则不溢出，为1则溢出。</p>
</div>
<h3 id="移位运算"><a class="markdownIt-Anchor" href="#移位运算"></a> 移位运算</h3>
<div class="tip "><p>算数移位</p>
</div>
<div class="tabs" id="移位运算"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="移位运算-1">原码算数位移</button><button type="button" class="tab " data-href="移位运算-2">反码算数位移</button><button type="button" class="tab " data-href="移位运算-3">补码算数位移</button></ul><div class="tab-contents"><div class="tab-item-content active" id="移位运算-1"><p><span class='p red'>原码</span>的算数移位―—符号位保持不变，仅对数值位进行移位。</p>
<ul>
<li>右移：<span class='p red'>高位补0</span>，低位舍弃。若舍弃的位=0，则相当于÷2; 若舍弃的位≠0，则会丢失精度
<ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/xdJnuhGl1eOS8mX.png" alt="image-20220923210422812" /></li>
</ul>
</li>
<li>左移：<span class='p red'>低位补0</span>，高位舍弃。若舍弃的位=0，则相当于×2; 若舍弃的位≠0，则会出现<span class='p red'>严重误差</span>
<ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/p8PeIhCbAw1RrMx.png" alt="image-20220923210347437" /></li>
</ul>
</li>
</ul></div><div class="tab-item-content" id="移位运算-2"><p>反码的算数移位：</p>
<ul>
<li>正数的反码<span class='p red'>与原码相同</span>,因此对正数反码的移位运算也和原码相同。
<ul>
<li>右移:高位补0，低位舍弃， 算数位不变。</li>
<li>左移:低位补0，高位舍弃，算数位不变。</li>
</ul>
</li>
<li>负数的反码<span class='p red'>数值位与原码相反</span>，因此负数反码的移位运算规则如下
<ul>
<li>右移:<span class='p red'>高位补1</span>，低位舍弃，算数位不变。</li>
<li>左移:<span class='p red'>低位补1</span>，高位舍弃，算数位不变。</li>
</ul>
</li>
</ul></div><div class="tab-item-content" id="移位运算-3"><p>补码的算数移位</p>
<ul>
<li>正数的补码与原码相同,因此对正数补码的移位运算也和原码相同。
<ul>
<li>右移:高位补0，低位舍弃。</li>
<li>左移:低位补0，高位舍弃。</li>
</ul>
</li>
<li>负数补码=反码末位+1导致反码最右边几个连续的1都因进位而变为0，直到进位碰到第一个0为止。
<ul>
<li>规律: 负数补码中，最右边的1及其右边同原码。最右边的1的左边同反码</li>
<li>负数补码的算数移位规则如下:</li>
<li><span class='p red'>右移（同反码）:高位补1，低位舍弃</span>。</li>
<li><span class='p red'>左移（同原码）:低位补0，高位舍弃</span> 。</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/bH3ERzFWC6u9UMd.png" alt="image-20220923211148379" /></li>
</ul>
</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/in8k4JveTVMoOuz.png" alt="image-20220923211356838" /></p>
<p>Eg:</p>
<p>20*7 ====&gt;</p>
<p>7D = 111B = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">2^0+2^1+2^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p>
<p>20 * (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo>+</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">2^0+2^1+2^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> ) 最后结果为：20不左移 + 20左移一位 + 20左移两位</p>
<div class="tip "><p>逻辑移位</p>
</div>
<p>逻辑右移:高位补0，低位舍弃。</p>
<p>逻辑左移:低位补0，高位舍弃。</p>
<p>可以把逻辑移位看作是对“无符号数”的算数移位</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/V9KiYIE5Uv4q7yz.png" alt="image-20220923211752706" /></p>
<div class="tip "><p>循环移位</p>
</div>
<p>左移的时候将最高位的数据放到最低位</p>
<p>右移的时候将最低位的数据放到最高位</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Sm6B8qcntlez2KQ.png" alt="image-20220923212220317" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/cyik9lNSQP26XGT.png" alt="image-20220923212456792" /></p>
<h3 id="加法运算"><a class="markdownIt-Anchor" href="#加法运算"></a> 加法运算</h3>
<div class="tip "><p>原码的加减法</p>
</div>
<p>原码的加法运算:</p>
<ul>
<li>正+正→绝对值做加法，结果为负   <span class='p red'>可能会溢出负+负</span>.</li>
<li>负+负→绝对值做加法，结果为负  <span class='p red'>可能会溢出负+负</span>.</li>
<li>正+负→绝对值大的减绝对值小的，符号同绝对值大的数</li>
<li>负+正→绝对值大的减绝对值小的，符号同绝对值大的数</li>
</ul>
<p>原码的减法运算，“减数”符号取反，转变为加法:</p>
<ul>
<li>正-负→正+正</li>
<li>负-正→负+负</li>
<li>正-正→正+负</li>
<li>负+正→负-负</li>
</ul>
<div class="tip "><p>补码的加减法</p>
</div>
<p>设机器字长为8位（含1位符号位），A= 15, B=-24,求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>A</mi><mo>+</mo><mi>B</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub></mrow><annotation encoding="application/x-tex">[A+B]_补</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>A</mi><mo>−</mo><mi>B</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub></mrow><annotation encoding="application/x-tex">[A-B]_补</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center">原码</th>
<th style="text-align:center">补码</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">+1111</td>
<td style="text-align:center">0,0001111</td>
<td style="text-align:center">0,0001111</td>
</tr>
<tr>
<td style="text-align:center">B</td>
<td style="text-align:center">-11000</td>
<td style="text-align:center">1,0011000</td>
<td style="text-align:center">1,1101000</td>
</tr>
</tbody>
</table>
<p>负数<span class='p red'>补→原</span>:</p>
<ul>
<li>数值位取反+1;</li>
<li>负数补码中，最右边的1及其右边同原码。最右边的1的左边同反码</li>
</ul>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>A</mi><mo>+</mo><mi>B</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mo stretchy="false">[</mo><mi>A</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>+</mo><mo stretchy="false">[</mo><mi>B</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>0001111</mn><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mn>1101000</mn><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>1110111</mn></mrow><annotation encoding="application/x-tex">[A+B]_补=[A]_补+[B]_补=0,0001111+ 1,1101000 = 1,1110111</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span></span></span></span>	原码:1,0001001真值-9</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>A</mi><mo>−</mo><mi>B</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mo stretchy="false">[</mo><mi>A</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>+</mo><mo stretchy="false">[</mo><mo>−</mo><mi>B</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>0001111</mn><mo>+</mo><mn>0</mn><mo separator="true">,</mo><mn>0011000</mn><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>0100111</mn></mrow><annotation encoding="application/x-tex">[A-B]_补=[A]_补+[-B]_补=0,0001111+ 0,0011000= 0,0100111</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span></span></span></span>	真值+39</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mi>B</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>:</mo><mo stretchy="false">[</mo><mi>B</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub></mrow><annotation encoding="application/x-tex">[-B]_补:[B]_补</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>连同符号位一起取反加1</p>
<p>对于补码来说，无论加法还是减法，<span class='p red'>最后都会转变成加法</span>，由加法器实现运算，符号位也参与运算</p>
<div class="tip "><p>溢出判断</p>
</div>
<p>只有“<span class='p red'>正数+正数</span>”才会上溢―正+正=负</p>
<p>只有“<span class='p red'>负数+负数</span>”才会下溢―负+负=正</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>A</mi><mo>+</mo><mi>C</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>0001111</mn><mo>+</mo><mn>0</mn><mo separator="true">,</mo><mn>1111100</mn><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>0001011</mn></mrow><annotation encoding="application/x-tex">[A+C]_补=0,0001111+0,1111100= 1,0001011</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>B</mi><mo>−</mo><mi>C</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>1101000</mn><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mn>0000100</mn><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>1101100</mn></mrow><annotation encoding="application/x-tex">[B-C]_补=1,1101000+ 1,0000100=0,1101100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span></p>
<ul>
<li>
<p>方法一:采用一位符号位</p>
<ul>
<li>设A的符号为As，B的符号为Bs，运算结果的符号为Ss，则溢出逻辑表达式为</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/3sphrCPvZfneMXd.png" alt="image-20220923223548303" /></li>
<li>其中各个部分内部采用与运算，部分之间采用或运算</li>
<li>若V=0，表示无溢出;</li>
<li>若V=1，表示有溢出。</li>
<li>逻辑表达式
<ul>
<li>
<span class='p red'>与</span>:如ABC，表示A与B与C仅当A、B、C均为1时，ABC为1
</li>
<li>A、B、C中有一个或多个为0，则ABC为0</li>
<li>
<span class='p red'>或</span>:如A+B+C，表示A或B或C
</li>
<li>仅当A、B、C均为0时，A+B+C为0</li>
<li>A、B、C中有一个或多个为1，则A+B+C为1</li>
</ul>
</li>
</ul>
</li>
<li>
<p>方法二:采用一位符号位，根据数据位进位情况判断溢出，符号位的进位Cs最高数值位的进位C1</p>
<ul>
<li>​	<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/hAjol17pzkI3ZDs.png" alt="image-20220923224326106" /></li>
<li>01 表示上溢</li>
<li>10 表示下溢</li>
<li>即:C与C不同时有溢出</li>
<li>处理“不同”的逻辑符号:异或</li>
<li>溢出逻辑判断表达式为V=Cs⊕C1</li>
<li>若V=0，表示无溢出;</li>
<li>V=1，表示有溢出。</li>
</ul>
</li>
<li>
<p>方法三：双符号位</p>
<ul>
<li>正数符号为00，负数符号为11</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>A</mi><mo>+</mo><mi>C</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mn>00</mn><mo separator="true">,</mo><mn>0001111</mn><mo>+</mo><mn>00</mn><mo separator="true">,</mo><mn>1111100</mn><mo>=</mo><mn>01</mn><mo separator="true">,</mo><mn>0001011</mn></mrow><annotation encoding="application/x-tex">[A+C]_补=00,0001111+00,1111100= 01,0001011</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>B</mi><mo>−</mo><mi>C</mi><msub><mo stretchy="false">]</mo><mi mathvariant="normal">补</mi></msub><mo>=</mo><mn>11</mn><mo separator="true">,</mo><mn>1101000</mn><mo>+</mo><mn>11</mn><mo separator="true">,</mo><mn>0000100</mn><mo>=</mo><mn>10</mn><mo separator="true">,</mo><mn>1101100</mn></mrow><annotation encoding="application/x-tex">[B-C]_补=11,1101000+ 11,0000100=10,1101100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span></li>
<li>01 表示上溢</li>
<li>10 表示下溢</li>
</ul>
</li>
<li>
<p>双符号位补码又称:模4补码，大于等于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">2^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>的都舍去</p>
</li>
<li>
<p>单符号位补码又称:模2补码，大于等于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>1</mn></msup></mrow><annotation encoding="application/x-tex">2^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span>的都舍去</p>
</li>
</ul>
<div class="tip "><p>符号扩展</p>
</div>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">正整数<br />（原，反，补码的表示都一样）</th>
<th style="text-align:center"></th>
<th style="text-align:center">正小数<br />（原，反，补码的表示都一样）</th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">0,1011010</td>
<td style="text-align:center">0,00000000 1011010</td>
<td style="text-align:center">0.1011010</td>
<td style="text-align:center">0.1011010 00000000</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">负整数</td>
<td style="text-align:center"></td>
<td style="text-align:center">负小数</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">原码</td>
<td style="text-align:center">1,1011010</td>
<td style="text-align:center">1,00000000 1011010</td>
<td style="text-align:center">1.1011010</td>
<td style="text-align:center">1.1011010 00000000</td>
</tr>
<tr>
<td style="text-align:center">反码</td>
<td style="text-align:center">1,0100101</td>
<td style="text-align:center">1,11111111 0100101</td>
<td style="text-align:center">1.0100101</td>
<td style="text-align:center">1.0100101 11111111</td>
</tr>
<tr>
<td style="text-align:center">补码</td>
<td style="text-align:center">1,0100110</td>
<td style="text-align:center">1,11111111 0100110</td>
<td style="text-align:center">1.0100110</td>
<td style="text-align:center">1.0100110 00000000</td>
</tr>
</tbody>
</table>
<ul>
<li>定点整数的符号扩展:
<ul>
<li>在原符号位和数值位中间添加新位，正数都添0;负数原码添o，负数反、补码添1</li>
</ul>
</li>
<li>定点小数的符号扩展:
<ul>
<li>在原符号位和数值位后面添加新位，正数都添0;负数原、补码添0，负数反码添1</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/l5zpajhrJcsN9UI.png" alt="image-20220923230213654" /></p>
<h3 id="乘法运算"><a class="markdownIt-Anchor" href="#乘法运算"></a> 乘法运算</h3>
<h4 id="原码的乘法运算"><a class="markdownIt-Anchor" href="#原码的乘法运算"></a> 原码的乘法运算</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/e5Dmqsi6QbSNWao.png" alt="image-20220924085053830" /></p>
<p>考虑用机器实现:</p>
<ul>
<li>实际数字有正负，符号位如何处理?·</li>
<li>乘积的位数扩大一倍，如何处理?</li>
<li>4个位积都要保存下来最后统一相加?</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">加</th>
<th style="text-align:center">减</th>
<th style="text-align:center">乘</th>
<th style="text-align:center">除</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Accumulator(ACC)</td>
<td style="text-align:center">被加数，和</td>
<td style="text-align:center">被减数，差</td>
<td style="text-align:center">乘积高位</td>
<td style="text-align:center">被除数，余数</td>
</tr>
<tr>
<td style="text-align:center">Multiple-Quotient Register(MQ)</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">乘数，乘积低位</td>
<td style="text-align:center">商</td>
</tr>
<tr>
<td style="text-align:center">Arithmetic and Logic Unit(X, ALU)</td>
<td style="text-align:center">加数</td>
<td style="text-align:center">减数</td>
<td style="text-align:center">被乘数</td>
<td style="text-align:center">除数</td>
</tr>
</tbody>
</table>
<div class="tip "><p>原码一位乘法</p>
</div>
<p>其中乘法中 ACC存放的是乘积的高位， MQ 乘积，乘积的低位，ALU被乘数</p>
<p>符号位单独处理：符号位：<span class='p red'>两位数据异或得到的</span>,<mark class="hl-label red">数值位取绝对值进行乘法运算</mark> .</p>
<p>设机器字长为n+1=5位(含1位符号位），[x]原= 1.1101，[y]原=0.1011，采用原码一位乘法求x*y</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/08/sOB96tlqGdMbfir.png" alt="image-20221108103402061" /></p>
<ul>
<li>在进行运算的时候先让ACC清零</li>
<li>然后判断MQ中的低位
<ul>
<li>如果是1的话，就让寄存区X中的数据和ACC相加，运算结果放到ACC中，然后让ACC和MQ中的所有数据进行逻辑右移</li>
<li>如果是0的话，就让ACC中的数据加上零</li>
</ul>
</li>
<li>最后一个是符号位不用参与运算</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/08/WVm5RodlIcLKBCM.png" alt="image-20221108204512327" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/GqbvlF6uNH7xaA5.png" alt="image-20220924085820145" /></p>
<h4 id="补码的乘法运算"><a class="markdownIt-Anchor" href="#补码的乘法运算"></a> 补码的乘法运算</h4>
<ul>
<li>.<span class='p red'>补码</span>一位乘法:
<ul>
<li>进行n轮加法、移位，<span class='p red'>最后再多来一次加法</span>.</li>
<li>每次加法可能+0、+[x]补、+[-x]补</li>
<li>每次移位是“补码的<span class='p red'>算数右移</span>”</li>
<li>
<span class='p red'>符号位参与运算</span>
</li>
</ul>
</li>
</ul>
<p>设机器字长为5位（含1位符号位，n=4), x=-0.1101，y= +0.1011，采用Booth算法求x*y</p>
<ul>
<li>[x]补=1.0011，[-x]补=0.1101，[y]补=0.1011</li>
<li>ALU和MQ中存放的是被乘数和乘数的<span class='p red'>带符号位的</span>补码</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/12/usRvJ6BnWNEOD53.png" alt="image-20221112115252751" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/1vd4BtPASVaN7EL.png" alt="image-20220924090814344" /></p>
<ul>
<li>
<span class='p red'>n轮加法、算数右移</span>，加法规则如下:
<ul>
<li>
<span class='p red'>辅助位</span>- <span class='p green'>MQ中最低位</span>=1时，(ACC)+[x]补
</li>
<li>
<span class='p green'>辅助位</span>-<span class='p red'>MQ中最低位</span>=0时，(ACC)+0
</li>
<li>
<span class='p red'>辅助位</span> - <span class='p green'>MQ中最低位</span>=-1时，(ACC)+[-x]补
</li>
</ul>
</li>
<li>补码的<span class='p red'>算数右移</span>:
<ul>
<li>
<span class='p red'>符号位不动，数值位右移，正数右移补0</span>.
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/agkK481hBCxT2zq.png" alt="image-20220924091310808" /></p>
<h3 id="除法运算"><a class="markdownIt-Anchor" href="#除法运算"></a> 除法运算</h3>
<h4 id="除法运算思想"><a class="markdownIt-Anchor" href="#除法运算思想"></a> 除法运算思想</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/2eo8cI1xDLl5PK9.png" alt="image-20220924101317507" /></p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">加</th>
<th style="text-align:center">减</th>
<th style="text-align:center">乘</th>
<th style="text-align:center">除</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Accumulator(ACC)</td>
<td style="text-align:center">被加数，和</td>
<td style="text-align:center">被减数，差</td>
<td style="text-align:center">乘积高位</td>
<td style="text-align:center">被除数，余数</td>
</tr>
<tr>
<td style="text-align:center">Multiple-Quotient Register(MQ)</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">乘数，乘积低位</td>
<td style="text-align:center">商</td>
</tr>
<tr>
<td style="text-align:center">Arithmetic and Logic Unit(X, ALU)</td>
<td style="text-align:center">加数</td>
<td style="text-align:center">减数</td>
<td style="text-align:center">被乘数</td>
<td style="text-align:center">除数</td>
</tr>
</tbody>
</table>
<ul>
<li>除法操作：
<ul>
<li>ACC：被除数，余数</li>
<li>MQ：商</li>
<li>ALU：除数</li>
</ul>
</li>
</ul>
<h4 id="恢复余数法"><a class="markdownIt-Anchor" href="#恢复余数法"></a> 恢复余数法</h4>
<div class="tip "><p>恢复余数法机械算法</p>
</div>
<p>计算机默认商1，<span class='p red'>如果算出来的余数为负数的话，我们需要恢复原来的数据</span>，然后在进行商零，所以称为恢复余数法</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/aOd1H6lsBTXQNtA.png" alt="image-20220924110635816" /></p>
<div class="tip "><p>恢复余数法手算法</p>
</div>
<p>在进行除法的时候 需要先算出来，除数的绝对值，被除数的绝对值，被除数绝对值的补码，被除数绝对值的负数的补码</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/12/XygSKjxdW4ZFTtE.png" alt="image-20221112131742773" /></p>
<ul>
<li>恢复余数法:当余数为负时商0,并+|除数|，再左移，再-|除数|</li>
</ul>
<h4 id="加减交替法不恢复余数法"><a class="markdownIt-Anchor" href="#加减交替法不恢复余数法"></a> 加减交替法(不恢复余数法)</h4>
<p>加减交替法:当余数为负时商0,并左移，再+|除数|</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/12/tBWia5AyHoXSgIU.png" alt="image-20221112132550286" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/YGdyCEkB9KgnV6L.png" alt="image-20220924214236129" /></p>
<p>定点小数的除法前提：<span class='p red'>被除数一定要小于除数</span>，因为如果被除数大于除数的话，最后的结果就会是 大于1的数据，定点小数无法表示大于一的数据 ，</p>
<h4 id="补码的除法运算"><a class="markdownIt-Anchor" href="#补码的除法运算"></a> 补码的除法运算：</h4>
<div class="tip warning"><p>符号位参与运算</p>
</div>
<p>设机器字长为5位（含1位符号位，n=4),x=+0.1000，y=-0.1011，采用补码加减交替除法求x/y</p>
<ul>
<li>[x]补-00.1000，[y]补-11.0101，[-y]补=00.1011</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/9eQ3luczIDRFZ4g.png" alt="image-20220924225949057" /></p>
<p>补码除法:</p>
<ul>
<li>符号位参与运算</li>
<li>被除数/余数、除数采用双符号位</li>
</ul>
<p>第一步的时候：</p>
<ul>
<li>
<p>被除数和除数<span class='p red'>同号</span>，则<span class='p red'>被除数减去除数</span>;</p>
</li>
<li>
<span class='p red'>异号</span>则<span class='p red'>被除数加上除数</span>。
</li>
</ul>
<p>余数和除数<span class='p red'>同号</span>， 商1，<span class='p red'>余数左移一位减去除数</span>;</p>
<p>余数和除数<span class='p red'>异号</span>，商0，<span class='p red'>余数左移一位加上除数</span>。</p>
<p>重复n次</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/UcZbLG4SBDqFXVg.png" alt="image-20220924230249343" /></p>
<h2 id="数据强制转换"><a class="markdownIt-Anchor" href="#数据强制转换"></a> 数据强制转换</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/P8dgLkpN6tu9CfD.png" alt="image-20220924230821618" /></p>
<h2 id="数据的存储和排列"><a class="markdownIt-Anchor" href="#数据的存储和排列"></a> 数据的存储和排列</h2>
<h3 id="大小端模式"><a class="markdownIt-Anchor" href="#大小端模式"></a> 大小端模式</h3>
<p>大端模式，低地址放高位数据，高地址放低位数据，<span class='p red'>开始的时候放大数据，所以称为大端</span>,</p>
<p>小端模式，低地址放低位数据，高地址放高位数据， <span class='p red'>开始的时候放小数据，所以称为小端</span>,</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/7eijyBE5YbHCot9.png" alt="image-20220924231544709" /></p>
<h3 id="边界对齐"><a class="markdownIt-Anchor" href="#边界对齐"></a> 边界对齐</h3>
<p>现代计算机通常是按字节编址，即每个字节对应1个地址</p>
<p>通常也支持按字、按半字、按字节寻址。</p>
<p>假设存储字长为32位，则1个字=32bit，半字=16bit。每次访存只能读/写1个字</p>
<p>边界对齐方式：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/pl2rhy3PnLwXERD.png" alt="image-20220924232738237" /></p>
<p>边界不对齐方式：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/nb5XQI1sx3TLpve.png" alt="image-20220924232753616" /></p>
<p>Eg：我们在C语言中定义一个结构体的时候，我们定一个3个char型数据，一个short型变量，一个int型变量</p>
<ul>
<li>如果不使用边界对齐方式的话，先存放三个char型数组，然后在存放半个short型变量，第二行第一个存放半个short行变量，<span class='p red'>不浪费空间</span>，但是读取的时候需要读取两次。</li>
<li>如果采用边界对齐的话，可以浪费空间，但是可以节约读取速度</li>
</ul>
<h2 id="浮点数的表示"><a class="markdownIt-Anchor" href="#浮点数的表示"></a> 浮点数的表示</h2>
<div class="tip "><p>定点数的局限性</p>
</div>
<ul>
<li>如果我们想要表示8056这个数据的话我们是用一个<span class='p red'>short型定点整数</span>表示即可</li>
<li>如果我们想要表示301256987235这个数据的话我们是用一个<span class='p red'>long int 型定点整数</span>表示</li>
<li>但是如果我们想要表示一个长度为 2,3十位的数据的话，那么long int也无法表示这个数据</li>
<li>
<span class='p red'>如果超出整形表示范围的话，我们就需要使用浮点数来表示</span>
</li>
</ul>
<div class="tip "><p>浮点数的表示</p>
</div>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>301256987235</mn><mo>=</mo><mn>3.012</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">301256987235 = 3.012\times10^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">1</span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mord">9</span><span class="mord">8</span><span class="mord">7</span><span class="mord">2</span><span class="mord">3</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord">.</span><span class="mord">0</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 其中12是阶码， 3.012是尾数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/t3FfmgwJqOaxbkQ.png" alt="image-20220925091455547" /></p>
<p>阶码:常用<span class='p red'>补码或移码</span>表示的定点整数</p>
<p>尾数:常用<span class='p red'>原码或补码</span>表示的定点小数</p>
<p>阶码：反应浮点数的表示范围以及小数点的实际位置</p>
<p>尾数：数值部分的位数n反应浮点数的精度</p>
<div class="tip "><p>浮点数尾数规格化</p>
</div>
<p>规格化浮点数:<span class='p red'>规定尾数的最高数值位必须是一个有效值</span>。</p>
<p>左规: 当浮点数运算的结果为非规格化时要进行规格化处理，<span class='p red'>将尾数算数左移一位，阶码减1</span>。</p>
<ul>
<li>就像科学计数法中，我们需要保证最高位的数据位有意义，不能够是0，所以如果位数的最高位（非符号位）为零的话需要左规</li>
</ul>
<p>右规:当浮点数运算的结果尾数出现溢出（双符号位为01或10）时,<span class='p red'>将尾数算数右移一位，阶码加1</span>。</p>
<p>规格化特点：</p>
<p>用<span class='p red'>原码</span>表示的尾数进往规格化</p>
<ul>
<li>
<p>正数为0.1xxxxx的形式，其最大值表示为0.11.1；最小值表示为0.10.0。尾数的表示范围为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>≤</mo><mi>M</mi><mo>≤</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">1/2\leq M\leq (1-2^{-n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</p>
</li>
<li>
<p>负数为1.1xxxxx的形式，其最大值表示为1.10…0;最小值表示为1.11…1。尾数的表示范围为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup><mo stretchy="false">)</mo><mo>≤</mo><mi>M</mi><mo>&lt;</mo><mo>−</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">-(1-2^{-n})≤M&lt;-1/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord">/</span><span class="mord">2</span></span></span></span>。</p>
</li>
<li>
<p>规格化的原码尾数，<span class='p red'>最高数值一定是1</span>.</p>
</li>
</ul>
<p>用<span class='p red'>补码</span>表示的尾数进行规格化：</p>
<ul>
<li>正数为0.1xxxxx的形式，其最大值表示为0.11.1；最小值表示为0.10.0。尾数的表示范围为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>≤</mo><mi>M</mi><mo>≤</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">1/2\leq M\leq (1-2^{-n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
<li>负数为1.0xxxxx的形式，其最大值表示为1.01.1；最小值表示为1.00.0。尾数的表示范围为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mn>1</mn><mo>≤</mo><mi>M</mi><mo>≤</mo><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>+</mo><msup><mn>2</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">-1\leq M\leq -(1/2+2^{-n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</li>
<li>规格化的补码尾数，<span class='p red'>符号位与最高数值位一定相反</span></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/W9notGJI2LaumRO.png" alt="image-20220925100233622" /></p>
<h2 id="浮点数表示标准ieee754"><a class="markdownIt-Anchor" href="#浮点数表示标准ieee754"></a> 浮点数表示标准IEEE754</h2>
<p>移码的表示：</p>
<ul>
<li>
<span class='p red'>一般情况下是让补码数值为取反得到移码</span>
</li>
<li>
<p>但是真实的移码运算规则是：真实值 + 偏置值</p>
</li>
<li>
<span class='p red'>正常情况下偏置值为</span>$2^{n-1}$
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/LHtaA87yn1gNx62.png" alt="image-20220925101435280" /></p>
<ul>
<li>
<span class='p red'>IEEE754这种情况下偏置值为</span>$2^{n-1}-1$
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/QzXnHDfecZAhxMN.png" alt="image-20220925101508041" /></p>
<div class="tip "><p>IEEE754</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/AGLqa8BYbH31OPM.png" alt="image-20220925101926979" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/K8JWH2Xb7QSdNC1.png" alt="image-20220925102108034" /></p>
<p>Eg:IEEE 754的单精度浮点数C0 A0 00 00H的值时多少。</p>
<p>C0 A0 00 00H→1100 0000 1010 0000 0000 0000 0000 0000</p>
<p>数符=1→是个负数</p>
<p>尾数部分=.0100…(隐含最高位1）→尾数真值=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>1.01</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">(1.01)_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">.</span><span class="mord">0</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>移码= 10000001，若看作无符号数=129D</p>
<p>单精度浮点型偏移量=127D</p>
<p>阶码真值=移码-偏移量=1000 0001-111 1111 = (0000 0010)2 =<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>2</mn><msub><mo stretchy="false">)</mo><mn>10</mn></msub></mrow><annotation encoding="application/x-tex">(2)_{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>浮点数真值=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mo>−</mo><mn>1.01</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mn>2</mn></msup><mo>=</mo><mo>−</mo><mn>1.25</mn><mo>×</mo><msup><mn>2</mn><mn>2</mn></msup><mo>=</mo><mo>−</mo><mn>5.0</mn></mrow><annotation encoding="application/x-tex">(-1.01)_2× 2^2= -1.25 ×2^2= -5.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mord">.</span><span class="mord">0</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">5</span><span class="mord">.</span><span class="mord">0</span></span></span></span></p>
<div class="tip "><p>IEEE 754单精度浮点型能表示的最小绝对值、最大绝对值是多少?</p>
</div>
<p>最小绝对值:<mark class="hl-label red">尾数全为0</mark> ，阶码真值最小-126，对应移码机器数0000 0001此时整体的真值为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>1.0</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>126</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(1.0)_2×2^{-126}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">.</span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">2</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>为什么阶码最小值是-126，因为-128，-127，表示全零，和全1，<span class='p red'>需要用来表示特殊的作用</span>.</li>
</ul>
<p>最大绝对值:<mark class="hl-label red">尾数全为1</mark> ，阶码真值最大127，对应移码机器数11111110此时整体的真值为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>1.111...11</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub><mo separator="true">,</mo><mo>×</mo><msup><mn>2</mn><mn>127</mn></msup></mrow><annotation encoding="application/x-tex">(1.111...11)_2,×2^{127}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">.</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">1</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">×</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span><span class="mord mtight">7</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/WqY3hcOvE1dmgzp.png" alt="image-20220925105402151" /></p>
<h3 id="浮点数表示范围"><a class="markdownIt-Anchor" href="#浮点数表示范围"></a> 浮点数表示范围</h3>
<p>IEEE 754单精度浮点型能表示的最小绝对值、最大绝对值是多少?</p>
<p>最小绝对值:尾数全为0，阶码真值最小-126，对应移码机器数0000 0001此时整体的真值为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>1.0</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>126</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(1.0)_2×2^{-126}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">.</span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">2</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>若要表示的数绝对值还要更小，怎么办?</p>
<ul>
<li>
<mark class="hl-label red">这时候就需要应用我们之前所提到的，阶码全零，或者全1的情况了</mark> 
</li>
<li>如果把阶码看成无符号小数的话，那么他所表示的 范围为：0≤E≤255</li>
<li>抛去阶码全零和全一这两种情况，就是去掉0和255，那么只有当阶码表示范围在 1≤E≤254的时候，才正常</li>
</ul>
<p>当<span class='p red'>阶码E全为0，尾数M不全为0</span>时，表示非规格化小数±<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>0.</mn><mi>x</mi><mi>x</mi><mi mathvariant="normal">.</mi><mo>…</mo><mi mathvariant="normal">.</mi><mi>x</mi><msub><mo stretchy="false">)</mo><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>126</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(0.xx.….x)_2 \times 2^{-126}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mord">.</span><span class="mord mathdefault">x</span><span class="mord mathdefault">x</span><span class="mord">.</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord mathdefault">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">2</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>阶码真值设置为固定设置为<span class='p red'>定值：-126</span>，隐含位变为0，这样就可以表示<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>0.0001</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub><mo>×</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>126</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(0.0001)_2 \times 2^{-126}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">2</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span></span></li>
</ul>
<p>当<span class='p red'>阶码E全为0，尾数M全为0时</span>，表示真值±0当阶码E全为0，表示真值 ±0</p>
<p>当<span class='p red'>阶码E全为1，尾数M全为0</span>时，表示无穷大±∞</p>
<p>当<span class='p red'>阶码E全为1，尾数M不全为0</span>时，表示非数值“NaN&quot;(Not a Number)</p>
<p>由浮点数确定真值（阶码不是全0、也不是全1）:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/l3fHPaNEDVbJXm5.png" alt="image-20220925143839258" /></p>
<ul>
<li>根据“某浮点数”确定数符、阶码、尾数的分布</li>
<li>确定尾数1.M（注意补充最高的隐含位1)</li>
<li>确定阶码的真值 = 移码-偏置值︰(可将移码看作无符号数，用无符号数的值减去偏置值)</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>s</mi></msup><mo>×</mo><mn>1.</mn><mi>M</mi><mo>×</mo><msup><mn>2</mn><mrow><mi>E</mi><mo>−</mo><mi mathvariant="normal">偏</mi><mi mathvariant="normal">置</mi><mi mathvariant="normal">值</mi></mrow></msup></mrow><annotation encoding="application/x-tex">(-1)^s\times1.M\times2^{E-偏置值}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mbin mtight">−</span><span class="mord cjk_fallback mtight">偏</span><span class="mord cjk_fallback mtight">置</span><span class="mord cjk_fallback mtight">值</span></span></span></span></span></span></span></span></span></span></span></span></li>
</ul>
<h2 id="浮点数的运算"><a class="markdownIt-Anchor" href="#浮点数的运算"></a> 浮点数的运算</h2>
<h3 id="加减运算"><a class="markdownIt-Anchor" href="#加减运算"></a> 加减运算</h3>
<ul>
<li>对阶
<ul>
<li>小阶向大阶对齐，<span class='p red'>方便处理位数</span>.</li>
</ul>
</li>
<li>尾数加减</li>
<li>规格化
<ul>
<li>如果尾数加减出现类似<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0.0099517</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">0.0099517 ×10^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">0</span><span class="mord">9</span><span class="mord">9</span><span class="mord">5</span><span class="mord">1</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>时，需要“左规”﹔</li>
<li>如果尾数加减出现类似<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>99.517107</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">99.517107×10^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">9</span><span class="mord">9</span><span class="mord">.</span><span class="mord">5</span><span class="mord">1</span><span class="mord">7</span><span class="mord">1</span><span class="mord">0</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>时，需要“右规”</li>
</ul>
</li>
<li>舍入
<ul>
<li>若规定只能保留6位有效尾数，</li>
<li>9.9517107 ×1012→9.95171 ×1012 (多余的直接砍掉)</li>
<li>9.9517107 × 1012→9.95172×1012(若砍掉部分非0，则入1)</li>
<li>也可以采用四舍五入的原则，当舍弃位≥5时，高位入1</li>
</ul>
</li>
<li>溢出
<ul>
<li>若规定阶码不能超过两位，则运算后阶码超出范围，则溢出</li>
<li>
<span class='p red'>只有阶码的溢出才是真正的溢出</span>.
</li>
<li>
<span class='p red'>尾数溢出的话可以采用规格化来处理</span>.
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/hCBaGHyKYZtmLSx.png" alt="image-20220925150615355" /></p>
<ul>
<li>
<mark class="hl-label red">“0”舍“1”入法</mark> :类似于十进制数运算中的“四舍五入”法，即在尾数右移时，被移去的最高数值位为0，则舍去;被移去的最高数值位为1，则在尾数的末位加1。这样做可能会使尾数又溢出，此时需再做一次右规。
</li>
<li>
<mark class="hl-label red">恒置“1”法</mark> :尾数右移时，不论丢掉的最高数值位是“1”还是“O”,都使右移后的尾数末位恒置“1”。这种方法同样有使尾数变大和变小的两种可能。
</li>
</ul>
<h3 id="强制类型转换"><a class="markdownIt-Anchor" href="#强制类型转换"></a> 强制类型转换</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/mnT5j76JxdkAt4q.png" alt="image-20220925151723105" /></p>
<p>char→int  long→double</p>
<p>float→double</p>
<p>范围、精度从小到大，转换过程没有损失</p>
<p>int→float: 可能损失精度</p>
<p>float→int:可能溢出及损失精度</p>
<p>int:表示整数，范围<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><msup><mn>2</mn><mn>31</mn></msup><mi mathvariant="normal">～</mi><msup><mn>2</mn><mn>31</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-2^{31}～2^{31}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback">～</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，有效数字32位</p>
<p>float:表示整数及小数，范围<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>±</mo><mo stretchy="false">[</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>126</mn></mrow></msup><mi mathvariant="normal">～</mi><msup><mn>2</mn><mn>127</mn></msup><mo>×</mo><mo stretchy="false">(</mo><mn>2</mn><mo>−</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>23</mn></mrow></msup><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">±[2^{-126}～2^{127}×(2-2^{-23})]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">±</span><span class="mopen">[</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">2</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback">～</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span><span class="mord mtight">7</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span>，有效数字23+1=24位</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Jnaz3t1RpI7m6HD.png" alt="image-20220925152026115" /></p>
<h2 id="电路的基本原理加法器的设计"><a class="markdownIt-Anchor" href="#电路的基本原理加法器的设计"></a> 电路的基本原理，加法器的设计</h2>
<h3 id="算数逻辑单元alu"><a class="markdownIt-Anchor" href="#算数逻辑单元alu"></a> 算数逻辑单元ALU</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/mWaBiglQAektXIF.png" alt="image-20220925153344647" /></p>
<p>算术运算:加、减、乘、除等</p>
<p>逻辑运算:与、或、非、异或等</p>
<p>辅助功能:移位、求补等</p>
<p>普通的ALU的模型：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/n3XBEQzqCT4wmU6.png" alt="image-20220925153440573" /></p>
<p>A，B是输入信号， K是由CU产生的控制信号， F是输出结果</p>
<p>四输入ALU模型：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ELikz17paquRJW9.png" alt="image-20220925153618509" /></p>
<h3 id="最基本的逻辑运算"><a class="markdownIt-Anchor" href="#最基本的逻辑运算"></a> 最基本的逻辑运算</h3>
<ul>
<li>
<p>与</p>
<ul>
<li>Y = A·B</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">Y</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>或</p>
<ul>
<li>Y = A+B</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<ul>
<li>非
<ul>
<li>Y = 非A</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">A</th>
<th style="text-align:center">Y</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>我们可以看出<span class='p red'>与和或</span>操作都是<span class='p red'>两个数据</span>进行操作,，非操作是一个数据</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/5mBnfQ47ExZV2Ty.png" alt="image-20220925154224637" /></p>
<ul>
<li>
<span class='p red'>优先级 :与>或</span>
<ul>
<li>(类比乘法、加法)</li>
</ul>
</li>
<li>Eg: AB+CD先算与再算或</li>
<li>A(C+D)= AC+ AD    分配律</li>
<li>ABC=A(BC               结合律</li>
<li>A+B+C=A+(B+C)     结合律</li>
</ul>
<p>本质上<span class='p red'>逻辑表达式是对电路的数学化描述</span>，简化逻辑表达式,就是在简化电路，就是在省钱。</p>
<ul>
<li>
<p>与非</p>
<ul>
<li>Y = A·B</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">Y</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/1gbXwFNQfPycJ7L.png" alt="image-20220925155230807" /></p>
<ul>
<li>
<p>或非</p>
<ul>
<li>Y = A+B</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/HtR4BMOY3KCVS1o.png" alt="image-20220925155242224" /></p>
<ul>
<li>
<p>异或</p>
<ul>
<li>Y = A⊕B</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/s4PSjptYdZ8ylen.png" alt="image-20220925155253006" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/6aBeJEMc5m81Xyz.png" alt="image-20220925155511886" /></p>
<p>同或</p>
<ul>
<li>Y = A⊙B</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
<th style="text-align:center">C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/GIPhBpNgcRft53a.png" alt="image-20220925155641900" /></p>
<div class="tip "><p>用门电路实现异或操作</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/mZzvlPSCUB6e1t5.png" alt="image-20220925160530919" /></p>
<div class="tip "><p>一位全加器</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/mC57LutAdfcnbNX.png" alt="image-20220925162031387" /></p>
<div class="tip "><p>串行加法器</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/dYktCmr2IaHxBeo.png" alt="image-20220925162713971" /></p>
<ul>
<li>
<span class='p red'>串行加法器</span>:只有<mark class="hl-label red">一个</mark> 全加器，数据逐位串行送入加法器中进行运算。进位触发器用来寄存进位信号，以便参与下一次运算。
</li>
<li>如果操作数长n位，加法就要分n次进行，每次产生一位和，并且串行逐位地送回寄存器。</li>
</ul>
<div class="tip "><p>并行加法器</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/8XlqYRThbjZeFov.png" alt="image-20220925163028396" /></p>
<ul>
<li>
<span class='p red'>串行进位的并行加法器</span>:把n个全加器串接起来，就可进行两个n位数的相加。
</li>
<li>
<p>串行进位又称为行波进位，每一级进位直接依赖于前一级的进位,即进位信号是逐级形成的。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/MFHqY9ykJjtVPO7.png" alt="image-20220925163200850" /></p>
<h2 id="加法器alu的改进"><a class="markdownIt-Anchor" href="#加法器alu的改进"></a> 加法器，ALU的改进</h2>
<p>前面得出串行进位的并行加法器中，<span class='p red'>计算速度：</span>取决于：<span class='p green'>进位产生和传递的速度</span></p>
<h3 id="如何更快的产生进位"><a class="markdownIt-Anchor" href="#如何更快的产生进位"></a> 如何更快的产生进位</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Bbfe1ORLjVgKanF.png" alt="image-20220925163902664" /></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub><msub><mi>B</mi><mi>i</mi></msub><mo>+</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mi>i</mi></msub><mo>⊕</mo><msub><mi>B</mi><mi>i</mi></msub><mo stretchy="false">)</mo><msub><mi>C</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">C_i=A_iB_i+(A_i⊕B_i)C_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub><msub><mi>B</mi><mi>i</mi></msub><mo>+</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mi>i</mi></msub><mo>⊕</mo><msub><mi>B</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>B</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⊕</mo><msub><mi>B</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><msub><mi>C</mi><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C_i=A_iB_i+(A_i⊕B_i)(A_{i-1}B_{i-1}+(A_{i-1}⊕B_{i-1})C_{i-2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub><msub><mi>B</mi><mi>i</mi></msub><mo>+</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mi>i</mi></msub><mo>⊕</mo><msub><mi>B</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>B</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>⊕</mo><msub><mi>B</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow></msub><msub><mi>B</mi><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>+</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>⊕</mo><msub><mi>B</mi><mrow><mi>i</mi><mo>−</mo><mn>2</mn></mrow></msub><mo stretchy="false">)</mo><msub><mi>C</mi><mrow><mi>i</mi><mo>−</mo><mn>3</mn></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C_i=A_iB_i+(A_i⊕B_i)(A_{i-1}B_{i-1}+(A_{i-1}⊕B_{i-1})(A_{i-2}B_{i-2}+(A_{i-2}⊕B_{i-2})C_{i-3}))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p>
<p>总归能够展开到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">C_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>记作：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mi>i</mi><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub><msub><mi>B</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>i</mi></msub><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub><mo>⊕</mo><msub><mi>B</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">Gi = A_iB_i, P_i=A_i⊕B_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>结论:第i位向更高位的进位C;可根据<span class='p red'>被加数、加数的第1~i位</span>,再结合<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">C_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>即可确定</p>
<h3 id="并行加法器的优化"><a class="markdownIt-Anchor" href="#并行加法器的优化"></a> 并行加法器的优化</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/M5UYSPXkt2uKOQq.png" alt="image-20220925165955943" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/eiGMz7YpW6dPurJ.png" alt="image-20220925170005640" /></p>
<p>我们通过观察发现，第一步算出来的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mn>1</mn></msub><mi mathvariant="normal">和</mi><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">G_1和P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">和</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>我们在计算G2， G3…的时候需要用到，</p>
<ul>
<li>所以我们在第一步计算完G1和P1的时候需要链接一个线路 <span class='p red'>将G1和P1传递到更高位的计算模块中去</span>,</li>
</ul>
<p>同理，第二步算出来的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mn>2</mn></msub><mi mathvariant="normal">和</mi><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">G_2和P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">和</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>我们在计算G3， G4…的时候需要用到，</p>
<ul>
<li>所以我们在第二步计算完G2和P2的时候需要链接一个线路 <span class='p red'>将G2和P2传递到更高位的计算模块中去</span>,</li>
</ul>
<p>这时候每一步的计算复杂度就会小很多，不用<span class='p red'>等待下一步运算结果出来之后再开始计算</span></p>
<ul>
<li>
<span class='p red'>并行进位的并行加法器:各级进位信号同时形成，又称为先行进位、同时进位</span>.
</li>
<li>
<p>但是我们发现<span class='p red'>随着我们的迭代公式增加，我们的方程复杂度越来越大</span>，这时候我们需要进行截断处理，<span class='p red'>我们以四个方程为一组</span>，来进行计算</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/gPiajpNAeqBXZm6.png" alt="image-20220925170600933" /></p>
<p>由4个FA和一些新的线路、运算逻辑组成</p>
<ul>
<li>我们称Pi为进位传递函数，Gi为进位产生函数</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mi>i</mi></msub><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub><msub><mi>B</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">G_i = A_iB_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub><mi mathvariant="normal">和</mi><msub><mi>B</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i和B_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">和</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>都为1的话那么一定会向上产生进位，所以称Gi为进位产生函数</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub><mi mathvariant="normal">和</mi><msub><mi>C</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">P_i和C_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">和</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> 共同与操作来确定是否进位，因为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">C_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>是从低位过来的，所以Pi决定是否向高位出传递</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/I4Oxn9WsyjfcdP6.png" alt="image-20220925170656144" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/cD8SvyOagAYfbMd.png" alt="image-20220925172029615" /></p>
<ul>
<li>
<span class='p red'>单级先行进位方式</span>,又称为<span class='p red'>组内并行</span>、<span class='p red'>组间串行</span>进位方式。
<ul>
<li>组内并行：每一个CLA加法器内部都是安装上面优化的方法，来进行并行操作的</li>
<li>组间串行：每一个组之间有一个先后顺序来依此进行</li>
</ul>
</li>
<li>组内进位信号：</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/KIdrlR6ZQTe3yMo.png" alt="image-20220925172303462" /></p>
<p>记:Gi* =G4+ P4G3+ P4P3G2+ P4P3P2G1;</p>
<p>Pi* = P4P3PP1</p>
<p>Gi* 称为组进位产生函数，Pi*称为组进位传递函数</p>
<ul>
<li>
<p>核心特性:根据本组的4×2个输入位即可确定本组的G* 和P*</p>
</li>
<li>
<p>组间进位信号</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/M5sJ1GKI6eCl4pw.png" alt="image-20220925172519417" /></p>
<p>通过观察组内进位和组间进位信号，我们可以发现这两个的方式形式都类似</p>
<ul>
<li>
<span class='p red'>如果我们改变一下CLA输入的话</span>我们就可以得出C4,8,12,16
</li>
<li>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/3JiYmvHSK1ob4Fh.png" alt="image-20220925172722026" /></p>
</li>
<li>
<p>再改进：</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/CXKGVz2exa8oR1j.png" alt="image-20220925172751530" /></p>
<ul>
<li>
<span class='p red'>多级先进进位方式</span>：获得组内并行，组间并行进位方式
</li>
</ul>
<h3 id="alu优化"><a class="markdownIt-Anchor" href="#alu优化"></a> ALU优化</h3>
<p>原理和CLU相似</p>
<p>初始ALU</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/OLTvFwkyJ4WtUYc.png" alt="image-20220925173108413" /></p>
<p>优化ALU</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/7tEd5sXWgIAoZDk.png" alt="image-20220925173043655" /></p>
<h1 id="第三章存储系统"><a class="markdownIt-Anchor" href="#第三章存储系统"></a> 第三章：存储系统</h1>
<h2 id="存储器的基本概念"><a class="markdownIt-Anchor" href="#存储器的基本概念"></a> 存储器的基本概念</h2>
<h3 id="存储器的层次结构"><a class="markdownIt-Anchor" href="#存储器的层次结构"></a> 存储器的层次结构</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/dCPtxLR5DOahETq.png" alt="image-20220926164201373" /></p>
<p>注:有的教材把安装在电脑内部的磁盘称为“辅存”，把U盘、光盘等称为“外存”，也有的教材把磁盘、U盘、光盘等<span class='p red'>统称为“辅存”或“外存”</span>.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/CIPgWX7erVNh3DJ.png" alt="image-20220926164258336" /></p>
<ul>
<li>
<span class='p red'>辅存中的数据要调用主存后才能够被CPU访问</span>.
</li>
<li>
<p>主存-辅存:实现虚拟存储系统，<span class='p red'>解决了主存容量不够的问题</span>.</p>
</li>
<li>
<p>Cache—主存:<span class='p red'>解决了主存与CPU速度不匹配的问题</span>.</p>
</li>
</ul>
<h3 id="存储器的分类从不同角度进行分类"><a class="markdownIt-Anchor" href="#存储器的分类从不同角度进行分类"></a> 存储器的分类（从不同角度进行分类）</h3>
<h4 id="层次分类"><a class="markdownIt-Anchor" href="#层次分类"></a> 层次分类：</h4>
<ul>
<li>
<p>高速缓存（Cache）</p>
</li>
<li>
<p>主存储器（主存，内存）</p>
</li>
<li>
<p>辅助存储器</p>
</li>
<li>
<span class='p red'>其中高速缓存和主存储器都是可以直接被CPU读写的，辅助存储器中的数据之后调用到主存中，才能够被CPU访问</span>
</li>
</ul>
<h4 id="存储介质"><a class="markdownIt-Anchor" href="#存储介质"></a> 存储介质</h4>
<ul>
<li>半导体存储器（主存，Cache）， 以半导体部件存储信息</li>
<li>磁表面存储器：磁带，磁盘，以磁性材料存储信息</li>
<li>光存储器，以光介质存储信息</li>
</ul>
<h4 id="存取方式"><a class="markdownIt-Anchor" href="#存取方式"></a> 存取方式</h4>
<p>随机存取存储器（RandomAccess Memory,RAM）: 读写任何一个存储单元所需<span class='p red'>时间都相同</span>，与存储单元<span class='p red'>所在的物理位置无关</span>.</p>
<p>顺序存取存储器(SequentialAccess Memory，SAM): 读写一个存储单元所需时间<span class='p red'>取决于存储单元所在的物理位置</span></p>
<p>直接存取存储器（Direct hccessMemory，DAM) :  <span class='p red'>既有随机存取特性，也有顺序存取特性</span>。先直接选取信息所在区域，然后按顺序方式存取。</p>
<p>串行访问存储器: 读写某个存储单元所需时间与存储单元的物理位置有关</p>
<p>相联存储器(Associative Memory） ,即可以<span class='p red'>按内容访问的存储器</span>(ContentAddressed Memory，CAM)可以按照内容检索到存储位置进行读“快表”就是一种相联存储器</p>
<h4 id="信息的可更改性"><a class="markdownIt-Anchor" href="#信息的可更改性"></a> 信息的可更改性</h4>
<p>读写存储器（Read/Write Memory)——即可读、也可写(如:磁盘、内存、Cache)</p>
<p>只读存储器（Read Only Memory)——只能读，不能写(如:实体音乐专辑通常采用CD-ROM,实体电影采用蓝光光碟，BIOS通常写在ROM中)</p>
<h4 id="信息的可保存性"><a class="markdownIt-Anchor" href="#信息的可保存性"></a> 信息的可保存性</h4>
<p>断电后，存储信息消失的存储器―-<span class='p red'>易失性存储器（主存、Cache）</span>.</p>
<p>断电后，存储信息依然保持的存储器――<span class='p red'>非易失性存储器（磁盘、光盘)</span>.</p>
<p>信息读出后，原存储信息被破坏――<span class='p red'>破坏性读出（如DRAM芯片，读出数据后要进行重写)</span>.</p>
<p>信息读出后，原存储信息不被破坏――<span class='p red'>非破坏性读出（如SRAM芯片、磁盘、光盘)</span>.</p>
<h3 id="存储器的性能指标"><a class="markdownIt-Anchor" href="#存储器的性能指标"></a> 存储器的性能指标</h3>
<p>存储容量:存储字数×字长（如1M×8位）。<span class='p red'>MDR位数反映存储字长</span></p>
<p>单位成本:每位价格=总成本/总容量。</p>
<p>存储速度:<span class='p red'>数据传输率</span>=数据的宽度/存储周期。</p>
<ul>
<li>存取时间(Ta）:存取时间是指从<span class='p red'>启动一次存储器操作到完成该操作所经历的时间</span>，分为读出时间和写入时间。</li>
<li>存取周期™: 存取周期又称为读写周期或访问周期。它是<span class='p red'>指存储器进行一次完整的读写操作所需的全部时间</span>，即连续两次独立地访问存储器操作（读或写操作）之间所需的<span class='p red'>最小时间间隔</span>。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/GaVMlw4yz5Rmn2r.png" alt="image-20220926173949583" /></p>
<p>主存带宽（Bm):<span class='p red'>主存带宽又称数据传输率</span>，表示每秒从主存进出信息的最大数量，单位为字/秒、字节/秒（B/s）或位/秒(b/s） 。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/QwBaO4vyijGpSJl.png" alt="image-20220926174113203" /></p>
<h2 id="主存储器的基本组成-2"><a class="markdownIt-Anchor" href="#主存储器的基本组成-2"></a> 主存储器的基本组成</h2>
<h3 id="半导体元件的原理"><a class="markdownIt-Anchor" href="#半导体元件的原理"></a> 半导体元件的原理</h3>
<ul>
<li>为什么称作半导体：<span class='p red'>这种元器件，在特定情况下可以导通</span></li>
</ul>
<p>存储元的基本图示：</p>
<ul>
<li>MOS管可理解为一种电控开关，输入电压达到某个阈值时，MOS管就可以接通，<span class='p red'>是一个半导体元件</span></li>
<li>当电容中有电的时候，表明这个电容存放的数据是1，</li>
<li>当电容中没有电的时候，表明这个电容存放的数据是0，</li>
<li>因为电容的一端是接地的，所以就看另一端的电容板上电压是高电压还是低电压</li>
</ul>
<p>​	<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/s4vnGSUk5AXOlHy.png" alt="image-20220926175210628" /></p>
<ul>
<li>上述存储元存数据和写数据的方式</li>
<li>读：
<ul>
<li>给MOS管一个高电压，让这个电路接通，</li>
<li>如果电容中有电的话，<span class='p red'>电子就会顺着导线向外流动，外部感受到高电压，表明这时候从中读取了1</span></li>
<li>如果电容中没有电的话，外部的会感受到低电压，那么表明这时候从中读取了数据 0</li>
</ul>
</li>
<li>写
<ul>
<li>给MOS管一个高电压，让这个电路接通，</li>
<li>如果想要写入数据 0的话，我们就给外部一个低电压，那么电容中还是不存电</li>
<li>如果想要写入数据1的话，我们给外部一个高电压，那么电容中会存电</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/gaSwZe3yuTKYqN7.png" alt="image-20220926180325589" /></p>
<h3 id="存储芯片的基本原理"><a class="markdownIt-Anchor" href="#存储芯片的基本原理"></a> 存储芯片的基本原理</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/uTPJ3Hrw5MxVeKA.png" alt="image-20220926185325310" /></p>
<ul>
<li>如果先要获取MAR中存放地址的数据需要经过以下步骤
<ol>
<li>MAR先通过译码器翻译成机械码，例如图中MAR中的地址为：000，表明现在要读取第0个单元的数据，这时候我们通过译码器将<span class='p red'>地址信息为0号的字选线设置为1（高电平）</span></li>
<li>这时候第0个单元的数据开始进行读取，将读取的数据放到数据总线上去</li>
</ol>
</li>
<li>改进：<span class='p red'>添加控制电路</span>
<ol>
<li>因为地址总线放入MAR中的数据是以高低电压为信号的，所以我们需要在<span class='p red'>其电压稳定之后再讲MAR中的数据放到译码器中</span></li>
<li>我们在MDR中电流稳定的时候才能将数据放到数据总线中</li>
</ol>
</li>
<li>外接线：
<ul>
<li>片选线CS 和CE （Chip Control or Chip Enable），上面有一个横线表明低电平有效</li>
<li>读写控制线：
<ul>
<li>两根读/写线</li>
<li>WE允许写</li>
<li>OE允许读</li>
<li>一根读写线：
<ul>
<li>WE低电平写</li>
<li>高电平读</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/EV6CNiMwST5sra9.png" alt="image-20220927105616680" /></p>
<p>移码驱动：保证译码器输出的电信号稳定，其实就是把电信号放大的一个部件</p>
<p>片选线：来控制那个存储芯片有效，因为一个存储器中有很多个存储芯片</p>
<p>每一个存储芯片都有一定数量的金属引脚：<span class='p red'>数量</span>: 每一个地址线对应着一个金属引脚，每一个数据线对应着一个金属引脚，片选线对应着一个金属引脚，读写控制线至少对应着两个引脚</p>
<p>n位地址→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>个存储单元</p>
<p>总容量 = 存储单元个数×存储字长 = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mo>×</mo><mn>8</mn><mi>b</mi><mi>i</mi><mi>t</mi><mo>=</mo><msup><mn>2</mn><mn>3</mn></msup><mo>×</mo><mn>1</mn><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mo>=</mo><mn>8</mn><mi>B</mi></mrow><annotation encoding="application/x-tex">2^3 \times 8bit = 2^3 ×1Byte = 8B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></p>
<p>8×8位的存储芯片</p>
<p>常见的描述:8K×8位，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>13</mn></msup><mo>×</mo><mn>8</mn><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">2^{13}×8bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span></span></span></span><br />
8K×1位，即$2^{13}×1bit$64K×16位，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup><mo>×</mo><mn>16</mn><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">2^{16}×16bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span></span></span></span></p>
<h3 id="如何实现不同的寻址方式"><a class="markdownIt-Anchor" href="#如何实现不同的寻址方式"></a> 如何实现不同的寻址方式</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/AuLM8hiRPWSOKpl.png" alt="image-20220928100940473" /></p>
<p>总容量为1KB地址线:10根</p>
<p>按字节寻址:1K个单元，每个单元1B</p>
<p>按字寻址:256个单元，每个单元4B</p>
<p>按半字寻址:512个单元，每个单元2B</p>
<p>按双字寻址:128个单元，每个单元8B</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/IqXxv8aAF7TsSlp.png" alt="image-20220928101056208" /></p>
<h2 id="sram和dram"><a class="markdownIt-Anchor" href="#sram和dram"></a> SRAM和DRAM</h2>
<ul>
<li>
<span class='p red'>随机存储器</span>
</li>
</ul>
<p>Dynamic  Random Access Memory，即动态RAM，用于<span class='p red'>主存</span></p>
<p>Static  Random Access Memory，即静态RAM，用于<span class='p red'>Cache</span></p>
<p>高频考点：DRAM和SRAM的对比</p>
<div class="tip "><p>栅极电容DRAM</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Jkw3NvZxHOl6jFe.png" alt="image-20220928103619254" /></p>
<p>读出1: MOS管接通,电容放电，数据线上产生电流</p>
<ul>
<li>电容放电信息被破坏，是<span class='p red'>破坏性读出</span>。读出后应有<span class='p red'>重写</span>操作，也称“再生”</li>
<li>
<mark class="hl-label red">读写速度更慢</mark> 
</li>
</ul>
<p>读出0: MOS管接通后，数据线上无电流</p>
<ul>
<li>
<span class='p red'>每个存储元制造成本更低，集成度高，功耗低</span>.
</li>
<li>2ms之内必须“刷新”一次（给电容充电）</li>
</ul>
<div class="tip "><p>双稳态触犯器</p>
</div>
<p>输出1：A高B低</p>
<p>输出0：A低B高</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/VSxL4q57ysRcAUo.png" alt="image-20220928103930385" /></p>
<p>读出数据，触发器状态保持稳定,是<span class='p red'>非破坏性读出</span>.</p>
<ul>
<li>
<mark class="hl-label green">读写速度更快</mark> 
</li>
<li>
<span class='p red'>每个存储元制造成本更高，集成度低</span>.
</li>
<li>只要不断电,触发器的状态就不会改变</li>
</ul>
<h3 id="dram的刷新"><a class="markdownIt-Anchor" href="#dram的刷新"></a> DRAM的刷新</h3>
<ol>
<li>多久需要刷新一次？
<ul>
<li>刷新周期：<span class='p red'>一般为2ms</span></li>
</ul>
</li>
<li>每次刷新多少存储单元？
<ul>
<li>以行地址为单位，每次刷新一行存储单元</li>
<li>为什么需要使用行列地址，减少选通线的数量</li>
</ul>
</li>
</ol>
<p>简单存储器</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/8XzZ5u4fwcDPb36.png" alt="image-20220928144842722" /></p>
<p>行列存储器：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/hBJZ6EyL2bRVawQ.png" alt="image-20220928144924227" /></p>
<ul>
<li>如<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup><mo>=</mo><mn>256</mn></mrow><annotation encoding="application/x-tex">2^8=256</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span></span></span></span>根选通线，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>4</mn></msup><mo>+</mo><msup><mn>2</mn><mn>4</mn></msup><mo>=</mo><mn>32</mn></mrow><annotation encoding="application/x-tex">2^4+2^4=32</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">2</span></span></span></span>根选通线</li>
</ul>
<ol start="3">
<li>如何刷新？
<ul>
<li>有硬件支持，读写一行的信息之后重新写入，占用一个读写周期</li>
</ul>
</li>
<li>再什么时候刷新？
<ul>
<li>存取周期假设DRAM内部结构排列成128×128的形式，读/写周期0.5us，2ms共2ms/0.5us = 4000个周期</li>
</ul>
</li>
</ol>
<ul>
<li>第一种方式：
<ul>
<li>每次读写完都刷新一行→系统的存取周期变为1us，前0.5us时间用于正常读写后0.5us时间用于刷新某行</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/fYw14oFRMcnSzN3.png" alt="image-20220928150107577" /></p>
<ul>
<li>第二种方式：
<ul>
<li>2ms内集中安排时间全部刷新→系统的存取周期还是0.5us有一段时间专门用于刷新，无法访问存储器，称为访存“死区”</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/UiS3KmTvarIyzx7.png" alt="image-20220928150231642" /></p>
<ul>
<li>第三种方式：
<ul>
<li>2ms内每行刷新1次即可，2ms内需要产生128次刷新请求每隔2ms/128= 15.6us一次，每15.6us内有0.5us的“死时间”</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/yY2vBd1Xi36b8ah.png" alt="image-20220928150347837" /></p>
<ul>
<li>因为DRAM中的行列地址，所以我们在计算地址线，<span class='p red'>地址引脚减半</span></li>
</ul>
<h2 id="只读存储器rom"><a class="markdownIt-Anchor" href="#只读存储器rom"></a> 只读存储器ROM</h2>
<p>RAM芯片――易失性，断电后数据消失</p>
<p>ROM芯片――非易失性，断电后数据不会丢失</p>
<p>MROM( Mask Read-Only Memory） ――掩模式只读存储器</p>
<ul>
<li>广家按照客户需求，在芯片生产过程中直接写入信息，之后<span class='p red'>任何人不可重写</span>(只能读出)可靠性高、灵活性差、生产周期长、只适合批量定制</li>
</ul>
<p>PROM (Programmable Read-Only Memory) ――可编程只读存储器</p>
<ul>
<li>用户可用专门的PROM写入器写入信息，<span class='p red'>写一次之后就不可更改</span>.</li>
</ul>
<p>EPROM (Erasable Programmable Read-Only Memory)――可擦除可编程只读存储器</p>
<ul>
<li>允许用户写入信息，之后用某种方法擦除数据，<span class='p red'>可进行多次重写</span>.</li>
<li>UVEPROM (ultraviolet rays）――用紫外线照射8~20分钟，擦除<span class='p red'>所有</span>信息</li>
<li>EEPROM（也常记为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>E</mi><mn>2</mn></msup><mi>P</mi><mi>R</mi><mi>O</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">E^2PROM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>，第一个E是Electrically)――可用“电擦除”的方式，擦除<span class='p red'>特定的字</span>.</li>
</ul>
<p>Flash Memory ――闪速存储器（注:U盘、SD卡就是闪存）</p>
<ul>
<li>在EEPROM基础上发展而来，断电后也能保存信息，且<span class='p red'>可进行多次快速擦除重写</span>.</li>
<li>注意:由于闪存需要先擦除在写入，因此<span class='p red'>闪存的“写”速度要比“读”速度更慢</span>。</li>
</ul>
<p>SSD ( Solid State Drives) ――固态硬盘</p>
<ul>
<li>由控制单元+存储单元（Flash芯片）构成，与闪速存储器的核心区别在于控制单元不一样，但存储介质都类似，<span class='p red'>可进行多次快速擦除重写</span>。SSD速度快、功耗低、价格高。目前个人电脑上常,用SSD取代传统的机械硬盘</li>
</ul>
<div class="tip "><p>计算机内的重要ROM</p>
</div>
<ul>
<li>主板上的BIOS芯片（ROM) ,存储了“自举装入程序”，负责引导装入操作系统（开机）</li>
<li>逻辑上,主存由RAM+ROM组成,且二者常统一编址</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Ln4sO1Dk8pyrCUF.png" alt="image-20220928153624603" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/b7XgVs93Z6prECk.png" alt="image-20220928153705437" /></p>
<ul>
<li>
<p>很多ROM芯片虽然名字是“Read-Only”，但<span class='p red'>很多ROM也可以“写”</span>.</p>
</li>
<li>
<span class='p red'>闪存的写速度一般比读速度更慢</span>，因为写入前要先擦除
</li>
<li>
<p>RAM芯片是易失性的，ROM芯片是非易失性的。很多<span class='p red'>ROM也具有“随机存取”;的特性</span>.</p>
</li>
</ul>
<h2 id="存储器与cpu的链接"><a class="markdownIt-Anchor" href="#存储器与cpu的链接"></a> 存储器与CPU的链接</h2>
<h3 id="单块存储芯片与cpu的连接"><a class="markdownIt-Anchor" href="#单块存储芯片与cpu的连接"></a> 单块存储芯片与CPU的连接</h3>
<div class="tip "><p>解决数据总线宽度＞存储芯片字长</p>
</div>
<ul>
<li>使用位扩展和字扩展</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/9mnNgzB4dS27Ty1.png" alt="image-20220928163031986" /></p>
<div class="tip "><p>现代计算机结构</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/OnrK9xF8H2YfL3P.png" alt="image-20220928163319958" /></p>
<ul>
<li>一般主存中有多个存储芯片</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/VghoeNruPcx7JK5.png" alt="image-20220928163914402" /></p>
<p>上面有横杆的是低电平有效，上面没杠的是高电平有效</p>
<div class="tip warning"><p>如果让多个芯片之间互相连接</p>
</div>
<h3 id="位扩展"><a class="markdownIt-Anchor" href="#位扩展"></a> 位扩展</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/lDGoOMrZme3C1aF.png" alt="image-20220928171600090" /></p>
<p>例如上面这张图：每一个芯片的地址为为1位操作，但是CPU地址总线为8位，所以如果<span class='p red'>只有一个芯片的话无法满足CPU一次性读取的位数</span>，这时候我们需要使用位扩展，<span class='p red'>将多片一位芯片扩展为多位芯片</span>.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/SosuQNaUMbF4wdf.png" alt="image-20220928172050317" /></p>
<h3 id="字扩展"><a class="markdownIt-Anchor" href="#字扩展"></a> 字扩展</h3>
<ul>
<li>看下面这个图片，<span class='p red'>数据位（MDR）都占满了</span>，但是<span class='p red'>扩展位（MAR）没有全部使用</span>，这时候我们需要使用<span class='p red'>位扩展</span>来解决这个问题</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Qb9Uxirh7Efze8w.png" alt="image-20220928172151076" /></p>
<p>解决方法一：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/EwRLBeQnvWPV4MI.png" alt="image-20220928172856840" /></p>
<ul>
<li>
<span class='p red'>线选法</span>:使用多余的地址线来控制每一个芯片,为每一个芯片<span class='p red'>都使用一个地址线</span>，所以称为线选法。
</li>
<li>但是如果我们A13和A14都是1的话，那么芯片一和芯片二都会输出数据，会导致出错。</li>
</ul>
<p>解决方法二：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/AIXi5moepsz7UuW.png" alt="image-20220928173427741" /></p>
<p>采用译码器</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/JADR8hYzXZSrbk1.png" alt="image-20220928173534867" /></p>
<table>
<thead>
<tr>
<th style="text-align:center">线选法</th>
<th style="text-align:center">译码片选法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">n条线→n个选片信号</td>
<td style="text-align:center">n条线→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>个选片信号</td>
</tr>
<tr>
<td style="text-align:center">电路简单</td>
<td style="text-align:center">电路复杂</td>
</tr>
<tr>
<td style="text-align:center">地址空间不连续</td>
<td style="text-align:center">地址空间连续</td>
</tr>
</tbody>
</table>
<h3 id="字位同时扩展"><a class="markdownIt-Anchor" href="#字位同时扩展"></a> 字位同时扩展</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/7hmxIWSFj5toyqM.png" alt="image-20220928173850684" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/r8ftMlUoZEaq23V.png" alt="image-20220928173913219" /></p>
<h3 id="译码器"><a class="markdownIt-Anchor" href="#译码器"></a> 译码器</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/IeOwSbu6FigfMkU.png" alt="image-20220928174728974" /></p>
<ul>
<li>这里的译码器<span class='p red'>多了一个使能信号</span>，和CS片选线控制信号功能类似，</li>
<li>使能信号的功能：能够让地址信号稳定后才向存储器发出请求信号</li>
</ul>
<h2 id="双口ram和多模块存储器"><a class="markdownIt-Anchor" href="#双口ram和多模块存储器"></a> 双口RAM和多模块存储器</h2>
<div class="tip warning"><p>RAM存在的问题</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/MyLNxrQZ5TRfA2W.png" alt="image-20220929221104346" /></p>
<ul>
<li>
<span class='p red'>存储周期</span>：<span class='p green'>可以连续读/写的最短时间间隔</span>
</li>
</ul>
<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>DRAM芯片的恢复时间比较长，有可能是存取时间的几倍（SRAM的恢复时间较短)；</p>
<p>如:存取时间为r，存取周期为T，T=4r</p>
<p>问题：</p>
<p>多核CPU都要访存，怎么办?<br />
CPU的读写速度主存快很多主存恢复时间太长怎么办?</p>
</div>
<h3 id="提升主存速度"><a class="markdownIt-Anchor" href="#提升主存速度"></a> 提升主存速度</h3>
<div class="tip "><p>双口RAM</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Ss2iMgqZCnkBYW8.png" alt="image-20220929222146711" /></p>
<p>需要有两组完全独立的数据线、地址线、控制线。CPU、RAM中也要有更复杂的控制电路</p>
<p>两个端口对同一主存操作有以下4种情况:</p>
<ol>
<li>两个端口同时对不同的地址单元存取数据。<span class='p green'>允许操作</span>.</li>
<li>两个端口同时对同一地址单元读出数据。<span class='p green'>允许操作</span>.</li>
<li>两个端口同时对同一地址单元写入数据。<span class='p red'>禁止操作，写入错误</span>.</li>
<li>两个端口同时对同一地址单元，一个写入数据，另一个读出数据。<span class='p red'>禁止操作，读出错误</span>.</li>
</ol>
<ul>
<li>
<span class='p red'>解决方法:置“忙”信号为0</span>
</li>
</ul>
<div class="tip "><p>多模块存储器</p>
</div>
<ul>
<li>高体交叉编址的多位存储器</li>
<li>
<span class='p red'>连续存储的时候，按地址依此读取，是一个内存读取的</span>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/fHLu9cejZbMhEXw.png" alt="image-20220929224249587" /></p>
<ul>
<li>低位交叉编址的多位存储器</li>
<li>
<span class='p red'>连续存储的时候，按地址依此读取，是多个内存读取的</span>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/WAwaydqDJCsIlce.png" alt="image-20220929224807915" /></p>
<ul>
<li>
<span class='p red'>每个存储体存取周期为T存取时间为r，假设T=4r</span>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/4XgRxQ8z3W1jSEn.png" alt="image-20220929225112521" /></p>
<ul>
<li>连续读取n个存储字 耗时nT</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ps7c6wyx2CrTenU.png" alt="image-20220929225505300" /></p>
<ul>
<li>宏观上读写个字的时间接近r</li>
</ul>
<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>为什么要探讨“连续访问” 的情况？</p>
<ol>
<li>在写程序的时候，如果没有特殊情况的话，我们都是按照程序顺序依此进行的</li>
<li>在实际应用的时候许多数据都是按照连续存储的，例如数组</li>
</ol>
</div>
<div class="tip "><p>应该取几个“体”</p>
</div>
<p>采用“<span class='p yellow'>流水线</span>”的方式并行存取（宏观上并行，微观上串行)</p>
<p>宏观上，一个存储周期内，m体交叉存储器可以提供的数据量为单个模块的m倍。</p>
<p>存取周期为T，<span class='p red'>存取时间为r</span>，为了使流水线不间断，应保证模块数m≥T/r</p>
<p>存取周期为T，<span class='p red'>总线传输周期为r</span>，为了使流水线不间断，应保证模块数m≥T/r</p>
<ul>
<li>这时候需要CPU需要<span class='p red'>等待R</span>.</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/lSXPyA8tT7F9s1x.png" alt="image-20220929231209986" /></p>
<ul>
<li>这时候需要CPU会<span class='p red'>闲置r</span>.</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/a3fKErDSk7ywvo5.png" alt="image-20220929231219183" /></p>
<ul>
<li>这时候CPU得到充分的利用<span class='p red'>完美衔接</span></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ps7c6wyx2CrTenU.png" alt="image-20220929225505300" /></p>
<ul>
<li>特点：
<ul>
<li>每个模块都有相同的容量和存取速度。</li>
<li>各模块都有独立的读写控制电路、地址寄存器和数据寄存器。它们既能并行工作，又能交叉工作。</li>
</ul>
</li>
</ul>
<div class="tip "><p>单体多字存储器</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/5y3EYUePzL9uHlb.png" alt="image-20220929232224415" /></p>
<ul>
<li>每个存储单元存储m个字总线宽度也为m个字<span class='p red'>一次并行读出m个字</span>.</li>
<li>每次只能同时取m个字，<span class='p red'>不能单独取</span>其中某个字，指令和数据在主存内必须是<span class='p red'>连续存放的</span>.</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/WEsKrRNzjQ4CtkH.png" alt="image-20220929232243553" /></p>
<h3 id="内存条插入方法低位交叉存储器"><a class="markdownIt-Anchor" href="#内存条插入方法低位交叉存储器"></a> 内存条插入方法：低位交叉存储器</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/CPizpkVSjKsW58X.png" alt="image-20220930082723528" /></p>
<p>例如这个主板上的有四个内存条插口：</p>
<p>如何插入内存条，实现高位交叉的多体存储器（相当于单纯的扩容)？</p>
<ul>
<li>插入颜色不同的内存条插口形成<span class='p red'>高位交叉多体存储器</span>.</li>
</ul>
<p>如何插入内存条，实现低位交叉的多体存储器（俗称“双通道”)?</p>
<ul>
<li>插入颜色相同的内存条插口形成<span class='p red'>低位交叉多体存储器</span>.</li>
</ul>
<p>Tips:买内存条时，可挑选相同主频、相同容量的两根来组成双通道:</p>
<ul>
<li>如果主频不同的话，按照低频率的内存条的频率来进行读取数据<span class='p red'>频率高的那个内存条会进行降频处理</span>，</li>
<li>如果容量不同的话，多出来的容量会形成高位交叉多体存储器，速度还是慢</li>
</ul>
<h2 id="cache基本原理基本概念"><a class="markdownIt-Anchor" href="#cache基本原理基本概念"></a> Cache基本原理，基本概念</h2>
<div class="tip warning"><p>虽然我们通过双端口RAM，多块存储器提高存储器的工作速度，但是优化之后的速度还是与CPU的速度差异很大，这时候我们引入“Cache-主存”来改善存储体系的速度，程序访问的局部性原理</p>
</div>
<h3 id="cache工作原理"><a class="markdownIt-Anchor" href="#cache工作原理"></a> Cache工作原理</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/QMsX4o5hkgYURLT.png" alt="image-20220930090629135" /></p>
<ul>
<li>我们在运行程序的时候分为以下几个步骤
<ol>
<li>首先从辅存中读取数据到内存中，<span class='p red'>这样辅存中的数据才能够被CPU访问</span>.</li>
<li>我们将内存中<span class='p red'>这一时间段内需要经常使用的数据放到Cache中</span>.</li>
<li>CPU通过向Cache或者内存中读取数据来进行数据处理</li>
</ol>
</li>
<li>实际上，Cache被集成在CPU内部Cache用SRAM实现，速度快，成本高</li>
</ul>
<h3 id="局部性原理"><a class="markdownIt-Anchor" href="#局部性原理"></a> 局部性原理</h3>
<ul>
<li>
<mark class="hl-label red">空间局部性</mark> :在最近的未来要用到的信息(指令和数据)，很可能与现在正在使用的信息在存储空间上是邻近的
<ul>
<li>例如数组，顺序执行的指令代码</li>
</ul>
</li>
<li>
<mark class="hl-label red">时间局部性</mark> :在最近的未来要用到的信息，很可能是现在正在使用的信息
<ul>
<li>循环结构的指令代码</li>
</ul>
</li>
<li>基于局部性原理，不难想到，可以把CPU目前访问的地址“周围”的<span class='p red'>部分数据放到Cache中</span>.</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/IF7bkXUxtYg6lpe.png" alt="image-20220930091458450" /></p>
<ul>
<li>程序A是顺序存储的数组，按行存储</li>
<li>程序B是跳序存储的数组，按列存储</li>
<li>由于数组在内存中的存储方式以按行顺序存储的，所以在执行程序A的时候，大概率会将A后面一部分放到Cache中，但是由于B不是按照顺序存储的，所以B程序运行时间大概率比A慢的多</li>
</ul>
<h3 id="性能分析"><a class="markdownIt-Anchor" href="#性能分析"></a> 性能分析</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/l9OM6JX5qjBWbyx.png" alt="image-20220930091912628" /></p>
<p>设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">t_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为访问一次Cache所需时间,<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>t</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">t_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为访问一次主存所需时间</p>
<p>命中率H:CPU欲访问的信息已在Cache中的比率,<span class='p red'>就是CPU想要访问的数据已经放到Cache中的概率</span>.</p>
<p>缺失（未命中）率M= 1-H</p>
<ul>
<li>
<p>访问时间</p>
</li>
<li>
<p>先访问Cache，若Cache未命中在访问主存</p>
<ul>
<li>Cache—主存系统的<span class='p red'>平均访问时间</span>t为：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>=</mo><mi>H</mi><msub><mi>t</mi><mi>c</mi></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>H</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>t</mi><mi>c</mi></msub><mo>+</mo><msub><mi>t</mi><mi>m</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">t = Ht_c+(1-H)(t_c+ t_m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
</ul>
</li>
<li>
<p>同时访问Cache和主存，若Cache命中则立即停止访问主存</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>=</mo><mi>H</mi><msub><mi>t</mi><mi>c</mi></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>H</mi><mo stretchy="false">)</mo><msub><mi>t</mi><mi>m</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">t = Ht_c+(1-H)t_m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
</ul>
</li>
</ul>
<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>假设Cache的速度是主存的5倍，且Cache的命中率为95%，则采用Cache后，存储器性能提高多少(设Cache和主存同时被访问，若Cache命中则中断访问主存)?</p>
<p>设Cache的存取周期为t，则主存的存取周期为5t</p>
<ul>
<li>
<p><span class='p red'>若Cache和主存同时访问</span>，命中时访问时间为t，未命中时访问时间为5t</p>
<ul>
<li>平均访问时间为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0.95</mn><mo>×</mo><mi>t</mi><mo>+</mo><mn>0.05</mn><mo>×</mo><mn>5</mn><mi>t</mi><mo>=</mo><mn>1.2</mn><mi>t</mi></mrow><annotation encoding="application/x-tex">0.95\times t+0.05\times 5t= 1.2t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">9</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord mathdefault">t</span></span></span></span></li>
<li>故性能为原来的5/1.2≈4.17倍</li>
</ul>
</li>
<li>
<p><span class='p red'>若先访问cache再访问主存</span>，命中时访问时间为t，未命中时访问时间为t+5t</p>
</li>
<li>
<p>平均访问时间为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mi>a</mi></msub><mo>=</mo><mn>0.95</mn><mo>×</mo><mi>t</mi><mo>+</mo><mn>0.05</mn><mo>×</mo><mn>6</mn><mi>t</mi><mo>=</mo><mn>1.25</mn><mi>t</mi></mrow><annotation encoding="application/x-tex">T_a=0.95×t+0.05×6t=1.25t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">9</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mord mathdefault">t</span></span></span></span></p>
</li>
<li>
<p>故性能为原来的5/1.25 = 4倍</p>
</li>
</ul>
</div>
<h3 id="有待解决的问题"><a class="markdownIt-Anchor" href="#有待解决的问题"></a> 有待解决的问题</h3>
<p>基于局部性原理，不难想到，可以把CPU目前访问的地址“<span class='p red'>周围</span>”的部分数据放到Cache中。如何界定“<span class='p red'>周围</span>”?</p>
<p>将主存的<span class='p red'>存储空间“分块”</span>，如:每1KB为一块。<span class='p red'>主存与Cache之间以“块”为单位进行数据交换</span>.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/nmyaOxSVe5hu2tD.png" alt="image-20220930093658738" /></p>
<p>主存地址共22位：</p>
<table>
<thead>
<tr>
<th style="text-align:center">块号</th>
<th style="text-align:center">块内地址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">12位</td>
<td style="text-align:center">10位</td>
</tr>
</tbody>
</table>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><mi>M</mi><mo>=</mo><msup><mn>2</mn><mn>22</mn></msup><mi mathvariant="normal">，</mi><mn>1</mn><mi>K</mi><mo>=</mo><msup><mn>2</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">4M=2^{22}，1K=2^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span><br />
整个主存被分为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>12</mn></msup><mo>=</mo><mn>4096</mn></mrow><annotation encoding="application/x-tex">2^{12}= 4096</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span></span></span></span>块</p>
<ul>
<li>操作系统中,通常将主存中的&quot;一个<span class='p red'>块</span>&quot;也称为&quot;一个页/页面/页框&quot;</li>
<li>Cache中的“<span class='p red'>块</span>”也称为“<span class='p red'>行</span>”</li>
</ul>
<p>注意：</p>
<ul>
<li>
<mark class="hl-label red">每次CPU在主存中访问的数据块，一定会立即被调入Cache</mark> 
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/eXsnmtJOfTNGpuj.png" alt="image-20220930090024189" /></p>
<p>如何区分Cache 与主存的数据块对应关系?</p>
<ul>
<li>Cache和主存的映射方式</li>
</ul>
<p>Cache很小，主存很大。如果cache满了怎么办?</p>
<ul>
<li>替换算法</li>
</ul>
<p>CPU修改了Cache中的数据副本，如何确保主存中数据母本的一致性?</p>
<ul>
<li>Cache写策略</li>
</ul>
<h2 id="cache与主存的三种映射方式"><a class="markdownIt-Anchor" href="#cache与主存的三种映射方式"></a> Cache与主存的三种映射方式</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/zt1LYGo4gI9lHkx.png" alt="image-20220930101734180" /></p>
<ul>
<li>全相联映射：<span class='p red'>主存块可以放在Cache的任意位置</span>.</li>
<li>直接映射: <span class='p red'>每个主存块只能放到一个特定的位置:Cache块号=主存块号% Cache总块数</span>.</li>
<li>组相联映射：Cache块分为若干组，每个主存块可放到特定分组中的任意一个位置，组号=主存块号%分组数</li>
</ul>
<h3 id="全相联映射"><a class="markdownIt-Anchor" href="#全相联映射"></a> 全相联映射</h3>
<p>假设某个计算机的主存地址空间大小为256MB，按字节编址，其数据Cache有8个Cache行（<span class='p red'>即Cache块，与主存块的大小相等</span>），行长为64B。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>256</mn><mi>M</mi><mo>=</mo><msup><mn>2</mn><mn>28</mn></msup></mrow><annotation encoding="application/x-tex">256M=2^{28}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span></span>主存的地址共28位:</p>
<table>
<thead>
<tr>
<th style="text-align:center">主存块号</th>
<th style="text-align:center">块内地址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">22位</td>
<td style="text-align:center">6位</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/wYSf58Tpa6GObih.png" alt="image-20220930103151500" /></p>
<p>CPU访问主存地址1…1101001110:</p>
<ul>
<li>主存地址的<span class='p red'>前22位</span>,对比Cache中所有块的<span class='p red'>标记</span>;</li>
<li>若标记匹配且有效位=1，则cache命中,访问块内地址为001110的单元。</li>
<li>若未命中或有效位=0，则正常访问主存</li>
</ul>
<h3 id="直接映射只能存放在固定位置"><a class="markdownIt-Anchor" href="#直接映射只能存放在固定位置"></a> 直接映射（只能存放在固定位置）</h3>
<p>假设某个计算机的主存地址空间大小为256MB，按字节编址，其数据Cache有8个Cache行，行长为64B。</p>
<p>直接映射，主存块在cache中的<span class='p red'>位置=主存块号取余Cache总块数</span>.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Hn8O61dblVmjBCq.png" alt="image-20220930103839367" /></p>
<ul>
<li>
<span class='p rd'>缺点</span>: 其他有空闲的Cache块，但是8号主存块不能够使用
</li>
<li>这里标记位是22位，能否优化一下
<ul>
<li>若Cache总块数=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>则<span class='p red'>主存块号末尾n位直接反映它在Cache中的位置</span>.</li>
<li>
<span class='p red'>将主存块号的其余位作为标记即可</span>.
</li>
</ul>
</li>
</ul>
<p>CPU访问主存地址0…01000 001110 :</p>
<ol>
<li>根据主存块号的<span class='p red'>后3位确定Cache行</span></li>
<li>若主存块号的<span class='p red'>前19位</span>与Cache<span class='p red'>标记</span>匹配且有效位=1，则Cache命中，访问块内地址为001110的单元。</li>
<li>若未命中或有效位=0，则正常访问主存</li>
</ol>
<h3 id="组相联映射"><a class="markdownIt-Anchor" href="#组相联映射"></a> 组相联映射</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/qxiTIW9nrHtwvM7.png" alt="image-20220930105015005" /></p>
<p>CPU访问主存地址1…1101001110 :</p>
<ol>
<li>根据主存块号的<span class='p red'>后2位</span>确定所属分组号</li>
<li>若主存块号的<span class='p red'>前20位</span>与分组内的某个<span class='p red'>标记</span>匹配且效位=1,则cache命中，访问块内地址为001110的单元。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ex7mOGcwkVNEaL3.png" alt="image-20220930105050279" /></p>
<h2 id="cache替换算法"><a class="markdownIt-Anchor" href="#cache替换算法"></a> Cache替换算法</h2>
<ul>
<li>替换算法只会用到<span class='p red'>全相联映射和组相联映射</span>，直接映射无需考虑替换算法。</li>
</ul>
<div class="tip "><p>随机算法（RAND）</p>
</div>
<ul>
<li>
<span class='p red'>随机算法（RAND</span> ,Random)一―若cache已满，则随机选择一块替换。
</li>
</ul>
<p>设总共有4个cache块，初始整个Cache为空。采用全相联映射，依次访问主存块{1,2,3,4,1,2,5,1,2,3,4,5}</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/rgqBQ2DUVlzaEMd.png" alt="image-20220930142045382" /></p>
<ul>
<li>随机算法――实现简单，<span class='p red'>但完全没考虑局部性原理，命中率低</span>，(实际效果很不稳定)</li>
</ul>
<div class="tip "><p>先进先出算法（FIFO）</p>
</div>
<ul>
<li>
<span class='p red'>先进先出算法（FIFO</span>, First In First Out）一―若Cache已满，则替换最先被调入Cache的块
</li>
</ul>
<p>设总共有4个Cache块，初始整个cache为空。采用全相联映射，依次访问主存块{1,2,3,4,1,2,5,1,2,3,4,5}</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/eVTA9ksREyzfO3a.png" alt="image-20220930142322292" /></p>
<p>先进先出算法――实现简单，最开始按#O#1#2#3放入Cache，之后轮流替换#0#1#2#3FIFO</p>
<p>依然没考虑局部性原理，<span class='p red'>最先被调入Cache的块也有可能是被频繁访问的</span>.</p>
<ul>
<li>
<span class='p red'>抖动现象</span>:频繁的换入换出现象(刚被替换的块很快又被调入)
</li>
</ul>
<div class="tip "><p>近期最少使用（LRU）</p>
</div>
<ul>
<li>
<span class='p red'>近期最少使用算法(LRU</span>, Least Recently Used )——为每一个Cache块设置一个“<span class='p yellow'>计数器</span>”，用于记录每个cache块已经有多久没被访问了。当Cache满后<span class='p red'>替换“计数器”最大的</span>.
</li>
</ul>
<p>设总共有4个cache块，初始整个cache为空。采用全相联映射，依次访问主存块{1,2,3,4,1,2,5,1,2,3,4,5}</p>
<ul>
<li>
<mark class="hl-label default">我们在做题的时候，选择近期最少使用的数据的方式可以是：从该列向前寻找n-1列，找出最近没有被使用的数据，并将它替换</mark> 
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/cnHUVdflLKxJjkP.png" alt="image-20220930143337369" /></p>
<p>Cache块的总数=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>，则计数器只需n位。且Cache装满后<span class='p red'>所有计数器的值一定不重复</span>.</p>
<ol>
<li>命中时，所命中的行的计数器清零，<span class='p red'>比其低的计数器加1，其余不变</span>;</li>
<li>未命中且还有空闲行时，新装入的行的计数器置0，其余<span class='p red'>非空闲行全加1</span>.</li>
<li>未命中且无空闲行时，计数值最大的行的信息块被淘汰，新装行的块的计数器置0，其余全+1</li>
</ol>
<p>LRU算法――基于“局部性原理”，近期被访问过的主存块，在不久的将来也很有可能被再次访问，因此淘汰蹻久没被访问过的块是合理的。LRU算法的实际运行效果优秀，Cache命中率高。</p>
<p>若被<span class='p red'>频繁访问的主存块数量>Cache行的数量</span>，则有可能发生“<span class='p red'>抖动</span>”，如:{123451234512}</p>
<div class="tip "><p>最近不经常使用（LFU）</p>
</div>
<p>最不经常使用算法(<span class='p red'>LFU</span>, Least Frequently Used )-—为每一个Cache块设置一个“<span class='p red'>计数器</span>”，用于记录每个cache块被访问过几次。当cache满后<span class='p red'>替换“计数器”最小的</span>.</p>
<p>设总共有4个Cache块，<span class='p red'>初始整个Cache为空。采用全相联映射</span>，依次访问主存块{1,2,3,4,1,2,5,1,2,3,4,5}</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Vw29HWzsFJe6Rar.png" alt="image-20220930144448189" /></p>
<ul>
<li>
<span class='p red'>计数器的范围</span>：0-很大的数，这时候我们需要给计数器分配一个比较大的空间
</li>
<li>新调入的块计数器=0，之后每被访问一次计数器+1。需要替换时，选择计数器最小的一行</li>
<li>LFU算法：<span class='p red'>曾经被经常访问的主存块在未来不一定会用到</span>（如:微信视频聊天相关的块)并没有很好地遵循<span class='p red'>局部性原理</span>，因此实际运行效果不如 LRU</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/CI9dfvoHVasU25O.png" alt="image-20220930144740672" /></p>
<h2 id="cache写策略"><a class="markdownIt-Anchor" href="#cache写策略"></a> Cache写策略</h2>
<ul>
<li>这是我们只是讨论写命中和写不命中两种情况</li>
<li>为什么不讨论读操作？
<ul>
<li>因为只要是读操作，就一定不会出现数据不一致的问题</li>
</ul>
</li>
</ul>
<h3 id="写命中"><a class="markdownIt-Anchor" href="#写命中"></a> 写命中</h3>
<div class="tip "><p>写回法(write-back)</p>
</div>
<p>写回法(write-back)—当CPU对Cache写命中时，只修改Cache的内容，而不立即写入主存，<span class='p red'>只有当此块被换出时才写回主存</span>.</p>
<p>减少了访存次数，但存在数据不一致的隐患</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/PvdAjWTEUoXkFlM.png" alt="image-20220930145858983" /></p>
<div class="tip "><p>全写法（write-through）</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/iaLpv2V7DPgbxdY.png" alt="image-20220930152003854" /></p>
<p>全写法(写直通法，write-through)——当CPU对Cache写命中时，必须把数据同时写入Cache和主存，一般使用写缓冲(write buffer)</p>
<p>使用写缓冲，CPU写的速度很快，若写操作不频繁，则效果很好。若写操作很频繁，可能会因为写缓冲饱和而发生阻塞</p>
<h3 id="写不命中"><a class="markdownIt-Anchor" href="#写不命中"></a> 写不命中</h3>
<div class="tip "><p>写分配法（write-allocate）</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ISTLOuBJl54pFkw.png" alt="image-20220930152419269" /></p>
<p>写分配法(write-allocate)——当CPU对Cache<span class='p red'>写不命中时</span>，把主存中的块调入Cache，在Cache中修改。通常<span class='p red'>搭配写回法使用</span>。</p>
<p>写回法(write-back)——当CPU对Cache<span class='p red'>写命中时</span>，只修改Cache的内容，而不立即写入主存,只有当此块被换出的时候才写会主存</p>
<div class="tip "><p>非写分配法</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/3soniKIrDNOPp8G.png" alt="image-20220930152537895" /></p>
<p>非写分配法(not-write-allocate)—当CPU对Cache写不命中时只写入主存，不调入Cache。搭配全写法使用。</p>
<p>全写法(写直通法，write-through)——当CPU对Cache写命中时，必须把数据同时写入Cache和主存，一般使用写缓冲(write buffer)</p>
<h3 id="多级cache"><a class="markdownIt-Anchor" href="#多级cache"></a> 多级Cache</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/RpeS3lBo6LsAJGH.png" alt="image-20220930153557599" /></p>
<p>现代计算机常采用<span class='p red'>多级Cache</span>.</p>
<p>离CPU越近的速度越快，容量越小</p>
<p>离CPU越远的速度越慢，容量越大</p>
<ul>
<li>各级Cache之间常采用&quot;全写法+非写分配注&quot;</li>
<li>Cache-主存之间常采用&quot;写回法+写分配法&quot;</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/NXnuE6W4RTvpchk.png" alt="image-20220930153757879" /></p>
<h2 id="页式存储器"><a class="markdownIt-Anchor" href="#页式存储器"></a> 页式存储器</h2>
<p>我们在运行程序的时候，有可能这个程序运行所需要的内存很大，无法直接全部放进主存，可能主存空间不够，</p>
<ul>
<li>为了解决这个页面我们通常可以将一个程序分为大小相等的一个个页，<span class='p red'>每个页面的大小和主存一个单元的大小相等</span>.</li>
<li>把分好的页面<span class='p red'>离散</span>的放入主存中，<span class='p red'>这时候可以提高主存利用率，不再需要连续的内存地址了</span></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/NGSJ7OxsImVF5RB.png" alt="image-20221001091732955" /></p>
<ul>
<li>页式存储系统:一个程序(进程)在逻辑上被分为若干个大小相等的“<span class='p red'>页面</span>”，<span class='p red'>“页面”大小与“块”的大小相同</span>。每个页面可以离散地放入不同的主存块中。</li>
</ul>
<h3 id="虚地址-vs-实地址"><a class="markdownIt-Anchor" href="#虚地址-vs-实地址"></a> 虚地址 vs 实地址</h3>
<ul>
<li>
<span class='p red'>逻辑地址（虚地址）</span>:程序员视角看到的地址
</li>
<li>
<span class='p red'>物理地址（实地址）</span>:实际在主存中的地址
</li>
</ul>
<p>取变量x至ACC寄存器</p>
<p>机器指令:<span class='p green'>000001</span> <span class='p red'>00</span>1000000011 <span class='p green'>操作码</span>+地址码（使用逻辑地址)</p>
<p>程序员视角:整个程序共<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><mi>K</mi><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>12</mn></msup><mi>B</mi></mrow><annotation encoding="application/x-tex">4KB=2^{12}B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>，地址范围:000000000000~111111111111</p>
<p>变量x的逻辑地址:<span class='p red'>00</span> 1000000011</p>
<p>变量y的逻辑地址:<span class='p red'>11</span> 0000001010</p>
<table>
<thead>
<tr>
<th style="text-align:center">逻辑页号</th>
<th style="text-align:center">页内地址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">若干位</td>
<td style="text-align:center">10位</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ENpUg5RIKVv2FGt.png" alt="image-20221001093400943" /></p>
<ul>
<li>主存大小是4M = 4 * 1024k = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>12</mn></msup><mi>k</mi></mrow><annotation encoding="application/x-tex">2^{12}k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span></li>
<li>主存的物理地址共22位</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">主存块号</th>
<th style="text-align:center">块内地址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">12位</td>
<td style="text-align:center">10位</td>
</tr>
</tbody>
</table>
<p>变量x的物理地址:000000000010 1000000011</p>
<p>变量y的物理地址:111111111111 0000001010</p>
<h3 id="逻辑页号主存块号"><a class="markdownIt-Anchor" href="#逻辑页号主存块号"></a> 逻辑页号→主存块号</h3>
<p>通常使用页表来记录逻辑页号到物理页号的的映射</p>
<table>
<thead>
<tr>
<th style="text-align:center">逻辑页号</th>
<th style="text-align:center">主存页号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">#0</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">#1</td>
<td style="text-align:center">4094</td>
</tr>
<tr>
<td style="text-align:center">#2</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">#3</td>
<td style="text-align:center">4095</td>
</tr>
</tbody>
</table>
<p>CPU执行的机器指令中，使用的是“逻辑地址”，因此需要通“页表”将逻辑地址转为物理地址。</p>
<p>页表的作用:记录了每个逻辑页面存放在哪个主存块中</p>
<p>变量x的逻辑地址:<span class='p red'>00</span>1000000011</p>
<p>变量x的物理地址:<span class='p red'>000000000010</span>1000000011</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/uenWCKv5d3fQBiy.png" alt="image-20221001101703073" /></p>
<div class="tip "><p>增加快表</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/UouDTC823zkh1KP.png" alt="image-20221001102344799" /></p>
<ul>
<li>注意区别: 快表中存储的是页表项的副本; Cache中存储的是主存块的副本</li>
</ul>
<div class="tip "><p>读取文件全部过程</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/PEwJWXkFsRK65qH.png" alt="image-20221001103752745" /></p>
<h2 id="虚拟存储器"><a class="markdownIt-Anchor" href="#虚拟存储器"></a> 虚拟存储器</h2>
<ul>
<li>用户所感受到的内存比实际的内存要大很多，这就是虚拟存储器</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">逻辑页号</th>
<th style="text-align:center">主存块号</th>
<th style="text-align:center">外村块号</th>
<th style="text-align:center">有效位</th>
<th style="text-align:center">访问位</th>
<th style="text-align:center">脏位</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">#0</td>
<td style="text-align:center">2</td>
<td style="text-align:center">a</td>
<td style="text-align:center">1</td>
<td style="text-align:center">13</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">#1</td>
<td style="text-align:center">4094</td>
<td style="text-align:center">b</td>
<td style="text-align:center">1</td>
<td style="text-align:center">18</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">#2</td>
<td style="text-align:center">0</td>
<td style="text-align:center">c</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">#3</td>
<td style="text-align:center">0</td>
<td style="text-align:center">d</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<div class="tip "><p>页式虚拟存储器</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/yVNSM6qKtUD3r2i.png" alt="image-20221001145116603" /></p>
<ul>
<li>
<span class='p red'>有效位</span>:这个页面是否已调入主存
</li>
<li>
<span class='p red'>脏位</span>:这个页面是否被修改过
</li>
<li>
<span class='p red'>引用位</span>:用于“页面置换算法”，比如，可以用来统计这个页面被访问过多少次
</li>
<li>
<span class='p red'>物理页</span>:即主存块号
</li>
<li>
<span class='p red'>磁盘地址</span>:即这个页面的数据在磁盘中的存放位置
</li>
</ul>
<div class="tip "><p>存储器的层次化结构</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ykOnbuQz1GxSpwI.png" alt="image-20221001145501293" /></p>
<ul>
<li>主存―辅存:实现虚拟存储系统，<span class='p red'>解决了主存容量不够的问题</span>.
<ul>
<li>操作系统决定，哪些页面调入主存</li>
</ul>
</li>
<li>Cache一主存:<span class='p red'>解决了主存与CPU速度不匹配的问题</span>.
<ul>
<li>硬件决定那些主存块调入Cache</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/LvT8hzQFwiX1Up6.png" alt="image-20221001145554094" /></p>
<div class="tip "><p>段式虚拟存储器</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/JYHpA7FfOdEeWts.png" alt="image-20221001150029444" /></p>
<p>段式虚拟存储器――按照<span class='p red'>功能模块</span>拆分如:</p>
<ul>
<li>O段是自己的代码，</li>
<li>1段是库函数代码，</li>
<li>2段是变量</li>
</ul>
<p>页式虚拟存储器――拆分成<span class='p red'>大小相等</span>的页面</p>
<p>段式虚拟存储器的结构：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ZQixrwpVq4BLv52.png" alt="image-20221001150204411" /></p>
<div class="tip "><p>段页式虚拟存储器</p>
</div>
<p>把程序<span class='p red'>按逻辑结构分段</span>，每段再<span class='p red'>划分为固定大小的页</span>，<span class='p blue'>主存空间也划分为大小相等的页</span>，程序对主存的调入、调出仍<span class='p red'>以页为基本传送单位</span>。</p>
<p>每个程序对应一个段表，每段对应一个页表。</p>
<p>虚拟地址:<span class='p red'>段号+段内页号+页内地址</span>.</p>
<h1 id="第四章指令系统"><a class="markdownIt-Anchor" href="#第四章指令系统"></a> 第四章：指令系统</h1>
<h2 id="指令格式"><a class="markdownIt-Anchor" href="#指令格式"></a> 指令格式</h2>
<div class="tip "><p>指令的定义</p>
</div>
<p>指令(又称机器指令)）:</p>
<ul>
<li>是指示计算机执行某种操作的命令，是计算机运行的最小功能单位。</li>
<li>一台计算机的所有指令的集合构成该机的<span class='p red'>指令系统</span>，也称为<span class='p red'>指令集</span>。</li>
<li>注:一台计算机只能<span class='p red'>执行自己指令系统中的指令</span>，不能执行其他系统的指令。</li>
<li>Eg: x86架构、ARM架构</li>
</ul>
<div class="tip "><p>指令格式</p>
</div>
<p>一条指令就是机器语言的一个语句，它是一组有意义的二进制代。</p>
<p>一条指令通常要包括操作码字段和地址码字段两部分:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/7ikbOrjCqFAs8vy.png" alt="image-20221007220838468" /></p>
<p>一条指令可能包含o个、1个、2个、3个、4个地址码…<br />
根据地址码数目不同，可以将指令分为零地址指令、一地址指令、二地址指令…</p>
<div class="tip "><p>零地址指令OP</p>
</div>
<p>不需要操作数，如空操作、停机、关中断等指令<br />
堆栈计算机，两个操作数隐含存放在栈顶和次栈顶，计算结果压回栈顶</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/6bw7EOBijk8Tvar.png" alt="image-20221007222450473" /></p>
<div class="tip "><p>一级地址指令</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/oEQReH8CBZ19AIs.png" alt="image-20221008110241184" /></p>
<ol>
<li>
<p>只需要单操作数，如加1、减1、取反、求补等</p>
<p>指令含义:OP(Ai)→A1，	完成一条指令需要3次访存:取指→读A1→写A1</p>
</li>
<li>
<p>需要两个操作数，但其中一个操作数隐含在某个寄存器（如隐含在ACC)</p>
<p>指令含义:(ACC)OP(Ai) → ACC, 完成一条指令需要2次访存:取指→读A1</p>
</li>
<li>
<p>注:A1指某个<span class='p red'>主存地址</span>(类似：C语言指针)，(Ai)表示Ai所指向的<span class='p red'>地址中的内容</span>(指针所指置的内容)</p>
</li>
</ol>
<div class="tip "><p>二，三地址指令</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/l2gaD4xENHVU3io.png" alt="image-20221008110301884" /></p>
<p>常用于需要两个操作数的算术运算、逻辑运算相关指令</p>
<p>指令含义:(Ai)OP(Az)→A1，（默认存回A1）</p>
<p>完成一条指令需要访存4次，取指→读A1→读A2→写A1</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/tvbsPIUBWxuE8He.png" alt="image-20221008110349039" /></p>
<p>常用于需要两个操作数的算术运算、逻辑运算相关指令</p>
<p>指令含义:(A1)OP(A2)→A</p>
<p>完成一条指令需要访存4次，取指→读A1→读A2→写A3</p>
<div class="tip "><p>四地址指令</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/iM32rU8JbDwz5Kg.png" alt="image-20221008110711166" /></p>
<p>指令含义:(Ai)OP(A2)→A3，A4=<span class='p red'>下一条将要执行指令的地址</span>.</p>
<p>完成一条指令需要访存4次，取指→读A1→读A2→写A3</p>
<p>正常情况下:取指令之后PC+1，指向下一条指令</p>
<p>四地址指令:执行指令后，将PC的值修改位A4所指地址</p>
<div class="tip "><p>地址码的位数有什么影响?</p>
</div>
<p>n位地址码的直接寻址范围=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></p>
<p>若指令总长度固定变，则地址码数量越多，每个地址块的位数越短，寻址能力越差</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/vQ6aiRDkjwFbNVd.png" alt="image-20221008111403815" /></p>
<h3 id="指令-按指令长度分类"><a class="markdownIt-Anchor" href="#指令-按指令长度分类"></a> 指令-按指令长度分类</h3>
<ul>
<li>
<span class='p red'>指令字长</span>:一条指令的总长度（可能会变)
</li>
<li>机器字长:CPU进行一次整数运算所能处理的二进制数据的位数（通常和ALU直接相关)</li>
<li>存储字长:一个存储单元中的二进制代码位数（通常和MDR位数相同）</li>
</ul>
<p>半字长指令、单字长指令、双字长指令		—―指令长度是机器字长的多少倍</p>
<p>指令字长会影响取指令所需时间。如:机器字长=存储字长=16bit, 则取一条双字长指令需要两次访存</p>
<ul>
<li>
<span class='p red'>定长指令字结构</span> :(指令系统少所有指令的长度都相等
</li>
<li>
<span class='p red'>变长指令字结构</span>:指令系统中各种指令的长度不等
</li>
</ul>
<h3 id="指令-按操作码的长度分类"><a class="markdownIt-Anchor" href="#指令-按操作码的长度分类"></a> 指令-按操作码的长度分类</h3>
<ul>
<li>
<span class='p red'>定长操作码</span>:指令系统中所有指令的操作码长度都相同
<ul>
<li>n位→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>条指令</li>
<li>控制器的译码电路设计简单,但灵活性较低</li>
</ul>
</li>
<li>
<span class='p red'>可变长操作码</span>:指令系统中各指令的操作码长度可变
<ul>
<li>控制器的译码电路设计复杂,但灵活性较高</li>
</ul>
</li>
</ul>
<h3 id="指令-按操作类型分类"><a class="markdownIt-Anchor" href="#指令-按操作类型分类"></a> 指令-按操作类型分类</h3>
<div class="tip "><p>数据传送类：进行主存与CPU之间的数据传送</p>
</div>
<ol>
<li>
<p>数据传送</p>
<p>LOAD作用:把存储器中的数据放到寄存器中</p>
<p>STORE作用:把寄存器中的数据放到存储器中</p>
</li>
</ol>
<div class="tip "><p>运算类</p>
</div>
<ol start="2">
<li>
<p>算术逻辑操作</p>
<p>算术:加、减、乘、除、增1、减1、求补、浮点运算、十进制运算</p>
<p>逻辑:与、或、非、异或、位操作、位测试、位清除、位求反</p>
</li>
<li>
<p>移位操作</p>
<p>算术移位、逻辑移位、循环移位(带进位和不带进位)</p>
</li>
</ol>
<div class="tip "><p>程序控制类 - 改变程序执行的顺序</p>
</div>
<ol start="4">
<li>
<p>转移操作</p>
<p>无条件转移JMP</p>
<p>条件转移JZ:  结果为0;   JO:结果溢出;     JC:结果有进位</p>
<p>调用和返回    CALL和RETURN</p>
<p>陷阱(Trap)与陷阱指令</p>
</li>
</ol>
<div class="tip "><p>输入输出类（I/O）：进行CPU与I/O设备之间的数据传送</p>
</div>
<ol start="5">
<li>
<p>输入输出操作</p>
<p>CPU寄存器与IO端口之间的数据传送(端口即IO接口中的寄存器)</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Dz39Q4o6ERbIlpS.png" alt="image-20221008113027826" /></p>
<h2 id="扩展操作码"><a class="markdownIt-Anchor" href="#扩展操作码"></a> 扩展操作码</h2>
<p>指令由操作码和若干个地址码组成。</p>
<ul>
<li>
<span class='p red'>定长指令字结构</span>:指令系统中所有指令的长度都相等
</li>
<li>
<span class='p red'>变长指令字结构</span>:指令系统中各种指令的长度不等
</li>
<li>
<span class='p red'>定长操作码</span>:指令系统中所有指令的操作码长度都相同
</li>
<li>
<span class='p red'>可变长操作码</span>:指令系统中各指令的操作码长度可变
</li>
<li>定长指令字结构+可变长操作码 →<span class='p red'>扩展操作码指令格式</span>.不同地址数的指令使用不同长度的操作码</li>
</ul>
<div class="tip "><p>扩展操作码举例</p>
</div>
<p>指令字长为16位，每个地址码占4位:</p>
<p>前4位为基本操作码字段OP，另有3个4位长的地址字段A1、A2和A3。</p>
<p>4位基本操作码若全部用于三地址指令，则有16条。</p>
<p>但至少须将1111留作扩展操作码之用，即三地址指令为15条;</p>
<p>11111111留作扩展操作码之用，二地址指令为15条;</p>
<p>1111 11111111留作扩展操作码之用，一地址指令为15条;</p>
<p>零地址指令为16条。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/LvHIyeiJUnzQ9qR.png" alt="image-20221008114133118" /></p>
<p>在设计扩展操伤码指令格式时，必须注意以下两点:</p>
<ol>
<li>
<span class='p red'>不允许短码是长码的前缀</span>，即短操作码不能与长操作码的前面部分的代码相同。
</li>
<li>各指令的操作码一定不能重复。</li>
</ol>
<p>通常情况下，对使用频率较高的指令，分配较短的操作码;对使用频率较低的指令，分配较长的操作码，从而尽可能减少指令译码和分析的时间。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/9nkPYJgs7LGqRmN.png" alt="image-20221008120058405" /></p>
<p>设地址长度为n，上一层留出m种状态，下一层可扩展出m×<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>种状态</p>
<div class="tip "><p>小结</p>
</div>
<p>操作码指出指令中该指令应该执行什么性质的操作和具有何种功能。</p>
<p>操作码是识别指令、了解指令功能与区分操作数地址内容的组成和使用方法等的关键信息。例如，指出是算术加运算，还是减运算;是程序转移，还是返回操作。</p>
<p>操作码分类:<br />
定长操作码:在指令字的最高位部分分配固定的若干位（定长）表示操作码。</p>
<ul>
<li>一般n位操作码字段的指令系统最大能够表示2&quot;条指令。</li>
<li>优:定长操作码对于简化计算机硬件设计，提高指令译码和识别速度很有利;</li>
<li>缺:指令数量增加时会占用更多固定位，留给表示操作数地址的位数受限。</li>
</ul>
<p>扩展操作码(不定长操作码):全部指令的操作码字段的位数不固定，且分散地放在指令字的不同位置上。</p>
<ul>
<li>最常见的变长操作码方法是扩展操作码，使操作码的长度随地址码的减少而增加，不同地址数的指令可以具有不同长度的操作码，从而在满足需要的前提下，有效地缩短指令字长。</li>
<li>优:在指令字长有限的前提下仍保持比较丰富的指令种类;</li>
<li>缺:增加了指令译码和分析的难度，使控制器的设计复杂化。</li>
</ul>
<h2 id="指令寻址"><a class="markdownIt-Anchor" href="#指令寻址"></a> 指令寻址</h2>
<p>指令寻址：如何确定下一条指令的存放地址；</p>
<p>指令结构：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/YqbGpnBlmP1HJer.png" alt="image-20221015085649220" /></p>
<h3 id="顺序寻址"><a class="markdownIt-Anchor" href="#顺序寻址"></a> 顺序寻址</h3>
<p>（PC）+1→PC；其中1表示个指令字长，实际加的值会因指令长度、编址方式而不同</p>
<p>如果主存中是按字节编值的，并且一条指令的长度为16比特位，那么<span class='p red'>不能够让PC简单的加1来获取下一条指令存放的地址</span>，这时候需要让PC+2才能获取下一条指令的地址，<span class='p red'>如果是采用变长指令结构的话操作方式又不一样</span>.</p>
<p>EG:指令寻址:<span class='p blue'>下一条</span>欲执行<span class='p blue'>指令</span>的<span class='p red'>地址</span>(始终由程序计数器PC给出)</p>
<p>该系统采用<span class='p red'>定长指令字结构</span>，指令字长=存储字长=16bit=2B，主存<span class='p red'>按字编址</span>.</p>
<ul>
<li>指令寻址方式：PC+1</li>
</ul>
<p>该系统采用<span class='p red'>定长指令字结构</span>，指令字长=存储字长=16bit=2B，主存<span class='p red'>按字节编址</span>.</p>
<ul>
<li>指令寻址方式：PC+2</li>
</ul>
<p>该系统采用<span class='p red'>变长指令字结构</span>，指令字长=存储字长=16bit=2B，主存<span class='p red'>按字编址</span>.</p>
<ul>
<li>读入一个字，根据操作码判断这条指令的总字节数n,修改PC的值</li>
<li>( PC)+n→PC</li>
<li>根据指令的类型，CPU可能还要进行多次访存，每次读入一个字</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ik6MogLcvNnFVxa.png" alt="image-20221015090458724" /></p>
<h3 id="跳跃寻址"><a class="markdownIt-Anchor" href="#跳跃寻址"></a> 跳跃寻址</h3>
<p>跳跃寻址:由转移指令指出</p>
<ul>
<li>该系统采用定长指令字结构</li>
<li>指令字长=存储字长=16bit=2B</li>
<li>主存按字编址</li>
<li>JMP:无条件转移把PC中的内容改成7</li>
<li>当执行0，1,2的时候都是顺序寻址，直接让PC指向下一个位置的指令即可</li>
<li>在执行3语句的时候会执行JMP跳转，让PC跳转到7的位置</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/1JNIKD3tkqRrjMh.png" alt="image-20221015090858963" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/S3ljLrH5TsbVEex.png" alt="image-20221015091153914" /></p>
<h2 id="数据寻址"><a class="markdownIt-Anchor" href="#数据寻址"></a> 数据寻址</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/RYrU27yeOsKvPgX.png" alt="image-20221015091246861" /></p>
<p>数据寻址：确定本条指令的地址码指明的真实地址</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/IuQlYa6LiKPyOwN.png" alt="image-20221015091403870" /></p>
<p>接下来会涉及到：隐含寻址，立即寻址，直接寻址，间接寻址，寄存器寻址，寄存器间接寻址，相对寻址，基址寻址，变址寻址，堆栈寻址，10中寻址方式，所以我们使用4位数据来表示寻址特征；</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/7zvJDNfkR12pnHI.png" alt="image-20221015091651452" /></p>
<p>求出操作数的<span class='p red'>真实地址</span>,称为<span class='p red'>有效地址(EA)</span>。</p>
<p>二地址指令</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/UcOEykwD3sW6unm.png" alt="image-20221015091744282" /></p>
<h3 id="直接寻址"><a class="markdownIt-Anchor" href="#直接寻址"></a> 直接寻址</h3>
<p>直接寻址:指令字中的<span class='p red'>形式地址A</span>就是操作数的<span class='p red'>真实地址EA</span>，即EA=A</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/WNLbj7TK54mJEnz.png" alt="image-20221015091926518" /></p>
<p>一条指令的执行:<span class='p red'>取指令</span>访存1次,<span class='p red'>执行指令</span>访存1次暂不考虑存结果共<span class='p red'>访存2次</span>.</p>
<p>优点:简单，指令执行阶段<span class='p red'>仅访问一次主存</span>，不需专门计算操作数的地址。</p>
<p>缺点:A的位数决定了该指令操作数的寻址范围。操作数的地址不易修改,<span class='p red'>范围小不易修改</span>。</p>
<h3 id="间接寻址"><a class="markdownIt-Anchor" href="#间接寻址"></a> 间接寻址</h3>
<p>间接寻址:指令的地址字段给出的<span class='p red'>形式地址不是操作数的真正地址</span>，而是操作数有效地址所在的存储单元的地址，也就是操作数地址的地址，即EA=(A)。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/exVluwhcUdL67nr.png" alt="image-20221015092334939" /></p>
<p>优点:</p>
<ul>
<li>可扩大寻址范围(有效地址EA的位数大于形式地址A的位数),实际寻址大小是EA的大小。</li>
<li>便于编制程序(用间接寻址可以<span class='p red'>方便地完成子程序返回</span>)。</li>
</ul>
<p>缺点:</p>
<ul>
<li>指令在执行阶段<span class='p red'>要多次访存</span>(一次间址需两次访存，多次寻址需根据存储字的最高位确定几次访存)。</li>
</ul>
<h3 id="寄存器寻址"><a class="markdownIt-Anchor" href="#寄存器寻址"></a> 寄存器寻址</h3>
<p>寄存器寻址:在指令字中直接给出操作数所在的寄存器编号，即EA =R，其操作数在由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>所指的寄存器内。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/GUxtYe9rV5lgCEp.png" alt="image-20221015092745301" /></p>
<p>一条指令的执行:<span class='p red'>取指令</span>访存1次, <span class='p red'>执行指令访存0次</span>暂不考虑存结果共访存1次</p>
<p>优点:</p>
<ul>
<li>指令在<span class='p red'>执行阶段不访问主存</span>，只访问寄存器，<span class='p red'>指令字短且执行速度快</span>，支持向量/矩阵运算。</li>
</ul>
<p>缺点:</p>
<ul>
<li>寄存器价格昂贵，计算机中寄存器个数有限。</li>
</ul>
<h3 id="寄存器间接寻址"><a class="markdownIt-Anchor" href="#寄存器间接寻址"></a> 寄存器间接寻址</h3>
<p>寄存器间接寻址:寄存器R,中给出的不是一个操作数，而是<span class='p red'>操作数所在主存单元的地址</span>，即EA=®。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/qzj361ynkT9ieDO.png" alt="image-20221015093135883" /></p>
<p>一条指令的执行:<span class='p red'>取指令</span>访存1次, <span class='p red'>执行指令</span>访存1次暂不考虑存结果共访存2次</p>
<p>特点:</p>
<ul>
<li>与一般间接寻址相比速度更快，但指令的执行阶段需要访问主存(因为操作数在主存中)。</li>
</ul>
<h3 id="隐含寻址"><a class="markdownIt-Anchor" href="#隐含寻址"></a> 隐含寻址</h3>
<p>隐含寻址:不是明显地给出操作数的地址，而是在指令中隐含着操作数的地址。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/z9d6IO8QhWfYDpT.png" alt="image-20221015093348432" /></p>
<p>优点:有利于缩短指令字长。</p>
<p>缺点:需增加存储操作数或隐含地址的硬件。</p>
<h3 id="立即寻址"><a class="markdownIt-Anchor" href="#立即寻址"></a> 立即寻址</h3>
<p>立即寻址:形式地址A就是操作数本身，又称为立即数，<span class='p red'>一般采用补码形式</span>。#表示立即寻址特征。</p>
<p>一条指令的执行:取指令访存1次执行指令访存0次暂不考虑存结果共访存1次</p>
<p>优点:</p>
<ul>
<li>指令执行阶段<span class='p red'>不访问主存</span>，指令执行时间最短</li>
</ul>
<p>缺点:</p>
<ul>
<li>A的位数限制了立即数的范围。</li>
<li>如A的位数为n，且立即数采用补码时，可表示的数据范围为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">-2^{n-1} - (2^{n-1}-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></li>
</ul>
<h3 id="偏移寻址"><a class="markdownIt-Anchor" href="#偏移寻址"></a> 偏移寻址</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/tay3I89L5KjWX4A.png" alt="image-20221015093815946" /></p>
<p>这三种方式区别在于偏移的”起点“不一样</p>
<ul>
<li>
<p>基址寻址:以程序的起始存放地址作为“起点”</p>
</li>
<li>
<p>变址寻址:程序员自己决定从哪里作为“起点”</p>
</li>
<li>
<p>相对寻址:以程序计数器PC所指地址作为“起点”</p>
</li>
</ul>
<h3 id="基址寻址"><a class="markdownIt-Anchor" href="#基址寻址"></a> 基址寻址</h3>
<p>基址寻址:将CPU中基址寄存器（BR）的内容加2指令格式中的形式地址A,而形成操作数的有效地址，即EA=(BR)+A。</p>
<p>优点:便于程序“浮动”，方便实现多道程序并发运行</p>
<p>BR一一base address register</p>
<p>EA一一effective address</p>
<p>拓展:程序运行前,CPU将BR的值修改为该程序的起始地址(存在操作系统PCB中)</p>
<p>专用寄存器</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/PbmjNiyqQSadGw3.png" alt="image-20221015094508118" /></p>
<p>通用寄存器：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/csv5nOPL18Qjga2.png" alt="image-20221015094630490" /></p>
<p>注:基址寄存器是<span class='p red'>面向操作系统</span>的，其<span class='p red'>内容由操作系统或管理程序确定</span>。在程序执行过程中，基址寄存器的内容不变（作为基地址)，形式地址可变（作为偏移量）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/pJYOhR8ko54U2uz.png" alt="image-20221015101801227" /></p>
<p>当采用<span class='p red'>通用寄存器作为基址寄存器时</span>，可由<span class='p red'>用户决定哪个寄存器作为基址寄存器</span>，但其<span class='p red'>内容仍由操作系统确定</span>。</p>
<p>优点:可扩大寻址范围（基址寄存器的位数大于形式地址A的位数)﹔<span class='p red'>用户不必考虑自己的程序存于主存的哪一空间区域</span>，故<span class='p red'>有利于多道程序设计</span>，以及可用于编制浮动程序(整个程序在内存里边的浮动).</p>
<h3 id="变址寻址"><a class="markdownIt-Anchor" href="#变址寻址"></a> 变址寻址</h3>
<p>IX = Index Register</p>
<p>变址寻址:有效地址EA等于指令字中的形式地址A与<span class='p red'>变址寄存器IX</span>的内容相加之和，即<span class='p red'>EA= (IX)+A</span>，其中<span class='p red'>IX可为变址寄存器（专用），也可用通用寄存器作为变址寄存器</span> 。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/4ZVclKRwH67d5nJ.png" alt="image-20221015101117172" /></p>
<p>注:变址寄存器是<span class='p red'>面向用户的</span>，在程序执行过程中，<span class='p red'>变址寄存器的内容可由用户改变</span>(IX作为偏移量)，形式地址A不变（<span class='p red'>作为基地址</span>)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/wZdEH6bXpqVMnL3.png" alt="image-20221015101544941" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/zSvUiM2TtXWEsDk.png" alt="image-20221015101933087" /></p>
<h3 id="相对寻址"><a class="markdownIt-Anchor" href="#相对寻址"></a> 相对寻址</h3>
<p>相对寻址:把<span class='p red'>程序计数器PC</span>的内容加上指令格式中的形式地址A而形成操作数的有效地址，即<span class='p red'>EA=(PC)+A</span>，其中<span class='p red'>A是相对于PC</span>所指地址的<span class='p red'>位移量</span>，可正可负，<mark class="hl-label red">补码表示</mark> 。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/FYxJuEz1miOlyno.png" alt="image-20221015102229602" /></p>
<ul>
<li>A是相对下一条指令地址的偏移量</li>
</ul>
<p>没有采用相对寻址的时候：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/hPxwuHjgNMvrTQd.png" alt="image-20221015102436892" /></p>
<p>如果我们想要移动一下改代码的位置的话：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/79N1YMBJV4KkcrS.png" alt="image-20221015102518865" /></p>
<p>这时候如果在采用上面的方式的话则会出现错误，在执行到M+3的时候，程序会跳转到主存地址为2的位置，这显然不是我们想要的</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/r4DO2Q8oxBCjTPL.png" alt="image-20221015102644850" /></p>
<p>相对寻址:EA=(PC)+A，其中<span class='p red'>A是相对于PC</span>所指地址的<span class='p red'>位移量</span>，可正可负，<span class='p red'>补码表示</span>.</p>
<p>优点:这段代码在程序内浮动时<span class='p red'>不用更改跳转指令的地址码</span>.</p>
<p>但是这有一个问题：我们的基地址一直是7，解决方发：</p>
<ul>
<li>ACC加法指令的地址码,可采用“分段”方式解决，即程序段、数据段分开。</li>
<li>在每一段的地址都相对不变</li>
</ul>
<p>优点:操作数的地址不是固定的，它随着Pc值的变化而变化，并且与指令地址之间总是相差一个固定值，因此<span class='p red'>便于程序浮动</span>(一段代码在程序内部的浮动）。</p>
<p>相对寻址<span class='p red'>广泛应用于转移指令</span>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a&gt;b)&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>硬件视角:</p>
<ul>
<li>通过”cmp指令”比较a和 b（如cmp a, b），实质上是用a-b</li>
<li>相减的结果信息会记录在程序状态字寄存器中(PSW)</li>
<li>根据PSW的某几个标志位进行条件判断，来决定是否转移</li>
</ul>
<p>PSW中有几个比特位记录上次运算的结果</p>
<ul>
<li>进位/借位标志CF:最高位有进位/借位时CF=1</li>
<li>零标志ZF:运算结果为0则ZF=1，否则ZF=0</li>
<li>符号标志SF:运算结果为负，SF=1，否则为0</li>
<li>溢出标志OF:运算结果有溢出OF=1否则为0</li>
</ul>
<h3 id="堆栈寻址"><a class="markdownIt-Anchor" href="#堆栈寻址"></a> 堆栈寻址</h3>
<p>堆栈寻址:操作数存放在堆栈中，隐含使用堆栈指针(SP)作为操作数地址</p>
<p>堆栈是存储器（或专用寄存器组）中一块特定的按“后进先出(LIFO)”原则管理的存储区，该存储区中被读/写单元的地址是用一个特定的寄存器给出的，该寄存器称为堆栈指针(SP) 。</p>
<ul>
<li>
<mark class="hl-label red">SP-StackPointer</mark> .
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/vlHiAWbu4Lae7Ey.png" alt="image-20221015103823353" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Gl9xnWrsLigQzaS.png" alt="image-20221015104057726" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/JgmIziKV3O7Bpot.png" alt="image-20221015104138693" /></p>
<h2 id="cisc-和-risc"><a class="markdownIt-Anchor" href="#cisc-和-risc"></a> CISC 和 RISC</h2>
<p>ClSC:Complex Instruction Set Computer</p>
<ul>
<li>
<p>设计思路:一条指令完成一个复杂的基本功能。</p>
</li>
<li>
<p>代表: x86架构，主要用于笔记本、台式机等</p>
</li>
<li>
<p>C语言中库函数</p>
</li>
</ul>
<p>RISC:Reduced lnstruction Set Computer</p>
<ul>
<li>设计思路:一条指令完成一个基本“动作”;多条指令组合完成一个复杂的基本功能。</li>
<li>代表:ARM架构，主要用于手机、平板等</li>
<li>单纯C语言</li>
</ul>
<p>EG：设计一套能实现整数、矩阵加/减/乘运算的指令集:</p>
<ul>
<li>CISC的思路:除了提供整数的加减乘指令除之外，还提供矩阵的加法指令、矩阵的减法指令、矩阵的乘法指令
<ul>
<li>一条指令可以由一个专门的电路完成</li>
<li>有的复杂指令用纯硬件实现很困难→采用“存储程序”的设计思想，由一个比较通用的电路配合存储部件完成一条指令</li>
</ul>
</li>
<li>RISC的思路:只提供整数的加减乘指令
<ul>
<li>​	一条指令一个电路，电路设t相对简单，功耗更低“并行”、“流水线“</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/g8yfJnwEF5mzHX6.png" alt="image-20221015104904094" /></p>
<h1 id="第五章中央处理器"><a class="markdownIt-Anchor" href="#第五章中央处理器"></a> 第五章：中央处理器</h1>
<h2 id="cpu的功能和基本结构"><a class="markdownIt-Anchor" href="#cpu的功能和基本结构"></a> CPU的功能和基本结构</h2>
<h3 id="cpu的功能"><a class="markdownIt-Anchor" href="#cpu的功能"></a> CPU的功能</h3>
<ol>
<li>指令控制。完成取指令、分析指令和执行指令的操作，即程序的顺序控制。</li>
<li>操作控制。一条指令的功能往往是由若干操作信号的组合来实现的。CPU管理并产生由内存取出的每条指令的操作信号，把各种操作信号送往相应的部件，从而控制这些部件按指令的要求进行动作。</li>
<li>时间控制。对各种操作加以时间上的控制。时间控制要为每条指令按时间顺序提供应有的控制信号。</li>
<li>数据加工。对数据进行算术和逻辑运算。</li>
<li>中断处理。对计算机运行过程中出现的异常情况和特殊请求进行处理。</li>
</ol>
<h3 id="运算器和控制器的基本功能"><a class="markdownIt-Anchor" href="#运算器和控制器的基本功能"></a> 运算器和控制器的基本功能</h3>
<p>CPU =<mark class="hl-label default">运算器+控制器</mark> .</p>
<p>运算器：对数据进行加工</p>
<p>控制器：</p>
<ol>
<li>协调并控制计算机各部件执行程序的指令序列，基本功能包括取指令、分析指令、执行指令</li>
<li>取指令:自动形成指令地址;自动发出取指令的命令。</li>
<li>分析指令:操作码译码(分析本条指令要完成什么操作);产生操作数的有效地址。</li>
<li>执行指令:根据分析指令得到的“操作命令”和“操作数地址”，形成操作信号控制序列，控制运算器、存储器以及I/O设备完成相应的操作。</li>
<li>中断处理:管理总线及输入输出;处理异常情况(如掉电)和特殊请<br />
求(如打印机请求打印一行字符)。</li>
</ol>
<h3 id="运算器的基本结构"><a class="markdownIt-Anchor" href="#运算器的基本结构"></a> 运算器的基本结构</h3>
<div class="tip "><p>专用数据通路方式</p>
</div>
<p>专用数据通路方式:根据指令执行过程中的数据和地址的流动方向安排连接线路。</p>
<p>如果<span class='p red'>直接用导线连接</span>，相当于多个寄存器同时并且一直向ALU传输数据</p>
<p>解决方法1.使用多路选择器根据控制信号选择一路输出</p>
<p>解决方法2.使用三态门可以控制每一路是否输出</p>
<p>如: ROout为1时Ro中的数据输出到A端，ROout为0时Ro中的数据无法输出到B端</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/5NC9qFO8RxbQGtY.png" alt="image-20221016091938478" /></p>
<p>解决方法1：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/EAoxcuBUW83DKCP.png" alt="image-20221016092450647" /></p>
<p>解决方法2：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/dgaZGlLSQspkyIT.png" alt="image-20221016092521218" /></p>
<p>其中R0,R1,R2…是通用寄存器，例如有些X86计算机中使用的寄存器，如AX, BX, CX,DX,SP等：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/yGe2oIbOvVLdnij.png" alt="image-20221016092233847" /></p>
<div class="tip "><p>CPU内部单总线方式</p>
</div>
<p>所需要的元件：</p>
<ol>
<li>
<p>算术逻辑单元:主要功能是进行算术/逻辑运算。</p>
</li>
<li>
<p>通用寄存器组:如AX、BX、CX、DX、SP等，用于存放操作数（包括源操作数、目的操作数及中间结果)和各种地址信息等。SP是堆栈指针，用于指示栈顶的地址。</p>
</li>
<li>
<p>暂存寄存器:用于暂存从主存读来的数据，这个数据不能存放在通用寄存器中，否则会破坏其原有内容。</p>
<p>如:两个操作数分别来自主存和R0，最后结果存回R0，那么从主存中取来的操作数<span class='p red'>直接放入暂存器</span>，就<span class='p red'>不会破坏运算前R的内容</span>。</p>
</li>
<li>
<p>累加寄存器:它是一个通用寄存器，用于暂时存放ALU运算的结果信息，用于实现加法运算。</p>
</li>
<li>
<p>程序状态字寄存器:保留由算术逻辑运算指令或测试指令的结果而建立的各种状态信息，如溢出标志(OP)、符号标志（SF)、零标志(ZF）、进位标志(CF)）等。PSW中的这些位参与并决定微操作的形成。</p>
</li>
<li>
<p>移位器:对运算结果进行移位运算。</p>
</li>
<li>
<p>计数器:控制乘除运算的操作步数。</p>
</li>
</ol>
<p>CPU内部单总线方式:将所有寄存器的输入端和输出端都连接到一条公共的通路上。</p>
<ul>
<li>
<mark class="hl-label red">结构简单，容易实现，但数据传输存在较多冲突的现象，性能较低。</mark> .
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/t82OAerSaU46gKv.png" alt="image-20221016092751967" style="zoom:67%;" />
<p>例如上面这个图：如果我们想要将R0和R1中的数据放到ALU中， 如果他们两个寄存器<span class='p red'>同时向数据总线传输数据的话</span>，ALU的AB两端可能会接收到冲突的数据</p>
<p>解决方法：添加一个暂存寄存器，可以吧先输入的数据先放到暂存寄存器中，等下一个数据过来之后在一起运算</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/pNlVQL5ExdfRnPj.png" alt="image-20221016093532081" style="zoom:67%;" />
<p>我们还可以给ALU输出端加一个寄存器：当<span class='p red'>运算结果稳定之后</span>再将结果送到数据总线中去</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/KHxirZdguhzXoYQ.png" alt="image-20221016094005748" /></p>
<h3 id="控制器的基本结构"><a class="markdownIt-Anchor" href="#控制器的基本结构"></a> 控制器的基本结构</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/JU8VDieXcd1PK4k.png" alt="image-20221016094705999" /></p>
<ol>
<li>程序计数器:用于指出下一条指令在主存中的存放地址。CPU就是根据PC的内容去主存中取指令的。因程序中指令（通常）是顺序执行的，所以Pc有自增功能。</li>
<li>指令寄存器:用于保存当前正在执行的那条指令。</li>
<li>指令译码器:仅对操作码字段进行译码，向控制器提供特定的操作信号。</li>
<li>微操作信号发生器:根据IR的内容（指令）、PSW的内容（状态信息）及时序信号，产生控制整个计算机系统所需的各种控制信号，其结构有组合逻辑型和存储逻辑型两种。</li>
<li>时序系统:用于产生各种时序信号，它们都是由统一时钟(CLocK）分频得到。</li>
<li>存储器地址寄存器:用于存放所要访问的主存单元的地址。</li>
<li>存储器数据寄存器:用于存放向主存写入的信息或从主存中读出的信息。</li>
</ol>
<h3 id="cpu的基本结构"><a class="markdownIt-Anchor" href="#cpu的基本结构"></a> CPU的基本结构</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ciEIPH75ZeDNwux.png" alt="image-20221016094913845" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/H12Y4oKbDJzNIdC.png" alt="image-20221016094949927" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/f2iRWKYP7xJT6nd.png" alt="image-20221016095038772" /></p>
<h2 id="指令执行过程"><a class="markdownIt-Anchor" href="#指令执行过程"></a> 指令执行过程</h2>
<h3 id="指令周期"><a class="markdownIt-Anchor" href="#指令周期"></a> 指令周期</h3>
<ol>
<li>
<p>指令周期:CPU从主存中每取出并执行一条指令所需的全部时间。</p>
</li>
<li>
<p>指令周期常常用若干<span class='p red'>机器周期</span>来表示，机器周期又叫<span class='p red'>CPU周期</span>。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/JVF4QonTyEmvgGB.png" alt="image-20221016100915777" /></p>
<p>一个<span class='p red'>机器周期又包含若干时钟周期</span>（也称为节拍、T周期或CPU时钟周期，它是CPU操作的最基本单位）。</p>
<p>每个指令周期内机器周期数可以不等，每个机器周期内的节拍数也可以不等。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/d48NxkuUOEPgQCK.png" alt="image-20221016101020038" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/wV2UYZfSq1iv4AL.png" alt="image-20221016101549983" /></p>
<h3 id="指令周期流程"><a class="markdownIt-Anchor" href="#指令周期流程"></a> 指令周期流程</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/HulGIvUOEYxg8a9.png" alt="image-20221016102400153" /></p>
<p>四个工作周期都有CPU访存操作，<span class='p red'>只是访存的目的不同</span>。<span class='p red'>取指周期</span>是为了<span class='p red'>取指令</span>，<span class='p red'>间址周期</span>是为了<span class='p red'>取有效地址</span>，<span class='p red'>执行周期</span>是为了<span class='p red'>取操作数</span>，<span class='p red'>中断周期</span>是为了<span class='p red'>保存程序断点</span>。</p>
<h3 id="指令周期的数据流-取指周期"><a class="markdownIt-Anchor" href="#指令周期的数据流-取指周期"></a> 指令周期的数据流-取指周期</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ghnDkwKzNvLay97.png" alt="image-20221016103330882" /></p>
<ol>
<li>当前指令地址送至存储器地址寄存器，记做:(PC)→MAR</li>
<li>CU发出控制信号，经控制总线传到主存，这里是读信号，记做:1→R</li>
<li>将MAR所指主存中的内容经数据总线送入MDR，记做:M(MAR)→MDR</li>
<li>将MDR中的内容(此时是指令)送入IR,记做:(MDR)→IR</li>
<li>CU发出控制信景，形成下一条指令地址，记做:(PC)+1→(PC)</li>
</ol>
<h3 id="指令周期的数据流-间址周期"><a class="markdownIt-Anchor" href="#指令周期的数据流-间址周期"></a> 指令周期的数据流-间址周期</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/a64LwY2KkftJchB.png" alt="image-20221016104546750" /></p>
<ol>
<li>
<p>将指令的地址码送入MAR,</p>
<p>记做:	Ad(IR) → MAR  或	Ad(MDR)→ MAR</p>
</li>
<li>
<p>CU发出控制信号，启动主存做<span class='p red'>读操作</span>,记做:1→R</p>
</li>
<li>
<p>将MAR所指主存中的内容经数据总线送入MDR，记做: M(MAR)→KMDR</p>
</li>
<li>
<p>将有效地址送至指令的地址码字段,记做:(MDR)→Ad(IR)</p>
</li>
</ol>
<h3 id="指令周期的数据流-执行周期"><a class="markdownIt-Anchor" href="#指令周期的数据流-执行周期"></a> 指令周期的数据流-执行周期</h3>
<p>执行周期的任务是根据IR中的指令字的操作码和操作数通过ALU操作产生执行结果。不同指令的执行周期操作不同，因此没有统一的数据流向。</p>
<h3 id="指令周期的数据流-中断周期"><a class="markdownIt-Anchor" href="#指令周期的数据流-中断周期"></a> 指令周期的数据流-中断周期</h3>
<p>中断:暂停当前任务去完成其他任务。为了能够恢复当前任务，需要<span class='p red'>保存断点</span>。</p>
<p>一般使用<span class='p red'>堆栈</span>来保存断点，这里<span class='p red'>用SP表示栈顶地址</span>，假设<span class='p red'>SP指向栈顶元素</span>，进栈操作是<span class='p red'>先修改指针，后存入数据</span>。</p>
<ol>
<li>
<p>CU控制将SP减1，修改后的地址送入MAR记做:(SP)-1 →SP，(SP)→ MAR，本质上是将断点存入某个存储单元，假设其地址为a，故可记做: a → MAR，获取断点需要存放的堆栈寄存器的地址</p>
</li>
<li>
<p>CU发出控制信号，启动主存做写操作，记做:1→w，执行堆栈寄存器的写操作</p>
</li>
<li>
<p>将断点(PC内容)送入MDR,记做:(PC)→MDR，将PC中的数据放到MDR中准备写入堆栈寄存器中</p>
</li>
<li>
<p>CU控制将中断服务程序的入口地址(由向量地址形成部件产生)送入PC,记做:向量地址→PC，记录中断数据的首地址</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/YXt9pBgkG1dIqao.png" alt="image-20221016144804639" /></p>
<h3 id="指令执行方案"><a class="markdownIt-Anchor" href="#指令执行方案"></a> 指令执行方案</h3>
<p>一个指令周期通常要包括几个时间段（执行步骤)，每个步骤完成指令的一部分功能，几个依次执行的步骤完成这条指令的全部功能。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/MYGlcJKrW386RSL.png" alt="image-20221016145059880" /></p>
<p>方案1．单指令周期</p>
<ul>
<li>对所有指令都选用相同的执行时间来完成。</li>
<li>指令之间串行执行;<span class='p red'>指令周期取决于执行时间最长的指令的执行时间</span>。</li>
<li>对于那些<span class='p red'>本来可以在更短时间内完成的指令，要使用这个较长的周期来完成</span>，会降低整个系统的运行速度。</li>
</ul>
<p>方案2．多指令周期</p>
<ul>
<li>对不同类型的指令选用不同的执行步骤来完成。</li>
<li>指令之间串行执行;可选用不同个数的时钟周期来完成不同指令的执行过程。</li>
<li>需要更复杂的硬件设计。</li>
</ul>
<p>方案3．流水线方案</p>
<ul>
<li>在每一个时钟周期启动一条指令，尽量让多条指令同时运行，但各自处在不同的执行步骤中。指令之间并行执行。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/OAmNPQda8945rZR.png" alt="image-20221016145341323" /></p>
<h2 id="数据通路的功能"><a class="markdownIt-Anchor" href="#数据通路的功能"></a> 数据通路的功能</h2>
<h3 id="单总线结构"><a class="markdownIt-Anchor" href="#单总线结构"></a> 单总线结构</h3>
<ul>
<li>
<span class='p red'>内部总线</span>是指同一部件，如CPU内部连接各寄存器及运算部件之间的总线;
</li>
<li>
<span class='p red'>系统总线</span>是指同一台计算机系统的各部件，如CPU、内存、通道和各类I/O接口间互相连接的总线。
</li>
</ul>
<ol>
<li>
<p>寄存器之间数据传送</p>
<p>比如把PC内容送至MAR，实现传送操作的流程及控制信号为:(PC)→Bus</p>
<p>PCout有效，PC内容送总线</p>
<p>Bus→MAR</p>
<p>MARin有效，总线内容送MAR</p>
</li>
<li>
<p>主存与CPU之间的数据传送</p>
<p>比如CPU从主存读取指令，实现传送操作的流程及控制信号为;(PC)→Bus→MAR</p>
<p>PCout和MARin有效，现行指令地址→MAR<br />
1→R     CU发读命令(通过控制总线发出，图中未画出<br />
MEM(MAR)→MDR       MDRin有效</p>
</li>
<li>
<p>执行算术或逻辑运算</p>
<p>比如一条加法指令微操作序列及控制信号为:</p>
<p>Ad(IR)→Bus→MAR)	MDRout和MARin有效</p>
<p>1→R	CU发读命令</p>
<p>MEM(MAR)→数据线→MDR 	MDRin有效</p>
<p>MDR→Bus→Y	MDRout和Yin有效,操作数→Y</p>
<p>(ACC)+(Y)→z	ACCout和ALUin有效，CU向ALU发送加命令</p>
<p>Z→ACC	Zout和ACCin有效，结果→ACC</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/sRKzJgeHVjky7Tf.png" alt="image-20221016153522355" /></p>
<h3 id="单总线结构例题"><a class="markdownIt-Anchor" href="#单总线结构例题"></a> 单总线结构：例题</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/IwDNn8ZV2zuFRiv.png" alt="image-20221016154148234" /></p>
<p>设有如图所示的单总线结构，分析指令ADD(RO),R1的指令流程和控制信号。</p>
<ol>
<li>
<p>分析指令功能和指令周期</p>
<p>功能:((RO))+(R1)→(RO)</p>
<p>取指周期、间址周期、执行周期</p>
</li>
<li>
<p>写出各阶段的指令流程</p>
<p>取值周期：公共操作</p>
</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">时序</th>
<th style="text-align:center">微操作</th>
<th style="text-align:center">有效控制信号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">(PC)→MAR<br />先获取这条指令</td>
<td style="text-align:center">PCout, MARin</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">M(MAR) →MDR<br />获取这条指令的内容</td>
<td style="text-align:center">MemR，MARout<br />MDRinE</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">(MDR)→IR<br />将这条指令的内容<br />放到IR寄存器中</td>
<td style="text-align:center">MDRout,IRin</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">指令译码</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">(PC)+1→PC</td>
<td style="text-align:center">-</td>
</tr>
</tbody>
</table>
<p>间址周期:<span class='p red'>完成取数操作，被加数在主存中，加数已经放在寄存器R1中</span>。</p>
<table>
<thead>
<tr>
<th style="text-align:center">时序</th>
<th style="text-align:center">微操作</th>
<th style="text-align:center">有效控制信号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">(R0)→MAR<br />将这条指令的间接地址放到<br />MAR中，从内存中读取这个数据的有效地址</td>
<td style="text-align:center">R0out,MARin</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">M(MAR)→MDR<br />获取这个数据的有效地址</td>
<td style="text-align:center">MenR, MARout,<br />MDRinE</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">(MDR )→Y<br />将这个地址放到Y寄存器中</td>
<td style="text-align:center">MDRout,Yin</td>
</tr>
</tbody>
</table>
<p>执行周期:完成取数操作，被加数在主存中，加数已经放在寄存器R1中。</p>
<table>
<thead>
<tr>
<th style="text-align:center">时序</th>
<th style="text-align:center">微操作</th>
<th style="text-align:center">有效控制信号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">(R1)+(Y)→Z<br />将R1和Y寄存器中的数据相加</td>
<td style="text-align:center">R1out,ALUin,CU<br />向ALU发ADD控制信号</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">(Z)→MDR<br />将结果放到MDR中，<br />准备写入到R0</td>
<td style="text-align:center">Zout，MDRin</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">(MDR)→M(MAR)</td>
<td style="text-align:center">MemW,MDRoutE,MARout</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Q4Ol9SYWZAv8DLq.png" alt="image-20221016160239937" /></p>
<h3 id="专用通路结构"><a class="markdownIt-Anchor" href="#专用通路结构"></a> 专用通路结构</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/bXJ3UQ2iB8MzynG.png" alt="image-20221016161516222" /></p>
<p>(PC)&gt;MAR	C0有效</p>
<p>(MAR)→主存	C1有效</p>
<p>1→R			控制单元向主存发送读命令<br />
M(MAR)→MDR		C2有效</p>
<p>(MDR)&gt;IR				C3有效</p>
<p>(PC)+1→PC</p>
<p>Op(IR)→CU		C4有效</p>
<h3 id="专用通路结构例题"><a class="markdownIt-Anchor" href="#专用通路结构例题"></a> 专用通路结构：例题</h3>
<p>下图是一个简化了的CPU与主存连接结构示意图(图中省略了所有的多路选择器)。其中有一个累加寄存器(ACC)、一个状态数据寄存器和其他4个寄存器:主存地址寄存器(MAR) 、主存数据寄存器(MDR) 、程序寄存器(PC) 和指令寄存器(IR) ，各部件及其之间的连线表示数据通路，箭头表示信息传递方向。</p>
<p>要求：</p>
<ol>
<li>
<p>请写出图中a、b、c、d 4个寄存器的名称。<br />
d能自动“+1”， 是PC</p>
<p>PC内容是地址，送MAR，故c是MAR ,</p>
<p>b与微操作信号发生器相连，是IR</p>
<p>与主存相连的寄存器是MAR和MDR，c是MAR,</p>
<p>则a是MDR</p>
</li>
<li>
<p>简述图中取指令的数据通路。</p>
<ul>
<li>(PC)→MAR</li>
<li>M(MAR)→MDR</li>
<li>(MDR)→IR</li>
<li>OP(IR)→微操作信号发生器</li>
<li>(PC)+1→PC</li>
</ul>
</li>
<li>
<p>简述数据在运算器和主存之间进行存/取访问的数据通路。</p>
<ul>
<li>
<span class='p red'>运算器中不能够存数据，所以这题是问的ACC到主存之间的数据的存取</span>.
</li>
<li>存/取的数据放到ACC中</li>
<li>设数据地址已放入MAR</li>
<li>取: M(MAR) &gt; MDR      (MDR)→ALU→ACC</li>
<li>存:(ACC) &gt; MDR,    (MDR) &gt; M(MAR)</li>
</ul>
</li>
<li>
<p>简述完成指令LDA X的数据通路(X为主存地址，LDA的功 能为(X)→ACC)。</p>
<ul>
<li>X→MAR</li>
<li>M(MAR) → MDR</li>
<li>(MDR)→ALU→ACC</li>
</ul>
</li>
<li>
<p>简述完成指令ADD Y的数据通路(Y为主存地址，ADD的功 能为(ACC)+ (Y)→ACC)</p>
<ul>
<li>Y→MAR</li>
<li>M(MAR) → MDR</li>
<li>(MDR)→ALU, (ACC)→ALU</li>
<li>ALU→ACC</li>
</ul>
</li>
<li>
<p>简述完成指令STA Z的数据通路(Z为主存地址，STA的功能为(ACC)→Z)。</p>
<ul>
<li>Z→MAR</li>
<li>(ACC) → MDR</li>
<li>(MDR)→M(MAR)</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/WnwfbMUeq3m59GZ.png" alt="image-20221016163112380" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/K6PvwGd58qOYoA4.png" alt="image-20221016162912848" /></p>
<h2 id="硬布线控制器的设计"><a class="markdownIt-Anchor" href="#硬布线控制器的设计"></a> 硬布线控制器的设计</h2>
<p>一条指令分为四个周期：<mark class="hl-label red">取指周期(FE)，间值周期(IND)，执行周期(EX)，中断周期(INT)</mark> .</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/BhpFzfO58dHr3yC.png" alt="image-20221031151322233" /></p>
<p>CU发出一个<span class='p red'>微命令</span>，可完成对应微操作。</p>
<ul>
<li>如:<span class='p red'>微命令1</span>使得PCout、MARjn有效。完成对应的<span class='p red'>微操作</span>1(PC)→MAR</li>
</ul>
<p>根据<span class='p red'>指令操作码、目前的机器周期、节拍信号、机器状态条件</span>，即可确定现在这个<span class='p red'>节拍下应该发出哪些“微命令”</span>.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/th5asu7E6gJW9Bd.png" alt="image-20221031151449760" /></p>
<p>一个节拍内可以<span class='p red'>并行</span>完成多个<span class='p red'>“相容的”微操作</span>.</p>
<p>同一个微操作<span class='p red'>可能在不同指令的不同阶段被使用</span>.</p>
<p>不同指令的执行周期所需节拍数各不相同。为了简化设计，选择<span class='p red'>定长的机器周期</span>，以可能出现的最大节拍数为准（通常<span class='p red'>以访存所需节拍数作为参考</span>)</p>
<p>若实际所需节拍数较少，可将微操作安排在机器周期未尾几个节拍上进行</p>
<h3 id="硬布线控制器"><a class="markdownIt-Anchor" href="#硬布线控制器"></a> 硬布线控制器</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/JtKhMSnwa7L4sjO.png" alt="image-20221031152248535" /></p>
<p>根据<span class='p blue'>指令操作码</span>、<span class='p purple'>目前的机器周期</span>、<span class='p brown'>节拍信号</span>、<span class='p green'>机器状态条件</span>，即可确定现在这个节拍下<span class='p red'>应该发出哪些“微命令”</span>.</p>
<p>所有指令的取指周期、T0节拍下一定要完成(PC)→MAR。则可知C1=FE·T0</p>
<p>微操作<span class='p red'>对应的逻辑表达式与电路</span>：</p>
<ul>
<li>
<span class='p red'>M(MAR) —>MDR</span>微操作命令的逻辑表达式: FE·T1+IND·T1(ADD+STA+LDA+JMP+BAN)+EX·T(ADD+LDA)
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ro4bKj1TBqQix7w.png" alt="image-20221031154207120" /></p>
<h3 id="硬部件控制器的设计"><a class="markdownIt-Anchor" href="#硬部件控制器的设计"></a> 硬部件控制器的设计</h3>
<div class="tip warning"><p>探讨如何得到一个微操作与之对应的电路</p>
</div>
<div class="tip "><p>设计步骤</p>
</div>
<ol>
<li>
<p>分析每个阶段的微操作序列(取值、间址、执行、中断四个阶段)</p>
<p>确定哪些指令在什么阶段、在什么条件下会使用到的微操作</p>
</li>
<li>
<p>选择CPU的控制方式</p>
<p>采用定长机器周期还是不定长机器周期?每个机器周期安排几个节拍?</p>
<p>假设采用同步控制方式（定长机器周期）,一个机器周期内安排3个节拍。</p>
</li>
<li>
<p>安排微操作时序</p>
<p>如何用3个节拍完成整个机器周期内的所有微操作?</p>
</li>
<li>
<p>电路设计</p>
<p>确定每个微操作命令的逻辑表达式,并用电路实现</p>
</li>
</ol>
<div class="tip "><p>分析每一个阶段的微操作序列</p>
</div>
<p>取指周期（所有指令都一样）</p>
<ul>
<li>PC→ MAR</li>
<li>1→R</li>
<li>M (MAR )→MDR</li>
<li>MDR →IR</li>
<li>OP (IR)→ID</li>
<li>( PC)+1 →PC
<ul>
<li>注:ID是指令译码器lnstruction Decoder</li>
</ul>
</li>
</ul>
<p>间址周期（所有指令都一样)</p>
<ul>
<li>Ad(IR)→MAR</li>
<li>1→R</li>
<li>
<span class='p red'>M(MAR ) MDR</span>.
</li>
<li>MDR &gt;Ad(IR)</li>
</ul>
<p>执行周期(各不相同)</p>
<ul>
<li>
<p>CLA    0 →AC</p>
<ul>
<li>clear ACC指令</li>
<li>ACC清零</li>
</ul>
</li>
<li>
<p>LDA X    Ad ( IR)MAR</p>
<ul>
<li>取数指令,	1→R</li>
<li>把X所指内容  M(MAR) MDR</li>
<li>取到ACC      MDR →AC</li>
</ul>
</li>
<li>
<p>JMP x    Ad (IR)PC</p>
<ul>
<li>无条件转移</li>
</ul>
</li>
<li>
<p>BAN X     A0*Ad ( lR ) + (非)A0·(PC)→PC</p>
<p>Branch ACC Negative</p>
<p>条件转移，当ACC为负时转移</p>
</li>
</ul>
<div class="tip "><p>安排微操作时序</p>
</div>
<ul>
<li>
<mark class="hl-label red">原则</mark> 
<p>原则一:微操作的<span class='p red'>先后顺序不得</span>随意<span class='p red'>更改</span>.</p>
<p>原则二:<span class='p red'>被控对象不同</span>的微操作，尽量安排在<span class='p red'>一个节拍</span>内完成</p>
<p>原则三:占用<span class='p red'>时间较短</span>的微操作，尽量安排在<span class='p red'>一个节拍内</span>完成，并<span class='p red'>允许有先后顺序</span>.</p>
</li>
<li>
<p>取指周期的微操作时序</p>
<p>T0	(1)	PC→ MAR</p>
<p>T0	(2) 	1 →R		存储器空闲即可<br />
T1	(3)	M(MAR ) →MDR	在(1)之后<br />
T1	(6)	 (PC)+1→PC		在(1)之后<br />
T2	(4)	MDR →IR		在(3)之后<br />
T2	(5)	OP ( IR)→ID		在(4)之后</p>
<p>M( MAR )→MDR从主存取数据，<span class='p red'>用时较长，因此必须一个时钟周期才能保证微操作的完成</span>.</p>
<p>MDR→IR是CPU内部寄存器的数据传送，<span class='p red'>速度很快，因此在一个时钟周期内可以紧接着完成</span>,OP(IR )→ID。也就是可以一次同时发出两个微命令。</p>
</li>
<li>
<p>间值周期的微操作时序：</p>
<p>T0	(1)	Ad(IR)→MAR</p>
<p>T0	(2)	1→R<br />
T1	(3)	M (MAR ) → MDR</p>
<p>T2	(4)	MDR→ Ad(IR)</p>
</li>
</ul>
<div class="tip "><p>电路的设计</p>
</div>
<ol>
<li>
<p>列出操作时间表</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/STFGxDQCwMYl8v2.png" alt="image-20221031170943367" /></p>
</li>
<li>
<p>写微操作命令的最简表达式</p>
<p>有可能使用到M(MAR) → MDR所有情况</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/tThiVkxzS5R8CKs.png" alt="image-20221031171605188" /></p>
<p>M(MAR) —&gt;MDR微操作命令的逻辑表达式:<br />
FE·T1+ IND·T1(ADD+STA+LDA+JMP+BAN)+EX·T1(ADD+LDA)</p>
<p>=T1{FE+IND(ADD+STA+LDA+JMP+BAN)+EX(ADD+LDA)}</p>
</li>
<li>
<p>画出逻辑图、</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/thRsvIY3JzBwjol.png" alt="image-20221031171816566" /></p>
</li>
</ol>
<p>硬布线控制器的特点:</p>
<p>指令越多，设计和实现就越复杂，因此一般用于RISC（精简指令集系统)</p>
<p>如果扩充一条新的指令，则控制器的设计就需要大改，因此扩充指令较困难。</p>
<p>由于使用纯硬件实现控制，因此执行速度很快。微操作控制信号由组合逻辑电路即时产生。</p>
<h2 id="微程序控制器的基本原理"><a class="markdownIt-Anchor" href="#微程序控制器的基本原理"></a> 微程序控制器的基本原理</h2>
<p>硬布线控制器：<span class='p red'>微操作控制信号</span>由组合逻辑电路根据当前的<span class='p red'>指令码、状态和时序(包含机器周期，节拍)</span>，即时产生，<span class='p red'>使用纯硬件来实现</span>.</p>
<h3 id="微程序控制器设计思路"><a class="markdownIt-Anchor" href="#微程序控制器设计思路"></a> 微程序控制器设计思路</h3>
<p>采用“存储程序”的思想，<span class='p red'>CPU出厂前将所有指令的“微程序”存入“控制器存储器”中</span>.</p>
<p>什么是微程序：</p>
<ul>
<li>
<mark class="hl-label red">程序</mark> :由指令序列组成
</li>
<li>
<mark class="hl-label red">微程序</mark> :由微指令序列组成，<span class='p red'>每一种指令对应一个微程序</span>.
</li>
<li>
<mark class="hl-label red">指令</mark> 是对程序执行步骤的描述
</li>
<li>
<mark class="hl-label red">微指令</mark> 是对指令执行步骤的描述
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Lajw6iImUykMRHr.png" alt="image-20221031190653825" style="zoom:50%;" /><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/MgnbrIJdf6mHGC8.png" alt="image-20221031181603580" style="zoom:50%;" /></p>
<ul>
<li>
<mark class="hl-label default">微命令与微操作</mark> 一一对应
</li>
<li>
<mark class="hl-label default">微指令</mark> 中可能包含<span class='p red'>多个微命令</span>.
</li>
<li>
<span class='p red'>指令是对微指令功能的封装</span>
</li>
</ul>
<h3 id="微程序控制器的基本结构"><a class="markdownIt-Anchor" href="#微程序控制器的基本结构"></a> 微程序控制器的基本结构</h3>
<p>思考:所有指令的<span class='p red'>取指周期、间址周期、中断周期所对应的微指令序列都一样</span>，<span class='p green'>是否可以共享使用?</span>.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/5bIOBnXgKldrqcx.png" alt="image-20221031183858126" /></p>
<h3 id="微控制器的工作原理"><a class="markdownIt-Anchor" href="#微控制器的工作原理"></a> 微控制器的工作原理</h3>
<p>取指周期、间址周期、中断周期所对应的微指令序列都一样，<span class='p red'>可以一起使用</span>，故如果某指令系统中有n条机器指令，则CM中<span class='p red'>微程序段(有些地方认为取值，间址，中断，执行是一个微程序)的个数至少是n+1个</span>，因为<span class='p red'>一些早期的CPU、物联网设备的CPU可以不提供间接寻址和中断功能</span></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/o84iw6vJAmZqEtX.png" alt="image-20221031185035390" style="zoom: 50%;" />        <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/gGsMAiekQbjDWzw.png" alt="image-20221031185159322" style="zoom: 50%;" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/9BDKjOz4kVwyGPR.png" alt="image-20221031190025656" /></p>
<h2 id="微指令的设计"><a class="markdownIt-Anchor" href="#微指令的设计"></a> 微指令的设计</h2>
<h3 id="微程序控制器的工作原理"><a class="markdownIt-Anchor" href="#微程序控制器的工作原理"></a> 微程序控制器的工作原理</h3>
<p>微指令的具体格式应该怎么设计? 如何<span class='p red'>根据微指令发出相应的微命令</span>?</p>
<p>微命令与微操作一一对应，<span class='p red'>一个微命令对应一根输出线</span>.</p>
<p>有的微命令可以并行执行，<span class='p red'>因此一条微指令可以包含多个微命令</span>.</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/bNHTG7ruE4FWLDz.png" alt="image-20221031191048831" style="zoom:50%;" />
<h3 id="微命令的格式"><a class="markdownIt-Anchor" href="#微命令的格式"></a> 微命令的格式</h3>
<p>相容性微命令:可以并行完成的微命令。</p>
<p>互斥性微命令:不允许并行完成的微命令。</p>
<ol>
<li>
<p>水平型微指令</p>
<p>一条微指令能房义多个可并行的微命令。</p>
<p>基本格式</p>
</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/bNHTG7ruE4FWLDz.png" alt="image-20221031191048831" style="zoom: 67%;" />
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/AR9eZbmx8FVMuOa.png" alt="image-20221031191717243" /></p>
<ul>
<li>
<span class='p green'>优点:微程序短，执行速度快</span>;
</li>
<li>
<span class='p red'>缺点:微指令长，编写微程序较麻烦</span>。
</li>
</ul>
<ol start="2">
<li>垂直型微指令</li>
</ol>
<p>一条微指令只能定义一个微命令，由微操作码字段规定具体功能</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/toGxzia5KLj1s93.png" alt="image-20221031191434340" style="zoom:67%;" />
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/BKeZcfN61WvCUTl.png" alt="image-20221031191733827" /></p>
<ul>
<li>
<span class='p green'>优点:微指令短、简单、规整，便于编写微程序</span>;
</li>
<li>
<span class='p red'>缺点:微程序长，执行速度慢，工作效率低</span>.
</li>
</ul>
<ol start="3">
<li>
<p>混合型微指令</p>
<p>在<span class='p red'>垂直型的基础上增加一些不太复杂的并行操作</span>。微指令较短，仍便于编写;微程序也不长，执行速度加快。</p>
</li>
</ol>
<h3 id="微指令的编码方式"><a class="markdownIt-Anchor" href="#微指令的编码方式"></a> 微指令的编码方式</h3>
<p>微指令的编码方式又称为<span class='p red'>微指令的控制方式</span>，它是指如何对微指令的控制字段进行编码，以形成控制信号。编码的目标是<span class='p red'>在保证速度的情况下，尽量缩短微指令字长</span>。</p>
<ol>
<li>
<p>直接编码（直接控制）方式</p>
<p>在微指令的操作控制字段中，<span class='p red'>每一位代表一个微操作命令</span></p>
<p>某位为“<span class='p red'>1</span>”表示该控制信号有效</p>
<p>其<span class='p green'>优点:简单、直观，执行速度快，操作并行性好</span>。</p>
<p>其<span class='p red'>缺点:微指令字长过长，n个微命令就要求微指令的操作字段有n位，造成控存容量极大</span>。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/8zrQhnoPXKqFMsG.png" alt="image-20221031192500340" /></p>
<ol start="2">
<li>
<p>字段直接编码方式</p>
<p>将微指令的控制字段分成若干“段”，<span class='p red'>每段经译码后发出控制信号</span></p>
<p>微命令字段分段的原则:</p>
<ol>
<li>
<span class='p red'>互斥性</span>微命令分在<span class='p red'>同一段内</span>，<span class='p red'>相容性</span>微命令分在<span class='p red'>不同段内</span>。
</li>
<li>
<span class='p red'>每个小段</span>中包含的<span class='p red'>信息位不能太多</span>，否则将增加译码线路的复杂性和译码时间。
</li>
<li>
<p>一般<span class='p red'>每个小段还要留出一个状态</span>，表示本字段不发出任何微命令。因此，当某字段的长度为3位时，最多只能表示7个互斥的微命令，<span class='p red'>通常用000表示不操作</span>。</p>
</li>
</ol>
<p>其<mark class="hl-label green">优点:可以缩短微指令字长</mark> 。</p>
<p>其<mark class="hl-label red">缺点:要通过译码电路后再发出微命令，因此比直接编码方式慢</mark> 。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/1T9XIw2GnfiNyKO.png" alt="image-20221031193300042" /></p>
</li>
</ol>
<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>问：某计算机的控制器采用微程序控制方式，微指令中的操作控制字段采用<span class='p red'>字段直接编码法</span>，共有33个微命令，构成5个互斥类，分别包含7、3、12、5和6个微命令，则操作控制字段至少有多少位?</p>
<p>答：第1个互斥类有7个微命令，<span class='p red'>要留出1个状态表示不操作</span>,所以需要表示8种不同的状态，故需要3个二进制位。以此类推，后面4个互斥类各需要表示4、13、6、7种不同的状态，分别对应2、4、3、3个二进制位。故操作控制字段的总位数为3+2+4+3+3=15位</p>
<p>tip：<span class='p red'>若采用直接编码的方式，则控制字段需要33位</span>.</p>
</div>
<ol start="3">
<li>
<p>字段间接编码方式</p>
<p>一个字段的<span class='p red'>某些微命令需由另一个字段中的某些微命令来解释</span>,由于<span class='p red'>不是靠字段直接译码发出的微命令</span>,故称为字段间接编码,又称隐式编码。</p>
<p>其<mark class="hl-label green">优点:可进一步缩短微指令字长</mark> 。</p>
<p>其<mark class="hl-label red">缺点:削弱了微指令的并行控制能力，故通常作为字段直接编码方式的一种辅助手段</mark> 。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/H6RAWcjStaxFyGh.png" alt="image-20221031194909555" /></p>
<h3 id="微指令的地址形成方式"><a class="markdownIt-Anchor" href="#微指令的地址形成方式"></a> 微指令的地址形成方式</h3>
<ol>
<li>微指令的<span class='p red'>下地址字段指出―微指令格式中设置一个下地址字段</span>，由微指令的下地址字段直接指出后继微指令的地址，这种方式又称为<span class='p red'>断定方式</span>。</li>
<li>根据机器指令的<span class='p red'>操作码</span>形成当机器指令取至指令寄存器后，微指令的地址由操作码经微地址形成部件形成。</li>
<li>增量<span class='p red'>计数器法</span>(CMAR )+1—&gt;CMAR</li>
<li>分支转移转移方式:指明判别条件;转移地址:指明转移成功后的去向。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/lFDIPVgAqfxHGKC.png" alt="image-20221031203354739" /></p>
<ol start="5">
<li>
<p>通过测试网络</p>
</li>
<li>
<p>由硬件产生微程序入口地址</p>
<span class='p red'>第一条微指令地址</span>由专门<span class='p red'>硬件</span>产生（用专门的硬件记录取指周期微程序首地址)
<p>中断周期由<span class='p red'>硬件</span>产生<span class='p red'>中断周期微程序首地址</span>（用专门的硬件记录)</p>
</li>
</ol>
<h3 id="例题断定方式"><a class="markdownIt-Anchor" href="#例题断定方式"></a> 例题：断定方式</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/VcqWXDLN35y2YeS.png" alt="image-20221031185035390" style="zoom: 50%;" />
<p>某计算机采用微程序控制器,共有32条指令，公共的取指令微程序包含2条微指令，各指令对应的微程序平均由4条微指令组成,采用<span class='p red'>断定法</span>（下地址字段法）确定下条微指令地址，则微指令中下地址字段的位数至少是多少位?</p>
<p>总共需要存储多少条微指令?</p>
<p>32×4+2= 130条</p>
<p>标注出130个不同的位置至少需要多少个二进制位?</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>7</mn></msup><mo>=</mo><mn>128</mn><mo separator="true">,</mo><msup><mn>2</mn><mn>8</mn></msup><mo>=</mo><mn>256</mn></mrow><annotation encoding="application/x-tex">2^7=128,2^8=256</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span></span></span></span></p>
<p>下地址字段的位数至少是8位</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/yNQ1uGnvT9scZxS.png" alt="image-20221101150148027" /></p>
<h2 id="微程序控制单元的设计"><a class="markdownIt-Anchor" href="#微程序控制单元的设计"></a> 微程序控制单元的设计</h2>
<p>设计步骤:</p>
<ol>
<li>分析每个阶段的微操作序列</li>
<li>写出对应机器指令的微操作命令及节拍安排</li>
<li>确定微指令格式</li>
<li>编写微指令码点</li>
</ol>
<p>取指周期-<span class='p red'>硬布线控制器的节拍安排</span>:</p>
<ol>
<li>T0 	PC→MAR</li>
<li>T0	1 → R</li>
<li>T1	M (MAR ) MDR</li>
<li>T1    (PC )+1→PC</li>
<li>T2    MDR →IR</li>
<li>T2    OP(IR )→ID，将分析完的指令直接放到对应的线路上，将对应的线路导通</li>
</ol>
<p>取指周期-<span class='p red'>微程序控制器的节拍安排</span>: 分为三条微指令T0，T1，T2</p>
<ol>
<li>T0    PC→MAR</li>
<li>T0    1→R</li>
<li>T1    M(MAR )→MDR</li>
<li>T1    (PC )+1→PC</li>
<li>T2    MDR→IR</li>
<li>T2    OP(IR )→微地址形成部件</li>
</ol>
<p>但是<mark class="hl-label red">实际上取值周期-微程序控制器的节拍安排，在每一条微指令下面都需要有一条指令来确定下一条指令的位置</mark> .</p>
<p>微指令a：</p>
<p>T0 	PC → MAR</p>
<p>T0	1→R</p>
<p>T1	Ad ( CMDR)→CMAR	.<span class='p red'>需要使用T1节拍确定下一条微指令的地址</span>.</p>
<p>微指令b：</p>
<p>T2	M(MAR )→MDR</p>
<p>T2	(PC)+1 →PC</p>
<p>T3	Ad ( CMDR )→CMAR	.<span class='p red'>需要使用T3节拍确定下一条微指令的地址</span>.</p>
<p>微指令c：</p>
<p>T4	MDR →IR</p>
<p>T4	OP(IR )→微地址形成部件</p>
<p>T5	微地址形成部件→CMAR	.<span class='p red'>根据指令操作码确定其执行周期微指令序列的首地址</span>.</p>
<p>显然微程序控制器的速度比硬布线控制器更慢</p>
<div class="tip "><p>微程序控制单元的设计步骤</p>
</div>
<ol>
<li>
<p>分析每个阶段的微操作序列</p>
</li>
<li>
<p>写出对应机器指令的微操作命令及节拍安排</p>
<ol>
<li>
<p>写出每个周期所需要的微操作(参照硬布线)</p>
</li>
<li>
<p>补充微程序控制器特有的微操作:</p>
<p>取指周期:</p>
<p>Ad (CMDR)CMAROP (IR ) &gt;CMAR</p>
<p>执行周期:</p>
<p>Ad(CMDR)&gt;CMAR</p>
</li>
</ol>
</li>
<li>
<p>确定微指令格式</p>
<p>根据微操作个数决定采用何种编码方式，以确定微指令的操作控制字段的位数。根据cM中存储的微指令总数，确定微指令的顺序控制字段的位数。最后按操作控制字段位数和顺序控制字段位数就可确定微指令字长。</p>
</li>
<li>
<p>编写微指令码点</p>
<p>根据操作控制字段每一位代表的微操作命令，编写每一条微指令的码点。</p>
</li>
</ol>
<h3 id="微程序设计分类"><a class="markdownIt-Anchor" href="#微程序设计分类"></a> 微程序设计分类</h3>
<ol>
<li>
<p>静态微程序设计和动态微程序设计</p>
<p>.<span class='p red'>静态</span>：微程序无需改变，采用<span class='p red'>ROM</span>.</p>
<p>.<span class='p red'>动态</span>：通过<span class='p red'>改变微指令</span>和<span class='p red'>微程序</span>改变机器指令有利于仿真，采用<span class='p red'>EPROM</span>.</p>
</li>
<li>
<p>毫微程序设计</p>
<p>毫微程序设计的基本概念</p>
<p>.<span class='p red'>微程序设计</span>        用   <span class='p red'>微程序解释机器指令</span>.</p>
<p>.<span class='p green'>毫微程序设计</span>    用   <span class='p green'>毫微程序解释微程序</span>.</p>
</li>
</ol>
<h3 id="微程序控制器和硬布线控制器的对比"><a class="markdownIt-Anchor" href="#微程序控制器和硬布线控制器的对比"></a> 微程序控制器和硬布线控制器的对比</h3>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">微程序控制器</th>
<th style="text-align:center">硬布线控制器</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">工作原理</td>
<td style="text-align:center">微操作控制信号以微程序的形式<br />存放在控制存储器中，执行指令时<br/>读出即可</td>
<td style="text-align:center">微操作控制信号由组合逻辑电路<br />根据当前的指令码、状态和时序，<br/>即时产生</td>
</tr>
<tr>
<td style="text-align:center">执行速度</td>
<td style="text-align:center">慢</td>
<td style="text-align:center">快</td>
</tr>
<tr>
<td style="text-align:center">规整性</td>
<td style="text-align:center">较规整</td>
<td style="text-align:center">烦琐、不规整</td>
</tr>
<tr>
<td style="text-align:center">应用场景</td>
<td style="text-align:center">CISC CPU</td>
<td style="text-align:center">RISC CPU</td>
</tr>
<tr>
<td style="text-align:center">易于扩充</td>
<td style="text-align:center">易扩充修改</td>
<td style="text-align:center">困难</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/1xLX68za4tOJjbM.png" alt="image-20221101160500234" /></p>
<h2 id="指令流水线的基本概念"><a class="markdownIt-Anchor" href="#指令流水线的基本概念"></a> 指令流水线的基本概念</h2>
<h3 id="指令流水的定义"><a class="markdownIt-Anchor" href="#指令流水的定义"></a> 指令流水的定义</h3>
<p>一条指令的执行过程可以分成多个阶段（或过程）。根据计算机的不同，具体的分法也不同。<br />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/wmRxSAbXG1dofQs.png" alt="image-20221101161147659" /></p>
<ul>
<li>
<span class='p red'>取指</span>:根据PC内容访问主存储器，取出一条指令送到R中。
</li>
<li>
<span class='p red'>分析</span>:对指令操作码进行译码，按照给定的寻址方式和地址字段中的内容形成操作数的有效地址EA，并从有效地址EA中取出操作数。
</li>
<li>
<span class='p red'>执行</span>:根据操作码字段，完成指令规定的功能，即把运算结果写到通用寄存器或主存中。
</li>
</ul>
<p>设<mark class="hl-label red">取指、分析、执行3个阶段的时间都相等，用t表示</mark> ，按以下几种执行方式分析n条指令的执行时间:</p>
<ol>
<li>顺序执行方式：总耗时：T=n*3T = 3nt</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/tVXjpocODgylCLU.png" alt="image-20221101161525422" /></p>
<p>传统冯·诺依曼机采用顺序执行方式，又称串行执行方式。<span class='p blue'>优点:控制简单，硬件代价小</span>。<br />
.<span class='p red'>缺点:执行指令的速度较慢，在任何时刻，处理机中只有一条指令在执行，各功能部件的利用率很低</span>。</p>
<ol start="2">
<li>一次重叠方式：总耗时：T=3t+(n-1)*2T=(1+2n)t</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/TedNA2wbiFB6hC5.png" alt="image-20221101161752367" /></p>
<p>.<span class='p blue'>优点:程序的执行时间缩短了1/3</span>。</p>
<p>.<span class='p red'>缺点:需要付出硬件上较大开销的代价，控制过程也比顺序执行复杂了</span>。</p>
<ol start="3">
<li>二次重叠方式：总耗时T=3t+(n-1)t=(2+n)t</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/rYD7jHOnyigbEwx.png" alt="image-20221101161931415" /></p>
<p>.<span class='p blue'>与顺序执行方式相比，指令的执行时间缩短近2/3。这是一种理想的指令执行方式，在正常情况下</span>。</p>
<p>注:<mark class="hl-label red">也可以把每条指令的执行过程分成4个或5个阶段，分成5个阶段是比较常见的做法</mark> 。</p>
<h3 id="流水线表示方法"><a class="markdownIt-Anchor" href="#流水线表示方法"></a> 流水线表示方法</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/1tJyEnNGM3oBDm8.png" alt="image-20221101162701040" /></p>
<h3 id="流水线的性能指标"><a class="markdownIt-Anchor" href="#流水线的性能指标"></a> 流水线的性能指标</h3>
<div class="tip "><p>吞吐率</p>
</div>
<p>吞吐率是指在单位时间内流水线所完成的任务数量，或是输出结果的数量。</p>
<p>设任务数为n;处理完成n个任务所用的时间为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">T_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>则计算流水线吞吐率（TP）的最基本的公式为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mi>P</mi><mo>=</mo><mfrac><mi>n</mi><msub><mi>T</mi><mi>k</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">TP=\frac{n}{T_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.146252em;vertical-align:-0.4508599999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4508599999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>理想情况下，流水线的时空图如下:		当连续输入的任务n→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>时，得最大吞吐率为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><msub><mi>P</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">TP_{max}=1/\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord">Δ</span><span class="mord mathdefault">t</span></span></span></span>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/7OTIDlgmtbnMoYH.png" alt="image-20221101164429955" /></p>
<p>一条指令的执行分为k个阶段，每个阶段耗时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span><span class="mord mathdefault">t</span></span></span></span> ，一般取<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span><span class="mord mathdefault">t</span></span></span></span> =一个时钟周期</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mi>k</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">T_k=(k+n-1)\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">Δ</span><span class="mord mathdefault">t</span></span></span></span></p>
<p>流水线的实际吞吐率为</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mi>P</mi><mo>=</mo><mfrac><mi>n</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">TP =\frac{n}{(k+n-1)\Delta t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.215392em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mord mtight">Δ</span><span class="mord mathdefault mtight">t</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<div class="tip "><p>加速比</p>
</div>
<p>完成同样一批任务，<span class='p red'>不使用流水线所用的时间与使用流水线所用的时间之比</span>。</p>
<p>设T0,表示不使用流水线时的执行时间，即顺序执行所用的时间;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">T_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示使用流水线时的执行时间则计算流水线加速比(S）的基本公式为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mfrac><msub><mi>T</mi><mn>0</mn></msub><msub><mi>T</mi><mi>k</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">S=\frac{T_0}{T_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3392909999999998em;vertical-align:-0.4508599999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884309999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4508599999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，</p>
<p>理想情况下，流水线时空图：</p>
<p>一条指令的执行分为k个阶段，每个阶段耗时At ，一般取△t =一个时钟周期</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/7OTIDlgmtbnMoYH.png" alt="image-20221101164429955" /></p>
<p>单独完成一个任务耗时为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">k\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord">Δ</span><span class="mord mathdefault">t</span></span></span></span>，则顺序完成n个任务耗时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub><mo>=</mo><mi>n</mi><mi>k</mi><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">T_0=nk\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord">Δ</span><span class="mord mathdefault">t</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mi>K</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">T_K=(k+n-1)\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">Δ</span><span class="mord mathdefault">t</span></span></span></span></p>
<p>实际加速比为</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mfrac><mrow><mi>k</mi><mi>n</mi><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><mrow><mo stretchy="false">(</mo><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>k</mi><mi>n</mi></mrow><mrow><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">S=\frac{kn\Delta t}{(k+n-1)\Delta t}=\frac{kn}{k+n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.400108em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mord mtight">Δ</span><span class="mord mathdefault mtight">t</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mord mathdefault mtight">n</span><span class="mord mtight">Δ</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.283439em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>当连续输入的任务n→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>时，最大加速比为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">S_{max}=k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span></p>
<div class="tip "><p>效率</p>
</div>
<p>流水线的设备利用率称为流水线的效率。</p>
<p>在时空图上，流水线的效率定义为<mark class="hl-label red">完成n个任务占用的时空区有效面积与n个任务所用的时间</mark> 与<mark class="hl-label blue">k个流水段所围成的时空区总面积</mark> 之比。</p>
<p>则流水线效率(E)的一般公式为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>=</mo><mfrac><mrow><mi>n</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">任</mi><mi mathvariant="normal">务</mi><mi mathvariant="normal">占</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">的</mi><mi>k</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">空</mi><mi mathvariant="normal">区</mi><mi mathvariant="normal">有</mi><mi mathvariant="normal">效</mi><mi mathvariant="normal">面</mi><mi mathvariant="normal">积</mi></mrow><mrow><mi>n</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">任</mi><mi mathvariant="normal">务</mi><mi mathvariant="normal">所</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">间</mi><mi mathvariant="normal">与</mi><mi>k</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">流</mi><mi mathvariant="normal">水</mi><mi mathvariant="normal">段</mi><mi mathvariant="normal">所</mi><mi mathvariant="normal">围</mi><mi mathvariant="normal">成</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">空</mi><mi mathvariant="normal">区</mi><mi mathvariant="normal">总</mi><mi mathvariant="normal">面</mi><mi mathvariant="normal">积</mi></mrow></mfrac><mo>=</mo><mfrac><msub><mi>T</mi><mn>0</mn></msub><mrow><mi>k</mi><msub><mi>T</mi><mi>k</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">E=\frac{n个任务占用的k时空区有效面积}{n个任务所用的时间与k个流水段所围成的时空区总面积}=\frac{T_0}{kT_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mord cjk_fallback mtight">个</span><span class="mord cjk_fallback mtight">任</span><span class="mord cjk_fallback mtight">务</span><span class="mord cjk_fallback mtight">所</span><span class="mord cjk_fallback mtight">用</span><span class="mord cjk_fallback mtight">的</span><span class="mord cjk_fallback mtight">时</span><span class="mord cjk_fallback mtight">间</span><span class="mord cjk_fallback mtight">与</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mord cjk_fallback mtight">个</span><span class="mord cjk_fallback mtight">流</span><span class="mord cjk_fallback mtight">水</span><span class="mord cjk_fallback mtight">段</span><span class="mord cjk_fallback mtight">所</span><span class="mord cjk_fallback mtight">围</span><span class="mord cjk_fallback mtight">成</span><span class="mord cjk_fallback mtight">的</span><span class="mord cjk_fallback mtight">时</span><span class="mord cjk_fallback mtight">空</span><span class="mord cjk_fallback mtight">区</span><span class="mord cjk_fallback mtight">总</span><span class="mord cjk_fallback mtight">面</span><span class="mord cjk_fallback mtight">积</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mord cjk_fallback mtight">个</span><span class="mord cjk_fallback mtight">任</span><span class="mord cjk_fallback mtight">务</span><span class="mord cjk_fallback mtight">占</span><span class="mord cjk_fallback mtight">用</span><span class="mord cjk_fallback mtight">的</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mord cjk_fallback mtight">时</span><span class="mord cjk_fallback mtight">空</span><span class="mord cjk_fallback mtight">区</span><span class="mord cjk_fallback mtight">有</span><span class="mord cjk_fallback mtight">效</span><span class="mord cjk_fallback mtight">面</span><span class="mord cjk_fallback mtight">积</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3392909999999998em;vertical-align:-0.4508599999999999em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884309999999999em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4508599999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>当连续输入的任务n→<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>时，最高效率为为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>E</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">E_{max}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p>
<h2 id="指令流水线的影响因素和分类"><a class="markdownIt-Anchor" href="#指令流水线的影响因素和分类"></a> 指令流水线的影响因素和分类</h2>
<h3 id="机器周期的设置"><a class="markdownIt-Anchor" href="#机器周期的设置"></a> 机器周期的设置</h3>
<p>IF: Instruction Fetch 取值阶段</p>
<p>ID: Instruction Decode 指令译码阶段，还包括对寄存器的读取操作，将本条指令所需要的数据放到这个段的锁存器中</p>
<p>EX: EXecute 指令执行阶段</p>
<p>M: Memory 访存阶段</p>
<p>WB: WriteBack 写会阶段</p>
<p>五段式：基于MIPS架构提出的，MIPS是世界上第一个精简指令集RISC的系统</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/kmnCU27BVMZORhP.png" alt="image-20221101180417170" style="zoom:50%;" />
<p>为<span class='p red'>方便流水线的设计</span>，将每个阶段的耗时取成一样，<span class='p red'>以最长耗时为准</span>。即此处应将机器周期设置为100ns。</p>
<p>流水线<span class='p red'>每一个功能段部件后面都要有一个缓冲寄存器</span>，或称为锁存器其作用是保存本流水段的执行结果，提供给下一流水段使用。</p>
<p>缓冲器的作用：因为各个阶段都是以最长时间段的时间来确定的，所以在短时间段的阶段下，如果提前弄好了那么会将结果放在缓冲寄存器中，等待时间到了之后再将数据放到下一个数据块中</p>
<h3 id="结构相关资源冲突"><a class="markdownIt-Anchor" href="#结构相关资源冲突"></a> 结构相关(资源冲突)</h3>
<p>由于多条指令在同一时刻争用同一资源而形成的冲突称为结构相关。</p>
<p>解决办法:</p>
<ol>
<li>
<span class='p blue'>后一相关指令暂停一周期</span>.
</li>
<li>
<span class='p blue'>资源重复配置:数据存储器+指令存储器</span>.
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/16grTCWcbR2iNv3.png" alt="image-20221101184603407" /></p>
<h3 id="数据相关数据冲突"><a class="markdownIt-Anchor" href="#数据相关数据冲突"></a> 数据相关(数据冲突)</h3>
<p>数据相关指在一个程序中，存在必须等前一条指令执行完才能执行后一条指令的情况，则这两条指令即为数据相关。</p>
<p>其中<span class='p red'>第一条指令的运算结果需要作为后续指令的参数</span>，如下图所示，我们在第一条指令还没有执行完毕的时候就需要读取r1中的数据，这时候会造成数据冲突</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/P1aYvxRbQoytG39.png" alt="image-20221101184748681" /></p>
<p>解决办法:</p>
<ol>
<li>把遇到数据相关的指令及其后续指令都暂停一至几个时钟周期，直到数据相关问题消失后再继续执行。可分为硬件阻塞(stall)和软件插入“NOP”两种方法。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/OTwP5YZS1H8LiCD.png" alt="image-20221101185317558" style="zoom: 33%;" /><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/C2E1GaWfM8cwDhq.png" alt="image-20221101185823071.png" style="zoom:33%;" /></p>
<ol start="2">
<li>
<p>数据旁路技术。(转发机制)</p>
<p>我们在运算完结果之后不一定需要放到寄存器中，然后再从寄存器中读取，我们可以在运算结果运算完毕之后直接将数据放到运算器中进行运算，省略了放到寄存器中这一步</p>
</li>
<li>
<p>编译优化：</p>
<p>通过编译器调整指令顺序来解决数据冲突，我们可以先将后面指令中没有用到第一条指令运算结果的指令，先放到第一条指令后面，这样的话，等无管理指令执行完毕之后，结果也就放回到相应的寄存器中去了，这时候也不影响后面指令的运行</p>
</li>
</ol>
<h3 id="控制相关控制冲突"><a class="markdownIt-Anchor" href="#控制相关控制冲突"></a> 控制相关(控制冲突)</h3>
<p>当流水线遇到转移指令和其他改变PC值的指令而造成断流时，会引起控制冲突。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/6zN5TFUPJCRZiKX.png" alt="image-20221101190620109" /></p>
<p>解决办法:</p>
<ol>
<li>转移指令分支预测。简单预测（永远猜ture或false)、动态预测（根据历史情况动态调整)</li>
<li>预取转移成功和不成功两个控制流方向上的目标指令</li>
<li>加快和提前形成条件码</li>
<li>提高转移方向的猜准率</li>
</ol>
<h3 id="流水线的分类"><a class="markdownIt-Anchor" href="#流水线的分类"></a> 流水线的分类</h3>
<div class="tip "><p>根据使用等级分类</p>
</div>
<p>根据流水线使用的级别的不同，流水线可分为<span class='p red'>部件功能级流水线、处理机级流水线和处理机间流水线</span>。</p>
<ul>
<li>
<span class='p red'>部件功能级流水</span>：就是将复杂的算术逻辑运算组成流水线工作方式。例如，可将浮点加法操作分成求阶差、对阶、尾数相加以及结果规格化等4个子过程。
</li>
<li>
<span class='p red'>处理机级流水</span>：是把一条指令解释过程分成多个子过程，如前面提到的取指、译码、执行、访存及写回5个子过程p
</li>
<li>
<span class='p red'>处理机间流水</span>：是一种宏流水，其中每一个处理机完成某一专门任务，各个处理机所得到的结果需存放在与下一个处理机所共享的存储器中。
</li>
</ul>
<div class="tip "><p>根据流水线的功能分类</p>
</div>
<p>按流水线可以完成的功能，流水线可分为单功能流水线和多功能流水线。</p>
<ul>
<li>
<span class='p red'>单功能流水线</span>：指只能实现一种固定的专门功能的流水线;
</li>
<li>
<span class='p red'>多功能流水线</span>：指通过各段间的不同连接方式可以同时或不同时地实现多种功能的流水线。
</li>
</ul>
<div class="tip "><p>根据同一时间内各段之间的连接方式</p>
</div>
<p>按同一时间内各段之间的连接方式,流水线可分为静态流水线和动态流水线。</p>
<ul>
<li>
<span class='p red'>静态流水线</span>：指在同一时间内，流水线的各段只能按同一种功能的连接方式工作。
</li>
<li>
<span class='p red'>动态流水线</span>：指在同一时间内，当某些段正在实现某种运算时，另一些段却正在进行另一种运算。这样对提高流水线的效率很有好处，但会使流水线控制变得很复杂。
</li>
</ul>
<div class="tip "><p>按照各功能段之间是否有返回信号</p>
</div>
<p>按流水线的各个功能段之间是否有反馈信号影流水线可分为线性流水线与非线性流水线。</p>
<ul>
<li>
<span class='p red'>线性流水线</span>：从输人到输出，每个功能段只允许经过一次，不存在反馈回路。
</li>
<li>
<span class='p red'>非线性流水线</span>：存在反馈回路，从输入到输出过程中，某些功能段将数次通过流水线，这种流水线适合进行线性递归的运算。
</li>
</ul>
<h3 id="流水线的多发技术"><a class="markdownIt-Anchor" href="#流水线的多发技术"></a> 流水线的多发技术</h3>
<div class="tip "><p>超标量技术</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/2GKbC5rhMd1BQVT.png" alt="image-20221101194208816" /></p>
<p>每个时钟周期内可<span class='p red'>并发多条独立指令</span>.</p>
<p>要配置多个功能部件</p>
<p>.<span class='p red'>不能调整</span>指令的<span class='p red'>执行顺序</span>.这里需要和<span class='p red'>乱序发射</span>对比起来</p>
<p>通过编译优化技术，把可并行执行的指令搭配起来</p>
<div class="tip "><p>超流水技术</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/3DiBvEMFR8hWr7s.png" alt="image-20221101194712220" /></p>
<p>在<span class='p red'>一个时钟周期</span>内<span class='p red'>再分段</span>（ 3段)</p>
<p>在一个时钟周期内<span class='p red'>一个功能部件使用多次</span>（ 3次)</p>
<p>.<span class='p red'>不能调整</span>指令的<span class='p red'>执行顺序</span>.</p>
<p>靠编译程序解决优化问题</p>
<p>在这个例题中流水线速度是原来的三倍</p>
<div class="tip "><p>超长指令字</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Ct8Aev9Tm2bnDWy.png" alt="image-20221101195238098" /></p>
<p>由<span class='p red'>编译程序挖掘</span>出指令间<span class='p red'>潜在</span>的<span class='p red'>并行性</span>，</p>
<p>将<span class='p red'>多条</span>能<span class='p red'>并行操作</span>的指令组合成<span class='p red'>一条</span>.</p>
<p>具有<span class='p red'>多个操作码字段</span>的<span class='p red'>超长指令字</span>（可达几百位)</p>
<p>采用<span class='p red'>多个处理部件</span>.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/LxBlb8FJ9COmsIy.png" alt="image-20221101195520063" /></p>
<h2 id="五段式指令流水线"><a class="markdownIt-Anchor" href="#五段式指令流水线"></a> 五段式指令流水线</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/kmnCU27BVMZORhP.png" alt="image-20221101180417170" style="zoom:50%;" />
<p>①IF取指→②ID译码&amp;取数→③EX执行→④M访存→⑤WB写回寄存器</p>
<p>我们常用的指令是否都需要执行这五个段呢？</p>
<p>考试中常见的五类指令:<br />
运算类指令、LOAD指令、STORE指令、条件转移指令、无条件转移指令</p>
<div class="tip "><p>运算类指令的执行过程</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/pXlVwouyvEstknr.png" alt="image-20221101200945196" /></p>
<p>没有访存操作，因为运算的操作码都是来自寄存器或者立即数，然后再写会寄存器中</p>
<p>注:</p>
<p>Rs指源操作数( source)</p>
<p>Rd指目的操作数（ destination)</p>
<p>运算类指令</p>
<ul>
<li>lF:根据PC从指令Cache取指令至IF段的锁存器</li>
<li>ID:取出操作数至ID段锁存器</li>
<li>EX:运算，将结果存入EX段锁存器</li>
<li>M:空段</li>
<li>WB:将运算结果写回指定寄存器</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">运算类指令举例</th>
<th style="text-align:center">指令的汇编格式</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">加法指令（两个寄存器相加）</td>
<td style="text-align:center">ADD Rs,Rd</td>
<td style="text-align:center">(Rs)+(Rd)→Rd</td>
</tr>
<tr>
<td style="text-align:center">:加法指令（寄存器与立即数相加）</td>
<td style="text-align:center">ADD #996,Rd</td>
<td style="text-align:center">996+(Rd)→Rd</td>
</tr>
<tr>
<td style="text-align:center">算数左移指令</td>
<td style="text-align:center">SHL Rd</td>
<td style="text-align:center">Rd)&lt;&lt;&lt;2Rd</td>
</tr>
</tbody>
</table>
<div class="tip "><p>LOAD指令的执行过程</p>
</div>
<p>LOAD指令</p>
<ul>
<li>lF:根据PC从指令Cache取指令至IlF段的锁存器</li>
<li>ID:将基址寄存器的值放到锁存器A,将偏移量的值放到Imm</li>
<li>EX:运算，得到有效地址</li>
<li>M:从数据cache中取数并放入锁存器</li>
<li>WB:将取出的数写回寄存器</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令的汇编格式</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">LOAD Rd,996(Rs)</td>
<td style="text-align:center">(996+(Rs))→Rd</td>
</tr>
<tr>
<td style="text-align:center">LOAD Rd,mem</td>
<td style="text-align:center">(mem)→Rd</td>
</tr>
</tbody>
</table>
<p>通常，<mark class="hl-label red">RISC处理器只有“取数LOAD”和“存数STORE”指令才能访问主存</mark> .</p>
<div class="tip "><p>STORE指令的执行过程</p>
</div>
<p>STORE指令</p>
<ul>
<li>lF:根据PC从指令Cache取指令至IF段的锁存器</li>
<li>ID:将基址寄存器的值放到锁存器A，将偏移量的值放到Imm。将要存的数放到B</li>
<li>EX:运算，得到有效地址。并将锁存器B的内容放到锁存器Store。</li>
<li>M:写入数据cache</li>
<li>WB:空段</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令的汇编格式</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">STORE Rs,996(Rd)</td>
<td style="text-align:center">Rs→(996+(Rd))</td>
</tr>
<tr>
<td style="text-align:center">STORE Rs,mem</td>
<td style="text-align:center">Rs→(mem)</td>
</tr>
</tbody>
</table>
<p>通常，<mark class="hl-label red">RISC处理器只有“取数LOAD”和“存数STORE”指令才能访问主存</mark> .</p>
<div class="tip "><p>有条件转移指令的执行过程</p>
</div>
<p>条件转移指令</p>
<ul>
<li>lF:根据PC从指令Cache取指令至IF段的锁存器</li>
<li>ID:进行比较的两个数放入锁存器A、B;偏移量放入Imm</li>
<li>EX:运算，比较两个数</li>
<li>M:将目标Pc值写回PC（左图没画全)</li>
<li>WB:空段，很多教材把写回PC的功能段称为“WrPC段”其耗时比M段更短，可安排在M段时间丙完成</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令的汇编格式</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">beq Rs, Rt, 偏移量</td>
<td style="text-align:center">若(Rs)==(Rt),则(PC)+指令字长+(偏移量×指令字长)→PC;否则(PC)+指令字长→PC</td>
</tr>
<tr>
<td style="text-align:center">bne Rs, Rt, 偏移量</td>
<td style="text-align:center">若(Rs)!=(Rt),则(PC)+指令字长+(偏移量×指令字长)→PC;否则(PC)+指令字长→PC,</td>
</tr>
</tbody>
</table>
<p>通常，<mark class="hl-label red">RISC处理器只有“取数LOAD”和“存数STORE”指令才能访问主存</mark> .</p>
<div class="tip "><p>无条件转移指令的执行过程</p>
</div>
<p>无条件转移指令</p>
<ul>
<li>lF:根据PC从指令Cache取指令至IF段的锁存器</li>
<li>ID:偏移量放入lmm</li>
<li>EX:将目标PC值写回PC</li>
<li>M:空段</li>
<li>WB:空段</li>
</ul>
<p>&quot;WrPC段”耗时比EX段更短，可安排在EX段时间内完成。<span class='p red'>WrPC段越早完成就越能避免控制冲突</span>、当然，也有的地方会在WB段时间内才修改PC的值</p>
<table>
<thead>
<tr>
<th style="text-align:center">指令的汇编格式</th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">jmp 偏移量</td>
<td style="text-align:center">(PC)+指令字长+(偏移量×指令字长)→PC</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/fk1pM8r4DhB3qPb.png" alt="image-20221101213027205" /></p>
<h1 id="第六章总线"><a class="markdownIt-Anchor" href="#第六章总线"></a> 第六章：总线</h1>
<p>总线简图：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/oZygz1l4cCWT2tH.png" alt="image-20221102153633850" style="zoom:50%;" />
<p>总线的物理实现：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/6VpbD7xKhXPFTrC.png" alt="image-20221102153715788" /></p>
<p>如上图，4根信号线组成“一根”总线，所有硬件部件都可以通过这根总线传递数据可并行发送4bit数据。同一时刻<span class='p red'>只能有一个部件发送</span>数据，但是<span class='p red'>可有多个部件接受数据</span>.</p>
<h2 id="总线的概述"><a class="markdownIt-Anchor" href="#总线的概述"></a> 总线的概述</h2>
<h3 id="总线的定义"><a class="markdownIt-Anchor" href="#总线的定义"></a> 总线的定义：</h3>
<p>总线<span class='p red'>是一组能为多个部伴分时共享的公共信息传送线路</span>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/V6Y281JDFqpht5M.png" alt="image-20221102154348322" /></p>
<p>为什么要用总线?</p>
<p>早期计算机外部设备少时<span class='p red'>大多采用分散连接方式</span>，<span class='p red'>不易实现随时增减外部设备</span>。<mark class="hl-label red">为了更好地解决I/O设备和主机之间连接的灵活性问题，计算机的结构从分散连接发展为总线连接</mark> 。</p>
<h3 id="总线的特点"><a class="markdownIt-Anchor" href="#总线的特点"></a> 总线的特点</h3>
<p>总线是一组能为多个部件<span class='p red'>分时</span><span class='p blue'>共享</span>的公共信息传送线路。</p>
<p>.<span class='p blue'>共享是指总线上可以挂接多个部件，各个部件之间互相交换的信息都可以通过这组线路分时共享</span>。</p>
<p>.<span class='p red'>分时是指同一时刻只允许有一个部件向总线发送信息，如果系统中有多个部件，则它们只能分时地向总线发送信息</span>。</p>
<h3 id="总线的特性"><a class="markdownIt-Anchor" href="#总线的特性"></a> 总线的特性</h3>
<ol>
<li>机械特性:尺寸、形状、管脚数、排列顺序</li>
<li>电气特性:传输方向和有效的电平范围</li>
<li>功能特性:每根传输线的功能(地址、数据、控制)</li>
<li>时间特性:信号的时序关系</li>
</ol>
<h3 id="串行总线和并行总线"><a class="markdownIt-Anchor" href="#串行总线和并行总线"></a> 串行总线和并行总线</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/oDR4ifyPrkJvAT2.png" alt="image-20221102155607881" /></p>
<p>优点:<span class='p red'>只需要一条传输线，成本低廉</span>，广泛应用于长距离传输;应用于计算机内部时，可以节省布线空间。</p>
<p>缺点:在数据发送和接收的时候要进行拆卸和装配，<span class='p red'>要考虑串行-并行转换的问题</span>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/Kj6ABLP7E5anUHV.png" alt="image-20221102155554428" /></p>
<p>优点:总线的逻辑时序比较简单，电路实现起来比较容易。</p>
<p>缺点:信号线数量多，<span class='p red'>占用更多的布线空间;远距离传输成本高昂</span>;由于工作频率较高时，<span class='p red'>并行的信号线之间会产生严重干扰</span>，对每条线等长的要求也越高，所以无法持续提升工作频率。</p>
<p>注意：<mark class="hl-label red">串行总线的速度不一定比并行总线速度慢</mark> </p>
<h3 id="片内总线系统总线和通信总线"><a class="markdownIt-Anchor" href="#片内总线系统总线和通信总线"></a> 片内总线，系统总线和通信总线</h3>
<ol>
<li>
<p>片内总线</p>
<p>片内总线是芯片<span class='p red'>内部的总线</span>。它是CPU芯片内部寄存器与寄存器之间、寄存器与ALU之间的公共连接线。</p>
</li>
<li>
<p>系统总线</p>
<p>系统总线是<span class='p red'>计算机系统内各功能部件（CPU、主存、I/O接口）之间相互连接的总线</span>。按系统总线<span class='p red'>传输信息内容</span>的不同，又可分为3类:<span class='p blue'>数据总线</span>、<span class='p brown'>地址总线</span>和<span class='p green'>控制总线</span>。</p>
<ul>
<li>数据总线(DB)：传输各功能部件之间的数据信息，包括指令和操作数;位数(根数)与机器字长、存储字长有关;  双向。</li>
<li>地址总线(AB)：传输地址信息,包括主存单元或I/O端口的地址; 位数(根数)与主存地址空间大小及设备数量有关;  单向。只有CPU向各个设备发送信号</li>
<li>控制总线(CB)：传输控制信息;一根控制线传输一个信号;，对单根控制线来说是单向的，对整体来说是双向的
<ul>
<li>有出: CPU送出的控制命令;</li>
<li>有入:主存（或外设）返回CPU的反馈信号。</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/V6Y281JDFqpht5M.png" alt="image-20221102154348322" /></p>
<ol start="3">
<li>
<p>通信总线</p>
<p>通信总线是用于<span class='p red'>计算机系统之间或计算机系统与其他系统（如远程通信设备、测试设备)之间信息传送的总线</span>，通信总线也称为外部总线。</p>
</li>
</ol>
<h3 id="系统总线的结构"><a class="markdownIt-Anchor" href="#系统总线的结构"></a> 系统总线的结构</h3>
<div class="tip "><p>单总线结构</p>
</div>
<p>注:<span class='p red'>单总线并不是指只有一根信号线</span>，系统总线按传送信息的不同<span class='p red'>可以细分为地址总线、数据总线和控制总线</span>。</p>
<ul>
<li>结构:CPU、主存、I/O设备（通过IO接口）都连接在一组总线上，允许I/O设备之间、I/O设备和CPU之间或IO设备与主存之间直接交换信息。</li>
<li>优点:<mark class="hl-label blue">结构简单，成本低，易于接入新的设备</mark> 。</li>
<li>缺点:<span class='p red'>带宽低、负载重，多个部件只能争用唯一的总线，且不支持并发传送操作</span>。<mark class="hl-label red">系统总线非常快，但是有一些外部设备的速度非常慢，这就会导致系统总线在接受外部设备的信息的时候会导致速度浪费</mark> .</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/hCvz8OlYIMBd9xW.png" alt="image-20221102162335454" /></p>
<div class="tip "><p>双总线结构</p>
</div>
<ul>
<li>
<span class='p red'>支持突发(猝发)传送:送出一个地址，收到多个地址连续的数据</span>。CPU向主存发送一个信息，但是主存中往往是需要多个地址连续存储的，这时候就可以送出一个地址，收到多个地址连续的数据了
</li>
<li>
<span class='p red'>通道是具有特殊功能的处理器</span>。<mark class="hl-label blue">通道程序放在主存中</mark> 
</li>
<li>
<p>结构:双总线结构有两条总线，一条是主存总线，用于CPU、主存和通道之间进行数据传送;另一条是/o总线，用于多个外部设备与通道之间进行数据传送。</p>
</li>
<li>
<p>优点:<mark class="hl-label blue">将较低速的I/O设备从单总线上分离出来，实现存储器总线和I/O总线分离</mark> 。</p>
</li>
<li>
<p>缺点:<mark class="hl-label red">需要增加通道等硬件设备</mark> 。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/3jkfH97qBUDbnc5.png" alt="image-20221102162716892" /></p>
<div class="tip "><p>三总线结构</p>
</div>
<p>将IO设备再次分为快速的IO设备和慢速的IO设备，快速的IO设备通过DMA总线和主存访问，慢速的IO设备通过IO总线和CPU交互</p>
<ul>
<li>结构:三总线结构是在计算机系统各部件之间采用3条各自独立的总线来构成信息通路,这3条总线分别为<span class='p red'>主存总线</span>、<span class='p red'>IO总线</span>和直接内存访问<span class='p red'>DMA总线</span>。</li>
<li>优点:<mark class="hl-label blue">提高了I/O设备的性能，使其更快地响应命令，提高系统吞吐量</mark> 。</li>
<li>缺点:<mark class="hl-label red">系统工作效率较低</mark> 。三总线中同一时刻只能有一个总线在工作，所以效率比较低</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/aqz9A1VOSRkLc2p.png" alt="image-20221102163056621" /></p>
<div class="tip "><p>四总线结构</p>
</div>
<ol>
<li>桥接器:用于连接不同的总线，具有数据缓冲、转换和控制功能。</li>
<li>靠近CPU的总线速度较快。</li>
<li>每级总线的设计遵循总线标准。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/yputLzZaYO3CJHT.png" alt="image-20221102163624163" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/BGdeSs3O8zu2Ucr.png" alt="image-20221102161101622" /></p>
<h2 id="总线的性能指标"><a class="markdownIt-Anchor" href="#总线的性能指标"></a> 总线的性能指标</h2>
<p>总线周期与总线时钟周期的关系比较魔幻，<br />
大多数情况下，一个总线周期包含多个总线时钟周期，有的时候，一个总线周期就是一个总线时钟周期，有的时候，一个总线时钟周期可包含多个总线周期</p>
<ol>
<li>
<p>总线的<span class='p red'>传输周期(总线周期)</span>.</p>
<p>.<span class='p red'>一次总线操作所需的时间（包括申请阶段、寻址阶段、传输阶段和结束阶段）</span>，通常由若干个总线时钟周期构成。<span class='p red'>就是一组数据传送所需要的时间</span>.</p>
</li>
<li>
<p>总线<span class='p blue'>时钟周期</span>.</p>
<p>即<span class='p blue'>机器的时钟周期</span>。计算机有一个统一的时钟，以控制整个计算机的各个部件，总线也要受此时钟的控制。</p>
<p>时钟周期=1/CPU的频率</p>
</li>
<li>
<p>总线的<span class='p red'>工作频率</span>.</p>
<p>总线上各种操作的频率，为<span class='p red'>总线周期的倒数</span>。</p>
<p>若总线周期=N个时钟周期，则总线的工作频率=时钟频率/N。<span class='p red'>实际上指一秒内传送几次数据</span>。</p>
</li>
<li>
<p>总线的<span class='p blue'>时钟频率</span>.</p>
<p>即机器的时钟频率，为<span class='p blue'>时钟周期的倒数</span>。若时钟周期为T，则时钟频率为1/T。</p>
<p>实际上指<span class='p blue'>一秒内有多少个时钟周期</span>。</p>
</li>
<li>
<p>总线宽度</p>
<p>又称为总线位宽，<span class='p red'>它是总线上同时能够传输的数据位数</span> ，通常是指数据总线的根数，如32根称为32位(bit）总线。</p>
</li>
<li>
<p>总线带宽</p>
<p>可理解为总线的<span class='p red'>数据传输率</span>，即<span class='p red'>单位时间内总线上可传输数据的位数</span>,通常用每秒钟传送信息的字节数来衡量，单位可用字节/秒(B/s）表示。</p>
<p>总线带宽=总线工作频率×总线宽度(bit/s）=总线工作频率×(总线宽度/8)(B/s）</p>
<p>注:<span class='p red'>总线带宽是指总线本身所能达到的最高传输速率。在计算实际的有效数据传输率时，要用实际传输的数据量除以耗时</span>。</p>
<div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>例．某同步总线采用数据线和地址线复用方式，其中地址/数据线有32根，总线时钟频率为66MHz，每个时钟周期传送两次数据(上升淞和下降沿各传送一次数据)。</p>
<ol>
<li>该总线的最大数据传输率（总线带宽）是多少?</li>
<li>若该总线支持突发（猝发）传输方式，传输一个地址占用一个时钟周期，则一次“主存写”总线事务传输128位数据所需要的时间至少是多少？</li>
</ol>
<p>答：</p>
<ol>
<li>
<p>每个时钟周期传送两次数据→总线工作频率是时钟频率的两倍</p>
<p>总线工作频率=2 × 66MHz =132MHz</p>
<p>总线宽度= 32bit = 4B</p>
<p>总线带宽=总线工作频率×总线宽度=132×4 MB/s = 528 MB/s</p>
</li>
<li>
<p>突发(猝发)传输方式:一次总线事务中，主设备只需给出一个首地址，从攻备肌能从首地址开始的若干连续单元读出或写入多个数据。</p>
<p>发送首地址占用1个时钟周期，128位数据需传输4次，占用2个时钟周期</p>
<p>一个时钟周期=1/66MHz15ns</p>
<p>总耗时=(1+2)×15ns =45ns</p>
</li>
</ol>
</div>
<p>这里可以的出来，串行总线的速度，不一定比并行总线的速度慢，因为<span class='p red'>总线带宽=总线工作频率x总线宽度(bit/s)</span>.</p>
<ol>
<li>
<span class='p red'>工作频率相问时，串行总线传输速度比并行总线慢</span>。
</li>
<li>
<span class='p blue'>并行总线的工作频率无法持续捷阍而串行总线可以通过不断提高工作频率来提高传输速度，最终超过并行总线</span>。
</li>
</ol>
</li>
<li>
<p>总线复用</p>
<p>总线复用是指<span class='p blue'>一种信号线</span><span class='p brown'>在不同的时间</span><span class='p green'>传输不同的信息</span>。可以使用较少的线传输更多的信息，从而节省了空间和成本。</p>
</li>
<li>
<p>信号线数</p>
<p>地址总线、数据总线和控制总线3种总线数的总和称为信号线数。</p>
</li>
</ol>
<h2 id="总线的仲裁"><a class="markdownIt-Anchor" href="#总线的仲裁"></a> 总线的仲裁</h2>
<div class="tip warning"><p>如何解决多个设备争用总线的问题？</p>
</div>
<h3 id="仲裁的基本概念"><a class="markdownIt-Anchor" href="#仲裁的基本概念"></a> 仲裁的基本概念</h3>
<p>同一时刻只能有<span class='p red'>一个设备控制</span>总线传输操作，可以有<span class='p brown'>一个或多个设备</span>从总线<span class='p brown'>接收</span>数据。</p>
<p>将总线上所连接的各类设备按其对总线有无控制功能分为:</p>
<ul>
<li>
<span class='p blue'>主设备:获得总线控制权的设备</span>。
</li>
<li>
<span class='p brown'>从设备:被主设备访问的设备，只能响应从主设备发来的各种总线命令</span>。
</li>
</ul>
<p>为什么要仲裁?</p>
<ul>
<li>总线作为一种共享设备，不可避免地会出现同一时刻有多个主设备竞争总线控制权的问题。</li>
</ul>
<p>总线仲裁的定义:</p>
<ul>
<li>多个主设备同时竞争主线控制权时，以某种方式选择一个主设备优先获得总线控制权称为总线仲裁。</li>
</ul>
<p>总线仲裁分类:</p>
<ul>
<li>集中仲裁方式：链式查询方式、计数器定时查询方式、独立请求方式</li>
<li>分布仲裁方式</li>
</ul>
<h3 id="集中仲裁方式"><a class="markdownIt-Anchor" href="#集中仲裁方式"></a> 集中仲裁方式：</h3>
<p>工作流程:</p>
<ol>
<li>主设备发出请求信号;</li>
<li>若多个主设备同时要使用总线，则由总线控制器的判优、仲裁逻辑按一定的优先等级顺序确定哪个主设备能使用总线;</li>
<li>获得总线使用权的主设备开始传送数据。</li>
</ol>
<div class="tip "><p>链式查询</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/cJKPaqfwtiAeO2W.png" alt="image-20221102193857755" /></p>
<p>“<span class='p red'>总线忙</span>”信号的建立者是<span class='p red'>获得总线控制权的设备</span>.</p>
<p>优先级:</p>
<p>离总线控制器越<span class='p red'>近</span>的部件,其<span class='p red'>优先级越高</span>;</p>
<p>离总线控制器越<span class='p red'>远</span>的部件,其<span class='p red'>优先级越低</span>。</p>
<p>优点:<span class='p blue'>个链式查询方式优先级固定。只需很少几根控制线就能按一定优先次序实现总线控制，结构简单，扩充容易</span>。</p>
<p>缺点:<span class='p red'>对硬件电路的故障敏感，并且优先级不能改变。当优先级高的部件频繁请求使用总线时，会使优先级较低的部件长期不能使用总线</span>.</p>
<div class="tip "><p>计数器查询方式</p>
</div>
<p>结构特点:用一个计数器控制总线使用权，相对链式查询方式<span class='p red'>多了一组设备地址线，少了一根总线响应线BG</span>;它仍共用一根总线请求线。</p>
<ul>
<li>当总线控制器收到总线请求信号，判断总线空闲时，计数器开始计数，计数值通过设备地址线发向各个部件。</li>
<li>当地址线上的计数值与请求使用总线设备的地址一致时，该设备获得总线控制权。同时，中止计数器的计数及查询。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/fZakUxW7Q5CqK9z.png" alt="image-20221102194735850" /></p>
<p>优点:</p>
<ol>
<li>计数初始值可以改变优先次序
<ul>
<li>计数每次从“0”开始，设备的优先级就按顺序排列，固定不变;</li>
<li>计数从上一次的终点开始，此时设备使用总线的优先级相等;</li>
<li>计数器的初值还可以由程序设置</li>
</ul>
</li>
<li>对电路的故障没有链式敏感</li>
</ol>
<p>缺点:</p>
<ol>
<li>增加了控制线数
<ul>
<li>若设备有n个，则需<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mi>n</mi><mo stretchy="false">]</mo><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">[\log_2n]+2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>条控制线:</li>
</ul>
</li>
<li>控制相对比链式查询相对复杂</li>
</ol>
<div class="tip "><p>独立请求方式</p>
</div>
<p>当总线上的部件需要使用总线时，经各自的总线请求线发送总线请求信号，在总线控制器中排队。</p>
<p>当总线控制器按一定的优先次序决定批准某个部件的请求时,则给该部件发送总线响应信号。</p>
<p>结构特点:每一个设备均有一对总线请求线BRi和总线允许线BGi。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/vMOmI8XHf3DESTu.png" alt="image-20221102195951818" /></p>
<p>优点:</p>
<ol>
<li>响应速度快，总线允许信号BG直接从控制器发送到有关设备,不必在设备间传递或者查询。</li>
<li>对优先次序的控制相当灵活。</li>
</ol>
<p>缺点:</p>
<ol>
<li>控制线数量多
<ul>
<li>若设备有n个，则需要2n+1条控制线。</li>
<li>其中+1为BS线，用于设备向总线控制部件反馈已经是否正在使用总线。</li>
</ul>
</li>
<li>总线的控制逻辑更加复杂</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">链式查询</th>
<th style="text-align:center">计数器查询</th>
<th style="text-align:center">独立请求</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">控制线路</td>
<td style="text-align:center">3<br />总线请求：1<br />总线允许：1<br />总线忙：1</td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mi>n</mi><mo stretchy="false">]</mo><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">[\log_2n]+2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span><br />总线请求：1<br />总线允许：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">\log_2n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.93858em;vertical-align:-0.24414em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span></span></span></span><br />总线忙：1</td>
<td style="text-align:center">2n+1<br />总线请求：n<br />总线允许：n<br />总线忙：1</td>
</tr>
<tr>
<td style="text-align:center">优点</td>
<td style="text-align:center">优先级固定结构简单，扩充容易</td>
<td style="text-align:center">优先级较灵活</td>
<td style="text-align:center">响应速度快优先级灵活</td>
</tr>
<tr>
<td style="text-align:center">缺点</td>
<td style="text-align:center">对电路故障敏感优先级不灵活</td>
<td style="text-align:center">控制线较多控制相对复杂</td>
<td style="text-align:center">控制线多控制复杂</td>
</tr>
</tbody>
</table>
<p>“<span class='p red'>总线忙</span>”信号的建立者是<span class='p red'>获得总线控制权的设备</span>.</p>
<p>特点:不需要中央仲裁器，每个潜在的主模块都有自己的仲裁器和仲裁号，多个仲裁器竞争使用总线。</p>
<p>当设备有总线请求时，它们就把各自唯一的中裁号发送到共享的仲裁总线上;</p>
<p>每个仲裁器将从仲裁总线上得到的仲裁号与自己的仲裁号进行比较;</p>
<p>如果仲裁总线上的号优先级高，则它的总线请求不予响应，并撤销它的仲裁号;最后，获胜者的仲裁号保留在仲裁总线上。</p>
<h2 id="总线的操作和定时"><a class="markdownIt-Anchor" href="#总线的操作和定时"></a> 总线的操作和定时</h2>
<div class="tip warning"><p>占用总线的一对设备如何进行数据传输</p>
</div>
<h3 id="总线传输的四个阶段"><a class="markdownIt-Anchor" href="#总线传输的四个阶段"></a> 总线传输的四个阶段</h3>
<p>总线周期的四个阶段</p>
<ol>
<li>申请分配阶段:由需要使用总线的主模块（或主设备）提出申请，经总线仲裁机构决定将下一传输周期的总线使用权授予某一申请者。也可将此阶段细分为传输请求和总线仲裁两个阶段。</li>
<li>寻址阶段:获得使用权的主模块通过总线发出本次要访问的从模块的地址及有关命令，启动参与本次传输的从模块。</li>
<li>传输阶段:主模块和从模块进行数据交换，可单向或双向进行数据传送。</li>
<li>结束阶段:主模块的有关信息均从系统总线上撤除，让出总线使用权。</li>
</ol>
<p>总线定时是指<span class='p red'>总线在双方交换数据的过程中需要时间上配合关系的控制</span>，这种控制称为总线定时，它的实质<span class='p red'>是一种协议或规则</span>.</p>
<table>
<thead>
<tr>
<th style="text-align:center">方式</th>
<th style="text-align:center">方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">同步通信(同步定时方式)</td>
<td style="text-align:center">由<span class='p red'>统一时钟</span>控制数据传送</td>
</tr>
<tr>
<td style="text-align:center">异步通信(异步定时方式)</td>
<td style="text-align:center">采用<span class='p red'>应答方式</span>，没有公共时钟标准</td>
</tr>
<tr>
<td style="text-align:center">半同步通信</td>
<td style="text-align:center">.<span class='p red'>同步、异步结合</span>.</td>
</tr>
<tr>
<td style="text-align:center">分离式通信</td>
<td style="text-align:center">充分<span class='p red'>挖掘</span>系统<span class='p red'>总线每瞬间</span>的<span class='p red'>潜力</span>.</td>
</tr>
</tbody>
</table>
<h3 id="同步定时方式"><a class="markdownIt-Anchor" href="#同步定时方式"></a> 同步定时方式</h3>
<p>同步定时方式是指<span class='p red'>系统采用一个统一的时钟信号来协调发送和接收双方的传送定时关系</span>。</p>
<p>若干个时钟产生相等的时间间隔，每个间隔构成一个总线周期。</p>
<p>在一个总线周期中，<span class='p red'>发送方和接收方可进行一次数据传送</span>。</p>
<p>因为采用统一的时钟，<span class='p red'>每个部件或设备发送或接收信息都在固定的总线传送周期中</span>，一个总线的传送周期结束，下一个总线传送周期开始。</p>
<p>优点:<span class='p blue'>传送速度快，具有较高的传输速率;总线控制逻辑简单</span>。</p>
<p>缺点:<span class='p red'>主从设备属于强制性同步;不能及时进行数据通信的有效性检验，可靠性较差</span>。</p>
<p>同步通信适用于<span class='p red'>总线长度较短</span>及总线<span class='p red'>所接部件的存取时间比较接近</span>的系统。</p>
<div class="tip "><p>读命令</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/wHjpLxGV7fyUbYK.png" alt="image-20221102202622090" /></p>
<p>假设: <span class='p blue'>CPU作为主设备，某个输入设备作为从设备</span>.</p>
<ol>
<li>CPU在T1时刻的上升沿给出地址信息</li>
<li>在T2的上升沿给出读命令(低电平有效），与地址信息相符合的输入设备按命令进行一系列的内部操作,<span class='p red'>且必须在T3的上升沿来之前将CPU所需的数据送到数据总线上</span>。</li>
<li>CPU在T3时钟周期内，将数据线上的信息传送到其内部寄存器中。</li>
<li>CPU在T4的上升沿撤销读命令，输入设备不再向数据总线上传送数据，撤销它对数据总线的驱动。</li>
</ol>
<p>如果<span class='p red'>从设备跟不上节奏，在T3给不出数据，就会出错</span>.</p>
<h3 id="异步定时方式"><a class="markdownIt-Anchor" href="#异步定时方式"></a> 异步定时方式</h3>
<p>在异步定时方式中，<span class='p blue'>没有统一的时钟，也没有固定的时间间隔</span>，<span class='p red'>完全依靠传送双方相互制约的“握手”信号来实现定时控制</span>。</p>
<p>主设备<span class='p red'>提出交换信息的“请求”信号</span>，经接口传送到从设备;从设备接到主设备的请求后，<span class='p blue'>通过接口向主设备发出“回答”信号</span>。</p>
<p>优点:<span class='p blue'>总线周期长度可变，能保证两个工作速度相差很大的部件或设备之间可靠地进行信息交换，自动适应时间的配合</span>。</p>
<p>缺点:<span class='p red'>比同步控制方式稍复杂一些，速度比同步定时方式慢</span>。</p>
<p>根据“请求”和“回答”信号的撤销是否互锁，分为以下3种类型</p>
<ol>
<li>
<p>不互锁方式		速度最快，可靠性最差</p>
<p>主设备发出“<span class='p red'>请求</span>”信号后，不必等到接到从设备的“<span class='p blue'>回答</span>”信号，而是经过一段时间，便撤销“<span class='p red'>请求</span>”信号。</p>
<p>从设备在接到“<span class='p red'>请求</span>”信号后，发出“<span class='p blue'>回答</span>”信号，并经过一段时间，自动撤销“<span class='p red'>回答</span>”信号。双方不存在互锁关系。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/jkr3ulxzHcMLn4Z.png" alt="image-20221102204753668" /></p>
<ol start="2">
<li>
<p>半互锁方式</p>
<p>主设备发出“<span class='p red'>请求</span>”信号后，必须待接到从设备的“<span class='p blue'>回答</span>”信号后，才撤销“<span class='p red'>请求</span>”信号，有互锁的关系。</p>
<p>从设备在接到“<span class='p red'>请求</span>”信号后，发出“<span class='p blue'>回答</span>”信号，但不必等待获知主设备的“<span class='p red'>请求</span>”信号已经撤销，而是隔一段时间后自动撤销“<span class='p blue'>回答</span>”信号，不存在互锁关系。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/FOkvtaIi49xZwfR.png" alt="image-20221102204954943" /></p>
<ol start="3">
<li>
<p>全互锁方式		最可靠，速度最慢</p>
<p>主设备发出“<span class='p red'>请求</span>”信号后，必须待从设备“<span class='p blue'>回答</span>”后，才撤销“<span class='p red'>请求</span>”信号;</p>
<p>从设备发出“<span class='p blue'>回答</span>”信号，必须待获知主设备“<span class='p red'>请求</span>”信号已撤销后，再撤销其“<span class='p blue'>回答</span>”信号。双方存在互锁关系。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/lMPLx5U7RtZb1aY.png" alt="image-20221102205159049" /></p>
<h3 id="半同步通信"><a class="markdownIt-Anchor" href="#半同步通信"></a> 半同步通信</h3>
<p>同步：</p>
<ul>
<li>发送方用系统时钟前沿发信号</li>
<li>接收方用系统时钟后沿判断、识别</li>
</ul>
<p>异步：</p>
<ul>
<li>允许不同速度的模块和谐工作</li>
</ul>
<p>半同步通信:统一时钟的基础上，增加一个<span class='p red'>“等待”响应信号</span>WAIT</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/XYyhcNjWu7s6HiL.png" alt="image-20221102205828613" /></p>
<p>当T2节拍完成之后，如果数据没有准备好的话，则使用WAIT信号，来等待数据的填充，填充完毕之后在进行T3</p>
<h3 id="分离式通信"><a class="markdownIt-Anchor" href="#分离式通信"></a> 分离式通信</h3>
<p>上述三种通信的共同点</p>
<p>一个总线传输周期（以输入数据为例)</p>
<ul>
<li>主模块发地址、命令			使用总线</li>
<li>从模块准备数据					不使用总线			总线空闲</li>
<li>从模块向主模块发数据		使用总线</li>
</ul>
<p>分离式通信的一个总线传输周期：</p>
<p>子周期1：<span class='p red'>主模块</span>申请<span class='p red'>占用总线</span>，使用完后<span class='p red'>放弃总线</span>的使用权</p>
<p>子周期2：<span class='p red'>从模块</span>申请<span class='p red'>占用总线</span>，将各种信息送至总线上</p>
<p>特点:</p>
<ol>
<li>各模块均有权申请占用总线</li>
<li>采用同步方式通信，不等对方回答</li>
<li>各模块准备数据时，不占用总线</li>
<li>总线利用率提高</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/einX3IpoWv5VLg2.png" alt="image-20221102210816335" /></p>
<h2 id="总线标准"><a class="markdownIt-Anchor" href="#总线标准"></a> 总线标准</h2>
<h3 id="总线标准的基本概念"><a class="markdownIt-Anchor" href="#总线标准的基本概念"></a> 总线标准的基本概念</h3>
<p>总线标准<span class='p red'>是国际上公布或推荐的互连各个模块的标准</span>，<span class='p red'>它是把各种不同的模块组成计算机系统时必须遵守的规范</span>。按总线标准设计的接口可视为通用接口，在接口的两端，任何一方只需根据总线标准的要求完成自身方面的功能要求，而无须了解对方接口的要求。</p>
<p>根据总线在计算机系统中的位置，可分为</p>
<ul>
<li>
<span class='p red'>系统总线</span>：通常<span class='p red'>与CPU直接相连</span>，用于连接CPU与北桥芯片、或CPU与主存等
</li>
<li>
<span class='p red'>局部总线</span>:<span class='p red'>没有直接与CPU连接</span>，通常是连接高速的北桥芯片，用于连接了很多重要的硬件部件（如显千、声卡等)
</li>
<li>
<span class='p red'>设备总线、通信总线</span>:<span class='p red'>通常由南桥芯片控制</span>，用于连接计算机与计算机，或连接计算机与外部I/O设备
</li>
</ul>
<h3 id="系统总线的标准"><a class="markdownIt-Anchor" href="#系统总线的标准"></a> 系统总线的标准</h3>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ISA</td>
<td style="text-align:center">Industry Standard Architecture</td>
<td style="text-align:center">8MHz</td>
<td style="text-align:center">8/16</td>
<td style="text-align:center">16MB/s<br />并行总线</td>
<td style="text-align:center">系统总线</td>
</tr>
<tr>
<td style="text-align:center">EISA</td>
<td style="text-align:center">Extended ISA</td>
<td style="text-align:center">8MHz</td>
<td style="text-align:center">32</td>
<td style="text-align:center">32MB/s<br />并行总线</td>
<td style="text-align:center">系统总线</td>
</tr>
</tbody>
</table>
<p>ISA被称为PC/AT总线，数据传送需要CPU或DMA接口来管理,不支持总线仲裁。</p>
<p>EISA与8/16bit 的ISA总线完全兼容,从CPU中分离出了总线控制权，支持多个总线主控器和突发传送</p>
<p>还有Intel的FBS前端总线和QPI总线</p>
<h3 id="局部总线标准"><a class="markdownIt-Anchor" href="#局部总线标准"></a> 局部总线标准</h3>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">VESA</td>
<td style="text-align:center">Video Electronics Standard Architecture</td>
<td style="text-align:center">33MHz</td>
<td style="text-align:center">32</td>
<td style="text-align:center">132MB/s<br />并行总线</td>
<td style="text-align:center">局部总线</td>
</tr>
</tbody>
</table>
<p>是针对多媒体PC要求高速传送活动图像的大量数据应运而生的。</p>
<p>主要是依靠CPU来运行的，随着CPU速度越来越快，VESA渐渐跟不上CPU的速度被淘汰</p>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">PCI</td>
<td style="text-align:center">Peripheral Component Interconnect</td>
<td style="text-align:center">33/66MHz</td>
<td style="text-align:center">32/64</td>
<td style="text-align:center">528MB/s<br />并行总线</td>
<td style="text-align:center">局部总线</td>
</tr>
</tbody>
</table>
<p>是由北桥芯片来控制的</p>
<p>特点:</p>
<ol>
<li>高性能:不依附于某个具体的处理器,支持突发传送</li>
<li>良好的兼容性。</li>
<li>支持即插即用。</li>
<li>支持多主设备。</li>
<li>具有与处理器和存储器子系统完全并行操作的能力。</li>
<li>提供数据和地址奇偶校验的能力。</li>
<li>可扩充性好，可采用多层结构提高驱动能力。</li>
<li>采用多路复用技术，减少了总线引脚个数。</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">AGP</td>
<td style="text-align:center">Accelerate Graphic Port</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">X1:266MB/s<br />X8:2.1GB/s<br />并行总线</td>
<td style="text-align:center">局部总线</td>
</tr>
</tbody>
</table>
<p>AGP(加速图形接口，Accelerated Graphics Port)接口，这是显示卡专用的局部总线，是基于PCI 2.1版规范并进行扩充修改而成</p>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">PCI-E</td>
<td style="text-align:center">PCI-Express(3GIO)</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">10GB/s以上</td>
<td style="text-align:center">串行</td>
</tr>
</tbody>
</table>
<p>是一种点对点串行连接的设备连接方式，<span class='p red'>点对点意味着每一个PCI Express设备都拥有自己独立的数据连接</span>，<span class='p red'>各个设备之间并发的数据传输互不影响</span>，</p>
<p>在传输速率方面，PCI Express总线利用串行的连接特点将能轻松将数据传输速度提到一个很高的频率，达到远超出PCI总线的传输速率。与此同时，PCI Express总线支持双向传输模式，还可以运行<span class='p red'>全双工模式</span>。</p>
<p>支持热拔插。</p>
<h3 id="设备总线标准"><a class="markdownIt-Anchor" href="#设备总线标准"></a> 设备总线标准</h3>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">RS-232C</td>
<td style="text-align:center">Recommended Standard</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">20Kbps</td>
<td style="text-align:center">串行通信总线</td>
</tr>
</tbody>
</table>
<p>RS-232C是应用于<span class='p red'>串行二进制交换的数据终端设备(DTE）和数据通信设备(DCE)</span>之间的标准接口。</p>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SCSI</td>
<td style="text-align:center">Small Computer System Interface</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">640MB/s</td>
<td style="text-align:center">智能通用接口</td>
</tr>
</tbody>
</table>
<p>SCSI(小型计算机系统接口）是一种<span class='p red'>用于计算机和智能设备之间</span>（硬盘、软驱、光驱、打印机、扫描仪等）系统级接口的独立处理器标准。SCSI是一种智能的通用接口标准。</p>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">PCMCIA</td>
<td style="text-align:center">Person Computer Memory Card<br />International Association</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">90Mbps</td>
<td style="text-align:center">便携设备接口</td>
</tr>
</tbody>
</table>
<p>用于早期计算机之间进行数据交换，相当于存储卡</p>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">USB</td>
<td style="text-align:center">Universal Serial Bus</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">1280MB/s</td>
<td style="text-align:center">设备总线，串行</td>
</tr>
</tbody>
</table>
<p>USB属于<span class='p red'>设备总线</span>，是设备和设备控制器之间的接口。</p>
<ol>
<li>可以<span class='p red'>热插拔、即插即用</span>。</li>
<li>具有<span class='p red'>很强的连接能力和很好的可扩充性</span>。采用菊花链形式将众多外设连接起来，可使用USB集线器链式<span class='p red'>连接127个外设</span>,</li>
<li>
<span class='p red'>标准统一</span>。以前大家常见的是IDE接口的硬盘，串口的鼠标键盘，并口的打印机扫描仪，可是有了USB之后，这些应用外设统统可以用同样的标准与个人电脑连接，这时就有了USB硬盘、USB鼠标、USB打印机等等。
</li>
<li>高速传输。</li>
<li>连接电缆轻巧，可为低压(5V)外设供电。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/SnMLlP5AvuHzm3q.png" alt="image-20221103151900014" /></p>
<p>差模信号:根据2、3的压差来确定1bit数据，差模信号的抗干扰能力很强，因此工作频率可以很高</p>
<p>注意：<span class='p red'>USB每次只能传送1bit数据</span>.</p>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">IDE(ATA)</td>
<td style="text-align:center">Integrated Drive Electronic</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">100MB/s</td>
<td style="text-align:center">硬盘光驱接口，并行</td>
</tr>
</tbody>
</table>
<p>用于IDE硬盘的接口最初被称为IDE接口，后来扩展为CD-ROM、磁带机、可移动磁盘、LS-120磁盘等设备的接口。</p>
<p>硬盘和光驱通过IDE接口与主板连接。</p>
<table>
<thead>
<tr>
<th style="text-align:center">总线标准</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">工作频率</th>
<th style="text-align:center">数据线</th>
<th style="text-align:center">最大速度</th>
<th style="text-align:center">特点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SATA</td>
<td style="text-align:center">Serial Advance Technology Attachment</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">600MB/s</td>
<td style="text-align:center">串行硬盘接口</td>
</tr>
</tbody>
</table>
<p>SATA由于采用<span class='p red'>串行</span>接口而闻名.</p>
<p>与并行ATA相比，SATA具有比较大的优势。</p>
<ul>
<li>
<p>Serial ATA以连续串行的方式传送数据，可以在较少的位宽下使用较高的工作频率来提高数据传输的带宽。</p>
</li>
<li>
<p>Serial ATA一次只会传送1位数据，这样能减少SATA接口的针脚数目，使连接电缆数目变少，效率也会更高。</p>
</li>
<li>
<p>同时还能降低系统能耗，减小系统复杂性。</p>
</li>
</ul>
<p>趋势：<mark class="hl-label red">串行总线代替并行总线</mark> .</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/gZhI8SzvJFRe5cL.png" alt="image-20221103152748901" /></p>
<div class="tip "><p>为何串行总线能够取代并行总线</p>
</div>
<ul>
<li>
<span class='p red'>并行总线</span>:用m根线每次传送m个比特，用<span class='p red'>高/低电平表示1/0</span>，通常采用同步定时方式，由于线间信号干扰，因此总线<span class='p red'>工作频率不能太高</span>。另外，各条线不能有长度差，长距离并行传输时工艺难度大。
</li>
<li>
<span class='p red'>串行总线</span>:用两根线每次传送一个比特，采用差模信号表示1/0，通常采用异步定时的方式，总线<span class='p red'>工作频率可以很高</span>。现在的串行总线通常基于包传输，如80bit为一个数据包，包与包之间有先后关系，因此
<p>可以用多个数据通路分别串行传输多个数据包。因此某种程度上现在的串行总线也有“并行”的特点</p>
</li>
</ul>
<h1 id="第七章io系统"><a class="markdownIt-Anchor" href="#第七章io系统"></a> 第七章：IO系统</h1>
<h2 id="io系统的基本概念"><a class="markdownIt-Anchor" href="#io系统的基本概念"></a> IO系统的基本概念</h2>
<p>“I/O”就是“输入/输出”( lnput/Output)</p>
<p>I/O设备就是可以将数据输入到计算机，或者可以接收计算机输出数据的外部设备</p>
<h3 id="主机如何与io设备进行交互"><a class="markdownIt-Anchor" href="#主机如何与io设备进行交互"></a> 主机如何与IO设备进行交互</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/2BlXmM3EsNpHD5G.png" alt="image-20221103154827389" /></p>
<p>.<mark class="hl-label red">I/O接口</mark> :又称<span class='p red'>I/O控制器(I/O Controller)、设备控制器</span>，负责协调主机与外部设备之间的数据传输</p>
<p>I/O控制器多种多样，也会制定相应的标准，如:用于控制USB设备的IO接口、用于控制SATA 3.0硬盘的lO接口等(<span class='p red'>I/O控制器就是一块芯片，常被集成在主板上</span>)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ckoJNanQRltDCp1.png" alt="image-20221103155049715" /></p>
<h3 id="io控制方式简介"><a class="markdownIt-Anchor" href="#io控制方式简介"></a> IO控制方式简介</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/ElRpPkTNV5DhyfF.png" alt="image-20221103155728123" /></p>
<p>数据流:键盘→lO接口的数据寄存器→数据总线→CPU某寄存器→主存（变量i的对应位置)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span> i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>, &amp;i);	<span class="comment">// 等待键盘IO完成</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;i = %c\n&quot;</span>, i);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>
<span class='p red'>程序查询方式</span>:CPU不断轮询检查I/O控制器中的“状态寄存器”，检测到状态为“已完成”之后，再从数据寄存器取出输入数据
</li>
<li>
<span class='p red'>程序中断方式</span>:等待键盘I/O时CPU可以先去执行其他程序，键盘I/O完成后I/O控制器向CPU发出<span class='p red'>中断请求</span>，CPU响应中断请求，并取走输入数据
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/NimRZ9YKFUHc8xd.png" alt="image-20221103174734239" /></p>
<p>思考：对于快速的IO设备，如“磁盘”，每准备好一个字就给CPU发送一次中断请求，会导致什么问题？</p>
<p>答：CPU需要花费大量的时间来处理中断程序服务，CPU利用率严重下降</p>
<h3 id="dma控制方式"><a class="markdownIt-Anchor" href="#dma控制方式"></a> DMA控制方式</h3>
<p>DMA：Direct Memory Access直接内存访问</p>
<p>CPU和DMA接口之间的交互是通过IO总线来进行交互的</p>
<p>DMA控制方式：主存与高速IO设备之间有一条<span class='p red'>直接数据通路</span>(DMA总线)，CPU向DMA接口发出“读写命令”指明主存地址，磁盘地址，读写数据量等参数</p>
<p>DMA控制器自动控制磁盘与主存的数据读写，<span class='p red'>每完成一整块数据读写</span>(如1KB为一整块），<span class='p red'>才向CPU发出一次中断请求</span>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/zawAfJCNmsbWMIV.png" alt="image-20221102163056621" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/2egKRzrbLp5SYyA.png" alt="image-20221103181937058" /></p>
<p>DMA控制器与主存<span class='p red'>每次传送1个字</span>,<span class='p blue'>当传送完一整块数据后</span>才向CPU发出中断请求</p>
<h3 id="通道的控制方式"><a class="markdownIt-Anchor" href="#通道的控制方式"></a> 通道的控制方式</h3>
<p>有的商用中型机、大型机可能会接上超多的I/O设备，如果都让CPU来管理，那么CPU就太累了…，这时候就可以引入通道这种方式，来代替CPU与IO接口进行交互</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/HoytbQAP6wLT1Ez.png" alt="image-20221103182252550" /></p>
<p>通道:可以理解为是“<span class='p red'>弱鸡版的CPU</span>”。通道可以识别并执行一系列<span class='p red'>通道指令</span>，通道指令种类、功能通常比较单一</p>
<p>通道的运行过程：</p>
<ol>
<li>CPU向通道发出IO指令，指明<span class='p red'>通道程序</span>在内存中的位置，并指明要操作的是哪个IO设备。然后CPU就可以去干别的事情了</li>
<li>通道执行内存中的通道程序，控制IO设备完成一系列的任务</li>
<li>通道执行完规定的任务之后，向CPU发出中断请求，之后CPU对中断请求进行处理</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/06/kp9uKI2CUxz738f.png" alt="image-20221103182608996" /></p>
<h3 id="io系统的基本组成"><a class="markdownIt-Anchor" href="#io系统的基本组成"></a> IO系统的基本组成</h3>
<p>一般来说，I/O系统由I/O软件和I/O硬件两部分构成。</p>
<ol>
<li>I/O硬件包括外部设备、I/O接口、IO总线等。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/d6sJwICA4UnLYvH.png" alt="image-20221103183659510" /></p>
<ol start="2">
<li>
<p>I/О软件包括驱动程序、用户程序、管理程序、升级补丁等。</p>
<p>通常采用1O指令和通道指令实现主机和I/O设备的信息交换。</p>
<ol>
<li>
<p>IO指令CPU指令的一部分</p>
<p>操作码：识别IO指令</p>
<p>命令码：表明这条指令需要做什么操作</p>
<p>设备码：对那个设备进行操作</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/u9DiWnOLKYxywqU.png" alt="image-20221103183823090" /></p>
</li>
<li>
<p>通道指令：通道能识别的指令</p>
<p>.<span class='p red'>通道程序提前编好放到主存中</span>.</p>
<p>在含有通道的计算机中，CPU执行<span class='p blue'>I/O指令</span>对通道发出命令，由通道执行一系列<span class='p red'>通道指令</span>，代替CPU对I/O设备进行管理</p>
</li>
</ol>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/DWxCd3JLjhwHrVN.png" alt="image-20221103184309731" /></p>
<h2 id="io设备"><a class="markdownIt-Anchor" href="#io设备"></a> IO设备</h2>
<h3 id="外部设备"><a class="markdownIt-Anchor" href="#外部设备"></a> 外部设备</h3>
<p>外部设备也称外围设备，是除了主机以外的、能直接或间接与计算机交换信息的装置。</p>
<h3 id="输入设备"><a class="markdownIt-Anchor" href="#输入设备"></a> 输入设备</h3>
<ul>
<li>用于向计算机系统输入命令和文本、数据等信息的部件。键盘和鼠标是最基本的输入设备</li>
</ul>
<div class="tabs" id="io设备"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="io设备-1">键盘</button><button type="button" class="tab " data-href="io设备-2">鼠标</button></ul><div class="tab-contents"><div class="tab-item-content active" id="io设备-1"><p>键盘</p>
<p>键盘是最常用的输入设备，通过它可发出命令或输入数据。每个键相当于一个开关，当按下键时，电信号连通;当松开键时，弹簧把键弹起，电信号断开。</p>
<p>键盘输入信息可分为3个步骤:</p>
<ol>
<li>查出按下的是哪个键;</li>
<li>将该键翻译成能被主机接收的编码，如ASCIl码;</li>
<li>将编码传送给主机。</li>
</ol></div><div class="tab-item-content" id="io设备-2"><p>鼠标</p>
<p>鼠标是常用的定位输入设备，它把用户的操作与计算机屏幕上的位置信息相联系。常用的鼠标有机械式和光电式两种。</p>
<p>工作原理:</p>
<ul>
<li>当鼠标在平面上移动时，其底部传感器把运动的方向和距离检测出来，从而控制光标做相应运动。</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<h3 id="输出设备"><a class="markdownIt-Anchor" href="#输出设备"></a> 输出设备</h3>
<ul>
<li>用于将计算机系统中的信息输出到计算机外部进行显示、交换等的部件。显示器和打印机是最基本的输出设备。</li>
</ul>
<p>显示器：</p>
<div class="tabs" id="输出设备"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="输出设备-1">按显示设备所用的显示器件分类</button><button type="button" class="tab " data-href="输出设备-2">按所显示的信息内容分类</button></ul><div class="tab-contents"><div class="tab-item-content active" id="输出设备-1"><ul>
<li>☆阴极射线管（CRT)显示器</li>
<li>液晶显示器(LCD)</li>
<li>LED显示器</li>
<li>…</li>
</ul></div><div class="tab-item-content" id="输出设备-2"><ul>
<li>字符显示器</li>
<li>图形显示器</li>
<li>图像显示器</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<p>屏幕大小：以对角线长度表示，常用的有12～29英寸等。</p>
<p>分辨率：所能表示的像素个数，屏幕上的每一个光点就是一个像素，以宽、高的像素的乘积表示，例如，800×600，1024×768和1280×1024等。</p>
<p>灰度级：灰度级是指黑白显示器中所显示的像素点的亮暗差别，在彩色显示器中则表现为颜色的不同，灰度级越多，图像层次越清楚逼真，典型的有8位（256级)、16位等。<span class='p red'>n位可以表示2"种不同的亮度或颜色</span>。</p>
<p>刷新：光点只能保持极短的时间便会消失，为此必须在光点消失之前再重新扫描显示一遍，这个过程称为刷新。</p>
<p>刷新频率：单位时间内扫描整个屏幕内容的次数，按照人的视觉生理，刷新频率大于30Hz时才不会感到闪烁，通常显示器<span class='p red'>刷新频率</span>在60～120Hz。</p>
<p>显示存储器VRAM：也称<span class='p red'>刷新存储器</span>，为了不断提高刷新图像的信号，必须把一帧图像信息存储在刷新存储器中。其存储容量由图像分辨率和灰度级决定，分辨率越高，灰度级越多，刷新存储器容量越大。</p>
<p>VRAM容量=分辨率×灰度级位数</p>
<p>VRAM带宽=分辨率x灰度级位数x帧频</p>
<p>注:现代计算机中，显存除了作为当前显示帧的缓存，还会用于保存即将渲染的图像数据。</p>
<p>集成显卡计算机中，通常分配一片内存作为显存。</p>
<div class="tabs" id="显示器"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="显示器-1">阴极射线管（CRT）显示器</button><button type="button" class="tab " data-href="显示器-2">液晶显示器(LCD)</button><button type="button" class="tab " data-href="显示器-3">LED(发光二极管)显示器</button></ul><div class="tab-contents"><div class="tab-item-content active" id="显示器-1"><ul>
<li>CRT显示器主要由电子枪、偏转线圈、荫罩、高压石墨电极和荧光粉涂层及玻璃外壳5部分组成。具有可视角度大、无坏点、色彩还原度高、色度均匀、可调节的多分辨率模式、响应时间极短等优点。</li>
</ul></div><div class="tab-item-content" id="显示器-2"><ul>
<li>原理:利用液晶的电光效应，由图像信号电压直接控制薄膜晶体管，再间接控制液晶分子的光学特性来实现图像的显示。</li>
<li>特点:体积小、重量轻、省电、无辐射、绿色环保、画面柔、不伤眼等。</li>
</ul></div><div class="tab-item-content" id="显示器-3"><ul>
<li>原理:通过控制半导体发光二极管进行显示，用来显示文字、图形、图像等各种信息。</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<p>LCD与LED是两种不同的显示技术，LCD是由液态晶体组成的显示屏，而LED则是由发光二极管组成的显示屏。与LCD相比，<span class='p red'>LED显示器在亮度、功耗、可视角度和刷新速率等方面都更具优势</span>。</p>
<div class="tabs" id="显示器"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="显示器-1">字符型显示器</button><button type="button" class="tab " data-href="显示器-2">图形显示器</button></ul><div class="tab-contents"><div class="tab-item-content active" id="显示器-1"><ul>
<li>显示字符的方法<span class='p red'>以点阵为基础</span>。<span class='p blue'>点阵是指由m×n个点组成的阵列</span>。点阵的多少取决于显示字符的质量和字符窗口的大小。字符窗口是指每个字符在屏幕上所占的点数，它包括字符显示点阵和字符间隔。</li>
<li>将<span class='p blue'>点阵存入由ROM构成的字符发生器</span>中，在CRT进行光栅扫描的过程中，从字符发生器中依次读出某个字符的点阵，按照点阵中0和1代码不同控制扫描电子束的开或关，从而在屏幕上显示出字符。对应于每个字符窗口，所需显示<span class='p red'>字符的ASCII代码被存放在视频存储器VRAM</span>中，以备刷新。</li>
<li>阴极射线管显示字符的方式
<ul>
<li>先通过接口电路，将键盘输入的信息或者主机先要显示的信息的ASCII码放到显示存储器RAM中</li>
<li>在引进射线管CRT控制器的操作下，将显示存储器中的字符一个个的发射到字符发生器ROM中</li>
<li>ROM中除了处理电信号外，还有一个ROM来存放对应ASCII码的字形码</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/4ojZheYcEW9ASXU.png" alt="image-20221103192458615" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/g3WLsxI2vATjZaK.png" alt="image-20221103193010163" /></p></div><div class="tab-item-content" id="显示器-2"><ul>
<li>
<p>根据扫描方式的不同可以分为光栅扫描显示器和随机扫描显示器</p>
</li>
<li>
<p>将所显示图形的一组坐标点和绘图命令组成显示文件存放在缓冲存储器中，缓存中的显示文件传送给矢量（线段）产生器，产生相应的模拟电压，直接控制电子束在屏幕上的移动。为了在屏幕上保留持久稳定的图像，需要按一定的频率对屏幕进行反复刷新。</p>
</li>
<li>
<p>这种显示器的优点是分辨率高且显示的曲线平滑。目前高质量的图形显示器采用这种随机扫描方式。缺点是当显示复杂图形时，会有闪烁感。</p>
</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<p>打印机：</p>
<p>打印机是计算机的输出设备之一，用于将计算机处理结果打印在相关介质上。</p>
<p>按印字原理不同可分为：</p>
<div class="tabs" id="打印机类型"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="打印机类型-1">击打式打印机</button><button type="button" class="tab " data-href="打印机类型-2">非击打式打印机</button></ul><div class="tab-contents"><div class="tab-item-content active" id="打印机类型-1"><p>利用机械动作使印字机构与色带和纸相撞而打印字符</p>
<ul>
<li>优: 设备成本低，印字质量好，防伪性好</li>
<li>缺:噪声大，速度慢</li>
</ul></div><div class="tab-item-content" id="打印机类型-2"><p>非击打式打印机:采用电、磁、光、喷墨等物理、化学方法来印刷字符</p>
<ul>
<li>优:速度快，噪声小</li>
<li>缺:成本高</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<p>按打印机工作方式不同可分为：</p>
<div class="tabs" id="打印机工作方式"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="打印机工作方式-1">串行打印机</button><button type="button" class="tab " data-href="打印机工作方式-2">行式打印机</button></ul><div class="tab-contents"><div class="tab-item-content active" id="打印机工作方式-1"><p>逐字打印，速度慢</p></div><div class="tab-item-content" id="打印机工作方式-2"><p>逐行打印，速度快</p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<p>按工作方式可分为</p>
<div class="tabs" id="打印机工作方式"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="打印机工作方式-1">针式打印机</button><button type="button" class="tab " data-href="打印机工作方式-2">喷墨式打印机</button><button type="button" class="tab " data-href="打印机工作方式-3">激光打印机</button></ul><div class="tab-contents"><div class="tab-item-content active" id="打印机工作方式-1"><p>原理: 在联机状态下，主机发出打印命令，经接口、检测和控制电路，间歇驱动纵向送纸和打印头横<br />
向移动，同时驱动打印机间歇冲击色带，在纸上打印出所需内容。</p>
<p>特点:针式打印机擅长“多层复写打印”，实现各种票据或蜡纸等的打印。它工作原理简单，造价低<br />
廉，耗材（色带）便宜，但打印分辨率和打印速度不够高。</p></div><div class="tab-item-content" id="打印机工作方式-2"><p>原理:带电的喷墨雾点经过电极偏转后，直接在纸上形成所需字形。彩色喷墨打印机基于三基色原理，<br />
即分别喷射3种颜色墨滴，按一定的比例混合出所要求的颜色。</p>
<p>特点:打印噪声小，可实现高质量彩色打印，通常打印速度比针式打印机快;但防水性差，高质量打<br />
印需要专用打印纸。</p></div><div class="tab-item-content" id="打印机工作方式-3"><p>原理:计算机输出的二进制信息，经过调制后的激光束扫描，在感光鼓上形成潜像，再经过显影、转<br />
印和定影，便在纸上得到所需的字符或图像。</p>
<p>特点:打印质量高、速度快、噪声小、处理能力强;但耗材多、价格较贵、不能复写打印多份，且对<br />
纸张的要求高。激光打印机是将激光技术和电子显像技术相结合的产物。感光鼓（也称为硒鼓)是激光打印机的核心部件。</p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/eAxQoXY9iSucvCB.png" alt="image-20221103195244324" /></p>
<h3 id="外存设备"><a class="markdownIt-Anchor" href="#外存设备"></a> 外存设备</h3>
<ul>
<li>是指除计算机内存及CPU缓存等以外的存储器。硬磁盘、光盘等是最基本的外存设备。</li>
</ul>
<div class="tip "><p>外存储器</p>
</div>
<p>计算机的外存储器又称为辅助存储器，目前主要使用磁表面存储器。</p>
<p>所谓“磁表面存储”，是指把某些磁性材料薄薄地涂在金属铝或塑料表面上作为载磁体来存储信息。磁盘存储器、磁带存储器和磁鼓存储器均属于磁表面存储器。</p>
<p>磁表面存储器的优点:</p>
<ol>
<li>存储容量大，位价格低;</li>
<li>记录介质可以重复使用;</li>
<li>记录信息可以长期保存而不丢失，甚至可以脱机存档;</li>
<li>非破坏性读出，读出时不需要再生。</li>
</ol>
<p>磁表面存储器的缺点:</p>
<ol>
<li>存取速度慢;</li>
<li>机械结构复杂;</li>
<li>对工作环境要求较高。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/KzsdEi5Gtuo4DPy.png" alt="image-20221103203555206" /></p>
<p>外存储器既可以作为输入设备，也可以作为输出设备。(既可以存数据，也可以读数据)</p>
<div class="tip "><p>磁盘存储器</p>
</div>
<p>磁盘设备的组成：</p>
<ol>
<li>
<p>存储区域</p>
<p>一块硬盘含有若干个记录面，每个记录面划分为若干条磁道，而每条磁道又划分为若干个扇区，扇区（也称块）是磁盘读写的最小单位，也就是说磁盘按块存取。</p>
<ul>
<li>磁头数(Heads)：即记录面数，表示硬盘总共有多少个磁头，磁头用于读取/写入盘片上记录面的信息，一个记录面对应一个磁头。</li>
<li>柱面数(Cylinders)：表示硬盘每一面盘片上有多少条磁道。在一个盘组中，不同记录面的相同编号（位置）的诸磁道构成一个圆柱面</li>
<li>扇区数(Sectors)：表示每一条磁道上有多少个扇区。</li>
</ul>
</li>
<li>
<p>硬盘存储器</p>
<p>硬盘存储器由磁盘驱动器、磁盘控制器和盘片组成。</p>
</li>
<li>
<p>磁盘驱动器:核心部件是磁头组件和盘片组件，温彻斯特盘是一种可移动头固定盘片的硬盘存储器。</p>
</li>
<li>
<p>磁盘控制器:是硬盘存储器和主机的接口，主流的标准有IDE、SCSI、SATA等。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/F1qz9MvoPCcVSgm.png" alt="image-20221103204503939" /></p>
<p>磁盘的性能指标：</p>
<ol>
<li>磁盘的容量:一个磁盘所能存储的字节总数称为磁盘容量。磁盘容量有非格式化容量和格式化容量之分。
<ul>
<li>非格式化容量：是指磁记录表面可以利用的磁化单元总数。</li>
<li>格式化容量：是指按照某种特定的记录格式所能存储信息的总量。</li>
</ul>
</li>
<li>记录密度:记录密度是指盘片单位面积上记录的二进制的信息量通常以道密度、位密度和面密度表示。
<ul>
<li>道密度是沿磁盘半径方向单位长度上的磁道数;</li>
<li>位密度是磁道单位长度上能记录的二进制代码位数;</li>
<li>面密度是位密度和道密度的乘积。</li>
<li>注意:磁盘所有磁道记录的信息量一定是相等的，并不是圆越大信息越多，故每个磁道的位密度都不同。</li>
</ul>
</li>
<li>平均存取时间:
<ul>
<li>平均存取时间=寻道时间（磁头移动到目的磁道）+  旋转延迟时间（磁头定位到所在扇区) +  传输时间（传输数据所花费的时间)</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/1vXcgki4RtJylHU.png" alt="image-20221103210158123" /></p>
<ol start="4">
<li>数据传输率:磁盘存储器在单位时间内向主机传送数据的字节数，称为数据传输率。
<ul>
<li>假设磁盘转数为r转/秒），每条磁道容量为N个字节，则数据传输率为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mi>r</mi></msub><mo>=</mo><mi>r</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">D_r=rN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span></li>
</ul>
</li>
</ol>
<p>磁盘地址：</p>
<ul>
<li>主机向磁盘控制器发送寻址信息，磁盘的地址一般如图所示:</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/TK4V12kYW6gOlHi.png" alt="image-20221103210520810" /></p>
<ul>
<li>若系统中有4个驱动器，每个驱动器带一个磁盘，每个磁盘256个磁道、16个盘面，每个盘面划分为16个扇区，则每个扇区地址要18位二进制代码;</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/sPgWTzJ28VNtuE1.png" alt="image-20221103210545312" /></p>
<p>硬盘的工作过程</p>
<ul>
<li>硬盘的主要操作是<span class='p red'>寻址、读盘、写盘</span>。每个操作都对应一个控制字，硬盘工作时，第一步是取控制字，第二步是执行控制字。</li>
<li>硬盘属于机械式部件，其读写操作是串行的，不可能在同一时刻既读又写，也不可能在同一时刻读两组数据或写两组数据。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/2RMbjqgelUyh43N.png" alt="image-20221103210821299" /></p>
<div class="tip "><p>磁盘阵列</p>
</div>
<p>RAID (Redundant Array of Inexpensive Disks，廉价冗余磁盘阵列）<span class='p red'>是将多个独立的物理磁盘组成一个独立的逻辑盘</span>，数据在多个物理盘上分割交叉存储、并行访问，具有更好的存储性能、可靠性和安全性。</p>
<p>RAID的分级如下所示。在RAID1～RAID5的几种方案中，<span class='p red'>无论何时有磁盘损坏，都可以随时拔出受损的磁盘再插入好的磁盘，而数据不会损坏</span>。</p>
<ul>
<li>
<mark class="hl-label red">从上到下安全性和可靠性依此提高</mark> 
</li>
<li>
<p>RAID0:无冗余和无校验的磁盘阵列。</p>
<ul>
<li>RAID0把连续多个数据块交替地存放在不同物理磁盘的扇区中，几个磁盘交叉并行读写，不仅扩大了存储容量，而且提高了磁盘数据存取速度，但RAID0没有容错能力。</li>
</ul>
</li>
<li>
<p>RAID1:镜像磁盘阵列。</p>
<ul>
<li>RAID1是为了提高可靠性，使两个磁盘同时进行读写，互为备份，如果一个磁盘出现故障,可从另一磁盘中读出数据。两个磁盘当一个磁盘使用，意味着容量减少一半。</li>
</ul>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/54z2vdghprnHIDB.png" alt="image-20221103211629696" style="zoom:50%;" />
<ul>
<li>RAID2:采用纠错的海明码的磁盘阵列。</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/qe9NFpM2vPZtOaJ.png" alt="image-20221103211659078" style="zoom:50%;" />
<ul>
<li>
<p>RAID3:位交叉奇偶校验的磁盘阵列。</p>
</li>
<li>
<p>RAID4:块交叉奇偶校验的磁盘阵列。</p>
</li>
<li>
<p>RAID5:无独立校验的奇偶校验磁盘阵列。</p>
</li>
<li>
<p>RAID通过同时使用多个磁盘，提高了传输率;通过在多个磁盘上并行存取来大幅提高存储系统的数据吞吐量;通过镜像功能，可以提高安全可靠性;通过数据校验，可以提供容错能力。</p>
</li>
</ul>
<div class="tip "><p>光盘存储器</p>
</div>
<p>光盘存储器是利用光学原理读/写信息的存储装置，它采用聚焦激光束对盘式介质以非接触的方式记录信息。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/Hj9675VAoWvfgIw.png" alt="image-20221103212505008" /></p>
<p>特点：</p>
<ul>
<li>存储密度高</li>
<li>携带方便</li>
<li>成本低</li>
<li>容量大</li>
<li>存储期限长</li>
<li>容易保存等…</li>
</ul>
<p>光盘的类型如下:</p>
<ul>
<li>CD-ROM:只读型光盘，只能读出其中内容，不能写入或修改。</li>
<li>CD-R:只可写入一次信息，之后不可修改。</li>
<li>CD-RW:可读可写光盘，可以重复读写。</li>
<li>DVD-ROM:高容量的CD-ROM，DVD表示通用数字化多功能光盘。</li>
</ul>
<div class="tip "><p>固态硬盘</p>
</div>
<p>在微小型高档笔记本电脑中，采用高性能Flash Memory作为硬盘来记录数据，这种“硬盘”称固态硬盘。</p>
<p>固态硬盘除了需要Flash Memory外，还需要其他硬件和软件的支持。</p>
<p>注:闪存(Flash Memory)是在E2PROM的基础上发展起来的，本质上是只读存储器。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/VfIYBtkQUcDWyTx.png" alt="image-20221103213107670" /></p>
<h2 id="io接口"><a class="markdownIt-Anchor" href="#io接口"></a> IO接口</h2>
<p>又称<span class='p red'>I/O控制器(I/O Controller）、设备控制器</span>，负责协调主机与外部设备之间的数据传输</p>
<h3 id="io接口的作用"><a class="markdownIt-Anchor" href="#io接口的作用"></a> IO接口的作用</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/AiZYBojRg6aCfQm.png" alt="image-20221103213537508" /></p>
<ul>
<li>数据缓冲:通过数据缓冲寄存器（DBR）达到主机和外设工作速度的匹配</li>
<li>错误或状态监测:通过状态寄存器反馈设备的各种错误、状态信息，供CPU查用</li>
<li>控制和定时:接收从控制总线发来的控制信号、时钟信号</li>
<li>数据格式转换:串-并、并-串等格式转换</li>
<li>与主机和设备通信:实现主机—IO接口一IO设备之间的通信</li>
</ul>
<h3 id="io接口-2"><a class="markdownIt-Anchor" href="#io接口-2"></a> IO接口</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/SOPWJYocCryKnZE.png" alt="image-20221103213808081" /></p>
<p>主机侧：内部接口:内部接口与系统总线相连，实质上是与内存、CPU相连。 <del>数据的传输方式只能是并行传输</del> 。这种说法不完全正确，并行传输是2000年以前用的方法，现在在慢慢的转换成串行方法</p>
<p>设备侧：外部接口:外部接口通过接口电缆与外设相连,外部接口的数据传输可能是串行方式，因此I/O接口需具有串/并转换功能。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/fVH2W3ZtsmhpFxy.png" alt="image-20221103214632312" /></p>
<ol>
<li>发命令:发送命令字到/o控制寄存器，向设备发送命令（需要驱动程序的协助</li>
<li>读状态:从状态寄存器读取状态字，获得设备或I/O控制器的状态信息</li>
<li>读/写数据:从数据缓冲寄存器发送或读取数据，完成主机与外设的数据交换</li>
</ol>
<ul>
<li>
<span class='p red'>控制寄存器、状态寄存器</span>在使用时间上是错开的，因此有的I/O接口中<span class='p red'>可将二者合二为一</span>.
</li>
<li>IO控制器中的各种寄存器称为<mark class="hl-label red">I/O端口</mark> .</li>
</ul>
<p>如何确定要操作的设备?</p>
<ul>
<li>每个设备对应一组寄存器，操作不同的寄存器就是在操作不同的设备</li>
</ul>
<h3 id="接口与端口"><a class="markdownIt-Anchor" href="#接口与端口"></a> 接口与端口</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/u5kYG1BSi7ILJsD.png" alt="image-20221104100602428" /></p>
<p>IO接口是指电路中可以被CPU直接访问的寄存器</p>
<p>CPU如何访问不同的IO端口？</p>
<div class="tip "><p>统一编制和独立编制</p>
</div>
<p>统一编制：</p>
<p>靠<span class='p red'>不同的地址码</span>区分内存和IO设备。访存类的指令都可以访问I/O端口，<span class='p red'>因为不同地址对应的内存单元不同</span>(RISC机器常用)</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/4S92Jc1XiV7Q8xw.png" alt="image-20221104100949143" style="zoom:50%;" />
<p>独立编制：</p>
<p>靠<span class='p red'>不同的指令区</span>分内存和I/O设备。<span class='p red'>只能用专门的I/O指令访问I/O端口</span>(Intel处理器常用，IN、OUT就是lO指令)</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/jirCqXKcguZxat8.png" alt="image-20221104101146144" style="zoom:50%;" />
<div class="tip "><p>统一编制和独立编制的优缺点</p>
</div>
<p>1.<mark class="hl-label red">统一编址</mark> .<br />
把I/O端口当做存储器的单元进行地址分配，用统一的<span class='p red'>访存指令</span>就可以访问I/O端口，又称<span class='p red'>存储器映射方式</span>。</p>
<p>靠不同的<span class='p red'>地址码</span>区分内存和I/O设备，I/O地址要求相对固定在地址的某部分。</p>
<p>如系统总线中地址线共10根，则可以访问的存储单元个数为210= 1024个，假设要给10个I/O端口编址:</p>
<ol>
<li>0～9表示I/O地址，10～1023为主存单元地址</li>
<li>0～1013表示主存单元地址，1014～1023为IO地址</li>
<li>10～19表示I/O地址，0～9、20～1023为主存单元地址</li>
</ol>
<p>优点:</p>
<ul>
<li>
<span class='p green'>不需要专门的输入/输出指令，所有访存指令都可直接访问端口，程序设计灵活性高，端口有较大的编址空间，读写控制逻辑电路简单</span>。
</li>
</ul>
<p>缺点:</p>
<ul>
<li>
<span class='p red'>端口占用了主存地址空间，使主存地址空间变小外设寻址时间长(地址位数多，地址译码速度慢)</span>.
</li>
</ul>
<ol start="2">
<li>
<mark class="hl-label red">独立编制:</mark> 
</li>
</ol>
<p>I/O端口地址与存储器地址无关，独立编址CPU需要设置<span class='p red'>专门的输入/输出指令访问端口</span>，又称I/O映射方式。靠不同的指令区分内存和I/O设备。</p>
<p>优点:</p>
<ul>
<li>
<span class='p green'>使用专用IO指令，程序编制清晰IO端口地址位数少，地址译码速度快I/O端口的地址不右用主存地址空间</span>.
</li>
</ul>
<p>缺点:</p>
<ul>
<li>
<span class='p red'>IO指令类型少，一般只能对端口进行传送操作</span>.
</li>
</ul>
<div class="tip "><p>IO接口的类型</p>
</div>
<p>按数据传送方式可分为：</p>
<ul>
<li>并行接口:一个字节或一个字所有位同时传送。</li>
<li>串行接口:一位一位地传送。</li>
<li>注:这里所说的数据传送方式指的是外设和接口一侧的传送方式，而在主机和接口一侧，<del>数据总是并行传送的</del>。接口要完成数据格式转换。</li>
</ul>
<p>按主机访问IO设备的控制方式可分为：</p>
<ul>
<li>程序查询接口</li>
<li>中断接口DMA接口</li>
</ul>
<p>按功能选择的灵活性可分为：</p>
<ul>
<li>可编程接口</li>
<li>不可编程接口</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/EX4rvYKU9J5Bnjf.png" alt="image-20221104103141535" /></p>
<h2 id="程序查询方式"><a class="markdownIt-Anchor" href="#程序查询方式"></a> 程序查询方式</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/VZ3TYSGdIF7xNoK.png" alt="image-20221104104706643" /></p>
<p>x86中的IO指令实例</p>
<ul>
<li>
<p>lN Rd, Rs:把IO端口Rs的数据输入到CPU寄存器Rd</p>
</li>
<li>
<p>OUT Rd, Rs:把CPU寄存器Rs的数据输出到IO端口Rd</p>
</li>
</ul>
<p>模拟打印三个字符：abc</p>
<ol>
<li>先通过OUT指令把我们需要打印的字符放到CPU的寄存器中</li>
<li>经过打印机的驱动处理，可以把打印机启动的指令放到CPU的寄存器中</li>
<li>现在CPU需要吧打印机启动命令放到IO接口的控制寄存器中
<ol>
<li>先通过地址线指明我们需要的写入的IO端口</li>
<li>在通过控制线指明我们需要的操作，写操作</li>
<li>在通过数据线，把打印机启动的指令放到控制寄存器中</li>
</ol>
</li>
<li>IO控制逻辑根据CPU发来的指令来给打印机发出控制信号，当打印机启动完成之后，会给状态控制寄存器返回一个Ready的信号</li>
<li>CPU一直通过IN指令轮回检查IO接口的状态控制器，如果没有准备好的话则会一直检查，如果准备好的话，则会进行下一步操作</li>
<li>将我们需要打印的字符通过地址线指明我们需要放入寄存器的地址，在通过控制线，表明我们这次的操作是写操作，然后通过数据线将我们需要打印的字符放到数据缓冲寄存器中</li>
<li>我们在通过IO控制逻辑将我们需要打印的数据放到打印机的设备控制逻辑单元中，然后打印</li>
<li>这样循环三次即可打印出ABC</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/AOli8Ihg9C7a3Fo.png" alt="image-20221104110158397" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/TfjeQb1uMaJSPxY.png" alt="image-20221104110254978" /></p>
<h3 id="程序查询方式例题"><a class="markdownIt-Anchor" href="#程序查询方式例题"></a> 程序查询方式例题</h3>
<p>在程序查询方式的输入/输出系统中，假设不考虑处理时间，每一个查询操作需要100个时钟周期,CPU的时钟频率为50MHz。现有鼠标和硬盘两个设备，而且CPU必须每秒对鼠标进行30次查询，硬盘以32位字长为单位传输数据，即每32位被CPU查询一次，传输率为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>×</mo><msup><mn>2</mn><mn>20</mn></msup><mi>B</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">2×2^{20}B/s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord">/</span><span class="mord mathdefault">s</span></span></span></span>。求CPU对这两个设备查询所花费的时间比率，由此可得出什么结论?</p>
<p>时间的角度:</p>
<p>一个时钟周期为1/50MHz = 20ns</p>
<p>一个查询操作耗时100 × 20ns = 2000ns</p>
<ol>
<li>
<p>鼠标</p>
<p>每秒查询鼠标耗时30× 2000ns = 60000ns</p>
<p>查询鼠标所花费的时间比率=60000ns/1s = 0.006%对鼠标的查询基本不影响CPU的性能</p>
</li>
<li>
<p>硬盘</p>
<p>每32位需要查询一次，每秒传送<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>×</mo><msup><mn>2</mn><mn>20</mn></msup><mi>B</mi></mrow><annotation encoding="application/x-tex">2×2^{20}B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>每秒需要查询<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>2</mn><mo>×</mo><msup><mn>2</mn><mn>20</mn></msup><mi>B</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>4</mn><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>19</mn></msup></mrow><annotation encoding="application/x-tex">(2×2^{20}B)/4B=2^{19}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span>次</p>
<p>查询硬盘耗时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>19</mn></msup><mo>⋅</mo><mn>2000</mn><mi>n</mi><mi>s</mi><mo>=</mo><mn>512</mn><mo>⋅</mo><mn>1024</mn><mo>⋅</mo><mn>2000</mn><mi>n</mi><mi>s</mi><mo>≈</mo><mn>1.05</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mi>n</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">2^{19}\cdot2000ns = 512\cdot1024\cdot2000ns≈1.05\cdot10^9 ns</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">0</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span></span></span></span></p>
<p>查询硬盘所花费的时间比率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo><mo stretchy="false">(</mo><mn>1.05</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mi>n</mi><mi>s</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>1</mn><mi>s</mi><mo>=</mo><mn>105</mn></mrow><annotation encoding="application/x-tex">=(1.05×10^9ns)/1s=105%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">.</span><span class="mord">0</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">1</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">5</span></span></span></span></p>
<p>CPU将全部时间都用于对硬盘的查询也不能满足磁盘传输的要求</p>
</li>
</ol>
<p>频率的角度:</p>
<p>CPU的时钟频率为50MHz，即每秒50×106个时钟周期</p>
<ol>
<li>
<p>鼠标</p>
<p>每秒查询鼠标占用的时钟周期数30×100= 3000</p>
<p>查询鼠树所花费的时间比率=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3000</mn><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>50</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mo stretchy="false">)</mo><mo>=</mo><mn>0.006</mn></mrow><annotation encoding="application/x-tex">3000/(50\cdot10^6) = 0.006%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">5</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">0</span><span class="mord">6</span></span></span></span>对鼠标的查询基本不影响CPU的性能</p>
</li>
<li>
<p>硬盘</p>
<p>每秒需要查询<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>2</mn><mo>⋅</mo><msup><mn>2</mn><mn>20</mn></msup><mi>B</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>4</mn><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>19</mn></msup></mrow><annotation encoding="application/x-tex">(2\cdot2^{20}B)/4B=2^{19}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span>次</p>
<p>每秒查询硬盘占用的时钟周期数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>19</mn></msup><mo>×</mo><mn>100</mn><mo>≈</mo><mn>5.24</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><annotation encoding="application/x-tex">2^{19}×100≈5.24\cdot10^7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">.</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span></span></span></span></p>
<p>查询硬盘所花费的时间比率=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>5.24</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>50</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mo stretchy="false">)</mo><mo>≈</mo><mn>105</mn></mrow><annotation encoding="application/x-tex">(5.24×10^7)/(50×10^6)≈105</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">.</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">5</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">5</span></span></span></span>%</p>
<p>CPU将全部时间都用于对硬盘的查询也不能满足磁盘传输的要求</p>
</li>
</ol>
<p>CPU一旦启动I/O，<span class='p red'>必须停止现行程序的运行</span>，并在现行程序中插入一段程序。</p>
<p>主要特点: <span class='p blue'>CPU有“踏步”等待现象，CPU与I/O串行工作</span>。</p>
<p>优点:<span class='p green'>接口设计简单、设备量少</span>。</p>
<p>缺点:<span class='p red'>CPU在信息传送过程中要花费很多时间用于查询和等待，而且如果采用独占查询，则在一段时间内只能和一台外设交换信息，效率大大降低</span>。</p>
<p>独占查询: CPU 100%的时间都在查询I/0状态，完全串行</p>
<p>定时查询:在保证数据不丢失的情况下，每隔一段时间CPU就查询一次I/O状态。 查询的间隔内CPU可以执行其他程序</p>
<h2 id="程序中断的作用和原理"><a class="markdownIt-Anchor" href="#程序中断的作用和原理"></a> 程序中断的作用和原理</h2>
<h3 id="中断的基本概念"><a class="markdownIt-Anchor" href="#中断的基本概念"></a> 中断的基本概念</h3>
<p>程序中断是指在计算机执行现行程序的过程中，出现某些急需处理的异常情况或特殊请求，CPU暂时中止现行程序，而转去对这些异常情况或特殊请求进行处理，在处理完毕后CPU又自动返回到现行程序的断点处，继续执行原程序。</p>
<p>工作流程:</p>
<ol>
<li>
<p>中断请求：</p>
<p>中断源向CPU发送中断请求信号。</p>
</li>
<li>
<p>中断响应</p>
<p>响应中断的条件。</p>
<p>中断判优:多个中断源同时提出请求时通过中断判优逻辑响应一个中断源。</p>
</li>
<li>
<p>中断处理</p>
<p>中断隐指令。</p>
<p>中断服务程序。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/yPb8sVjnUM6rQXw.png" alt="image-20221104155820492" /></p>
<h3 id="中断请求的分类"><a class="markdownIt-Anchor" href="#中断请求的分类"></a> 中断请求的分类</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/02/fgURNsl2q46zHbA.png" alt="image-20220823154033775" /></p>
<p>狭义的中断分为：</p>
<ul>
<li>非屏蔽中断：关中断也会被相应（断点）</li>
<li>可屏蔽中断：关中断不会被相应</li>
</ul>
<p>关中断的作用:实现原子操作</p>
<ul>
<li>lF=1表示<span class='p red'>开中断</span>（允许中断)</li>
<li>IF=0表示<span class='p red'>关中断</span>(不允许中断)</li>
</ul>
<p>中断命令存放在PSW中:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/McWgiH3U6NVstrR.png" alt="image-20221104162145669" /></p>
<h3 id="中断请求标记"><a class="markdownIt-Anchor" href="#中断请求标记"></a> 中断请求标记</h3>
<div class="tip warning"><p>如何判断那个设备发来的中断信号？</p>
</div>
<p>每个中断源向CPU发出中断请求的时间是随机的。</p>
<p>为了记录中断事件并区分不同的中断源，中断系统需对每个中断源设置<span class='p red'>中断请求标记触发器INTR</span>,当其状态为“1”时，表示中断源有请求。</p>
<p>这些触发器可组成中断请求标记寄存器，该寄存器可集中在CPU中，也可分散在各个中断源中。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/a7f5yBRCFrOnbMH.png" alt="image-20221104162525474" /></p>
<p>对于<span class='p red'>外中断</span>，CPU是在统一的时刻即<span class='p red'>每条指令执行阶段结束前</span>向接口<span class='p red'>发出中断查询信号</span>，以获取I/O的中断请求，也就是说，<span class='p red'>CPU响应中断的时间</span>是在每条<span class='p red'>指令执行阶段的结束时刻</span>。</p>
<p>CPU响应中断必须满足以下3个条件:</p>
<ol>
<li>中断源有中断请求。</li>
<li>CPU允许中断即开中断。</li>
<li>一条指令执行完毕，且没有更紧迫的任务。</li>
</ol>
<h3 id="中断判优"><a class="markdownIt-Anchor" href="#中断判优"></a> 中断判优</h3>
<p>中断判优既可以用硬件实现，也可用软件实现:</p>
<ul>
<li>
<span class='p red'>硬件实现是通过硬件排队器实现的</span>，它既可以设置在CPU中，也可以分散在各个中断源中;
</li>
<li>
<span class='p red'>软件实现是通过查询程序实现的</span>。
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/JWFodi2DL6cExyP.png" alt="image-20221104162839765" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/R8gBxcJ6PMpLyvZ.png" alt="image-20221104162909631" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/PUJeGLkpRbymHfu.png" alt="image-20221104162930509" /></p>
<div class="tip "><p>优先级的设置</p>
</div>
<ol>
<li>硬件故障中断属于最高级，其次是软件中断</li>
<li>非屏蔽中断优于可屏蔽中断;</li>
<li>DMA请求优于I/O设备传送的中断请求</li>
<li>高速设备优于低速设备;</li>
<li>输入设备优于输出设备;</li>
<li>实时设备优于普通设备。</li>
</ol>
<h3 id="中断处理过程"><a class="markdownIt-Anchor" href="#中断处理过程"></a> 中断处理过程</h3>
<p>中断隐指令的主要任务:</p>
<ol>
<li>
<span class='p red'>关中断</span>。在中断服务程序中，为了保护中断现场（即CPU主要寄存器中的内容）期间不被新的中断所打断，必须关中断，从而保证被中断的程序在中断服务程序执行完毕之后能接着正确地执行下去。
</li>
<li>
<span class='p red'>保存断点</span>。为了保证在中断服务程序执行完毕后能正确地返回到原来的程序，必须将原来程序的断点（即程序计数器（PC)的内容）保存起来。可以存入堆栈，也可以存入指定单元。
</li>
<li>
<span class='p red'>引出中断服务程序</span>。引出中断服务程序的实质就是取出中断服务程序的入口地址并传送给程序计数器（PC） 。
</li>
</ol>
<p>引出终端服务程序有两种方式：软件查询法，硬件向量查询法</p>
<div class="tip "><p>硬件向量查询法</p>
</div>
<p>由<span class='p red'>硬件</span>产生<span class='p red'>向量地址</span>.</p>
<p>再由<span class='p red'>向量地址</span>找到<span class='p red'>中断程序入口地址</span>.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/YuIKFpMxX6dQhVm.png" alt="image-20221104164942710" /></p>
<div class="tip "><p>中断服务程序</p>
</div>
<p>.查询到中断服务程序存放的位置之后，就开始执行中断服务程序</p>
<p>中断服务程序的主要任务:</p>
<ol>
<li>
<p>保护现场</p>
<p>保存通用寄存器和状态寄存器的内容（eg:保存ACC寄存器的值），以便返回原程序后可以恢复CPU环境。可使用堆栈，也可以使用特定存储单元。</p>
</li>
<li>
<p>中断服务(设备服务)</p>
<p>主体部分，如通过程序控制需打印的字符代码送入打印机的缓冲存储器中（eg:中断服务的过程中有可能修改ACC寄存器的值)</p>
</li>
<li>
<p>恢复现场</p>
<p>通过出栈指令或取数指令把之前保存的信息送回寄存器中(eg:把原程序算到一般的Acc值恢复原样)</p>
</li>
<li>
<p>中断返回</p>
<p>通过中断返回指令回到原程序断点处。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/JkrSYEH4OjoelyL.png" alt="image-20221104170623253" /></p>
<ul>
<li>
<span class='p red'>单重中断:执行中断服务程序时不响应新的中断请求</span>。
</li>
</ul>
<h2 id="多重中断"><a class="markdownIt-Anchor" href="#多重中断"></a> 多重中断</h2>
<p>.<mark class="hl-label red">单重中断:执行中断服务程序时不响应新的中断请求</mark> 。</p>
<p>.<mark class="hl-label green">多重中断:又称中断嵌套,执行中断服务程序时可响应新的中断请求</mark> 。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/4T3UmqjPAsaGRXI.png" alt="image-20221104182634003" style="zoom:50%;" />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/7dnxNPJImQ9tFCs.png" alt="image-20221104182654066" style="zoom:50%;" />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/ERSioV8Kg6DALaY.png" alt="image-20221104182818484" style="zoom:50%;" />
<h3 id="中断屏蔽技术"><a class="markdownIt-Anchor" href="#中断屏蔽技术"></a> 中断屏蔽技术</h3>
<p>中断屏蔽技术<span class='p red'>主要用于多重中断</span>，CPU要具备多重中断的功能，须满足下列条件。</p>
<ol>
<li>在中断服务程序中提前设置开中断指令。</li>
<li>优先级别高的中断源有权中断优先级别低的中断源。</li>
</ol>
<p>每个<span class='p red'>中断源都有一个屏蔽触发器</span>，<mark class="hl-label red">1表示屏蔽该中断源的请求</mark> ，<mark class="hl-label green">0表示可以正常申请</mark> ，所有屏蔽触发器组合在一起，便构成一个屏蔽字寄存器，<span class='p red'>屏蔽字寄存器的内容称为屏蔽字</span>。</p>
<p>屏蔽字设置的规律:</p>
<ol>
<li>一般用‘1’表示屏蔽，'0’表示正常申请。</li>
<li>每个中断源对应一个屏蔽字(在处理该中断源的中断服务程序时,屏蔽寄存器中的内容为该中断源对应的屏蔽字)。</li>
<li>屏蔽字中‘1’越多，优先级越高。<span class='p red'>每个屏蔽字中至少有一个'1'(至少要能屏蔽自身的中断)</span>。</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/9urEQ61YwfzRZ7e.png" alt="image-20221104183053909" style="zoom:50%;" />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/M2qAcg6vaK3SX8J.png" alt="image-20221104183129100" style="zoom:50%;" />
<p>设某机有4个中断源A、B、C、D，其硬件排队优先次序为A&gt;B&gt;C&gt;D，现要求将中断处理次序改为D&gt;A&gt;C&gt;B。</p>
<ol>
<li>写出每个中断源对应的屏蔽字。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/UAenJDSdszZXchE.png" alt="image-20221104184301543" /></p>
<ol start="2">
<li>按下图所示的时间轴给出的4个中断源的请求时刻，画出CPU执行程序的轨迹。设每个中断源的中断服务程序时间均为20us.</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/qVrXGQc8lTJmHa7.png" alt="image-20221104184338783" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/JYHz1AvPKcgC9fD.png" alt="image-20221104184506123" /></p>
<h3 id="拓展"><a class="markdownIt-Anchor" href="#拓展"></a> 拓展</h3>
<ul>
<li>
<span class='p red'>IF</span> (Interrupt Flag）开/关中断标志。当IF=1时，表示开中断，当IF=0时表示关中断
</li>
<li>
<span class='p red'>INTR:可屏蔽中断请求</span>（ interrupt request）信号，输入，用来申请一个硬件中断。当IF=1时，若INTR保持高电平，则在当前指令执行完毕后就进入中断响应周期
</li>
<li>
<span class='p red'>NMl:非屏蔽中断</span>(non-maskable interrupt）输入信号。与INTR信号类似，但 NMI中断不必检查IF标志位是否为1。常用于处理电源掉电紧急情况。
</li>
<li>
<span class='p red'>INTA:中断响应</span>( interrupt acknowledge）信号，输出。<span class='p red'>响应INTR输入</span>。该引脚常用来选通中断向量码以响应中断请求。
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/O3FztG4ScvNyZC7.png" alt="image-20221104185329136" /></p>
<ol>
<li>中断程序先通过终端接口，向中断控制器的中断请求寄存器IRR中发送中断信号
<ul>
<li>不管多少个中断程序中断控制器一律接受，</li>
</ul>
</li>
<li>然后通过中断控制器里面的数据总线，向控制逻辑发送信号</li>
<li>控制逻辑通过INT接口向CPU的INTR接口发送中断信号，让CPU知道现在有一个中断程序过来了需要他处理，
<ul>
<li>如果CPU检测没有关中断的话，则通过INTA接口向中断控制器的INTA接口发送信息，我可以处理中断信号，但是你需要告诉我，我需要处理那个中断信号</li>
</ul>
</li>
<li>因为中断控制器可能接收到了多个中断信号，所以这时候需要通过优先权电路确定需要处理那个中断信号</li>
<li>通过优先权电路筛选出来之后，通过终端服务寄存器ISR的处理，我们可以得出我们所要处理的中断信号的类型号</li>
<li>中断服务寄存器通过数据总线告诉CPU需要处理那个中断程序，然后CPU就开始执行</li>
</ol>
<h2 id="程序中断控制方式"><a class="markdownIt-Anchor" href="#程序中断控制方式"></a> 程序中断控制方式</h2>
<p>程序中断控制方式具体操作</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/5IVOQDWRAfrMCny.png" alt="image-20221104192256135" /></p>
<p>当CPU需要接受外部设备中的数据的时候，可以先让外部设备输入数据，等数据输入完毕之后，外部设备通过中断操作，向CPU发出终端操作，等到CPU执行完K这条指令的之后，开始检测中断信号，CPU开始处理这个终端操作，先通过关中断，防止别的中断程序在进行插入，保存断点k，开始执行中断服务程序，执行的时候先要保护现场，将CPU正在用的寄存器中的数据都保存下来，然后通过中断服务程序控制数据传送，最后恢复现场，CPU继续执行k+1个指令，IO设备继续输入数据</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/2sViHqnR9thkIQp.png" alt="image-20221104193642335" /></p>
<h2 id="dma方式"><a class="markdownIt-Anchor" href="#dma方式"></a> DMA方式</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/rkGlXJq2TfgHMhZ.png" alt="image-20221104195127934" /></p>
<p>CPU向DMA控制器指明要输入还是输出;要传送多少个数据;数据在主存、外设中的地址。</p>
<ol>
<li>接受外设发出的DMA请求（外设传送一个字的请求)，并向CPU发出总线请求。</li>
<li>CPU响应此总线请求，发出总线响应信号，接管总线控制权，进入DMA操作周期。</li>
<li>确定传送数据的主存单元地址及长度，并能自动修改主存地址计数和传送长度计数。</li>
<li>规定数据在主存和外设间的传送方向，发出读写等控制信号，执行数据传送操作。</li>
<li>向CPU报告DMA操作的结束</li>
</ol>
<p>注意：<mark class="hl-label red">在DMA传送过程中，DMA控制器将接管CPU的地址总线、数据总线和控制总线，CPU的主存控制信号被禁止使用。而当DMA传送结束后，将恢复CPU的一切权利并开始执行其操作</mark> .</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/GM4FTa7ZdNvi5PW.png" alt="image-20221104195305560" /></p>
<h3 id="dma传送过程"><a class="markdownIt-Anchor" href="#dma传送过程"></a> DMA传送过程</h3>
<p>预处理:</p>
<ul>
<li>主存起始地址→AR</li>
<li>I/O设备地址→DAR</li>
<li>传送数据个数→WC</li>
<li>启动I/O设备</li>
</ul>
<p>数据传送:</p>
<ul>
<li>继续执行主程序</li>
<li>同时完成一批数据的传送</li>
</ul>
<p>后处理:</p>
<ul>
<li>中断服务程序</li>
<li>做DMA结束处理</li>
</ul>
<p>继续执行主程序</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/jduln7JtNRaxepI.png" alt="image-20221104195707993" /></p>
<h3 id="dma传送解决方案"><a class="markdownIt-Anchor" href="#dma传送解决方案"></a> DMA传送解决方案</h3>
<p>上面这种方式采用的是<span class='p red'>CPU和DMA共用同一根主线</span>，所以不会发生主存访问冲突</p>
<p>如果采用下面这个三总线方式的话可能会出现CPU和DMA对主存访问冲突</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/lbvmn94jt5HIsVX.png" alt="image-20221104200643341" /></p>
<div class="tip "><p>解决方法</p>
</div>
<ol>
<li>
<p>停止CPU访问主存</p>
<p>.<span class='p green'>控制简单</span>.</p>
<p>.<span class='p red'>CPU处于不工作状态或保持状态未充分发挥CPU对主存的利用率</span>.</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/UbaRWZosEFu9C1K.png" alt="image-20221104200851921" /></p>
<ol start="2">
<li>
<p>DMA与CPU交替访存</p>
<p>.<span class='p red'>不需要总线使用权的申请、建立和归还过程</span>.</p>
<p>.<span class='p red'>硬件逻辑更为复杂</span>.</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/31AfOUbPHTRYS4z.png" alt="image-20221104201121662" /></p>
<ol start="3">
<li>
<p>周期挪用(周期窃取)</p>
<p>DMA 访问主存有三种可能:</p>
<ul>
<li>CPU此时不访存（不冲突)</li>
<li>CPU正在访存(存取周期结束让出总线)</li>
<li>CPU与DMA同时访存(<span class='p red'>IO访存优先</span>)</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/HASPhWyB8VeMNru.png" alt="image-20221104201243122" /></p>
<h3 id="dma方式的特点"><a class="markdownIt-Anchor" href="#dma方式的特点"></a> DMA方式的特点</h3>
<p>主存和DMA接口之间有一条直接数据通路。</p>
<p>由于DMA方式传送数据不需要经过CPU，因此不必中断现行程序，<span class='p red'>IO与主机并行工作，程序和传送并行工作</span>。</p>
<p>DMA方式具有下列特点:</p>
<ol>
<li>它使主存与CPU的固定联系脱钩，主存既可被CPU访问，又可被外设访问。</li>
<li>在数据块传送时，主存地址的确定、传送数据的计数等都由硬件电路直接实现。</li>
<li>主存中要开辟专用缓冲区，及时供给和接收外设的数据。</li>
<li>DMA传送速度快，CPU和外设并行工作，提高了系统效率。</li>
<li>DMA在传送开始前要通过程序进行预处理，结束后要通过中断方式进行后处理。</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">中断</th>
<th style="text-align:center">DMA</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">数据传送</td>
<td style="text-align:center">程序控制<br />程序的切换→保存和恢复现场</td>
<td style="text-align:center">硬件控制<br />CPU只需要进行预处理和后处理即可</td>
</tr>
<tr>
<td style="text-align:center">中断请求</td>
<td style="text-align:center">传送数据</td>
<td style="text-align:center">后处理</td>
</tr>
<tr>
<td style="text-align:center">相应</td>
<td style="text-align:center">指令执行周期结束后相应中断</td>
<td style="text-align:center">每个机器周期结束均可，总线空闲时<br />即可相应DMA请求</td>
</tr>
<tr>
<td style="text-align:center">场景</td>
<td style="text-align:center">CPU控制，低速设备</td>
<td style="text-align:center">DMA控制器控制，高速设备</td>
</tr>
<tr>
<td style="text-align:center">优先级</td>
<td style="text-align:center">优先级低于DMA</td>
<td style="text-align:center">优先级高于中断</td>
</tr>
<tr>
<td style="text-align:center">异常处理</td>
<td style="text-align:center">能处理异常事件</td>
<td style="text-align:center">仅传送数据</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/07/oM468NZvJhf5ag1.png" alt="image-20221104202341950" /></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">Nuyoah</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://262259.xyz/2022/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://262259.xyz/2022/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/')">计算机组成原理教程</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://s2.loli.net/2022/08/16/weL31EHsON5ldDU.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/08/16/weL31EHsON5ldDU.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s2.loli.net/2022/08/16/2yRjVx9gFKQaidA.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/08/16/2yRjVx9gFKQaidA.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://262259.xyz/2022/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=计算机组成原理教程&amp;url=http://262259.xyz/2022/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/&amp;pic=https://s2.loli.net/2022/11/21/IQmvSdtKfOAjikn.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://262259.xyz" target="_blank">Nuyoah</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>计算机基础<span class="tagsPageCount">13</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/11/19/vJMKhVAUYNXRQuE.jpg?_r_=4e68cc13-a8dd-6829-2bc7-0a77e53357b1" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/21/git%E5%92%8Cgithub%E4%BD%BF%E7%94%A8/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/oUDtdkJpx1Tngw7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">git和github使用</div></div></a></div><div class="next-post pull-right"><a href="/2022/08/11/%E6%A0%87%E7%AD%BE%E4%BD%BF%E7%94%A8/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/uidNZVrpm1acvf5.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">标签使用</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2022/05/05/HuffmanTree/" title="哈夫曼编译码器（实现中英文）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/jO1zT7NyZMcHpwr.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-05-05</div><div class="title">哈夫曼编译码器（实现中英文）</div></div></a></div><div><a href="/2021/05/05/KMP/" title="KMP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/MAjwIXl1mVgNF4J.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-05</div><div class="title">KMP</div></div></a></div><div><a href="/2022/09/27/Vmtools%E5%AE%89%E8%BD%AC%E8%BF%87%E7%A8%8B%E5%92%8C%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98/" title="Vmtools无法在虚拟机和物理机之间复制粘贴"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/19/MkDHwvYu5p8XLBy.jpg?_r_=770fd7e3-b800-47ee-e1a5-3c20f0ebf441" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-09-27</div><div class="title">Vmtools无法在虚拟机和物理机之间复制粘贴</div></div></a></div><div><a href="/2021/05/05/%E4%B8%B2%E6%95%B0%E7%BB%84%E5%B9%BF%E4%B9%89%E8%A1%A8/" title="串数组广义表"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/jO1zT7NyZMcHpwr.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-05</div><div class="title">串数组广义表</div></div></a></div><div><a href="/2021/03/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/" title="数据结构基本原理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/jO1zT7NyZMcHpwr.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-03-25</div><div class="title">数据结构基本原理</div></div></a></div><div><a href="/2022/08/22/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" title="操作系统教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/aDwOWz8tq3yJ1Yb.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-22</div><div class="title">操作系统教程</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" style="display: none">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Nuyoah</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/zjhinsist" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=2152889763@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text"> 第一章：计算机系统概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">1.1.</span> <span class="toc-text"> 计算机的发展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">1.2.</span> <span class="toc-text"> 计算机硬件的基本组成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A9%E6%9C%9F%E5%86%AF%E8%AF%BA%E4%BE%9D%E6%9B%BC%E6%9C%BA%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 早期冯诺依曼机的结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%B0%E4%BB%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 现代计算机的结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E4%B8%AA%E7%A1%AC%E4%BB%B6%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text"> 各个硬件的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 主存储器的基本组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 运算器的基本组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">1.3.3.</span> <span class="toc-text"> 控制器的基本组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.3.4.</span> <span class="toc-text"> 计算机的工作过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.</span> <span class="toc-text"> 计算机系统的层次结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.5.</span> <span class="toc-text"> 计算机性能指标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 存储器性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cpu%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.5.2.</span> <span class="toc-text"> CPU性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%95%B4%E4%BD%93%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.5.3.</span> <span class="toc-text"> 系统整体性能指标</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E8%BF%90%E7%AE%97"><span class="toc-number">2.</span> <span class="toc-text"> 第二章：数据的表示和运算</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E4%BD%8D%E8%AE%A1%E6%95%B0%E5%88%B6"><span class="toc-number">2.1.</span> <span class="toc-text"> 进位计数制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bcd%E7%A0%81-binary-coded-decimal"><span class="toc-number">2.2.</span> <span class="toc-text"> BCD码 （Binary-Coded Decimal）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8421%E7%A0%81"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 8421码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%99%E4%B8%89%E7%A0%81"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 余三码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2421%E7%A0%81"><span class="toc-number">2.2.3.</span> <span class="toc-text"> 2421码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.3.</span> <span class="toc-text"> 字符与字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8B%B1%E6%96%87%E5%AD%97%E7%AC%A6%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%86%85%E7%9A%84%E8%A1%A8%E7%A4%BA"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 英文字符在计算机内的表示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%86%85%E7%9A%84%E8%A1%A8%E7%A4%BA"><span class="toc-number">2.3.2.</span> <span class="toc-text"> 中文字符在计算机内的表示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%AD%98%E5%82%A8"><span class="toc-number">2.3.3.</span> <span class="toc-text"> 字符串的存储</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E7%A0%81"><span class="toc-number">2.4.</span> <span class="toc-text"> 数据校验码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E5%8E%9F%E7%90%86"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 校验原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C%E7%A0%81"><span class="toc-number">2.4.2.</span> <span class="toc-text"> 奇偶校验码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%B7%E6%98%8E%E6%A0%A1%E9%AA%8C%E7%A0%81"><span class="toc-number">2.4.3.</span> <span class="toc-text"> 海明校验码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A0%A1%E9%AA%8C%E7%A0%81"><span class="toc-number">2.4.4.</span> <span class="toc-text"> 循环冗余校验码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E7%82%B9%E6%95%B0%E7%9A%84%E8%A1%A8%E7%A4%BA"><span class="toc-number">2.5.</span> <span class="toc-text"> 定点数的表示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E7%9A%84%E8%A1%A8%E7%A4%BA"><span class="toc-number">2.5.1.</span> <span class="toc-text"> 无符号数的表示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%A0%81"><span class="toc-number">2.5.2.</span> <span class="toc-text"> 原码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E7%A0%81"><span class="toc-number">2.5.3.</span> <span class="toc-text"> 反码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A5%E7%A0%81"><span class="toc-number">2.5.4.</span> <span class="toc-text"> 补码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E7%A0%81"><span class="toc-number">2.5.5.</span> <span class="toc-text"> 移码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E7%82%B9%E6%95%B0%E7%9A%84%E8%BF%90%E7%AE%97"><span class="toc-number">2.6.</span> <span class="toc-text"> 定点数的运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="toc-number">2.6.1.</span> <span class="toc-text"> 移位运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E6%B3%95%E8%BF%90%E7%AE%97"><span class="toc-number">2.6.2.</span> <span class="toc-text"> 加法运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%98%E6%B3%95%E8%BF%90%E7%AE%97"><span class="toc-number">2.6.3.</span> <span class="toc-text"> 乘法运算</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%A0%81%E7%9A%84%E4%B9%98%E6%B3%95%E8%BF%90%E7%AE%97"><span class="toc-number">2.6.3.1.</span> <span class="toc-text"> 原码的乘法运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E7%A0%81%E7%9A%84%E4%B9%98%E6%B3%95%E8%BF%90%E7%AE%97"><span class="toc-number">2.6.3.2.</span> <span class="toc-text"> 补码的乘法运算</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97"><span class="toc-number">2.6.4.</span> <span class="toc-text"> 除法运算</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97%E6%80%9D%E6%83%B3"><span class="toc-number">2.6.4.1.</span> <span class="toc-text"> 除法运算思想</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E4%BD%99%E6%95%B0%E6%B3%95"><span class="toc-number">2.6.4.2.</span> <span class="toc-text"> 恢复余数法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E5%87%8F%E4%BA%A4%E6%9B%BF%E6%B3%95%E4%B8%8D%E6%81%A2%E5%A4%8D%E4%BD%99%E6%95%B0%E6%B3%95"><span class="toc-number">2.6.4.3.</span> <span class="toc-text"> 加减交替法(不恢复余数法)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E7%A0%81%E7%9A%84%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97"><span class="toc-number">2.6.4.4.</span> <span class="toc-text"> 补码的除法运算：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.7.</span> <span class="toc-text"> 数据强制转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E5%92%8C%E6%8E%92%E5%88%97"><span class="toc-number">2.8.</span> <span class="toc-text"> 数据的存储和排列</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E5%B0%8F%E7%AB%AF%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.8.1.</span> <span class="toc-text"> 大小端模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%B9%E7%95%8C%E5%AF%B9%E9%BD%90"><span class="toc-number">2.8.2.</span> <span class="toc-text"> 边界对齐</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%9A%84%E8%A1%A8%E7%A4%BA"><span class="toc-number">2.9.</span> <span class="toc-text"> 浮点数的表示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E8%A1%A8%E7%A4%BA%E6%A0%87%E5%87%86ieee754"><span class="toc-number">2.10.</span> <span class="toc-text"> 浮点数表示标准IEEE754</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E8%A1%A8%E7%A4%BA%E8%8C%83%E5%9B%B4"><span class="toc-number">2.10.1.</span> <span class="toc-text"> 浮点数表示范围</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%9A%84%E8%BF%90%E7%AE%97"><span class="toc-number">2.11.</span> <span class="toc-text"> 浮点数的运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%87%8F%E8%BF%90%E7%AE%97"><span class="toc-number">2.11.1.</span> <span class="toc-text"> 加减运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.11.2.</span> <span class="toc-text"> 强制类型转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E5%8A%A0%E6%B3%95%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">2.12.</span> <span class="toc-text"> 电路的基本原理，加法器的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%95%B0%E9%80%BB%E8%BE%91%E5%8D%95%E5%85%83alu"><span class="toc-number">2.12.1.</span> <span class="toc-text"> 算数逻辑单元ALU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="toc-number">2.12.2.</span> <span class="toc-text"> 最基本的逻辑运算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E6%B3%95%E5%99%A8alu%E7%9A%84%E6%94%B9%E8%BF%9B"><span class="toc-number">2.13.</span> <span class="toc-text"> 加法器，ALU的改进</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%9B%B4%E5%BF%AB%E7%9A%84%E4%BA%A7%E7%94%9F%E8%BF%9B%E4%BD%8D"><span class="toc-number">2.13.1.</span> <span class="toc-text"> 如何更快的产生进位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C%E5%8A%A0%E6%B3%95%E5%99%A8%E7%9A%84%E4%BC%98%E5%8C%96"><span class="toc-number">2.13.2.</span> <span class="toc-text"> 并行加法器的优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#alu%E4%BC%98%E5%8C%96"><span class="toc-number">2.13.3.</span> <span class="toc-text"> ALU优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.</span> <span class="toc-text"> 第三章：存储系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.</span> <span class="toc-text"> 存储器的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 存储器的层次结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E5%88%86%E7%B1%BB%E4%BB%8E%E4%B8%8D%E5%90%8C%E8%A7%92%E5%BA%A6%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 存储器的分类（从不同角度进行分类）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%82%E6%AC%A1%E5%88%86%E7%B1%BB"><span class="toc-number">3.1.2.1.</span> <span class="toc-text"> 层次分类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E4%BB%8B%E8%B4%A8"><span class="toc-number">3.1.2.2.</span> <span class="toc-text"> 存储介质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%8F%96%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.2.3.</span> <span class="toc-text"> 存取方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E7%9A%84%E5%8F%AF%E6%9B%B4%E6%94%B9%E6%80%A7"><span class="toc-number">3.1.2.4.</span> <span class="toc-text"> 信息的可更改性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E7%9A%84%E5%8F%AF%E4%BF%9D%E5%AD%98%E6%80%A7"><span class="toc-number">3.1.2.5.</span> <span class="toc-text"> 信息的可保存性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">3.1.3.</span> <span class="toc-text"> 存储器的性能指标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90-2"><span class="toc-number">3.2.</span> <span class="toc-text"> 主存储器的基本组成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8A%E5%AF%BC%E4%BD%93%E5%85%83%E4%BB%B6%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 半导体元件的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%8A%AF%E7%89%87%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 存储芯片的基本原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.3.</span> <span class="toc-text"> 如何实现不同的寻址方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sram%E5%92%8Cdram"><span class="toc-number">3.3.</span> <span class="toc-text"> SRAM和DRAM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dram%E7%9A%84%E5%88%B7%E6%96%B0"><span class="toc-number">3.3.1.</span> <span class="toc-text"> DRAM的刷新</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AA%E8%AF%BB%E5%AD%98%E5%82%A8%E5%99%A8rom"><span class="toc-number">3.4.</span> <span class="toc-text"> 只读存储器ROM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8%E4%B8%8Ecpu%E7%9A%84%E9%93%BE%E6%8E%A5"><span class="toc-number">3.5.</span> <span class="toc-text"> 存储器与CPU的链接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%9D%97%E5%AD%98%E5%82%A8%E8%8A%AF%E7%89%87%E4%B8%8Ecpu%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.5.1.</span> <span class="toc-text"> 单块存储芯片与CPU的连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E6%89%A9%E5%B1%95"><span class="toc-number">3.5.2.</span> <span class="toc-text"> 位扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E6%89%A9%E5%B1%95"><span class="toc-number">3.5.3.</span> <span class="toc-text"> 字扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E4%BD%8D%E5%90%8C%E6%97%B6%E6%89%A9%E5%B1%95"><span class="toc-number">3.5.4.</span> <span class="toc-text"> 字位同时扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%91%E7%A0%81%E5%99%A8"><span class="toc-number">3.5.5.</span> <span class="toc-text"> 译码器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8C%E5%8F%A3ram%E5%92%8C%E5%A4%9A%E6%A8%A1%E5%9D%97%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">3.6.</span> <span class="toc-text"> 双口RAM和多模块存储器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8D%87%E4%B8%BB%E5%AD%98%E9%80%9F%E5%BA%A6"><span class="toc-number">3.6.1.</span> <span class="toc-text"> 提升主存速度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%9D%A1%E6%8F%92%E5%85%A5%E6%96%B9%E6%B3%95%E4%BD%8E%E4%BD%8D%E4%BA%A4%E5%8F%89%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">3.6.2.</span> <span class="toc-text"> 内存条插入方法：低位交叉存储器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cache%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.7.</span> <span class="toc-text"> Cache基本原理，基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cache%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">3.7.1.</span> <span class="toc-text"> Cache工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86"><span class="toc-number">3.7.2.</span> <span class="toc-text"> 局部性原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="toc-number">3.7.3.</span> <span class="toc-text"> 性能分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%BE%85%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">3.7.4.</span> <span class="toc-text"> 有待解决的问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cache%E4%B8%8E%E4%B8%BB%E5%AD%98%E7%9A%84%E4%B8%89%E7%A7%8D%E6%98%A0%E5%B0%84%E6%96%B9%E5%BC%8F"><span class="toc-number">3.8.</span> <span class="toc-text"> Cache与主存的三种映射方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E7%9B%B8%E8%81%94%E6%98%A0%E5%B0%84"><span class="toc-number">3.8.1.</span> <span class="toc-text"> 全相联映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E6%98%A0%E5%B0%84%E5%8F%AA%E8%83%BD%E5%AD%98%E6%94%BE%E5%9C%A8%E5%9B%BA%E5%AE%9A%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.8.2.</span> <span class="toc-text"> 直接映射（只能存放在固定位置）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E7%9B%B8%E8%81%94%E6%98%A0%E5%B0%84"><span class="toc-number">3.8.3.</span> <span class="toc-text"> 组相联映射</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cache%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95"><span class="toc-number">3.9.</span> <span class="toc-text"> Cache替换算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cache%E5%86%99%E7%AD%96%E7%95%A5"><span class="toc-number">3.10.</span> <span class="toc-text"> Cache写策略</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%99%E5%91%BD%E4%B8%AD"><span class="toc-number">3.10.1.</span> <span class="toc-text"> 写命中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%99%E4%B8%8D%E5%91%BD%E4%B8%AD"><span class="toc-number">3.10.2.</span> <span class="toc-text"> 写不命中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%A7cache"><span class="toc-number">3.10.3.</span> <span class="toc-text"> 多级Cache</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E5%BC%8F%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">3.11.</span> <span class="toc-text"> 页式存储器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E5%9C%B0%E5%9D%80-vs-%E5%AE%9E%E5%9C%B0%E5%9D%80"><span class="toc-number">3.11.1.</span> <span class="toc-text"> 虚地址 vs 实地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E9%A1%B5%E5%8F%B7%E4%B8%BB%E5%AD%98%E5%9D%97%E5%8F%B7"><span class="toc-number">3.11.2.</span> <span class="toc-text"> 逻辑页号→主存块号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">3.12.</span> <span class="toc-text"> 虚拟存储器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F"><span class="toc-number">4.</span> <span class="toc-text"> 第四章：指令系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text"> 指令格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4-%E6%8C%89%E6%8C%87%E4%BB%A4%E9%95%BF%E5%BA%A6%E5%88%86%E7%B1%BB"><span class="toc-number">4.1.1.</span> <span class="toc-text"> 指令-按指令长度分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4-%E6%8C%89%E6%93%8D%E4%BD%9C%E7%A0%81%E7%9A%84%E9%95%BF%E5%BA%A6%E5%88%86%E7%B1%BB"><span class="toc-number">4.1.2.</span> <span class="toc-text"> 指令-按操作码的长度分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4-%E6%8C%89%E6%93%8D%E4%BD%9C%E7%B1%BB%E5%9E%8B%E5%88%86%E7%B1%BB"><span class="toc-number">4.1.3.</span> <span class="toc-text"> 指令-按操作类型分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E6%93%8D%E4%BD%9C%E7%A0%81"><span class="toc-number">4.2.</span> <span class="toc-text"> 扩展操作码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%AF%BB%E5%9D%80"><span class="toc-number">4.3.</span> <span class="toc-text"> 指令寻址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%BA%E5%BA%8F%E5%AF%BB%E5%9D%80"><span class="toc-number">4.3.1.</span> <span class="toc-text"> 顺序寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%B3%E8%B7%83%E5%AF%BB%E5%9D%80"><span class="toc-number">4.3.2.</span> <span class="toc-text"> 跳跃寻址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.</span> <span class="toc-text"> 数据寻址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.1.</span> <span class="toc-text"> 直接寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%B4%E6%8E%A5%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.2.</span> <span class="toc-text"> 间接寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.3.</span> <span class="toc-text"> 寄存器寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E9%97%B4%E6%8E%A5%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.4.</span> <span class="toc-text"> 寄存器间接寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E5%90%AB%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.5.</span> <span class="toc-text"> 隐含寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%8B%E5%8D%B3%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.6.</span> <span class="toc-text"> 立即寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%81%8F%E7%A7%BB%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.7.</span> <span class="toc-text"> 偏移寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E5%9D%80%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.8.</span> <span class="toc-text"> 基址寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E5%9D%80%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.9.</span> <span class="toc-text"> 变址寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.10.</span> <span class="toc-text"> 相对寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A0%86%E6%A0%88%E5%AF%BB%E5%9D%80"><span class="toc-number">4.4.11.</span> <span class="toc-text"> 堆栈寻址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cisc-%E5%92%8C-risc"><span class="toc-number">4.5.</span> <span class="toc-text"> CISC 和 RISC</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text"> 第五章：中央处理器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cpu%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8C%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.</span> <span class="toc-text"> CPU的功能和基本结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cpu%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">5.1.1.</span> <span class="toc-text"> CPU的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E5%99%A8%E5%92%8C%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD"><span class="toc-number">5.1.2.</span> <span class="toc-text"> 运算器和控制器的基本功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.3.</span> <span class="toc-text"> 运算器的基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.4.</span> <span class="toc-text"> 控制器的基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cpu%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.5.</span> <span class="toc-text"> CPU的基本结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">5.2.</span> <span class="toc-text"> 指令执行过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.1.</span> <span class="toc-text"> 指令周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E6%B5%81%E7%A8%8B"><span class="toc-number">5.2.2.</span> <span class="toc-text"> 指令周期流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B5%81-%E5%8F%96%E6%8C%87%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.3.</span> <span class="toc-text"> 指令周期的数据流-取指周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B5%81-%E9%97%B4%E5%9D%80%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.4.</span> <span class="toc-text"> 指令周期的数据流-间址周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B5%81-%E6%89%A7%E8%A1%8C%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.5.</span> <span class="toc-text"> 指令周期的数据流-执行周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B5%81-%E4%B8%AD%E6%96%AD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.2.6.</span> <span class="toc-text"> 指令周期的数据流-中断周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%96%B9%E6%A1%88"><span class="toc-number">5.2.7.</span> <span class="toc-text"> 指令执行方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">5.3.</span> <span class="toc-text"> 数据通路的功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84"><span class="toc-number">5.3.1.</span> <span class="toc-text"> 单总线结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84%E4%BE%8B%E9%A2%98"><span class="toc-number">5.3.2.</span> <span class="toc-text"> 单总线结构：例题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%93%E7%94%A8%E9%80%9A%E8%B7%AF%E7%BB%93%E6%9E%84"><span class="toc-number">5.3.3.</span> <span class="toc-text"> 专用通路结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%93%E7%94%A8%E9%80%9A%E8%B7%AF%E7%BB%93%E6%9E%84%E4%BE%8B%E9%A2%98"><span class="toc-number">5.3.4.</span> <span class="toc-text"> 专用通路结构：例题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E5%B8%83%E7%BA%BF%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.4.</span> <span class="toc-text"> 硬布线控制器的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E5%B8%83%E7%BA%BF%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">5.4.1.</span> <span class="toc-text"> 硬布线控制器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E9%83%A8%E4%BB%B6%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.4.2.</span> <span class="toc-text"> 硬部件控制器的设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">5.5.</span> <span class="toc-text"> 微程序控制器的基本原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-number">5.5.1.</span> <span class="toc-text"> 微程序控制器设计思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">5.5.2.</span> <span class="toc-text"> 微程序控制器的基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.5.3.</span> <span class="toc-text"> 微控制器的工作原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.6.</span> <span class="toc-text"> 微指令的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.6.1.</span> <span class="toc-text"> 微程序控制器的工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E5%91%BD%E4%BB%A4%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.6.2.</span> <span class="toc-text"> 微命令的格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-number">5.6.3.</span> <span class="toc-text"> 微指令的编码方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E5%9C%B0%E5%9D%80%E5%BD%A2%E6%88%90%E6%96%B9%E5%BC%8F"><span class="toc-number">5.6.4.</span> <span class="toc-text"> 微指令的地址形成方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98%E6%96%AD%E5%AE%9A%E6%96%B9%E5%BC%8F"><span class="toc-number">5.6.5.</span> <span class="toc-text"> 例题：断定方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">5.7.</span> <span class="toc-text"> 微程序控制单元的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%88%86%E7%B1%BB"><span class="toc-number">5.7.1.</span> <span class="toc-text"> 微程序设计分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E5%92%8C%E7%A1%AC%E5%B8%83%E7%BA%BF%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">5.7.2.</span> <span class="toc-text"> 微程序控制器和硬布线控制器的对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">5.8.</span> <span class="toc-text"> 指令流水线的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">5.8.1.</span> <span class="toc-text"> 指令流水的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95"><span class="toc-number">5.8.2.</span> <span class="toc-text"> 流水线表示方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">5.8.3.</span> <span class="toc-text"> 流水线的性能指标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%BD%B1%E5%93%8D%E5%9B%A0%E7%B4%A0%E5%92%8C%E5%88%86%E7%B1%BB"><span class="toc-number">5.9.</span> <span class="toc-text"> 指令流水线的影响因素和分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%BA%E5%99%A8%E5%91%A8%E6%9C%9F%E7%9A%84%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.9.1.</span> <span class="toc-text"> 机器周期的设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81"><span class="toc-number">5.9.2.</span> <span class="toc-text"> 结构相关(资源冲突)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE%E5%86%B2%E7%AA%81"><span class="toc-number">5.9.3.</span> <span class="toc-text"> 数据相关(数据冲突)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E7%9B%B8%E5%85%B3%E6%8E%A7%E5%88%B6%E5%86%B2%E7%AA%81"><span class="toc-number">5.9.4.</span> <span class="toc-text"> 控制相关(控制冲突)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">5.9.5.</span> <span class="toc-text"> 流水线的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%A4%9A%E5%8F%91%E6%8A%80%E6%9C%AF"><span class="toc-number">5.9.6.</span> <span class="toc-text"> 流水线的多发技术</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E6%AE%B5%E5%BC%8F%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="toc-number">5.10.</span> <span class="toc-text"> 五段式指令流水线</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%E6%80%BB%E7%BA%BF"><span class="toc-number">6.</span> <span class="toc-text"> 第六章：总线</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E7%9A%84%E6%A6%82%E8%BF%B0"><span class="toc-number">6.1.</span> <span class="toc-text"> 总线的概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">6.1.1.</span> <span class="toc-text"> 总线的定义：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">6.1.2.</span> <span class="toc-text"> 总线的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">6.1.3.</span> <span class="toc-text"> 总线的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B2%E8%A1%8C%E6%80%BB%E7%BA%BF%E5%92%8C%E5%B9%B6%E8%A1%8C%E6%80%BB%E7%BA%BF"><span class="toc-number">6.1.4.</span> <span class="toc-text"> 串行总线和并行总线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%87%E5%86%85%E6%80%BB%E7%BA%BF%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF%E5%92%8C%E9%80%9A%E4%BF%A1%E6%80%BB%E7%BA%BF"><span class="toc-number">6.1.5.</span> <span class="toc-text"> 片内总线，系统总线和通信总线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">6.1.6.</span> <span class="toc-text"> 系统总线的结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">6.2.</span> <span class="toc-text"> 总线的性能指标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E7%9A%84%E4%BB%B2%E8%A3%81"><span class="toc-number">6.3.</span> <span class="toc-text"> 总线的仲裁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%B2%E8%A3%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">6.3.1.</span> <span class="toc-text"> 仲裁的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E4%B8%AD%E4%BB%B2%E8%A3%81%E6%96%B9%E5%BC%8F"><span class="toc-number">6.3.2.</span> <span class="toc-text"> 集中仲裁方式：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E7%9A%84%E6%93%8D%E4%BD%9C%E5%92%8C%E5%AE%9A%E6%97%B6"><span class="toc-number">6.4.</span> <span class="toc-text"> 总线的操作和定时</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E4%BC%A0%E8%BE%93%E7%9A%84%E5%9B%9B%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-number">6.4.1.</span> <span class="toc-text"> 总线传输的四个阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E5%AE%9A%E6%97%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">6.4.2.</span> <span class="toc-text"> 同步定时方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E5%AE%9A%E6%97%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">6.4.3.</span> <span class="toc-text"> 异步定时方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8A%E5%90%8C%E6%AD%A5%E9%80%9A%E4%BF%A1"><span class="toc-number">6.4.4.</span> <span class="toc-text"> 半同步通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%A6%BB%E5%BC%8F%E9%80%9A%E4%BF%A1"><span class="toc-number">6.4.5.</span> <span class="toc-text"> 分离式通信</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E6%A0%87%E5%87%86"><span class="toc-number">6.5.</span> <span class="toc-text"> 总线标准</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF%E6%A0%87%E5%87%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">6.5.1.</span> <span class="toc-text"> 总线标准的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF%E7%9A%84%E6%A0%87%E5%87%86"><span class="toc-number">6.5.2.</span> <span class="toc-text"> 系统总线的标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E6%80%BB%E7%BA%BF%E6%A0%87%E5%87%86"><span class="toc-number">6.5.3.</span> <span class="toc-text"> 局部总线标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E6%80%BB%E7%BA%BF%E6%A0%87%E5%87%86"><span class="toc-number">6.5.4.</span> <span class="toc-text"> 设备总线标准</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0io%E7%B3%BB%E7%BB%9F"><span class="toc-number">7.</span> <span class="toc-text"> 第七章：IO系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#io%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">7.1.</span> <span class="toc-text"> IO系统的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E5%A6%82%E4%BD%95%E4%B8%8Eio%E8%AE%BE%E5%A4%87%E8%BF%9B%E8%A1%8C%E4%BA%A4%E4%BA%92"><span class="toc-number">7.1.1.</span> <span class="toc-text"> 主机如何与IO设备进行交互</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#io%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F%E7%AE%80%E4%BB%8B"><span class="toc-number">7.1.2.</span> <span class="toc-text"> IO控制方式简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dma%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">7.1.3.</span> <span class="toc-text"> DMA控制方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E9%81%93%E7%9A%84%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">7.1.4.</span> <span class="toc-text"> 通道的控制方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#io%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">7.1.5.</span> <span class="toc-text"> IO系统的基本组成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#io%E8%AE%BE%E5%A4%87"><span class="toc-number">7.2.</span> <span class="toc-text"> IO设备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E8%AE%BE%E5%A4%87"><span class="toc-number">7.2.1.</span> <span class="toc-text"> 外部设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E8%AE%BE%E5%A4%87"><span class="toc-number">7.2.2.</span> <span class="toc-text"> 输入设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E8%AE%BE%E5%A4%87"><span class="toc-number">7.2.3.</span> <span class="toc-text"> 输出设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E5%AD%98%E8%AE%BE%E5%A4%87"><span class="toc-number">7.2.4.</span> <span class="toc-text"> 外存设备</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#io%E6%8E%A5%E5%8F%A3"><span class="toc-number">7.3.</span> <span class="toc-text"> IO接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#io%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">7.3.1.</span> <span class="toc-text"> IO接口的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#io%E6%8E%A5%E5%8F%A3-2"><span class="toc-number">7.3.2.</span> <span class="toc-text"> IO接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E4%B8%8E%E7%AB%AF%E5%8F%A3"><span class="toc-number">7.3.3.</span> <span class="toc-text"> 接口与端口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">7.4.</span> <span class="toc-text"> 程序查询方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F%E4%BE%8B%E9%A2%98"><span class="toc-number">7.4.1.</span> <span class="toc-text"> 程序查询方式例题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%96%AD%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E5%8E%9F%E7%90%86"><span class="toc-number">7.5.</span> <span class="toc-text"> 程序中断的作用和原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">7.5.1.</span> <span class="toc-text"> 中断的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E8%AF%B7%E6%B1%82%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">7.5.2.</span> <span class="toc-text"> 中断请求的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E8%AF%B7%E6%B1%82%E6%A0%87%E8%AE%B0"><span class="toc-number">7.5.3.</span> <span class="toc-text"> 中断请求标记</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E5%88%A4%E4%BC%98"><span class="toc-number">7.5.4.</span> <span class="toc-text"> 中断判优</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86%E8%BF%87%E7%A8%8B"><span class="toc-number">7.5.5.</span> <span class="toc-text"> 中断处理过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E4%B8%AD%E6%96%AD"><span class="toc-number">7.6.</span> <span class="toc-text"> 多重中断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E5%B1%8F%E8%94%BD%E6%8A%80%E6%9C%AF"><span class="toc-number">7.6.1.</span> <span class="toc-text"> 中断屏蔽技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%93%E5%B1%95"><span class="toc-number">7.6.2.</span> <span class="toc-text"> 拓展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%96%AD%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">7.7.</span> <span class="toc-text"> 程序中断控制方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dma%E6%96%B9%E5%BC%8F"><span class="toc-number">7.8.</span> <span class="toc-text"> DMA方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dma%E4%BC%A0%E9%80%81%E8%BF%87%E7%A8%8B"><span class="toc-number">7.8.1.</span> <span class="toc-text"> DMA传送过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dma%E4%BC%A0%E9%80%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">7.8.2.</span> <span class="toc-text"> DMA传送解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dma%E6%96%B9%E5%BC%8F%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">7.8.3.</span> <span class="toc-text"> DMA方式的特点</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/10/27/%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD/" title="文件的上传和下载"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/19/vJMKhVAUYNXRQuE.jpg?_r_=4e68cc13-a8dd-6829-2bc7-0a77e53357b1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="文件的上传和下载"/></a><div class="content"><a class="title" href="/2024/10/27/%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD/" title="文件的上传和下载">文件的上传和下载</a><time datetime="2024-10-27T01:50:10.000Z" title="发表于 2024-10-27 09:50:10">2024-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/15/SpringSecurity%E5%A4%8D%E4%B9%A0/" title="SpringSecurity"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s3.bmp.ovh/imgs/2022/11/08/3b73e41bdfc1757c.png?_r_=42aebb11-fb67-8383-bbfc-aa306bf10cc3" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringSecurity"/></a><div class="content"><a class="title" href="/2024/10/15/SpringSecurity%E5%A4%8D%E4%B9%A0/" title="SpringSecurity">SpringSecurity</a><time datetime="2024-10-15T00:39:29.000Z" title="发表于 2024-10-15 08:39:29">2024-10-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/26/SpringBoot%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="SpringBoot响应式编程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s3.bmp.ovh/imgs/2022/11/08/ad62143435c86b71.png?_r_=14da7333-e3f2-18fd-cfee-7fb9ee423d60" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot响应式编程"/></a><div class="content"><a class="title" href="/2024/09/26/SpringBoot%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="SpringBoot响应式编程">SpringBoot响应式编程</a><time datetime="2024-09-26T13:26:18.000Z" title="发表于 2024-09-26 21:26:18">2024-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/24/JUC/" title="JUC"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/19/c1KxnECr4VL3qN5.jpg?_r_=1a747fe7-dda4-95fd-5269-3d19c05830b0" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC"/></a><div class="content"><a class="title" href="/2024/09/24/JUC/" title="JUC">JUC</a><time datetime="2024-09-24T13:41:04.000Z" title="发表于 2024-09-24 21:41:04">2024-09-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/05/SpringBoot%E4%B8%ADnew%E5%87%BA%E6%9D%A5%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%92%8C-Autowrite%E6%B3%A8%E5%85%A5%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB/" title="new与@Autowrite创建对象的区别"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/11/uxwnoaVrQvEFMqT.jpg?_r_=250bca37-3569-522a-2c57-2e2b3289a11d" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="new与@Autowrite创建对象的区别"/></a><div class="content"><a class="title" href="/2024/09/05/SpringBoot%E4%B8%ADnew%E5%87%BA%E6%9D%A5%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%92%8C-Autowrite%E6%B3%A8%E5%85%A5%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB/" title="new与@Autowrite创建对象的区别">new与@Autowrite创建对象的区别</a><time datetime="2024-09-05T14:03:05.000Z" title="发表于 2024-09-05 22:03:05">2024-09-05</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="Nuyoah" target="_blank">Nuyoah</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">85</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://262259.xyz/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://262259.xyz/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">管理</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://qexo.262259.xyz/" title="博客后端"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://unpkg.com/qexo-static@1.4.0/assets/img/brand/qexo.png" alt="博客后端"/><span class="back-menu-item-text">博客后端</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Gitee/" style="font-size: 0.88rem;">Gitee<sup>1</sup></a><a href="/tags/JAVA/" style="font-size: 0.88rem; font-weight: 500; color: var(--anzhiyu-lighttext)">JAVA<sup>5</sup></a><a href="/tags/JS/" style="font-size: 0.88rem;">JS<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>7</sup></a><a href="/tags/Spring/" style="font-size: 0.88rem;">Spring<sup>2</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>4</sup></a><a href="/tags/win10/" style="font-size: 0.88rem;">win10<sup>1</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/" style="font-size: 0.88rem;">个人日记<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 0.88rem;">人工智能<sup>15</sup></a><a href="/tags/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E4%BA%8E%E9%80%BB%E8%BE%91/" style="font-size: 0.88rem;">数字电路于逻辑<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/" style="font-size: 0.88rem;">算法实现<sup>12</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">计算机基础<sup>13</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Nuyoah 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.262259.xyz/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.262259.xyz/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.262259.xyz/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>