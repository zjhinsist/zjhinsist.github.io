<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>JavaWeb | Nuyoah</title><meta name="keywords" content="JAVA"><meta name="author" content="Nuyoah"><meta name="copyright" content="Nuyoah"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="JavaWeb"><meta name="application-name" content="JavaWeb"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="JavaWeb"><meta property="og:url" content="http://262259.xyz/2023/01/22/JavaWeb/index.html"><meta property="og:site_name" content="Nuyoah"><meta property="og:description" content="JavaWeb教程"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://s2.loli.net/2022/11/21/Sm8lFrjtzUkihVy.webp"><meta property="article:author" content="Nuyoah"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2022/11/21/Sm8lFrjtzUkihVy.webp"><meta name="description" content="JavaWeb教程"><link rel="shortcut icon" href="https://s1.ax1x.com/2022/11/27/zUFla6.png"><link rel="canonical" href="http://262259.xyz/2023/01/22/JavaWeb/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"404！加载失败！","backTitle":"加载成功！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo.262259.xyz/',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":"a665f8c80fd739329dd0d3f3fe7d90fc"},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Nuyoah","link":"链接: ","source":"来源: Nuyoah","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Nuyoah',
  title: 'JavaWeb',
  postAI: '',
  pageFillDescription: ' HTML,  frameset-iframe,  frameset,  iframe,  CSS,  盒子模型,  CSS 布局,  水果库,  JS,  JavaScript的起源,  JavaScript的特性,  脚本语言,  基于对象,  弱类型,  事件驱动,  跨平台性,  入门程序,  功能效果图,  代码实现,  JavaScript的基本语法,  JavaScript的引入方式,  内部脚本方式,  外部脚本方式,  声明和使用变量,  JavaScript数据类型,  变量,  函数(重点),  内置函数,  声明函数,  调用函数,  对象(重点),  使用new关键字创建对象,  使用{}创建对象(常用),  给对象设置函数属性,  this关键字,  数组(重点),  使用new关键字创建数组,  使用[]创建数组(常用),  JSON(最重点),  JSON格式的用途,  JSON格式的说明,  JSON对象和JSON字符串互转,  JavaScript的DOM(最重点),  DOM的概念,  DOM树的概念,  各个组成部分的类型,  父子关系,  先辈后代关系,  DOM操作,  在整个文档范围内查询元素节点,  在具体元素节点范围内查找子节点,  查找指定元素节点的父节点,  查找指定元素节点的兄弟节点,  扩展内容(根据选择器查找标签),  属性操作,  标签体的操作,  DOM增删改操作,  JavaScript的事件驱动(很重要),  事件的概念,  常见事件,  事件绑定的方式,  普通函数方式,  匿名函数方式,  事件的使用介绍,  综合案例,  水果摊,  WEB,  CS与BS异同,  TOMCAT,  项目执行过程,  模块创建过程,  Servlet,  获取参数,  中文乱码,  继承关系,  生命周期,  HTTP协议,  Session会话,  服务器内部转发以及客户端重定向,  Thymeleaf-视图模板技术,  TH名称空间,  表达式语法,  修改标签文本值,  thtext作用,  字面量,  修改指定属性值,  解析URL地址,  基本语法,  首页使用URL地址解析,  给URL地址后面附加请求参数,  直接执行表达式,  基本语法：访问域对象,  域对象,  请求域,  会话域,  应用域,  在Servlet中将数据存入属性域,  操作请求域,  操作会话域,  操作应用域,  获取请求参数,  一个名字一个值,  一个名字多个值,  分支与迭代,  分支,  if和unless,  switch,  迭代,  保存作用域,  路径问题,  Servlet优化,  减少Servlet数量,  添加DispatcherServlet,  减少Controller里面的相同代码,  减少跳转代码,  减少参数代码,  Review,  Servlet IOC实现,  ServletAPI,  Service,  IOC实现,  Filter 过滤器,  事务,  监听器,  QQZone,  Cookie,  Session和Cookie的区别与联系,  Cookie创建,  验证码Kaptcha,  正则表达式,  创建正则表达式对象,  正则表达式入门案例,  正则表达式的匹配模式,  全局查找,  忽略大小写,  多行查找,  元字符,  例子一,  例子二,  例子三,  例子四,  字符集合,  出现次数,  在正则表达式中表达『或者』,  Ajax（了解）,  VUE（了解）,  绑定数据,  v-bind绑定数据,  v-model绑定数据,  trim去除首位空标签,  v-if v-else,  v-show,  列表渲染,  事件驱动,  侦听属性,  生命周期,  AXIOS,  示例1：客户端向服务器端异步发送普通参数值,  示例二：客户端向服务器端发送JSON格式的数据,  示例三：服务器端接受处理JSON并返回给客户端JSON格式的代码,  JS处理JSON,  书城作用如果一个网页中包含很多个子网页我们可以使用来进行区分如果里面有多个页面的话采用标签是按行分割是按列分割在页面中嵌入一个页面页面盒子模型浏览器实际尺寸浏览器实际尺寸左右盒子模型边框间距填充边框样式边框样式实线点状线布局和都会使元素脱离文档流但不同的是脱离文档流后不会占用原来的位置而会在原来的位置上留下一个副本占用原来文档流的位置的父元素设有时会忽略父级元素的值即始终与父级元素的左上角进行定位且其层级会始终比父级高无论父级设置多大的但的定位会受父元素值影响是以第一个设置了的父元素或祖先元素进行定位而定位的层总是相对于其最近的父元素无论其父元素是何种定位方式位置绝对定位相对于父级第一个设置了属性进行定位位置相对定位设置为相对定位的元素框会偏移某个距离元素仍然保持其未定位前的形状它原本所占的空间仍保留水果库名称单价数量小计操作苹果梨香蕉菠萝总计客户端的一个脚本语言是一门弱类型的语言变量的数据类型由后面赋的值的类型决定的起源在年时由公司的在网景导航者浏览器上首次设计实现而成在最初将其脚本语言命名为因为与合作网景公司管理层希望蹭的热度因此取名为总共分成三部分基本语法浏览器对象模型文档对象模型的特性脚本语言是一种解释型的脚本语言不同于等语言先编译后执行不会产生编译出来的字节码文件而是在程序的运行过程中对源文件逐行进行解释基于对象是一种基于对象的脚本语言它不仅可以创建对象也能使用现有的对象但是面向对象的三大特性封装继承多态中能够实现封装可以模拟继承不支持多态所以它不是一门面向对象的编程语言弱类型中也有明确的数据类型但是声明一个变量后它可以接收任何类型的数据并且会在程序执行过程中根据上下文自动转换类型事件驱动是一种采用事件驱动的脚本语言它不需要经过服务器就可以对用户的输入做出响应跨平台性脚本语言不依赖于操作系统仅需要浏览器的支持因此一个脚本在编写后可以带到任意机器上使用前提是机器上的浏览器支持脚本语言目前已被大多数的浏览器所支持入门程序功能效果图代码实现的入门程序在代码中定义一个按钮目标点击按钮的时候弹出一个警告框通过代码获取到按钮对象代表当前文档给获取到的对象绑定点击事件弹出警告框的基本语法的引入方式内部脚本方式代码要写在标签内标签可以写在文档内的任意位置为了能够方便查询或操作标签元素标签可以写在标签后面在我们的入门程序中使用的就是内部脚本方式引入的外部脚本方式在标签内通过属性指定外部文件的路径即可但是要注意以下两点引用外部文件的标签里面不能写代码先引入再使用标签不能写成单标签引入方式如下的引入方式建议在中引入外部的文件第一种引入方式内部引入方式在文档内部通过标签去编写代码第二种引入方式外部引入方式在当前项目中创建一个文件然后在需要引入的里面使用标签引入一个标签要么负责编写内部的代码要么负责引入外部的文件调用外部文件中的方法声明和使用变量数据类型基本数据类型数值型不区分整数小数字符串不区分字符字符串单引号双引号意思一样布尔型在中其他类型和布尔类型的自动转换非零的数值非空字符串非空对象零空字符串例如放在判断中是一个非空字符串直接放在判断中会被当作真处理引用类型所有出来的对象用声明的数组用声明的对象变量关键字其实之后建议使用数据类型变量是弱类型的可以接收任意类型的数据标识符严格区分大小写变量使用规则如果使用了一个没有声明的变量那么会在运行时报错如果声明一个变量没有初始化那么这个变量的值就是函数重点内置函数内置函数就是中内置好的函数我们可以直接使用弹出警告框警告框内容弹出确认框确定要删除吗执行删除用户点击确定返回点击取消返回老板你真的不加个钟吗老板点了确定表示要加钟老板点了确定表示不加钟在控制台打印日志日志内容声明函数声明函数就是使用者自己定义一个函数它有两种写法写法写法写法可以这样解读声明一个函数相当于创建了一个函数对象将这个对象的引用赋值给变量如果不给这个对象赋值我们可以将其作为匿名函数使用在后续学习内容中会用到调用函数中函数本身就是一种对象函数名就是这个对象的引用而调用函数的格式是函数引用或对象重点中没有类的概念对于系统内置的对象可以直接创建使用使用关键字创建对象创建对象给对象设置属性和属性值在控制台输出对象使用创建对象常用创建对象在控制台输出对象给对象设置函数属性创建对象给对象设置属性和属性值在控制台输出对象调用函数或者创建对象在控制台输出对象调用函数关键字关键字只有两种情况在函数外面关键字指向对象代表当前浏览器窗口在函数里面关键字指向调用函数的对象直接打印函数中的声明函数创建对象调用函数数组重点使用关键字创建数组创建数组对象压入数据遍历数组数组元素反序数组元素拼接成字符串字符串拆分成数组弹出数组中最后一个元素使用创建数组常用使用创建数组最重点格式的用途在开发中凡是涉及到跨平台数据传输格式一定是首选格式的说明数据两端要么是要么是定义对象定义数组对象的格式是数组的格式是的类型固定是字符串的类型可以是基本数据类型引用类型对象或数组正因为格式中部分还可以继续使用对象或数组所以格式是可以多层嵌套的所以格式不论多么复杂的数据类型都可以表达的格式张三疯武当山其实对于前端而言就是一个对象张三疯武当山小花武当山下的小村庄张三疯武当山小花武当山下的小村庄奥巴马武当山奥拉夫少林寺数组的格式对象和字符串互转对象转字符串字符串转对象的最重点的概念是的缩写意思是文档对象模型将文档抽象成模型再封装成对象方便用程序操作这是一种非常常用的编程思想将现实世界的事物抽象成模型这样就非常容易使用对象来量化的描述现实事物从而把生活中的问题转化成一个程序问题最终实现用应用软件协助解决现实问题而在这其中模型就是那个连通现实世界和代码世界的桥梁树的概念浏览器把文档从服务器上下载下来之后就开始按照从上到下的顺序读取标签每一个标签都会被封装成一个对象而第一个读取到的肯定是根标签然后是它的子标签再然后是标签里的子标签所以从标签开始整个文档中的所有标签都会根据它们之间的父子关系被放到一个树形结构的对象中这个包含了所有标签对象的整个树形结构对象就是中的一个可以直接使用的内置对象例如下面的标签结构会被解析为各个组成部分的类型整个文档中的一切都可以看做各个具体组成部分的具体类型可以看做类型的子类其实严格来说并不支持真正意义上的继承这里我们借用中的继承概念从逻辑上来帮助我们理解各个类型之间的关系组成部分节点类型具体类型整个文档文档节点标签元素节点标签内的文本文本节点标签内的属性属性节点注释注释节点父子关系先辈后代关系操作由于实际开发时基本上都是使用的各种框架来操作而框架中的操作方式和我们现在看到的原生操作完全不同所以下面罗列的仅供参考不做要求在整个文档范围内查询元素节点功能返回值根据值查询值一个具体的元素节根据标签名查询标签名元素节点数组根据属性值查询值元素节点数组根据类名查询类名元素节点数组在具体元素节点范围内查找子节点功能返回值查找子标签返回子标签数组查找第一个子标签考虑换行不考虑标签对象查找最后一个子标签考虑换行不考虑节点对象查找指定元素节点的父节点功能返回值查找指定元素节点的父标签标签对象查找指定元素节点的兄弟节点功能返回值查找前一个兄弟标签考虑换行不考虑标签对象查找后一个兄弟标签考虑换行不考虑标签对象扩展内容根据选择器查找标签功能返回值根据选择器查找一个标签选择器标签对象根据选择器查找多个标签选择器标签数组查找节点根据查询标签根据类名查询标签根据标签名查询标签查找子节点查找的所有子标签要注意文本也属于子节点查找子标签查找为的标签的父节点查找为的标签的前一个兄弟标签查找为的标签的后一个兄弟标签根据选择器查找标签选择器根据选择器查找一个标签选择器根据选择器查找多个标签什么是选择器用于查找标签的一些表达式其中最基本的三种选择器是选择器类选择器标签选择器选择器参考的文档查找为的标签使用的是选择器查找内的所有后代用的是层级选择器查找为的标签的后面第一个兄弟查找为的标签的后面的所有兄弟属性操作需求操作方式读取属性值元素对象属性名修改属性值元素对象属性名新的属性值标签体的操作需求操作方式获取或者设置标签体的文本内容获取或者设置标签体的内容操作标签的属性和文本你好世界目标获取为的输入框的找到要操作的标签设置标签的属性值张三获取标签的属性的值获取为的中的文本内容获取标签的文本获取文本的时候会将左右两端的空格去掉获取标签体的内容获取标签体的内容设置标签体的内容建议使用如果是使用的话它会将标签当做普通文本处理增删改操作功能标签名创建元素节点并返回但不会自动添加到文档中文本值创建文本节点并返回但不会自动添加到文档中将添加到所有子节点后面将插入到前面用新节点替换原有的旧子节点删除某个标签读写代码创建和删除标签北京上海深圳广州目标在城市列表的最后添加一个子标签长沙创建一个标签给创建的标签设置属性和文本长沙长沙将创建的标签添加到城市列表中父子将子标签添加到父标签的最后面目标在城市列表的深圳之前添加一个子标签长沙获取到深圳这个标签父新标签参照标签目标在城市列表中添加一个子标签替换深圳长沙父新标签被替换的标签目标在城市列表中删除深圳目标清除城市列表中的所有城市保留城市列表标签的事件驱动很重要事件的概念事件是发生在元素上的事情是浏览器或用户做的某些事情事件通常与函数配合使用这样就可以通过发生的事件来驱动函数执行常见事件属性此事件发生在何时当用户点击某个对象时调用的事件句柄当用户双击某个对象时调用的事件句柄域的内容被改变元素失去焦点元素获得焦点一张页面或一幅图像完成加载确认按钮被点击表单被提交某个键盘按键被按下某个键盘按键被按住某个键盘按键被松开鼠标按钮被按下鼠标按键被松开鼠标从某元素移开鼠标移到某元素之上鼠标被移动事件绑定的方式普通函数方式说白了设置标签的属性标签属性代码调用函数标签匿名函数方式标签对象事件属性执行一段代码事件的使用介绍点击事件需求没点击一次按钮弹出按钮另一个按钮当点击的时候要调用的函数我被点击了给另外一个按钮绑定点击事件先根据获取标签设置的属性绑定事件绑定命名函数绑定匿名函数点击了另外一个按钮获得焦点和失去焦点需求给输入框设置获得和失去焦点绑定获取焦点事件获取焦点了绑定失去焦点事件失去焦点了内容改变需求给设置内容改变事件内容改变北京上海深圳城市改变了键盘相关的键盘按下键盘抬起给输入框绑定键盘按键按下和抬起事件当按键按下的时候数据并没有到达输入框输出输入框里面的内容输出输入框的内容当键盘按键抬起的时候数据已经到达了输入框鼠标相关的鼠标在之上鼠标按下鼠标离开给输入框绑定鼠标移入事件鼠标移入了给输入框绑定鼠标移出事件鼠标移出了综合案例需求代码实现综合案例序号用户名性别操作张三男删除李四女删除王五男删除序号用户性别添加用户目标点击删除按钮删除当前行给所有按钮绑定点击事件此时就是你点击的那个按钮我们要删除的就是的爷爷添加用户获取序号用户名性别将获取到的序号用户名性别添加到中放到中添加到中创建一行往中添加标签体内容删除将添加到表格中清空序号用户名性别声明变量不用给变量定义类型给什么类型的值变量就是什么类型的声明类声明方法调用方法不用根据方法定义中参数的数量来填入参数水果摊当页面加载完毕之后我们需要绑定各种各样的事件通过获取到指定的表格获取到表格中的每一行的元素给每一行都绑定上指定的函数显示颜色清除颜色显示手点击修改价格删除表中数据显示手点击修改价格删除表中数据水果价格或数量格式有误请从新输入信息输入不全请补全之后在提交当前发生事件事件源获取当前事件源获取该事件原的父级元素将父级元素的背景颜色设置为将子集元素的字体颜色设置为白色获取到我们需要修改的表格的元素判断当前节点有第一个节点并且第一个节点是文本节点的话在进行如下操作表示获取当前节点的内部文本表示设置当前节点内部的自动选中文本绑定输入框失去焦点事件失去焦点更新单价获取输入框获取新的价格获取输入框的父节点修改中的内容为新的价格获取商品的数量更新小计更新总计价格格式错误更新小计更新总计初始化数据为零删除数据表示弹出一个对话框表示弹出一个带确定和取消按钮的对话框确定返回取消返回是否确定删除名称单价数量小计操作苹果梨香蕉菠萝总计名称橙子单价数量添加重填与异同客户端服务器架构模式优点充分利用客户端的机器资源减轻服务器的负荷将一部分安全性不高的计算任务存储任务放在客户端不要把所有计算和存储任务都放在服务器端执行从而减轻服务器的压力也能够减轻网络的负荷缺点需要安装升级成本较大浏览器服务器架构模式优点不需要安装升级成本小缺点所有的计算和存储任务都放在服务器端执行服务器的负荷比较重在服务器端完成计算之后再将结果传回浏览器端因此客户端服务器端会进行非常频繁的数据通信从而网络负荷较重是本地服务器目录说明存放可执行文件的目录存放配置文件的目录存放第三方包的目录存放日志文件的目录项目部署的目录工作目录临时目录配置环境变量是用和来写的需要配置最基本的文件夹有两个项目文件夹文件夹项目执行过程客户端发起请求服务器端处理请求以表单为例用户发起请求在项目的文件夹中找到找到对应的的对应的根据用户发送的是请求还是请求从而调用对应类中的还是方法模块创建过程新建空项目在项目中新建模块在模块中添加包创建部署包现有再有的的各种包但是这时候这个包并没有添加到部署包中我们在中有会提示点击选择即可另外我们也可以直接把文件夹新建到下这样的话这个只能是当前这个模块所享有如果我们需要新建模块的话则需要再重新新建包在部署的时候修改然后再回到选项卡检查的值的值指的是启动完成之后自动打开你指定的浏览器并且访问这个网址如果我们的网址是则我们默认访问如果没有这个三个资源的话则会报错误默认访问页面可以通过中设置空指针一般是数据取不到或者是参数名不对应造成的获取参数设置字符集获取参数创建数据库连接对象获取连接将数据插入到数据库中中文乱码通过设置即可之后不用设置编码问题之前先将字符串转换成二进制的形式将字节数组按照指定的编码重新组装成字符串继承关系继承关系接口抽象类抽象子类相关方法接口初始化方法服务方法销毁方法抽象类仍是抽象方法抽象子类不是抽象的的获取请求的方式各种判断根据请求方式不同决定去调用不同的方法在这个抽象类中方法都差不多小结继承关系中的核心方法方法当有请求过来的时候都要经过这个方法在中我们回去分析请求的方式到底是等等通过不同的方法调用不同的方法在中这些方法默认是因此我们在新建时我们才会去考虑请求方法从而决定重写那个方法生命周期生命周期从出生到死亡的过程就是生命周期对应着的中的三个方法默认情况下第一次接受请求时这个会进行实例化调用构造方法初始化调用然后服务调用从第二次请求开始每一次都是服务不必再进行实例化当容器关闭的时候其中所有的实例会被销毁调用销毁方法通过案例发现实例只会创建一个所有请求都是这个实例去相应默认情况下第一次请求时才回去实例化初始化然后服务这样做的好处是什么提高系统启动速度因此得出结论如果需要提高系统启动速度当前默认情况就是这样如果需要提高响应速度我们应该设置的启动时机的启动时机默认是第一次请求的时候进行实例化初始化我们可以通过来设置的启动顺序数字越小启动越靠前最小值为在容器的中是单例的线程不安全的单例所有请求都是同一个实例去相应因为实例只会创建一次线程不安全的一个线程需要根据这个实例中的某个成员变量的值去做逻辑判断但是在中间的某个时机另一个线程改变了这个之就会导致不能达到预期结果我们尽可能不要再中定义成员变量如果必须要定义的话便不要根据成员变量的值去做一些逻辑判断协议称之为超文本传输协议是无状态的请求相应包含两个部分请求和相应请求请求包括三个部分请求行请求头请求主体请求行包括三个部分请求的方式请求的请求的协议请求消息头中包括了很多客户端要告诉服务器的信息作用通过具体的参数对本次请求进行详细的说明格式键值对键和值之间使用冒号隔开相对比较重要的请求消息头名称功能服务器的主机地址声明当前请求能够接受的媒体类型当前请求来源页面的地址请求体内容的长度请求体的内容类型这一项的具体值是媒体类型中的某一种浏览器访问服务器时携带的数据请求体三种情况方式没有请求体但是有一个方式有请求体格式有请求体响应响应行响应头响应体响应行包含三个信息协议状态响应码响应状态响应头包含了服务器的信息服务器发送给浏览器的信息内容的媒体类型编码内容长度等响应体响应的实际的内容会话是无状态的无状态如果有两个请求发送过来服务器无法区分这两个请求是否是同一个用户发送过来的通过会话跟踪技术来解决这个问题给这个会话一个标识通过这个标识来判断是否是同一个用户会话跟踪技术客户端第一次发请求给服务器服务器获取获取不到则创建新的然后响应给客户端下次客户端给服务器法请求的时候会把带给服务器服务器通过判断这次会话和那一次的是同一个用户常用获取当前会话没有则创建一个新的会话作用和上面的一样获取当前会话没有则返回获取判断当前是否是第一次访问的非激活间隔时长默认秒强制性会话立即失效保存作用域保存作用域是和具体的某一个对应的作用域就是本内部常用的服务器内部转发以及客户端重定向服务器内部转发当浏览器向服务器请求的时候服务器内部的直接跳转到中执行最终浏览器请求接受的是但实际处理的确实一次请求相应的过程对于客户端而言内部经过了多少次的转发客户端并不知晓地址栏的并不会改变客户端重定向当浏览器向服务器发送请求的时候服务器内部的返回给浏览器让浏览器去请求然后浏览器在从新请求多次请求相应的过程对于客户端而言知道变化了几次地址栏的会发生改变视图模板技术添加的包新建一个类获取对象创建解析器对象给解析器对象设置参数是默认模式明确设置是为了代码更容易理解设置前缀设置后缀设置缓存过期时间毫秒设置是否缓存设置服务器端编码方式创建模板引擎对象给模板引擎对象设置模板解析器设置响应体内容类型和字符集创建对象处理模板数据在文件中添加配置前缀后缀在上下文参数中配置视图前缀和视图后缀使我们的继承名称空间表达式语法修改标签文本值代码示例标签体新值标签体原始值作用不经过服务器解析直接用浏览器打开文件看到的是标签体原始值经过服务器解析引擎根据属性指定的标签体新值去替换标签体原始值字面量字面量是一个经常会遇到的概念我们可以对照变量来理解它的含义是变量是字面量变量变量名字符串本身不是它的值它指向的才是它的值字面量它就是字面上的含义我们从字面上看到的直接就是它的值现在我们在属性中使用的就是字面量它不指代任何其他值修改指定属性值代码示例文本框新值文本框旧值语法任何标签原有的属性前面加上就都可以通过来设定新值解析地址基本语法代码示例标签体原始值经过解析后得到所以的作用是在字符串前附加上下文路径这个语法的好处是实际开发过程中项目在不同环境部署时应用的名字有可能发生变化所以上下文路径不能写死而通过动态获取上下文路径后不管怎么变都不怕啦首页使用地址解析如果我们直接访问本身那么是不需要通过当然也不经过模板引擎所以上的的任何表达式都不会被解析解决办法通过访问这样就可以让模板引擎渲染页面了进一步的好处通过上面的例子我们看到所有和业务功能相关的请求都能够确保它们通过来处理这样就方便我们统一对这些请求进行特定规则的限定给地址后面附加请求参数参照官方文档说明直接执行表达式代码页面代码有转义效果无转义效果执行效果有转义效果无转义效果基本语法访问域对象域对象请求域在请求转发的场景下我们可以借助对象内部给我们提供的存储空间帮助我们携带数据把数据发送给转发的目标资源请求域对象内部给我们提供的存储空间会话域应用域在我们使用的视图是的时候域对象有个请求域会话域应用域所以在的使用背景下我们可以说域对象有个现在使用了没有在中将数据存入属性域操作请求域中代码表达式操作会话域中代码通过对象获取对象存入数据表达式这里显示会话域数据操作应用域中代码通过调用父类的方法获取对象存入数据表达式这里显示应用域数据获取请求参数具体来说我们这里探讨的是在页面上模板页面获取请求参数底层机制是一个名字一个值页面代码这里替换为请求参数的值页面显示效果一个名字多个值页面代码这里替换为请求参数的值页面显示效果如果想要精确获取某一个值可以使用数组下标页面代码这里替换为请求参数的值这里替换为请求参数的值页面显示效果分支与迭代分支和让标记了的标签根据条件决定是否显示示例的实体类示例的代码创建对象并填充将集合数据存入请求域调用父类方法渲染视图示例的代码员工编号员工姓名员工工资抱歉没有查询到你搜索的数据有数据有数据配合关键词和配合原表达式效果是一样的看自己的喜好测试银牌会员金牌会员白金会员钻石会员迭代测试员工编号员工姓名员工工资抱歉没有查询到你搜索的数据遍历出来的每一个元素的名字要遍历的集合在迭代过程中可以参考下面的说明使用迭代状态测试员工编号员工姓名员工工资迭代状态抱歉没有查询到你搜索的数据遍历出来的每一个元素的名字要遍历的集合保存作用域远视情况下保存作用域有四个页面级别几乎不用一起请求响应范围一次回话范围一次应用程序范围只能保留一次请求可以保留多次请求但是只局限于同一个换浏览器就不行了可以保留多次请求贯穿于整个服务器之间换浏览器也能获取到参数路径问题相对路径和绝对路径绝对路径路径这个就是绝对路径优化减少数量未优化前一个客户端对着多个同类的客户端对应着的都是相关的项目结构优化后客户端只对应着一个同类项目结构如果是空的话则默认是通过反射获取所有方法判断我们传进来的参数是那个一方法获取参数名设置编码判断是查询操作初始化查询参数判断是否是查询操作如果是的话获取查询参数将查询参数添加到中判断上一次查询参数是否为空如果是空的话则设置成防止出现问题如果不是空的话则获取初始化分页为第一页获取是第几页获取获取连接判断前端是否传过来如果传过来了的话则将参数化为整形如果前端没有传过来的话表明是第一次访问则计算一下总页数将放到中获取将放置到中通过渲染到页面添加我们在执行项目的时候需要些很多的例如上面的等等但是这又出现一个问题我们在访问的时候需要访问不同的这时候我们可以创建一个控制器让网页中所有的请求都经过这个控制器然后通过这个控制器来分析请求的网址并对应上各自的所以我们需要实现类这里有个坑我们在使用完中央控制器之后原本的类里面的父类中的便不会被调用因为我们删掉了原本类的注册信息所以不会再执行中的方法需要我们手动给他执行创建存储访问对象和的加载关联文件定义工厂使应用程序能够获得从文档生成对象树的解析器传感对象创建对象获取对象获取中所有的节点获取对象如果该节点等于元素节点的话将对象强转为元素我们需要其中的一些方法获取中元素的中属性名为的值获取中元素中属性名为的值创建对应的对象获取到通过反射手动调用的方法重写服务方法设置编码获取访问的网址就是上面的从网址中提取出第一步先提取出获取最后出现的索引位置切分字符串获取通过文件将和联系起来通过中的属性我们可以获取到对应网址的对象对象获取这个类中的所有方法并匹配判断是否为空如果为空的话则赋予默认值获取当前类中的所有方法依次遍历判断是否是这次请求的方法获取方法名判断是否和这次请求的方法名相同如果相同的话通过反射调用这个方法即可中改动的地方添加一个调用父类的方法手动调用方法中改动的地方将改成带参数的了将里面的方法改成了参数获取对象创建解析器对象给解析器对象设置参数是默认模式明确设置是为了代码更容易理解设置前缀设置后缀设置缓存过期时间毫秒设置是否缓存设置服务器端编码方式创建模板引擎对象给模板引擎对象设置模板解析器设置响应体内容类型和字符集创建对象处理模板数据减少里面的相同代码减少跳转代码我们发现里面每一个方法都需要跳转或者重定向到其他方法或页面中我们可以把这一部分提取出来放到中央控制器中来进行统一的跳转通过返回值来确定跳转的地方设置编码判断是查询操作初始化查询参数判断是否是查询操作如果是的话获取查询参数将查询参数添加到中判断上一次查询参数是否为空如果是空的话则设置成防止出现问题如果不是空的话则获取初始化分页为第一页获取是第几页获取获取连接判断前端是否传过来如果传过来了的话则将参数化为整形如果前端没有传过来的话表明是第一次访问则计算一下总页数将放到中获取将放置到中通过渲染到页面创建存储访问对象和的这里一定要调用一下父类方法父类里面初始化加载关联文件定义工厂使应用程序能够获得从文档生成对象树的解析器传感对象创建对象获取对象获取中所有的节点获取对象如果该节点等于元素节点的话将对象强转为元素我们需要其中的一些方法获取中元素的中属性名为的值获取中元素中属性名为的值创建对应的对象重写服务方法设置编码获取访问的网址就是上面的从网址中提取出第一步先提取出获取最后出现的索引位置切分字符串获取通过文件将和联系起来通过中的属性我们可以获取到对应网址的对象对象获取这个类中的所有方法并匹配判断是否为空如果为空的话则赋予默认值获取当前类中的所有方法依次遍历判断是否是这次请求的方法获取方法名判断是否和这次请求的方法名相同如果相同的话通过反射调用这个方法即可执行我们特定的方法通过返回值来判断该方法需要跳转的方式如果返回值是以开头的话减少参数代码这里有个前提是我们需要使用以上的版本因为有一个新特性就是我们在通过反射获取对应类中的参数名的时候不再显示具体设置方法添加参数即可在中设置参数将中所有的都去掉换成参数传进去初始化查询参数判断是否是查询操作如果是的话获取查询参数将查询参数添加到中判断上一次查询参数是否为空如果是空的话则设置成防止出现问题如果不是空的话则获取获取连接判断前端是否传过来如果前端没有传过来的话表明是第一次访问则计算一下总页数将放到中获取将放置到中通过渲染到页面设置编码获取访问的网址就是上面的从网址中提取出第一步先提取出获取最后出现的索引位置切分字符串获取通过文件将和联系起来通过中的属性我们可以获取到对应网址的对象对象获取这个类中的所有方法并匹配判断是否为空如果为空的话则赋予默认值获取当前类中的所有方法依次遍历判断是否是这次请求的方法获取方法名判断是否和这次请求的方法名相同如果相同的话通过反射调用这个方法即可通过反射获取其中所有参数创建实际参数列表遍历整个参数获取参数名判断特殊情况参数类型转换执行我们特定的方法通过返回值来判断该方法需要跳转的方式如果返回值是以开头的话最初的做法是同类的请求对应着不同的那么如果类多了起来的话那么将会特别多我们将同类的合并到一个中例如关于的增删改查都放到中通过来获取我们要执行的那个方法我们在通过获取需要执行的的函数的时候需要通过来进行依次匹配那么如果我们需要增加方法的话的代码还需要更改这时候就很不方便我们通过反射来获取对应的中的所有方法通过反射调用对应的的方法前提是需要和方法名相同再进一步我们发现如果有很多不同的类例如等等我们每一个类都需要进行反射来获取对应的方法并通过反射调用这时候未免显得有些代码冗余我们通过中央控制器来统一调用反射主要需要实现两部分功能通过我们访问的网址获取对应的类从中提取到我们需要访问的类的别名例如从这个网址中获取到将和对应起来通过通过技术获取到里面的对应关系通过设置这个标签将和类联系起来文件包含三个部分声明必须有且在第一行文档类型定义正文调用组件的方法获取参数通过获取到该方法中的所有参数通过获取到所有的参数名称通过获取到所有的参数类型用来强转执行方法视图处理通过返回来来确定该网页需要跳转到哪一步实现初始化方法生命周期实例化初始化服务销毁中初始化方法有两个如果想要在初始化的时候进行一些操作我们可以重写空参的方法我们可以在配置的时候配置初始化参数也可以通过注解的方式进行配置可以通过以下方法获取初始化参数获取对象获取初始化参数值学习中的和获取的方法在初始化方法中在服务方法中获取初始化值设置初始化值什么是业务层和模型视图控制器视图层用于做数据展示和用户交互的一个界面控制层用于接受客户端请求具体的业务功能还是借助模型来实现的模型层模型分为很多种有比较简单的有业务层组件有数据访问组件值对象对应数据库里面一中类数据访问对象业务对象区别业务对象和数据访问对象中的方法称之为单精度方法或称之为细粒度方法什么是单精度方法一个方法只考虑一个操作比如添加就是中的方法属于业务方法实际的业务比较复杂因此业务方法比较粗例如注册功能注册功能属于业务功能也就是说注册这个方法属于业务方法这个业务方法中包括了多个方法需要多个方法组合来完成注册功能注册检查用户名是否已经被注册中的操作向用户表添加一条记录中的操作向用户积分表添加一条记录中的操作在库存系统中添加业务层组件实现接口获取指定页面的库存信息添加库存记录信息根据查看指定库存记录删除特定库存记录获取总页数更新库存记录实现类初始化查询参数判断是否是查询操作如果是的话获取查询参数将查询参数添加到中判断上一次查询参数是否为空如果是空的话则设置成防止出现问题如果不是空的话则获取判断前端是否传过来如果前端没有传过来的话表明是第一次访问则计算一下总页数将放到中获取将放置到中通过渲染到页面实现耦合依赖指的是一个类依靠另一个类即一个类中有另一个类的实例如果另一个类消失的话那么这个类也就不能使用在软件系统中层与层之间是存在依赖的我们也称为耦合在系统架构或者是设计的一个原则是高内聚低耦合层内部的组成应该是高度聚合的而层与层之间的关系应该是低耦合的最理想的情况是耦合我们想要做到的当下层删除之后上层不会报错例如删除之后不会报错实现方法为什么下一层删除之后上一层会报错因为里面有这样一条代码它的成功编译就是依赖于是存在的解决问题我们将代码改成这样删除之后就不会报错但是者会出现一个新的问题我们下面代码在使用这个属性的时候会报错我们还需要给他赋值赋值方法我们可以创建一个容器将上面所需要的类都放在容器里面需要的时候直接取出来即可我么可以通过文件创建一个容器通过读取文件赋值通过设置这个标签将和类联系起来文件包含三个部分声明必须有且在第一行文档类型定义正文我们先创建一个接口写入方法在创建它的实现类实现这个方法通过获取这个类的对象加载关联文件定义工厂使应用程序能够获得从文档生成对象树的解析器传感对象创建对象获取对象获取中所有的节点的实例获取对象如果该节点等于元素节点的话将对象强转为元素我们需要其中的一些方法获取中元素的中属性名为的值获取中元素中属性名为的值创建对应的对象现在我们已经拥有了我们所需要的对象的容器那么现在我们如何给我们上面所设置的的属性赋值那还是通过指明赋值对象通过设置这个标签将和类联系起来中需要给赋值其中表示中的属性值表示给这个属性赋值的容器里面的对象文件包含三个部分声明必须有且在第一行文档类型定义正文实现通过代码实现他们之间的关联文件本身就是一个节点其中还包括空节点元素节点文本节点我门在上面已经获取到了所有的节点中的类的实例现在我们要做的就是将他们之间的关系依照文件中所述的将他们关联起来判断子节点的类型是不是类型的因为子节点中可能含有多种类型的节点例如空节点文本类型节点获取标签里面的元素获取对应的实例获取我们需要赋值的元素的属性控制反转和依赖注入控制反转在之前中我们创建对象的时候在内部有一个成员变量是如果这行代码出现在方法内部的话那么这个的作用域生命周期就是这个方法级如果出现在类中那么的作用域就是实例级别我们在中定义了然后通过解析产生存放在这个存在于中因此我们改变了之前的实例实例等等他们的生命周期存放到了中控制权从程序员转换到了中这个被称为容器依赖注入之前控制层出现代码这行代码表明控制层和层存在耦合之后我们将代码改成然后在配置文件中配置过滤器从客户端发来的请求都要经过过滤器的处理然后才能到达层过滤器中必须有放行否则过滤器会一直拿着请求不穿送给层等处理完请求要返回的时候还是需要经过过滤器然后才能到达客户端实现方法请求过来的时候需要执行的代码放行请求回去的时候执行的代码配置文件也属于规范开发步骤新建类实现接口然后实现其中三个方法配置可以使用注解也可以使用文件在配置的时候和一样也可以使用通配符例如表示拦截所有以结尾的请求过滤器链如果采用的是注解的方式进行配置那么过滤器拦截的先后顺序是按照全类名的先后顺序来排序的如果采用的是的方式进行配置那么按照配置的先后顺序进行排序事务事务的本质就是将多个事件绑到一起要么同时成功要么同时回滚我们需要设置自动提交为让我们手动的给他提交方式一在层设置事务但是这样出现的情况会出现成功失败成功那么这样我们无法确定是否成功进行所以我们不能再层设置事务我们需要在层设置将多个绑定在一起要么同时成功要么同时回滚方式二在层使用事务方式三在过滤器层使用我们需要使用同一个才能够将层中的对象绑定到一起实现过滤器开启事务提交回滚事务事务管理创建获取连接通过配置文件来进行获取参数创建一个类来进行分析配置文件获取配置文件中的内容加载驱动获取连接获取连接有两个主要方法称之为本地线程我们可以通过方法在当前线程上存储数据通过方法在当前线程上访问数据源码分析在内部在调用的重写的方法并将当前线程当成参数传递进去获取当前线程的每一个线程都有自己的通过不同的参数获取不同的如果不支持的话则报错如果不等于空的话向中设置键值对我们传进来的参数为什么使用作为参数因为一个线程对应着一个但是可能对应着多个例如类的类的所以我们需要使用作为参数如果不存在的话则创建一个并将线程参数和我们穿进去的参数一并传入源码分析我们先调用这个方法将当前线程作为参数传递进去获取当前线程维护的如果不为空的话如果不支持的话则初始化值通过获取当前对应的模块返回对应的值监听器监听器专门用于对其他对象身上发生的事件或状态改变进行监听和相应处理的对象当被监视的对象发生情况时立即采取相应的行动监听器规范中定义的一种特殊类它用于监听应用程序中的和等域对象的创建与销毁事件以及监听这些域对象中的属性发生修改的事件监听对象的创建和销毁过程监听对象的创建和销毁过程监听对象的创建和销毁过程创建的时候调用销毁的时候调用监听中属性的创建修改和销毁添加属性的时候调用移除属性的时候调用属性修改的时候调用监听中属性的创建修改和销毁添加属性的时候调用移除属性的时候调用属性修改的时候调用监听中属性的创建修改和销毁添加属性的时候调用移除属性的时候调用属性修改的时候调用监听某个对象在域中的创建与移除该实例被放到域中时调用该类实例被从中移除的时候调用监听对象在中的序列化与反序列化该类实例和一起钝化到硬盘的时候调用该类实例和一起活化到内存的时候调用创建配置使用标签配置使用配置文件配置熟悉业务需求用户登录登录成功显示主界面左侧显示好友列表上端显示欢迎词如果不是自己的空间显示超链接返回自己的空间下端显示日志列表查看日志详情日志本身的信息作者头像昵称日志标题日志内容日志的日期回复列表回复者的头像昵称回复内容回复日期主人回复信息删除日志删除特定回复删除特定主人回复添加日志添加回复添加主人回复点击左侧好友链接进入好友的空间数据库设计抽取实体用户登录信息用户详情信息日志回贴主人回复分析其中的属性用户登录信息账号密码头像昵称用户详情信息真实姓名星座血型邮箱手机号日志标题内容日期作者回复内容日期作者日志主人回复内容日期作者回复分析实体之间的关系用户登录信息用户详情信息用户日志日志回复回复主人回复用户好友数据库的范式第一范式列不可再分第二范式一张表只表达一层含义只描述一件事情第三范式表中的每一列和主键都是直接依赖关系而不是间接依赖数据库设计的范式和数据库的查询性能很多时候是相悖的我们需要根据实际的业务情况做一个选择查询频次不高的情况下我们更倾向于提高数据库的设计范式从而提高存储效率查询频次较高的情形我们更倾向于牺牲数据库的规范度降低数据库设计的范式允许特定的冗余从而提高查询的性能登录功能实现出现的四个错误没修改用的还是和页面没有样式同时数据也不展示原因是我们是直接去请求的静态页面资源那么并没有执行也就是没有起作用之前的表单也是这个原因解决方法新增添加方法目的是执行方法让生效昨日内容页面显示登录者昵称判断是否是自己的空间显示登录者昵称判断是否是自己的空间如果不是期望的效果首先考虑将两者的都显示出来点击左侧的好友链接进入好友空间根据获取指定信息查询这个的然后覆盖对应的页面应该展示中的而不是中的跳转后在左侧中显示整个页面问题在页面显示整个布局解决给超链接添加属性保证在顶层窗口显示整个页面页面需要修改欢迎进入页面的返回自己空间的超链接需要修改日志详情页面实现已知的需要根据的获取特定获取这个关联的所有的回复如果某个回复有主人回复需要查询出来在中获取指定的具体这个中关联多少个由内部实现获取到的中的只有那么需要在的方法中封装在查询本身信息时同时调用中的获取方法给属性赋值同理在类中也有而且这个也是只有那么我们也需要根据查询得到最后设置关联添加回复删除回复如果回复有关联的主人回复需要先删除主人回复删除回复我们在删除回复表记录时发现删除失败原因是在主人回复表中仍然有记录引用待删除的回复这条记录如果需要删除主表数据需要首先删除子表数据删除日志删除日志首先需要考虑是否有关联的回复删除回复首先需要考虑是否有关联的主人回复另外如果不是自己的空间则不能删除日志今日内容日期和字符串之间的格式化中使用这个公共的内置对象系统启动时我们访问的页面是为什么不是答如果是后者那么属于直接访问静态页面那么页面上的表达式标签浏览器是不能识别的我们访问前者的目的其实就是要执行中的访问这个执行的过程是什么样的答协议拦截解析处理字符串将拿到这个字符串然后去容器中寻找的那个对象获取的值因此得知应该执行中的方法中的方法定义如下在中获取请求参数参数名是参数值是因此方法的参数值会被赋上然后给谁因为的方法是通过反射调用的因此字符串返回给接收到返回值然后处理视图目前处理视图的方式有两种带前缀不带前缀当前返回不带前缀那么执行此时中的方法会执行效果是在这个字符串前面拼接其实就是配置文件中配置的值在这个字符串后面拼接其实就是配置文件中配置的值最后进行服务器转发目前我们进行项目开发的套路是这样的拷贝包新建配置文件或者可以不叫这个名字在中指定文件名在文件中配置配置前缀和后缀这样引擎就可以根据我们返回的字符串进行拼接再跳转配置监听器要读取的参数目的是加载容器的配置文件也就是开发具体的业务模块一个具体的业务模块纵向上由几个部分组成页面类接口和实现类接口和实现类控制器组件如果页面有表达式一定不能够直接访问必须要经过在中配置以及三者之间的依赖关系实现类中继承然后实现具体的接口需要注意后面的泛型不能写错例如是业务控制类这一层我们只需要记住一点业务逻辑我们都封装在这一层不要分散在层也不要出现在层我们需要保证方法的单精度特性当某一个业务功能需要使用其他模块的业务功能时尽量的调用别人的而不是深入到其他模块的细节类的编写规则在中配置那么用户在前端发请求时对应的就是其中的就是对应此处的的值在中设计的方法名需要和的值一致因此我们的登录验证的表单如下在表单中组件的属性和中方法的参数名一致另外需要注意的是中的方法中的参数不一定都是通过请求参数获取的直接赋值此处才是从的请求参数中获取中步骤大致分为从作用域获取容器解析在容器中寻找对应的组件准备指定的方法所要求的参数调用指定的方法接收到执行指定的方法的返回值对返回值进行处理视图处理为什么能够从作用域获取到容器在容器启动时会执行初始化任务而它的操作就是解析的配置文件创建一个一个的组件并完成组件之间依赖关系的注入将容器保存到作用域修改让其支持文件以及数据源连接池讲解了两种方式直接自己配置然后读取然后加载驱动使用连接池技术那么中的是有要求的项目源码和的区别与联系共同之处和都是用来跟踪浏览器用户身份的会话方式工作原理的工作原理浏览器端第一次发送请求到服务器端服务器端创建该中包含用户的信息然后将该发送到浏览器端浏览器端再次访问服务器端时会携带服务器端创建的服务器端通过中携带的数据区分不同的用户的工作原理浏览器端第一次发送请求到服务器端服务器端创建一个同时会创建一个特殊的为的固定值为对象的然后将该发送至浏览器端浏览器端发送第次请求到服务器端浏览器端访问服务器端时就会携带该为的对象服务器端根据为的的去查询对象从而区分不同用户为的不存在关闭或更换浏览器返回中重新去创建与特殊的为的存在根据中的去寻找对象为不存在对象默认存活分钟返回中重新去创建与特殊的为存在返回对象区别数据保存在客户端数据保存在服务端简单的说当你登陆一个网站的时候如果服务器端使用的是那么所有的数据都保存在服务器上客户端每次请求服务器的时候会发送当前会话服务器根据当前判断相应的用户数据标志以确定用户是否登陆或具有某种权限由于数据是存储在服务器上面所以你不能伪造是服务器和客户端连接时候随机分配的如果浏览器使用的是那么所有数据都保存在浏览器端比如你登陆以后服务器设置了用户名那么当你再次请求服务器的时候浏览器会将用户名一块发送给服务器这些变量有一定的特殊标记服务器会解释为变量所以只要不关闭浏览器那么变量一直是有效的所以能够保证长时间不掉线区别对比数据存放在客户的浏览器上数据放在服务器上不是很安全别人可以分析存放在本地的并进行欺骗如果主要考虑到安全应当使用会在一定时间内保存在服务器上当访问增多会比较占用你服务器的性能如果主要考虑到减轻服务器性能方面应当使用单个在客户端的限制是就是说一个站点在客户端存放的不能所以将登陆信息等重要信息存放为其他信息如果需要保留可以放在中创建创建客户端对象在客户端保存设置有效时长设置有效时长为秒的应用记住用户名和密码几天几天免登陆当用户访问某个页面的时候服务器端可以从中获取用户名和密码并获取用户上一次是否选择了免登陆如果选择了则直接登录验证码引入包配置在页面上的标签中引入我们配置的图片验证码中的各个参数属性在中在生成验证码图片的时候同时会将验证码信息保存到中在上面的类中有写正则表达式使用三步骤定义正则表达式对象定义待校验的字符串校验创建正则表达式对象对象形式正则表达式当正则表达式中有那么就使用这种直接量形式正则表达式一般使用这种声明方式正则表达式入门案例模式验证校验字符串中是否包含字母正则对象目标字符串寻找目标字符串中是否含有正则对象如果含有的话返回否则返回创建一个最简单的正则表达式对象创建一个字符串对象作为目标字符串调用正则表达式对象的方法验证目标字符串是否满足我们指定的这个模式返回结果字符串中是否包含正则表达式的匹配模式全局查找匹配读取读取字符串中的所有方法获取我们匹配成功的字符串放到数组中并返回通过给正则表达式后面添加一个来表示全局搜索匹配读取读取一个字符串中的所有字母表示全文查找如果不使用那么就只能查找到第一个匹配的内容编写一个正则表达式使用正则表达式去读取字符串忽略大小写在正则表达式后面添加一个来表示忽略大小写目标字符串没有使用忽略大小写的正则表达式获取全部匹配数组长度为遍历数组仅得到多行查找不使用多行查找模式目标字符串中不管有没有换行符都会被当作一行在正则表达式后面添加一个表示多行查找正则表达式中在最后添加一个表明要查询以此正则表达式结尾字符串目标字符串匹配以结尾的正则表达式使用了多行匹配元字符在正则表达式中被赋予特殊含义的字符不能被直接当做普通字符使用如果要匹配元字符本身需要对元字符进行转义转义的方式是在元字符前面加上例如常用元字符代码说明匹配除换行字符以外的任意字符匹配字母或数字或下划线等价于匹配任何非单词字符等价于匹配任意的空白符包括空格制表符换页符等等等价于匹配任何非空白字符等价于匹配数字等价于匹配一个非数字字符等价于匹配单词的开始或结束匹配字符串的开始但在中使用表示取反匹配字符串的结束例子一匹配任意空白字符匹配全部空格将空格替换为例子二表示匹配数组表示匹配多个字符今年是年匹配至少一个数字今年是年例子三表示匹配以开头的字符匹配以开头例子四表示匹配以结尾的字符匹配以结尾字符集合语法格式示例说明字符列表正则表达式含义目标字符串包含中的任何一个字符目标字符串是否匹配是原因中的在列表中目标字符串中任何一个字符出现在字符列表中就算匹配字符列表含义目标字符串包含以外的任何一个字符目标字符串是否匹配是原因中包含匹配字符列表中未包含的任意字符字符范围正则表达式含义所有小写英文字符组成的字符列表正则表达式含义所有大写英文字符组成的字符列表匹配指定范围内的任意字符正则表达式表示范围表示至匹配中的任何一个出现次数代码说明出现零次或多次出现一次或多次出现零次或一次出现次出现次或多次出现到次在正则表达式中表达或者使用符号目标字符串匹配或了解第一步客户端发送异步请求并绑定对结果处理的回调函数定义方法创建对象对象操作步骤设置回调发送请求在回调函数中需要判断对象的状态未初始化还没有调用方法载入已调用方法正在发送请求载入完成方法执行完成已经接收到全部响应内容交互正在解析响应内容完成响应内容解析完成可以在客户端调用了第二步服务器端做校验然后将校验结果响应给客户端代码设置回调函数发送请求用户名已经被注册了用户名可以使用服务器端代码用可以注册用户不可以注册了解绑定数据绑定数据找到为的标签在下面的替换为下面数据绑定数据找到为的标签在下面的替换为下面数据你好通过来绑定对应的属性通过来绑定对应的属性绑定数据找到为的标签在下面的替换为下面数据你好通过来绑定对应的属性通过来绑定对应的属性通过可以省略通过来绑定对应的属性如果我们这个标签里面的值发生变化的话那么对象中的也会发生变化可以省略去除首位空标签使用和来进行标签的显隐并且和之间不能有其他的节点如果不成立的话则该标签就直接删除了找到为的标签文本标签如果偶数的话才显示标签成立不成立使用来控制标签的显隐如果表达式不成立的话改标签不会消失而是会加上一个的数据找到为的标签文本标签成立列表渲染循环遍历数据苹果苹果很好吃香蕉香蕉很好吃菠萝菠萝很好吃西瓜西瓜很好吃名称单价库存备注事件驱动标签反转字符串表示绑定点击事件可以省略不写编程反转侦听属性当属性改变的时候触发这个方法生命周期对象创建之前对象创建之前对象创建之后对象创建之后数据装载之前数据装载之前数据装载之后数据装载之后数据更新之前数据更新之后改变的值是一个的框架简化的操作操作步骤添加文件客户端向服务器异步发送普通参数值基本格式示例配置参数成功的情况失败的情况示例客户端向服务器端异步发送普通参数值文件提交服务器端文件示例二客户端向服务器端发送格式的数据我们只需要将改为即可提交示例三服务器端接受处理并返回给客户端格式的代码服务器端可以通过函数来进行读取客户端传来的格式的代码服务器端可以通过来将客户端传来的格式的代码转换为对象也可以将对象转换成的格式服务器端代码有两个常用的将字符串转换成对象将转换成对象客户端代码提交处理书城第一阶段未使用和渲染的第二阶段使用和渲染的',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-02-20 22:40:49',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mycss.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 7.1.1"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://s1.ax1x.com/2022/11/27/zUFla6.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://262259.xyz/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://262259.xyz/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">管理</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://qexo.262259.xyz/" title="博客后端"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://unpkg.com/qexo-static@1.4.0/assets/img/brand/qexo.png" alt="博客后端"/><span class="back-menu-item-text">博客后端</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Nuyoah</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://s2.loli.net/2022/08/16/weL31EHsON5ldDU.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/08/16/weL31EHsON5ldDU.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s2.loli.net/2022/08/16/2yRjVx9gFKQaidA.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/08/16/2yRjVx9gFKQaidA.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Gitee/" style="font-size: 1.05rem;">Gitee<sup>1</sup></a><a href="/tags/JAVA/" style="font-size: 1.05rem; font-weight: 500; color: var(--anzhiyu-lighttext)">JAVA<sup>5</sup></a><a href="/tags/JS/" style="font-size: 1.05rem;">JS<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>7</sup></a><a href="/tags/Spring/" style="font-size: 1.05rem;">Spring<sup>2</sup></a><a href="/tags/hexo/" style="font-size: 1.05rem;">hexo<sup>4</sup></a><a href="/tags/win10/" style="font-size: 1.05rem;">win10<sup>1</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/" style="font-size: 1.05rem;">个人日记<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 1.05rem;">人工智能<sup>15</sup></a><a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 1.05rem;">工作<sup>3</sup></a><a href="/tags/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E4%BA%8E%E9%80%BB%E8%BE%91/" style="font-size: 1.05rem;">数字电路于逻辑<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/" style="font-size: 1.05rem;">算法实现<sup>12</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">计算机基础<sup>13</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/JAVA/" itemprop="url">JAVA</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/JAVA/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JAVA</span></a></span></div></div><h1 class="post-title" itemprop="name headline">JavaWeb</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-01-22T02:38:00.000Z" title="发表于 2023-01-22 10:38:00">2023-01-22</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-02-20T14:40:49.503Z" title="更新于 2023-02-20 22:40:49">2023-02-20</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">34.6k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>151分钟</span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为石家庄"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>石家庄</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://s2.loli.net/2022/11/21/Sm8lFrjtzUkihVy.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://262259.xyz/2023/01/22/JavaWeb/"><header><a class="post-meta-categories" href="/categories/JAVA/" itemprop="url">JAVA</a><a href="/tags/JAVA/" tabindex="-1" itemprop="url">JAVA</a><h1 id="CrawlerTitle" itemprop="name headline">JavaWeb</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Nuyoah</span><time itemprop="dateCreated datePublished" datetime="2023-01-22T02:38:00.000Z" title="发表于 2023-01-22 10:38:00">2023-01-22</time><time itemprop="dateCreated datePublished" datetime="2023-02-20T14:40:49.503Z" title="更新于 2023-02-20 22:40:49">2023-02-20</time></header><h1 id="html"><a class="markdownIt-Anchor" href="#html"></a> HTML</h1>
<h2 id="frameset-iframe"><a class="markdownIt-Anchor" href="#frameset-iframe"></a> frameset-iframe</h2>
<h3 id="frameset"><a class="markdownIt-Anchor" href="#frameset"></a> frameset</h3>
<p>作用：如果一个网页中包含很多个子网页，我们可以使用frameset来进行区分</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 如果里面有多个页面的话采用frameset标签， row是按行分割，clos是按列分割 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">frameset</span> <span class="attr">row</span>=<span class="string">&quot;20%,*&quot;</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">&quot;top.html&quot;</span> /&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">frameset</span> <span class="attr">clos</span>=<span class="string">&quot;15%,*&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">&quot;left.html&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">frameset</span> <span class="attr">row</span>=<span class="string">&quot;80%, *&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">&quot;main.html&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">&quot;bottom.html&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="iframe"><a class="markdownIt-Anchor" href="#iframe"></a> iframe</h3>
<p>在页面中嵌入一个页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        &quot;页面&quot;<span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;top.html&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="css"><a class="markdownIt-Anchor" href="#css"></a> CSS</h1>
<h2 id="盒子模型"><a class="markdownIt-Anchor" href="#盒子模型"></a> 盒子模型</h2>
<p>IE 浏览器：实际尺寸 = width</p>
<p>chrome浏览器：实际尺寸 = width+左右borderwidth + padding</p>
<p>css盒子模型：</p>
<ol>
<li>
<span class='p red'>border</span> 边框
</li>
<li>
<mark class="hl-label red">margin</mark>  间距
</li>
<li>
<mark class="hl-label red">padding</mark>  填充
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-id">#div1</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>:<span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">height</span>:<span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">background-color</span>:green;</span></span><br><span class="line"><span class="language-css">                <span class="comment">/* 边框样式 */</span></span></span><br><span class="line"><span class="language-css">                <span class="attribute">border-width</span>:<span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">border-style</span>:dotted; <span class="comment">/* 边框样式：solid(实线)， dotted(点状线) */</span></span></span><br><span class="line"><span class="language-css">                <span class="attribute">border-color</span>:blue;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span></span><br><span class="line">            <span class="symbol">&amp;nbsp;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="css-布局"><a class="markdownIt-Anchor" href="#css-布局"></a> CSS 布局</h2>
<ol>
<li>absolute和relative都会使元素脱离文档流，但不同的是，absolute脱离文档流后不会占用原来的位置，而relative会在原来的位置上留下一个副本占用原来文档流的位置</li>
<li>absolute的<span class='p red'>父元素设有position时</span>，top,left,bottom,right会<span class='p red'>忽略父级元素</span>的padding值，即始终与父级元素的<span class='p red'>左上角进行定位</span>，且其层级会始终比父级高，无论父级设置多大的z-index，但relative的定位会受父元素padding值影响</li>
<li>
<span class='p red'>absolute是以第一个设置了position的父元素或祖先元素进行定位</span>，<span class='p red'>而relative定位的层总是相对于其最近的父元素</span>，无论其父元素是何种定位方式
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-id">#div1</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">height</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">background-color</span>:green;</span></span><br><span class="line"><span class="language-css">                <span class="comment">/* 位置 */</span></span></span><br><span class="line"><span class="language-css">                <span class="comment">/* 绝对定位：相对于父级第一个设置了position属性进行定位 */</span></span></span><br><span class="line"><span class="language-css">                <span class="attribute">position</span>:absolute;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">left</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">top</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="selector-id">#div2</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">height</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">background-color</span>:pink;</span></span><br><span class="line"><span class="language-css">                <span class="comment">/* 位置 */</span></span></span><br><span class="line"><span class="language-css">                <span class="comment">/* 相对定位： 设置为相对定位的元素框会偏移某个距离。元素仍然保持其未定位前的形状，它原本所占的空间仍保留。 */</span></span></span><br><span class="line"><span class="language-css">                <span class="attribute">position</span>:relative;</span></span><br><span class="line"><span class="language-css">                </span></span><br><span class="line"><span class="language-css">                <span class="attribute">top</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div2&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>:relative;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#div_top</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>:<span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>:orange;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#div_left</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>:<span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>:green;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#div_main</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>:yellow;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>:<span class="number">70%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#div_bottom</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>:pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>:<span class="number">10%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_top&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_left&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_main&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_bottom&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="水果库"><a class="markdownIt-Anchor" href="#水果库"></a> 水果库</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: cadetblue;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#div_container</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>:<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>:<span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: antiquewhite;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">10%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#tbl_fruit</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-style</span>: solid;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">60%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">60%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">10%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#tbl_fruit</span> <span class="selector-tag">tr</span>, <span class="selector-id">#tbl_fruit</span> <span class="selector-tag">th</span>,<span class="selector-id">#tbl_fruit</span> <span class="selector-tag">td</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>:<span class="number">1px</span> solid;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.dekImg</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;  </span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_furit_list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;tbl_fruit&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>单价<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>数量<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>小计<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>50<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>250<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\Nuyoah\Downloads\cha.png&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;dekImg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>梨<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>6<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>60<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>360<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\Nuyoah\Downloads\cha.png&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;dekImg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>7<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>70<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>490<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\Nuyoah\Downloads\cha.png&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;dekImg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>菠萝<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>8<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>640<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\Nuyoah\Downloads\cha.png&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;dekImg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>总计<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">4</span>&gt;</span>300<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="js"><a class="markdownIt-Anchor" href="#js"></a> JS</h1>
<p>javascript :客户端的一个脚本语言</p>
<p>js是一门弱类型的语言，变量的数据类型由后面赋的值的类型决定</p>
<h2 id="javascript的起源"><a class="markdownIt-Anchor" href="#javascript的起源"></a> JavaScript的起源</h2>
<p>在<span style="color:blue;font-weight:bold;">1995</span>年时，由<span style="color:blue;font-weight:bold;">Netscape</span>公司的<span style="color:blue;font-weight:bold;">Brendan Eich</span>，在网景导航者浏览器上首次设计实现而成。Netscape在最初将其脚本语言命名为LiveScript，因为Netscape与Sun合作，网景公司管理层希望蹭Java的热度，因此取名为JavaScript。</p>
<p>JavaScript总共分成三部分: ECMAScript(基本语法)、BOM(浏览器对象模型)、DOM(文档对象模型)</p>
<h2 id="javascript的特性"><a class="markdownIt-Anchor" href="#javascript的特性"></a> JavaScript的特性</h2>
<h3 id="脚本语言"><a class="markdownIt-Anchor" href="#脚本语言"></a> 脚本语言</h3>
<p>JavaScript是一种解释型的脚本语言。不同于C、C++、Java等语言先编译后执行,	JavaScript不会产生编译出来的字节码文件，而是在程序的运行过程中对源文件逐行进行解释。</p>
<h3 id="基于对象"><a class="markdownIt-Anchor" href="#基于对象"></a> 基于对象</h3>
<p>JavaScript是一种基于对象的脚本语言，它不仅可以创建对象，也能使用现有的对象。但是面向对象的三大特性：『封装』、『继承』、『多态』中，JavaScript能够实现封装，可以模拟继承，不支持多态，所以它不是一门面向对象的编程语言。</p>
<h3 id="弱类型"><a class="markdownIt-Anchor" href="#弱类型"></a> 弱类型</h3>
<p>JavaScript中也有明确的数据类型，但是声明一个变量后它可以接收任何类型的数据，并且会在程序执行过程中根据上下文自动转换类型。</p>
<h3 id="事件驱动"><a class="markdownIt-Anchor" href="#事件驱动"></a> 事件驱动</h3>
<p>JavaScript是一种采用事件驱动的脚本语言，它不需要经过Web服务器就可以对用户的输入做出响应。</p>
<h3 id="跨平台性"><a class="markdownIt-Anchor" href="#跨平台性"></a> 跨平台性</h3>
<p>JavaScript脚本语言不依赖于操作系统，仅需要浏览器的支持。因此一个JavaScript脚本在编写后可以带到任意机器上使用，前提是机器上的浏览器支持JavaScript脚本语言。目前JavaScript已被大多数的浏览器所支持。</p>
<h2 id="入门程序"><a class="markdownIt-Anchor" href="#入门程序"></a> 入门程序</h2>
<h3 id="功能效果图"><a class="markdownIt-Anchor" href="#功能效果图"></a> <strong>功能效果图</strong></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/EFNkWuhU9aAbPwZ.png" alt="img001.png" style="zoom:50%;" />
<h3 id="代码实现"><a class="markdownIt-Anchor" href="#代码实现"></a> <strong>代码实现</strong></h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS的入门程序<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在HTML代码中定义一个按钮 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;helloBtn&quot;</span>&gt;</span>SayHello<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        目标: 点击按钮的时候弹出一个警告框</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//1. 通过js代码获取到按钮对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//document代表当前HTML文档</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;helloBtn&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//2. 给获取到的btn对象绑定点击事件</span></span></span><br><span class="line"><span class="language-javascript">        btn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//弹出警告框</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;hello world&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="javascript的基本语法"><a class="markdownIt-Anchor" href="#javascript的基本语法"></a> JavaScript的基本语法</h2>
<h3 id="javascript的引入方式"><a class="markdownIt-Anchor" href="#javascript的引入方式"></a> JavaScript的引入方式</h3>
<h4 id="内部脚本方式"><a class="markdownIt-Anchor" href="#内部脚本方式"></a> 内部脚本方式</h4>
<ul>
<li>JavaScript代码要写在script标签内</li>
<li>script标签可以写在文档内的任意位置</li>
<li>为了能够方便查询或操作HTML标签（元素）script标签可以写在body标签后面</li>
</ul>
<p>在我们的入门程序中使用的就是内部脚本方式引入的JavaScript</p>
<h4 id="外部脚本方式"><a class="markdownIt-Anchor" href="#外部脚本方式"></a> 外部脚本方式</h4>
<p>在script标签内通过src属性指定外部xxx.js文件的路径即可。但是要注意以下两点：</p>
<ul>
<li>引用外部JavaScript文件的script标签里面不能写JavaScript代码</li>
<li>先引入，再使用</li>
<li>script标签不能写成单标签<br />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/bi6DXFfvSt9ApUJ.png" alt="img008.png" style="zoom:50%;" /></li>
</ul>
<p>引入方式如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS的引入方式<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        建议在head中引入外部的js文件</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/outer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        第一种引入方式: 内部引入方式，在HTML文档内部，通过script标签去编写js代码</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        第二种引入方式: 外部引入方式，在当前项目中创建一个js文件，然后在需要引入的HTML里面使用script标签引入</span></span><br><span class="line"><span class="comment">        一个script标签要么负责编写内部的js代码，要么负责引入外部的js文件</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//调用外部js文件中的方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">showMessage</span>()</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;hello world&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="声明和使用变量"><a class="markdownIt-Anchor" href="#声明和使用变量"></a> 声明和使用变量</h3>
<h4 id="javascript数据类型"><a class="markdownIt-Anchor" href="#javascript数据类型"></a> JavaScript数据类型</h4>
<ul>
<li>
<p>基本数据类型</p>
<ul>
<li>
<p>数值型number：JavaScript不区分整数、小数</p>
</li>
<li>
<p>字符串string：JavaScript不区分字符、字符串；单引号、双引号意思一样。</p>
</li>
<li>
<p>布尔型boolean：true、false</p>
<p>在JavaScript中，其他类型和布尔类型的自动转换。</p>
<p>true：非零的数值，非空字符串，非空对象</p>
<p>false：零，空字符串，null，undefined</p>
<p>例如：&quot;false&quot;放在if判断中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;false&quot;是一个非空字符串，直接放在if判断中会被当作『真』处理</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;false&quot;</span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;true&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;false&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>引用类型</p>
<ul>
<li>所有new出来的对象</li>
<li>用[]声明的数组</li>
<li>用{}声明的对象</li>
</ul>
</li>
</ul>
<h4 id="变量"><a class="markdownIt-Anchor" href="#变量"></a> 变量</h4>
<ul>
<li>
<p>关键字：var,其实ECMAScript6之后建议使用let</p>
</li>
<li>
<p>数据类型：JavaScript变量是弱类型的，可以接收任意类型的数据</p>
</li>
<li>
<p>标识符：严格区分大小写</p>
</li>
<li>
<p>变量使用规则</p>
<ul>
<li>
<p>如果使用了一个没有声明的变量，那么会在运行时报错</p>
<p>Uncaught ReferenceError: b is not defined</p>
</li>
<li>
<p>如果声明一个变量没有初始化，那么这个变量的值就是undefined</p>
</li>
</ul>
</li>
</ul>
<h3 id="函数重点"><a class="markdownIt-Anchor" href="#函数重点"></a> 函数(重点)</h3>
<h4 id="内置函数"><a class="markdownIt-Anchor" href="#内置函数"></a> 内置函数</h4>
<p>内置函数就是JavaScript中内置好的函数，我们可以直接使用</p>
<ul>
<li>弹出警告框</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;警告框内容&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>弹出确认框</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="title function_">confirm</span>(<span class="string">&quot;确定要删除吗？&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(result) &#123;</span><br><span class="line">    <span class="comment">// 执行删除</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用户点击『确定』返回true，点击『取消』返回false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="title function_">confirm</span>(<span class="string">&quot;老板，你真的不加个钟吗？&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(result) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;老板点了确定，表示要加钟&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;老板点了确定，表示不加钟&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在控制台打印日志</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;日志内容&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/vaekWZ6MRENdh89.png" alt="img009.png" /></p>
<h4 id="声明函数"><a class="markdownIt-Anchor" href="#声明函数"></a> 声明函数</h4>
<p>声明函数就是使用者自己定义一个函数，它有两种写法:</p>
<p>写法1：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>写法2：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> total = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>写法2可以这样解读：声明一个函数，相当于创建了一个『函数对象』，将这个对象的『引用』赋值给变量total。如果不给这个对象赋值，我们可以将其作为匿名函数使用(在后续学习内容中会用到)</p>
<h4 id="调用函数"><a class="markdownIt-Anchor" href="#调用函数"></a> 调用函数</h4>
<p>JavaScript中函数本身就是一种对象，函数名就是这个<span style="color:blue;font-weight:bold;">『对象』</span>的<span style="color:blue;font-weight:bold;">『引用』</span>。而调用函数的格式是：<span style="color:blue;font-weight:bold;">函数引用()</span>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="title function_">sum</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result=&quot;</span>+result);</span><br></pre></td></tr></table></figure>
<p>或：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> total = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> totalResult = <span class="title function_">total</span>(<span class="number">3</span>,<span class="number">6</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;totalResult=&quot;</span>+totalResult);</span><br></pre></td></tr></table></figure>
<h3 id="对象重点"><a class="markdownIt-Anchor" href="#对象重点"></a> 对象(重点)</h3>
<p>JavaScript中没有『类』的概念，对于系统内置的对象可以直接创建使用。</p>
<h4 id="使用new关键字创建对象"><a class="markdownIt-Anchor" href="#使用new关键字创建对象"></a> 使用new关键字创建对象</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj01 = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给对象设置属性和属性值</span></span><br><span class="line">obj01.<span class="property">stuName</span> = <span class="string">&quot;tom&quot;</span>;</span><br><span class="line">obj01.<span class="property">stuAge</span> = <span class="number">20</span>;</span><br><span class="line">obj01.<span class="property">stuSubject</span> = <span class="string">&quot;java&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在控制台输出对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj01);</span><br></pre></td></tr></table></figure>
<h4 id="使用创建对象常用"><a class="markdownIt-Anchor" href="#使用创建对象常用"></a> 使用{}创建对象(常用)</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj02 = &#123;</span><br><span class="line">    <span class="string">&quot;soldierName&quot;</span>:<span class="string">&quot;john&quot;</span>,</span><br><span class="line">    <span class="string">&quot;soldierAge&quot;</span>:<span class="number">35</span>,</span><br><span class="line">    <span class="string">&quot;soldierWeapon&quot;</span>:<span class="string">&quot;gun&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在控制台输出对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj02);</span><br></pre></td></tr></table></figure>
<h4 id="给对象设置函数属性"><a class="markdownIt-Anchor" href="#给对象设置函数属性"></a> 给对象设置函数属性</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj01 = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给对象设置属性和属性值</span></span><br><span class="line">obj01.<span class="property">stuName</span> = <span class="string">&quot;tom&quot;</span>;</span><br><span class="line">obj01.<span class="property">stuAge</span> = <span class="number">20</span>;</span><br><span class="line">obj01.<span class="property">stuSubject</span> = <span class="string">&quot;java&quot;</span>;</span><br><span class="line"></span><br><span class="line">obj01.<span class="property">study</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">stuName</span> + <span class="string">&quot; is studying&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在控制台输出对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj01);</span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line">obj01.<span class="title function_">study</span>();</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj02 = &#123;</span><br><span class="line">	<span class="string">&quot;soldierName&quot;</span>:<span class="string">&quot;john&quot;</span>,</span><br><span class="line">	<span class="string">&quot;soldierAge&quot;</span>:<span class="number">35</span>,</span><br><span class="line">	<span class="string">&quot;soldierWeapon&quot;</span>:<span class="string">&quot;gun&quot;</span>,</span><br><span class="line">	<span class="string">&quot;soldierShoot&quot;</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">soldierName</span> + <span class="string">&quot; is using &quot;</span> + <span class="variable language_">this</span>.<span class="property">soldierWeapon</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在控制台输出对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj02);</span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line">obj02.<span class="title function_">soldierShoot</span>();</span><br></pre></td></tr></table></figure>
<h4 id="this关键字"><a class="markdownIt-Anchor" href="#this关键字"></a> this关键字</h4>
<p>this关键字只有两种情况：</p>
<ul>
<li>在函数外面：this关键字指向window对象（代表当前浏览器窗口）</li>
<li>在函数里面：this关键字指向调用函数的对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接打印this</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数中的this</span></span><br><span class="line"><span class="comment">// 1.声明函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.创建对象</span></span><br><span class="line"><span class="keyword">var</span> obj01 = &#123;</span><br><span class="line">	<span class="string">&quot;name&quot;</span>:<span class="string">&quot;tom&quot;</span>,</span><br><span class="line">	<span class="string">&quot;getName&quot;</span>:getName</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj02 = &#123;</span><br><span class="line">	<span class="string">&quot;name&quot;</span>:<span class="string">&quot;jerry&quot;</span>,</span><br><span class="line">	<span class="string">&quot;getName&quot;</span>:getName</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.调用函数</span></span><br><span class="line">obj01.<span class="title function_">getName</span>();</span><br><span class="line">obj02.<span class="title function_">getName</span>();</span><br></pre></td></tr></table></figure>
<h3 id="数组重点"><a class="markdownIt-Anchor" href="#数组重点"></a> 数组(重点)</h3>
<h4 id="使用new关键字创建数组"><a class="markdownIt-Anchor" href="#使用new关键字创建数组"></a> 使用new关键字创建数组</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.创建数组对象</span></span><br><span class="line"><span class="keyword">var</span> arr01 = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.压入数据</span></span><br><span class="line">arr01.<span class="title function_">push</span>(<span class="string">&quot;apple&quot;</span>);</span><br><span class="line">arr01.<span class="title function_">push</span>(<span class="string">&quot;orange&quot;</span>);</span><br><span class="line">arr01.<span class="title function_">push</span>(<span class="string">&quot;banana&quot;</span>);</span><br><span class="line">arr01.<span class="title function_">push</span>(<span class="string">&quot;grape&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.遍历数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr01.<span class="property">length</span>; i++) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(arr01[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.数组元素反序</span></span><br><span class="line">arr01.<span class="title function_">reverse</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr01.<span class="property">length</span>; i++) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(arr01[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.数组元素拼接成字符串</span></span><br><span class="line"><span class="keyword">var</span> arrStr = arr01.<span class="title function_">join</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrStr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.字符串拆分成数组</span></span><br><span class="line"><span class="keyword">var</span> arr02 = arrStr.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr02.<span class="property">length</span>; i++) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(arr02[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7.弹出数组中最后一个元素</span></span><br><span class="line"><span class="keyword">var</span> ele = arr01.<span class="title function_">pop</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ele);</span><br></pre></td></tr></table></figure>
<h4 id="使用创建数组常用"><a class="markdownIt-Anchor" href="#使用创建数组常用"></a> 使用[]创建数组(常用)</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 8.使用[]创建数组</span></span><br><span class="line"><span class="keyword">var</span> arr03 = [<span class="string">&quot;cat&quot;</span>,<span class="string">&quot;dog&quot;</span>,<span class="string">&quot;tiger&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr03);</span><br></pre></td></tr></table></figure>
<h3 id="json最重点"><a class="markdownIt-Anchor" href="#json最重点"></a> JSON(最重点)</h3>
<h4 id="json格式的用途"><a class="markdownIt-Anchor" href="#json格式的用途"></a> JSON格式的用途</h4>
<p>在开发中凡是涉及到<span style="color:blue;font-weight:bold;">『跨平台数据传输』</span>，JSON格式一定是首选。</p>
<h4 id="json格式的说明"><a class="markdownIt-Anchor" href="#json格式的说明"></a> JSON格式的说明</h4>
<ul>
<li>JSON数据两端要么是<span style="color:blue;font-weight:bold;">{}</span>，要么是<span style="color:blue;font-weight:bold;">[]</span></li>
<li><span style="color:blue;font-weight:bold;">{}</span>定义JSON对象</li>
<li><span style="color:blue;font-weight:bold;">[]</span>定义JSON数组</li>
<li>JSON对象的格式是：</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span>key<span class="punctuation">:</span>value<span class="punctuation">,</span>key<span class="punctuation">:</span>value<span class="punctuation">,</span>...<span class="punctuation">,</span>key<span class="punctuation">:</span>value<span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>JOSN数组的格式是：</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span>value<span class="punctuation">,</span>value<span class="punctuation">,</span>...<span class="punctuation">,</span>value<span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>key的类型固定是字符串</li>
<li>value的类型可以是：
<ul>
<li>基本数据类型</li>
<li>引用类型：JSON对象或JSON数组</li>
</ul>
</li>
</ul>
<p>正因为JSON格式中value部分还可以继续使用JSON对象或JSON数组，所以JSON格式是可以<span style="color:blue;font-weight:bold;">『多层嵌套』</span>的，所以JSON格式不论多么复杂的数据类型都可以表达。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//json的格式: &#123;key:value,key:value&#125;</span></span><br><span class="line">var person1 = <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;张三疯&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">189</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;武当山&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="comment">//其实JSON对于前端而言，就是一个对象</span></span><br><span class="line"><span class="comment">//console.log(person1.name)</span></span><br><span class="line"></span><br><span class="line">var person2 = <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;张三疯&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">189</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;武当山&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;wife&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;小花&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;武当山下的小村庄&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="comment">//console.log(person2.wife.name)</span></span><br><span class="line"></span><br><span class="line">var person3 = <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;张三疯&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">189</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;武当山&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;wife&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;小花&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">18</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;武当山下的小村庄&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sons&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;奥巴马&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;武当山&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;奥拉夫&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span><span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="string">&quot;少林寺&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//json数组的格式: [&#123;key:value,key:value&#125;,&#123;key:value,key:value&#125;]</span></span><br><span class="line"><span class="comment">//var personList = [person1,person2]</span></span><br></pre></td></tr></table></figure>
<h4 id="json对象和json字符串互转"><a class="markdownIt-Anchor" href="#json对象和json字符串互转"></a> JSON对象和JSON字符串互转</h4>
<ul>
<li>JSON对象转JSON字符串</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> jsonObj = &#123;<span class="string">&quot;stuName&quot;</span>:<span class="string">&quot;tom&quot;</span>,<span class="string">&quot;stuAge&quot;</span>:<span class="number">20</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> jsonStr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(jsonObj);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> jsonObj); <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> jsonStr); <span class="comment">// string</span></span><br></pre></td></tr></table></figure>
<ul>
<li>JSON字符串转JSON对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jsonObj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonStr);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(jsonObj); <span class="comment">// &#123;stuName: &quot;tom&quot;, stuAge: 20&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="javascript的dom最重点"><a class="markdownIt-Anchor" href="#javascript的dom最重点"></a> JavaScript的DOM(最重点)</h2>
<h3 id="dom的概念"><a class="markdownIt-Anchor" href="#dom的概念"></a> DOM的概念</h3>
<p>DOM是<span style="color:blue;font-weight:bold;">D</span>ocument <span style="color:blue;font-weight:bold;">O</span>bject  <span style="color:blue;font-weight:bold;">M</span>odel的缩写，意思是<span style="color:blue;font-weight:bold;">『文档对象模型』</span>——将HTML文档抽象成模型，再封装成对象方便用程序操作。</p>
<p>这是一种非常常用的编程思想：将现实世界的事物抽象成模型，这样就非常容易使用对象来量化的描述现实事物，从而把生活中的问题转化成一个程序问题，最终实现用应用软件协助解决现实问题。而在这其中<span style="color:blue;font-weight:bold;">『模型』</span>就是那个连通现实世界和代码世界的桥梁。</p>
<h3 id="dom树的概念"><a class="markdownIt-Anchor" href="#dom树的概念"></a> DOM树的概念</h3>
<p>浏览器把HTML文档从服务器上下载下来之后就开始按照<span style="color:blue;font-weight:bold;">『从上到下』</span>的顺序<span style="color:blue;font-weight:bold;">『读取HTML标签』</span>。每一个标签都会被封装成一个<span style="color:blue;font-weight:bold;">『对象』</span>。</p>
<p>而第一个读取到的肯定是根标签html，然后是它的子标签head，再然后是head标签里的子标签……所以从html标签开始，整个文档中的所有标签都会根据它们之间的<span style="color:blue;font-weight:bold;">『父子关系』</span>被放到一个<span style="color:blue;font-weight:bold;">『树形结构』</span>的对象中。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/69odAuyzxq2FCQs.png" alt="img003.png" /></p>
<p>这个包含了所有标签对象的整个树形结构对象就是JavaScript中的一个<span style="color:blue;font-weight:bold;">可以直接使用的内置对象</span>：<span style="color:blue;font-weight:bold;">document</span>。</p>
<p>例如，下面的标签结构：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/qdtnEPZFG3p57He.png" alt="img004.png" /></p>
<p>会被解析为：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/ltVamF2Gpuehvqd.png" alt="img005.png" /></p>
<h3 id="各个组成部分的类型"><a class="markdownIt-Anchor" href="#各个组成部分的类型"></a> 各个组成部分的类型</h3>
<p>整个文档中的一切都可以看做Node。各个具体组成部分的具体类型可以看做Node类型的子类。</p>
<blockquote>
<p>其实严格来说，JavaScript并不支持真正意义上的『继承』，这里我们借用Java中的『继承』概念，从逻辑上来帮助我们理解各个类型之间的关系。</p>
</blockquote>
<table>
<thead>
<tr>
<th>组成部分</th>
<th>节点类型</th>
<th>具体类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>整个文档</td>
<td>文档节点</td>
<td>Document</td>
</tr>
<tr>
<td>HTML标签</td>
<td>元素节点</td>
<td>Element</td>
</tr>
<tr>
<td>HTML标签内的文本</td>
<td>文本节点</td>
<td>Text</td>
</tr>
<tr>
<td>HTML标签内的属性</td>
<td>属性节点</td>
<td>Attr</td>
</tr>
<tr>
<td>注释</td>
<td>注释节点</td>
<td>Comment</td>
</tr>
</tbody>
</table>
<h3 id="父子关系"><a class="markdownIt-Anchor" href="#父子关系"></a> 父子关系</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/1LY3tWkJKdrRo74.png" alt="img006.png" style="zoom:50%;" />
<h3 id="先辈后代关系"><a class="markdownIt-Anchor" href="#先辈后代关系"></a> 先辈后代关系</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/17HABd9bQGVWoJ5.png" alt="img007.png" style="zoom:50%;" />
<h3 id="dom操作"><a class="markdownIt-Anchor" href="#dom操作"></a> DOM操作</h3>
<p>由于实际开发时基本上都是使用JavaScript的各种框架来操作，而框架中的操作方式和我们现在看到的原生操作完全不同，所以下面罗列的API仅供参考，不做要求。</p>
<h4 id="在整个文档范围内查询元素节点"><a class="markdownIt-Anchor" href="#在整个文档范围内查询元素节点"></a> 在整个文档范围内查询元素节点</h4>
<table>
<thead>
<tr>
<th>功能</th>
<th>API</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>根据id值查询</td>
<td>document.getElementById(“id值”)</td>
<td>一个具体的元素节</td>
</tr>
<tr>
<td>根据标签名查询</td>
<td>document.getElementsByTagName(“标签名”)</td>
<td>元素节点数组</td>
</tr>
<tr>
<td>根据name属性值查询</td>
<td>document.getElementsByName(“name值”)</td>
<td>元素节点数组</td>
</tr>
<tr>
<td>根据类名查询</td>
<td>document.getElementsByClassName(“类名”)</td>
<td>元素节点数组</td>
</tr>
</tbody>
</table>
<h4 id="在具体元素节点范围内查找子节点"><a class="markdownIt-Anchor" href="#在具体元素节点范围内查找子节点"></a> 在具体元素节点范围内查找子节点</h4>
<table>
<thead>
<tr>
<th>功能</th>
<th>API</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>查找子标签</td>
<td>element.children</td>
<td>返回子标签数组</td>
</tr>
<tr>
<td>查找第一个子标签</td>
<td>element.firstElementChild<br />【W3C考虑换行，IE≤8不考虑】</td>
<td>标签对象</td>
</tr>
<tr>
<td>查找最后一个子标签</td>
<td>element.lastElementChild<br />【W3C考虑换行，IE≤8不考虑】</td>
<td>节点对象</td>
</tr>
</tbody>
</table>
<h4 id="查找指定元素节点的父节点"><a class="markdownIt-Anchor" href="#查找指定元素节点的父节点"></a> 查找指定元素节点的父节点</h4>
<table>
<thead>
<tr>
<th>功能</th>
<th>API</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>查找指定元素节点的父标签</td>
<td>element.parentElement</td>
<td>标签对象</td>
</tr>
</tbody>
</table>
<h4 id="查找指定元素节点的兄弟节点"><a class="markdownIt-Anchor" href="#查找指定元素节点的兄弟节点"></a> 查找指定元素节点的兄弟节点</h4>
<table>
<thead>
<tr>
<th>功能</th>
<th>API</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>查找前一个兄弟标签</td>
<td>node.previousElementSibling<br />【W3C考虑换行，IE≤8不考虑】</td>
<td>标签对象</td>
</tr>
<tr>
<td>查找后一个兄弟标签</td>
<td>node.nextElementSibling<br />【W3C考虑换行，IE≤8不考虑】</td>
<td>标签对象</td>
</tr>
</tbody>
</table>
<h4 id="扩展内容根据选择器查找标签"><a class="markdownIt-Anchor" href="#扩展内容根据选择器查找标签"></a> 扩展内容(根据选择器查找标签)</h4>
<table>
<thead>
<tr>
<th>功能</th>
<th>API</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td>根据选择器查找一个标签</td>
<td>document.querySelector(“选择器”)</td>
<td>标签对象</td>
</tr>
<tr>
<td>根据选择器查找多个标签</td>
<td>document.querySelectorAll(“选择器”)</td>
<td>标签数组</td>
</tr>
</tbody>
</table>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>DOM查找节点<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//根据id查询标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> elementById = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(elementById)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//根据类名查询标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> elementsByClassName = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;c1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(elementsByClassName)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//根据标签名查询标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> elementsByTagName = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;input&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(elementsByTagName)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找子节点: 查找body的所有子标签,要注意文本也属于子节点</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/*var childNodes = document.getElementsByTagName(&quot;body&quot;)[0].childNodes;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        console.log(childNodes)*/</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找子标签: children</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> children = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;body&quot;</span>)[<span class="number">0</span>].<span class="property">children</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(children)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找id为username的标签的父节点</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> parentNode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">parentNode</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(parentNode)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找id为username的标签的前一个兄弟标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> previousElementSibling = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">previousElementSibling</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(previousElementSibling)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找id为username的标签的后一个兄弟标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> nextElementSibling = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">nextElementSibling</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(nextElementSibling)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//根据选择器查找标签:document.querySelector(&quot;选择器&quot;)根据选择器查找一个标签, document.querySelectorAll(&quot;选择器&quot;)根据选择器查找多个标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//什么是选择器: 用于查找标签的一些表达式，其中最基本的三种选择器是:ID选择器、类选择器、标签选择器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//选择器参考jQuery的文档</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找id为username的标签，使用的是id选择器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> ipt1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//console.log(ipt1)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找body内的所有后代div，用的是层级选择器</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> ipts = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;body div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找id为username的标签的后面第一个兄弟</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> i1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#username+input&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//查找id为username的标签的后面的所有兄弟</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> i2 = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#username~input&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(i2)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="属性操作"><a class="markdownIt-Anchor" href="#属性操作"></a> 属性操作</h5>
<table>
<thead>
<tr>
<th>需求</th>
<th>操作方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>读取属性值</td>
<td>元素对象.属性名</td>
</tr>
<tr>
<td>修改属性值</td>
<td>元素对象.属性名=新的属性值</td>
</tr>
</tbody>
</table>
<h5 id="标签体的操作"><a class="markdownIt-Anchor" href="#标签体的操作"></a> 标签体的操作</h5>
<table>
<thead>
<tr>
<th>需求</th>
<th>操作方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>获取或者设置标签体的文本内容</td>
<td>element.innerText</td>
</tr>
<tr>
<td>获取或者设置标签体的内容</td>
<td>element.innerHTML</td>
</tr>
</tbody>
</table>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>操作标签的属性和文本<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好世界<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//目标: 获取id为username的输入框的value</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//1. 找到要操作的标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> ipt = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//2. 设置标签的value属性值</span></span></span><br><span class="line"><span class="language-javascript">            ipt.<span class="property">value</span> = <span class="string">&quot;张三&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//3. 获取标签的value属性的值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> value = ipt.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取id为d1的div中的文本内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取标签的文本: element.innerText,获取文本的时候会将左右两端的空格去掉</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> innerText = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;d1&quot;</span>).<span class="property">innerText</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(innerText)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取标签体的内容: element.innerHTML,获取标签体的内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> innerHTML = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;d1&quot;</span>).<span class="property">innerHTML</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(innerHTML)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//设置标签体的内容:建议使用innerHTML，如果是使用innerText的话它会将标签当做普通文本处理</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;d1&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;&lt;h1&gt;hello world&lt;/h1&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="dom增删改操作"><a class="markdownIt-Anchor" href="#dom增删改操作"></a> DOM增删改操作</h5>
<table>
<thead>
<tr>
<th>API</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>document.createElement(“标签名”)</td>
<td>创建元素节点并返回，但不会自动添加到文档中</td>
</tr>
<tr>
<td>document.createTextNode(“文本值”)</td>
<td>创建文本节点并返回，但不会自动添加到文档中</td>
</tr>
<tr>
<td>element.appendChild(ele)</td>
<td>将ele添加到element所有子节点后面</td>
</tr>
<tr>
<td>parentEle.insertBefore(newEle,targetEle)</td>
<td>将newEle插入到targetEle前面</td>
</tr>
<tr>
<td>parentEle.replaceChild(newEle, oldEle)</td>
<td>用新节点替换原有的旧子节点</td>
</tr>
<tr>
<td>element.remove()</td>
<td>删除某个标签</td>
</tr>
<tr>
<td>element.innerHTML</td>
<td>读写HTML代码</td>
</tr>
</tbody>
</table>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>创建和删除标签<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;bj&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;sh&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;sz&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;gz&quot;</span>&gt;</span>广州<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//目标1: 在城市列表的最后添加一个子标签 &lt;li id=&quot;cs&quot;&gt;长沙&lt;/li&gt;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//1. 创建一个li标签  &lt;li&gt;&lt;/li&gt;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> liElement = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//2. 给创建的li标签设置id属性和文本 &lt;li id=&quot;cs&quot;&gt;长沙&lt;/li&gt;</span></span></span><br><span class="line"><span class="language-javascript">            liElement.<span class="property">id</span> = <span class="string">&quot;cs&quot;</span></span></span><br><span class="line"><span class="language-javascript">            liElement.<span class="property">innerText</span> = <span class="string">&quot;长沙&quot;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//3. 将创建的li标签添加到城市列表中（ul）</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> cityUl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;city&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//父.appendChild(子)将子标签添加到父标签的最后面</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//cityUl.appendChild(liElement)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//目标2:在城市列表的深圳之前添加一个子标签 &lt;li id=&quot;cs&quot;&gt;长沙&lt;/li&gt;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取到深圳这个标签</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> szElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sz&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//父.insertBefore(新标签,参照标签)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//cityUl.insertBefore(liElement,szElement)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//目标3: 在城市列表中添加一个子标签替换深圳 &lt;li id=&quot;cs&quot;&gt;长沙&lt;/li&gt;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//父.replaceChild(新标签,被替换的标签)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//cityUl.replaceChild(liElement,szElement)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//目标4: 在城市列表中删除深圳</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//szElement.remove()</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//目标5: 清除城市列表中的所有城市,保留城市列表标签ul</span></span></span><br><span class="line"><span class="language-javascript">            cityUl.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="javascript的事件驱动很重要"><a class="markdownIt-Anchor" href="#javascript的事件驱动很重要"></a> JavaScript的事件驱动(很重要)</h2>
<h3 id="事件的概念"><a class="markdownIt-Anchor" href="#事件的概念"></a> 事件的概念</h3>
<ul>
<li>HTML 事件是发生在 HTML 元素上的“事情”， 是浏览器或用户做的某些事情</li>
<li>事件通常与函数配合使用，这样就可以通过发生的事件来驱动函数执行。</li>
</ul>
<h3 id="常见事件"><a class="markdownIt-Anchor" href="#常见事件"></a> 常见事件</h3>
<table>
<thead>
<tr>
<th>属性</th>
<th>此事件发生在何时…</th>
</tr>
</thead>
<tbody>
<tr>
<td>onclick</td>
<td>当用户点击某个对象时调用的事件句柄。</td>
</tr>
<tr>
<td>ondblclick</td>
<td>当用户双击某个对象时调用的事件句柄。</td>
</tr>
<tr>
<td>onchange</td>
<td>域的内容被改变。</td>
</tr>
<tr>
<td>onblur</td>
<td>元素失去焦点。</td>
</tr>
<tr>
<td>onfocus</td>
<td>元素获得焦点。</td>
</tr>
<tr>
<td>onload</td>
<td>一张页面或一幅图像完成加载。</td>
</tr>
<tr>
<td>onsubmit</td>
<td>确认按钮被点击；表单被提交。</td>
</tr>
<tr>
<td>onkeydown</td>
<td>某个键盘按键被按下。</td>
</tr>
<tr>
<td>onkeypress</td>
<td>某个键盘按键被按住。</td>
</tr>
<tr>
<td>onkeyup</td>
<td>某个键盘按键被松开。</td>
</tr>
<tr>
<td>onmousedown</td>
<td>鼠标按钮被按下。</td>
</tr>
<tr>
<td>onmouseup</td>
<td>鼠标按键被松开。</td>
</tr>
<tr>
<td>onmouseout</td>
<td>鼠标从某元素移开。</td>
</tr>
<tr>
<td>omouseover</td>
<td>鼠标移到某元素之上。</td>
</tr>
<tr>
<td>onmousemove</td>
<td>鼠标被移动。</td>
</tr>
</tbody>
</table>
<h3 id="事件绑定的方式"><a class="markdownIt-Anchor" href="#事件绑定的方式"></a> 事件绑定的方式</h3>
<h4 id="普通函数方式"><a class="markdownIt-Anchor" href="#普通函数方式"></a> 普通函数方式</h4>
<p>说白了设置标签的属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">标签</span> <span class="attr">属性</span>=<span class="string">&quot;js代码，调用函数&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">标签</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="匿名函数方式"><a class="markdownIt-Anchor" href="#匿名函数方式"></a> 匿名函数方式</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    标签对象.事件属性 = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//执行一段代码</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="事件的使用介绍"><a class="markdownIt-Anchor" href="#事件的使用介绍"></a> 事件的使用介绍</h4>
<ul>
<li>
<p>点击事件</p>
<p>需求: 没点击一次按钮 弹出hello…</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;按钮&quot;</span> onclick=<span class="string">&quot;fn1()&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;另一个按钮&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//当点击的时候要调用的函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">alert</span>(<span class="string">&quot;我被点击了...&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//给另外一个按钮，绑定点击事件:</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//1.先根据id获取标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//2. 设置btn的onclick属性(绑定事件)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//绑定命名函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//btn.onclick = fn1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//绑定匿名函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">btn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;点击了另外一个按钮&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>获得焦点(onfocus)和失去焦点(onblur)</p>
<p>需求:给输入框设置获得和失去焦点</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ipt = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;ipt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//绑定获取焦点事件</span></span><br><span class="line">ipt.<span class="property">onfocus</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取焦点了...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//绑定失去焦点事件</span></span><br><span class="line">ipt.<span class="property">onblur</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;失去焦点了...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>内容改变(onchange)</p>
<p>需求: 给select设置内容改变事件</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--内容改变(onchange)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">onchange</span>=<span class="string">&quot;changeCity(this)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bj&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;sh&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;sz&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeCity</span>(<span class="params">obj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;城市改变了&quot;</span>+obj.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>键盘相关的, 键盘按下(onkeydown)  键盘抬起(onkeyup)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给输入框绑定键盘按键按下和抬起事件</span></span><br><span class="line">ipt.onkeydown = function () &#123;</span><br><span class="line">    <span class="comment">//当按键按下的时候，数据并没有到达输入框</span></span><br><span class="line">    <span class="comment">//输出输入框里面的内容</span></span><br><span class="line">    <span class="comment">//console.log(ipt.value)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ipt.onkeyup = function () &#123;</span><br><span class="line">    <span class="comment">//输出输入框的内容:当键盘按键抬起的时候，数据已经到达了输入框</span></span><br><span class="line">    console.log(ipt.value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>鼠标相关的, 鼠标在xx之上(onmouseover ), 鼠标按下(onmousedown),鼠标离开(onmouseout)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给输入框绑定鼠标移入事件</span></span><br><span class="line">ipt.onmouseover = function () &#123;</span><br><span class="line">    console.log(<span class="string">&quot;鼠标移入了...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//给输入框绑定鼠标移出事件</span></span><br><span class="line">ipt.onmouseout = function () &#123;</span><br><span class="line">    console.log(<span class="string">&quot;鼠标移出了...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="综合案例"><a class="markdownIt-Anchor" href="#综合案例"></a> 综合案例</h4>
<p><strong>需求</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/gGFk6zeRHDW34YQ.png" alt="img010.png" /></p>
<p><strong>代码实现</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>综合案例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">table</span>,<span class="selector-tag">tr</span>,<span class="selector-tag">td</span>,<span class="selector-tag">th</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tb&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>男<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;deletePerson(this)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>女<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;deletePerson(this)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>王五<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>男<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;deletePerson(this)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span><br><span class="line">                序号<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;num&quot;</span> <span class="attr">id</span>=<span class="string">&quot;num&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                用户<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                性别<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;添加用户&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;addPerson()&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//目标1:点击删除按钮，删除当前行</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//给所有按钮绑定点击事件</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">deletePerson</span>(<span class="params">obj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//此时obj就是你点击的那个按钮</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//我们要删除的就是obj的爷爷</span></span></span><br><span class="line"><span class="language-javascript">                obj.<span class="property">parentElement</span>.<span class="property">parentElement</span>.<span class="title function_">remove</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">addPerson</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//添加用户</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//1. 获取序号、用户名、性别</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> numElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;num&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> num = numElement.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> usernameElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> username = usernameElement.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> genderElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;gender&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> gender = genderElement.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//2. 将获取到的序号、用户名、性别添加到td中，td放到tr中，tr添加到table中</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//2.1 创建一行  &lt;tr&gt;&lt;/tr&gt;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> trElement = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;tr&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//2.2 往tr中添加标签体内容</span></span></span><br><span class="line"><span class="language-javascript">                trElement.<span class="property">innerHTML</span> = <span class="string">&quot;&lt;td&gt;&quot;</span>+num+<span class="string">&quot;&lt;/td&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;            &lt;td&gt;&quot;</span>+username+<span class="string">&quot;&lt;/td&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;            &lt;td&gt;&quot;</span>+gender+<span class="string">&quot;&lt;/td&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;            &lt;td&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;                &lt;button onclick=\&quot;deletePerson(this)\&quot;&gt;删除&lt;/button&gt;\n&quot;</span> +</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;            &lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//2.3 将tr添加到表格中</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> tb = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tb&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                tb.<span class="title function_">appendChild</span>(trElement)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//3. 清空序号、用户名、性别</span></span></span><br><span class="line"><span class="language-javascript">                numElement.<span class="property">value</span> = <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                usernameElement.<span class="property">value</span> = <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                genderElement.<span class="property">value</span> = <span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   	<span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    	<span class="comment">// 声明变量,不用给变量定义类型，给什么类型的值，变量就是什么类型的</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> str = <span class="string">&quot;hello world&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 声明类</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Object</span>();</span></span><br><span class="line"><span class="language-javascript">        person.<span class="property">name</span> = <span class="string">&quot;jntm&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        person.<span class="property">id</span> = <span class="number">12</span>;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 声明方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params">num1, num2, num3</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(num1&gt;num2)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="string">&quot;jntm&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alter</span>(<span class="string">&quot;jntm&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 调用方法,不用根据方法定义中参数的数量，来填入参数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">hello</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">hello</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">hello</span>(<span class="number">1</span>,<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">hello</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="水果摊"><a class="markdownIt-Anchor" href="#水果摊"></a> 水果摊</h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: cadetblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#div_container</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">80%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#tbl_fruit</span>&#123;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60%</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#tbl_fruit</span> <span class="selector-tag">tr</span>, <span class="selector-id">#tbl_fruit</span> <span class="selector-tag">th</span>,<span class="selector-id">#tbl_fruit</span> <span class="selector-tag">td</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>:<span class="number">1px</span> solid;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dekImg</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-id">#div_add_furit</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">40%</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>:<span class="number">40%</span>;</span><br><span class="line">    <span class="attribute">border</span>:<span class="number">1px</span> solid;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.button</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 当页面加载完毕之后我们需要绑定各种各样的事件</span></span><br><span class="line">    <span class="comment">// 通过ID获取到指定的表格</span></span><br><span class="line">    <span class="keyword">var</span> fruitTbl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tbl_fruit&quot;</span>);</span><br><span class="line">    <span class="comment">// 获取到表格中的每一行的元素</span></span><br><span class="line">    <span class="keyword">var</span> rows = fruitTbl.<span class="property">rows</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 给每一行都绑定上指定的函数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; rows.<span class="property">length</span>-<span class="number">1</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> tr = rows[i];</span><br><span class="line">        <span class="comment">// 显示颜色</span></span><br><span class="line">        tr.<span class="property">onmouseover</span> = showBGcolor;</span><br><span class="line">        <span class="comment">// 清除颜色</span></span><br><span class="line">        tr.<span class="property">onmouseout</span> = clearBGColor;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> cells = tr.<span class="property">cells</span>;</span><br><span class="line">        <span class="keyword">var</span> pirceID = cells[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">var</span> delImg = cells[<span class="number">4</span>].<span class="property">firstChild</span>;</span><br><span class="line">        <span class="comment">// 显示手</span></span><br><span class="line">        pirceID.<span class="property">onmouseover</span> = showHand;</span><br><span class="line">        <span class="comment">// 点击修改价格</span></span><br><span class="line">        pirceID.<span class="property">onclick</span> = editPrice;</span><br><span class="line">        <span class="keyword">if</span>(delImg &amp;&amp; delImg.<span class="property">tagName</span>==<span class="string">&quot;IMG&quot;</span>)&#123;</span><br><span class="line">            <span class="comment">// 删除表中数据</span></span><br><span class="line">            delImg.<span class="property">onclick</span> = delData;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> fruitAdd = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;submit&quot;</span>);</span><br><span class="line">    fruitAdd.<span class="property">onclick</span> = addFruit;</span><br><span class="line">    <span class="keyword">var</span> fruitReset = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;reset&quot;</span>);</span><br><span class="line">    fruitReset.<span class="property">onclick</span> = resetFruit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resetFruit</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(event &amp;&amp; event.<span class="property">srcElement</span> &amp;&amp; event.<span class="property">srcElement</span>.<span class="property">tagName</span>==<span class="string">&quot;INPUT&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> name = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fname&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> price = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fprice&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> number = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fnumber&quot;</span>);</span><br><span class="line">        name.<span class="property">value</span> = <span class="literal">null</span>;</span><br><span class="line">        price.<span class="property">value</span>=<span class="literal">null</span>;</span><br><span class="line">        number.<span class="property">value</span>=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addFruit</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(event &amp;&amp; event.<span class="property">srcElement</span> &amp;&amp; event.<span class="property">srcElement</span>.<span class="property">tagName</span>==<span class="string">&quot;INPUT&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> name = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fname&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> price = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fprice&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> number = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fnumber&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(name.<span class="property">value</span> &amp;&amp; price.<span class="property">value</span> &amp;&amp; number.<span class="property">value</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="title function_">isNumber</span>(price.<span class="property">value</span>) &amp;&amp; <span class="title function_">isNumber</span>(number.<span class="property">value</span>))&#123;</span><br><span class="line">                <span class="keyword">var</span> fruitNum = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tbl_fruit&quot;</span>);</span><br><span class="line">                <span class="keyword">var</span> tr = fruitNum.<span class="title function_">insertRow</span>(fruitNum.<span class="property">rows</span>.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">var</span> fname = tr.<span class="title function_">insertCell</span>();</span><br><span class="line">                fname.<span class="property">innerText</span> = name.<span class="property">value</span>;</span><br><span class="line">                <span class="keyword">var</span> fprice = tr.<span class="title function_">insertCell</span>();</span><br><span class="line">                fprice.<span class="property">innerText</span> = price.<span class="property">value</span>;</span><br><span class="line">                <span class="keyword">var</span> fnumber = tr.<span class="title function_">insertCell</span>();</span><br><span class="line">                fnumber.<span class="property">innerText</span> = number.<span class="property">value</span>;</span><br><span class="line">                <span class="keyword">var</span> fxj = tr.<span class="title function_">insertCell</span>();</span><br><span class="line">                fxj.<span class="property">innerText</span> = <span class="built_in">parseInt</span>(number.<span class="property">value</span>)*<span class="built_in">parseInt</span>(price.<span class="property">value</span>);</span><br><span class="line">                <span class="keyword">var</span> fcaozuo = tr.<span class="title function_">insertCell</span>();</span><br><span class="line">                fcaozuo.<span class="property">innerHTML</span> = <span class="string">&quot;&lt;img src=&#x27;C:\\Users\\Nuyoah\\Downloads\\cha.png&#x27;  class=&#x27;dekImg&#x27;&gt;&quot;</span>;</span><br><span class="line">                tr.<span class="property">onmouseover</span> = showBGcolor;</span><br><span class="line">                tr.<span class="property">onmouseout</span> = clearBGColor;</span><br><span class="line">                <span class="keyword">var</span> cells = tr.<span class="property">cells</span>;</span><br><span class="line">                <span class="keyword">var</span> pirceID = cells[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">var</span> delImg = cells[<span class="number">4</span>].<span class="property">firstChild</span>;</span><br><span class="line">                <span class="comment">// 显示手</span></span><br><span class="line">                pirceID.<span class="property">onmouseover</span> = showHand;</span><br><span class="line">                <span class="comment">// 点击修改价格</span></span><br><span class="line">                pirceID.<span class="property">onclick</span> = editPrice;</span><br><span class="line">                <span class="keyword">if</span>(delImg &amp;&amp; delImg.<span class="property">tagName</span>==<span class="string">&quot;IMG&quot;</span>)&#123;</span><br><span class="line">                    <span class="comment">// 删除表中数据</span></span><br><span class="line">                    delImg.<span class="property">onclick</span> = delData;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="title function_">updateZJ</span>();</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&quot;水果价格或数量格式有误请从新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;信息输入不全，请补全之后在提交&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showBGcolor</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// event: 当前发生事件</span></span><br><span class="line">    <span class="comment">// event.srcElement: 事件源</span></span><br><span class="line">    <span class="comment">// alert(event.srcElement);</span></span><br><span class="line">    <span class="comment">// alert(event.srcElement.tagName) == TD</span></span><br><span class="line">    <span class="keyword">if</span>(event &amp;&amp; event.<span class="property">srcElement</span> &amp;&amp; event.<span class="property">srcElement</span>.<span class="property">tagName</span>==<span class="string">&quot;TD&quot;</span>)&#123;</span><br><span class="line">        <span class="comment">// 获取当前事件源</span></span><br><span class="line">        <span class="keyword">var</span> td = event.<span class="property">srcElement</span>;</span><br><span class="line">        <span class="comment">// 获取该事件原的父级元素</span></span><br><span class="line">        <span class="keyword">var</span> tr = td.<span class="property">parentElement</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将父级元素的背景颜色设置为navy</span></span><br><span class="line">        tr.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&quot;navy&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将子集元素的字体颜色设置为白色</span></span><br><span class="line">        <span class="keyword">var</span> tds = tr.<span class="property">cells</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; tds.<span class="property">length</span>; i++)&#123;</span><br><span class="line">            tds[i].<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;white&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clearBGColor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(event &amp;&amp; event.<span class="property">srcElement</span> &amp;&amp; event.<span class="property">srcElement</span>.<span class="property">tagName</span>==<span class="string">&quot;TD&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> td = event.<span class="property">srcElement</span>;</span><br><span class="line">        <span class="keyword">var</span> tr = td.<span class="property">parentElement</span>;</span><br><span class="line"></span><br><span class="line">        tr.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&quot;transparent&quot;</span>;</span><br><span class="line">        <span class="keyword">var</span> tds = tr.<span class="property">cells</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; tds.<span class="property">length</span>; i++)&#123;</span><br><span class="line">            tds[i].<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showHand</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(event &amp;&amp; event.<span class="property">srcElement</span> &amp;&amp; event.<span class="property">srcElement</span>.<span class="property">tagName</span>==<span class="string">&quot;TD&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> td = event.<span class="property">srcElement</span>;</span><br><span class="line">        td.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&quot;pointer&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">editPrice</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(event &amp;&amp; event.<span class="property">srcElement</span> &amp;&amp; event.<span class="property">srcElement</span>.<span class="property">tagName</span>==<span class="string">&quot;TD&quot;</span>)&#123;</span><br><span class="line">        <span class="comment">// 获取到我们需要修改的表格的元素</span></span><br><span class="line">        <span class="keyword">var</span> pirceID = event.<span class="property">srcElement</span>;</span><br><span class="line">        <span class="comment">// 判断当前节点有第一个节点，并且第一个节点是文本节点的话在进行如下操作</span></span><br><span class="line">        <span class="keyword">if</span>(pirceID.<span class="property">firstChild</span> &amp;&amp; pirceID.<span class="property">firstChild</span>.<span class="property">nodeType</span>==<span class="number">3</span>)&#123;</span><br><span class="line">            <span class="comment">// innerText 表示获取当前节点的内部文本</span></span><br><span class="line">            <span class="keyword">var</span> oldPrice = pirceID.<span class="property">innerText</span>;</span><br><span class="line">            <span class="comment">//innerHTML 表示设置当前节点内部的HTML</span></span><br><span class="line">            pirceID.<span class="property">innerHTML</span> = <span class="string">&quot;&lt;input type=&#x27;text&#x27; size=4 /&gt;&quot;</span></span><br><span class="line">            <span class="keyword">var</span> input = pirceID.<span class="property">firstChild</span>;</span><br><span class="line">            <span class="keyword">if</span>(input.<span class="property">tagName</span> == <span class="string">&quot;INPUT&quot;</span>) &#123;</span><br><span class="line">                input.<span class="property">value</span> = oldPrice;</span><br><span class="line">                <span class="comment">// 自动选中文本</span></span><br><span class="line">                input.<span class="title function_">select</span>();</span><br><span class="line">                <span class="comment">// 绑定输入框失去焦点事件，失去焦点，更新单价</span></span><br><span class="line">                input.<span class="property">onblur</span>=updatePrice;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updatePrice</span>(<span class="params">oldPrice</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(event &amp;&amp; event.<span class="property">srcElement</span> &amp;&amp; event.<span class="property">srcElement</span>.<span class="property">tagName</span>==<span class="string">&quot;INPUT&quot;</span>)&#123;</span><br><span class="line">        <span class="comment">// 获取输入框</span></span><br><span class="line">        <span class="keyword">var</span> input = event.<span class="property">srcElement</span>;</span><br><span class="line">        <span class="comment">// 获取新的价格</span></span><br><span class="line">        <span class="keyword">var</span> newPrice = input.<span class="property">value</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_">isNumber</span>(newPrice))&#123;</span><br><span class="line">            <span class="comment">// 获取输入框的父节点td</span></span><br><span class="line">            <span class="keyword">var</span> td = input.<span class="property">parentElement</span>;</span><br><span class="line">            <span class="comment">// 修改td中的内容为新的价格</span></span><br><span class="line">            td.<span class="property">innerText</span> = newPrice;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取商品的数量</span></span><br><span class="line">            <span class="keyword">var</span> tr = td.<span class="property">parentElement</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 更新小计</span></span><br><span class="line">            <span class="title function_">updateXJ</span>(tr);</span><br><span class="line">            <span class="comment">// 更新总计</span></span><br><span class="line">            <span class="title function_">updateZJ</span>();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;价格格式错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新小计</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateXJ</span>(<span class="params">tr</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(tr &amp;&amp; tr.<span class="property">tagName</span>==<span class="string">&quot;TR&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> tds = tr.<span class="property">cells</span>;</span><br><span class="line">        <span class="keyword">var</span> total = tds[<span class="number">3</span>];</span><br><span class="line">        total.<span class="property">innerText</span> = <span class="built_in">parseInt</span>(tds[<span class="number">1</span>].<span class="property">innerText</span>) * <span class="built_in">parseInt</span>(tds[<span class="number">2</span>].<span class="property">innerText</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新总计</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateZJ</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> fruitTbl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tbl_fruit&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> trs = fruitTbl.<span class="property">rows</span>;</span><br><span class="line">    <span class="comment">// 初始化数据为零</span></span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; trs.<span class="property">length</span>-<span class="number">1</span>; i++)&#123;</span><br><span class="line">        num += <span class="built_in">parseInt</span>(trs[i].<span class="property">cells</span>[<span class="number">3</span>].<span class="property">innerText</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    trs[trs.<span class="property">length</span>-<span class="number">1</span>].<span class="property">cells</span>[<span class="number">1</span>].<span class="property">innerText</span> = num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">delData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(event &amp;&amp; event.<span class="property">srcElement</span> &amp;&amp; event.<span class="property">srcElement</span>.<span class="property">tagName</span>==<span class="string">&quot;IMG&quot;</span>)&#123;</span><br><span class="line">        <span class="comment">// alert 表示弹出一个对话框</span></span><br><span class="line">        <span class="comment">// confirm表示弹出一个带确定和取消按钮的对话框，确定返回true，取消返回false</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="title function_">confirm</span>(<span class="string">&quot;是否确定删除&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">var</span> img = event.<span class="property">srcElement</span>;</span><br><span class="line">            <span class="keyword">var</span> tr = img.<span class="property">parentElement</span>.<span class="property">parentElement</span>;</span><br><span class="line">            <span class="keyword">var</span> fruitTbl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tbl_fruit&quot;</span>);</span><br><span class="line"></span><br><span class="line">            fruitTbl.<span class="title function_">deleteRow</span>(tr.<span class="property">rowIndex</span>);</span><br><span class="line">            <span class="title function_">updateZJ</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isNumber</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">isNaN</span>(<span class="title class_">Number</span>(num, <span class="number">10</span>)))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_furit_list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;tbl_fruit&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>单价<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>数量<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>小计<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">onmouseover</span>=<span class="string">&quot;showHand()&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>50<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>250<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\Nuyoah\Downloads\cha.png&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;dekImg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>梨<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>6<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>60<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>360<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\Nuyoah\Downloads\cha.png&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;dekImg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>7<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>70<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>490<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\Nuyoah\Downloads\cha.png&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;dekImg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>菠萝<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>8<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>640<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;C:\Users\Nuyoah\Downloads\cha.png&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;dekImg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>总计<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">4</span>&gt;</span>300<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div_add_furit&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;tbl_add&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>名称:<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;橙子&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>单价:<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fprice&quot;</span> <span class="attr">value</span>=<span class="string">&quot;8&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>数量:<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fnumber&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;添加&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;重填&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="web"><a class="markdownIt-Anchor" href="#web"></a> WEB</h1>
<h2 id="cs与bs异同"><a class="markdownIt-Anchor" href="#cs与bs异同"></a> CS与BS异同</h2>
<p>CS：客户端服务器架构模式</p>
<ul>
<li>
<p>优点：充分利用客户端的机器资源，减轻服务器的负荷（将一部分安全性不高的计算任务存储任务放在客户端，不要把所有计算和存储任务都放在服务器端执行，从而减轻服务器的压力，也能够减轻网络的负荷）</p>
</li>
<li>
<p>缺点：需要安装，升级成本较大</p>
</li>
</ul>
<p>BS：浏览器服务器架构模式</p>
<ul>
<li>优点：不需要安装，升级成本小</li>
<li>缺点：所有的计算和存储任务都放在服务器端执行，服务器的负荷比较重，在服务器端完成计算之后再将结果传回浏览器端，因此客户端服务器端会进行非常频繁的数据通信，从而网络负荷较重。</li>
</ul>
<h2 id="tomcat"><a class="markdownIt-Anchor" href="#tomcat"></a> TOMCAT</h2>
<p>tomcat是本地服务器</p>
<p>目录说明：</p>
<ol>
<li>bin：存放可执行文件的目录</li>
<li>conf：存放配置文件的目录</li>
<li>lib：存放第三方包的目录</li>
<li>logs：存放日志文件的目录</li>
<li>webapps：项目部署的目录</li>
<li>work：工作目录</li>
<li>temp：临时目录</li>
</ol>
<p>配置环境变量：TOMCAT是用java和C来写的，需要配置JAVA_HOME</p>
<p>WebAPP最基本的文件夹有两个：1.项目文件夹 2.WEB-INF文件夹</p>
<h2 id="项目执行过程"><a class="markdownIt-Anchor" href="#项目执行过程"></a> 项目执行过程</h2>
<p>客户端发起请求 -&gt; 服务器端处理请求</p>
<p>以form表单为例</p>
<ol>
<li>用户发起请求， action=add</li>
<li>在项目的web.xml文件夹中找到url-pattern = /add</li>
<li>找到add对应的servlet-name的对应的servlet-class</li>
<li>根据用户发送的是post请求还是get请求，从而调用对应java类中的doPost还是doGet方法</li>
</ol>
<h2 id="模块创建过程"><a class="markdownIt-Anchor" href="#模块创建过程"></a> 模块创建过程</h2>
<ol>
<li>
<p>新建空项目</p>
</li>
<li>
<p>在项目中新建模块</p>
</li>
<li>
<p>在模块中添加WEB包</p>
</li>
<li>
<p>创建Artifact-部署包</p>
</li>
<li>
<p>lib-artifact</p>
<p>现有artifact再有的lib的各种jar包，但是这时候这个jar包并没有添加到部署包中，我们在projectSettings中有Problem会提示，点击Fix选择add to…即可，另外我们也可以直接把lib文件夹新建到WEB-INF下，这样的话这个lib只能是当前这个模块所享有，如果我们需要新建模块的话则需要再重新新建包</p>
</li>
<li>
<p>在部署的时候，修改applicationContext，然后再回到server选项卡，检查url的值，url的值指的是tomcat启动完成之后自动打开你指定的浏览器，并且访问这个网址，如果我们的网址是：<a target="_blank" rel="noopener" href="http://localhost:8080/pro-01">http://localhost:8080/pro-01</a> 则我们默认访问index.html,index.htm,index.jsp,如果没有这个三个资源的话则会报404错误，默认访问页面可以通过&lt; welcome-file-list &gt;中设置</p>
</li>
<li>
<p>空指针一般是，数据取不到，或者是参数名不对应造成的</p>
</li>
</ol>
<h1 id="servlet"><a class="markdownIt-Anchor" href="#servlet"></a> Servlet</h1>
<h2 id="获取参数"><a class="markdownIt-Anchor" href="#获取参数"></a> 获取参数</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 设置字符集</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fname</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fpriceStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fprice&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">fprice</span> <span class="operator">=</span> Integer.parseInt(fpriceStr);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fcountStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fcount&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">fcount</span> <span class="operator">=</span> Integer.parseInt(fcountStr);</span><br><span class="line">        <span class="type">String</span> <span class="variable">remark</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;remark&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">idStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fid&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">fid</span> <span class="operator">=</span> Integer.parseInt(idStr);</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// 创建数据库连接对象</span></span><br><span class="line">        <span class="type">FruitDAO</span> <span class="variable">fruitDAO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitImp</span>();</span><br><span class="line">        <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 将数据插入到数据库中</span></span><br><span class="line">        fruitDAO.insert(connection, <span class="keyword">new</span> <span class="title class_">Fruit</span>(fid, fname,fprice, fcount, remark));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="中文乱码"><a class="markdownIt-Anchor" href="#中文乱码"></a> 中文乱码</h2>
<ul>
<li>POST
<ul>
<li>通过设置req.setCharacterEncoding(“UTF-8”)即可</li>
</ul>
</li>
<li>GET
<ul>
<li>tomcat8之后不用设置编码问题</li>
<li>tomcat8之前
<ul>
<li>先将字符串转换成二进制的形式byte[] bytes = fname.getBytes(“ISO-8859-1”);</li>
<li>将字节数组按照指定的编码重新组装成字符串 fname = new String(bytes, “UTF-8”);</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="继承关系"><a class="markdownIt-Anchor" href="#继承关系"></a> 继承关系</h2>
<ol>
<li>
<p>继承关系</p>
<p>javax.servlet.Servlet接口</p>
<p>​	javax.servlet.GenericServlet抽象类</p>
<p>​		javax.servlet.http.HttpServlet 抽象子类</p>
</li>
<li>
<p>相关方法</p>
<p>javax.servlet.Servlet接口：</p>
<p>​	void init(config) -初始化方法</p>
<p>​	void service(request, response) -服务方法</p>
<p>​	void destory()		- 销毁方法</p>
<p>javax.servlet.GenericServlet抽象类：</p>
<p>​	void service(request, response) - 仍是抽象方法</p>
<p>javax.servlet.http.HttpServlet 抽象子类</p>
<p>​	void service(request, response) - 不是抽象的的</p>
<ol>
<li>String method = req.getMethod(); 获取请求的方式</li>
<li>各种if判断，根据请求方式不同，决定去调用不同的do方法</li>
<li>在HTTPServlet这个抽象类中，do方法都差不多</li>
</ol>
</li>
<li>
<p>小结</p>
<ol>
<li>继承关系HttpServlet - &gt; GenericServlet -&gt; Servlet</li>
<li>Servlet中的核心方法：init(), service(), destory()</li>
<li>service()方法：当有请求过来的时候都要经过这个方法，
<ol>
<li>在HttpServlet中我们回去分析请求的方式，到底是get，post，head等等</li>
<li>通过不同的方法，调用不同的do…()方法</li>
<li>
<span class='p red'>在HttpServlet中这些方法默认是405</span>
</li>
</ol>
</li>
<li>因此我们在新建Servlet时，我们才会去考虑请求方法，从而决定重写那个do方法</li>
</ol>
</li>
</ol>
<h2 id="生命周期"><a class="markdownIt-Anchor" href="#生命周期"></a> 生命周期</h2>
<ol>
<li>
<p>生命周期：从出生到死亡的过程就是生命周期，对应着Servlet的中的三个方法：init(), service(), destory()</p>
</li>
<li>
<p>默认情况下：</p>
<ol>
<li>第一次接受请求时：这个Servlet会进行实例化（调用构造方法），初始化（调用init()）,然后服务（调用service）</li>
<li>从第二次请求开始，每一次都是服务，不必再进行实例化</li>
<li>当容器关闭的时候，其中所有的servlet实例会被销毁，调用销毁方法</li>
</ol>
</li>
<li>
<p>通过案例发现</p>
<ul>
<li>servlet实例，tomcat只会创建一个，所有请求都是<span class='p red'>这个实例</span>去相应</li>
<li>默认情况下，第一次请求时，tomcat才回去实例化，初始化，然后服务，这样做的好处是什么? <span class='p red'>提高系统启动速度</span></li>
<li>因此得出结论：如果需要提高系统启动速度，当前默认情况就是这样，如果需要提高响应速度，我们应该设置Servlet的启动时机</li>
</ul>
</li>
<li>
<p>Servlet的启动时机</p>
<ul>
<li>
<p>默认是第一次Servlet请求的时候进行实例化，初始化</p>
</li>
<li>
<p>我们可以通过&lt; load-on-startup &gt;来设置servlet的启动顺序，数字越小，启动越靠前，最小值为0</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DemoServlet01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hgu.servlet.DemoServlet01<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DemoServlet01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Servlet在容器的中是单例的，线程不安全的</p>
<ul>
<li>单例：所有请求都是同一个实例去相应，因为servlet实例tomcat只会创建一次</li>
<li>线程不安全的：一个线程需要根据这个实例中的某个成员变量的值去做逻辑判断，但是在中间的某个时机，另一个线程改变了这个之，就会导致不能达到预期结果</li>
<li>我们尽可能不要再Servlet中定义成员变量，如果必须要定义的话，便不要根据成员变量的值去做一些逻辑判断</li>
</ul>
</li>
</ol>
<p>.</p>
<h2 id="http协议"><a class="markdownIt-Anchor" href="#http协议"></a> HTTP协议</h2>
<ol>
<li>
<p>Http称之为超文本传输协议</p>
</li>
<li>
<p>Http是无状态的</p>
</li>
<li>
<p>Http请求相应包含两个部分：请求和相应</p>
<ul>
<li>
<p>请求：</p>
<p>请求包括三个部分：1. 请求行 2. 请求头 3. 请求主体</p>
<ul>
<li>
<p>请求行包括三个部分1. 请求的方式， 2. 请求的URL， 3.请求的协议</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/E8gSNsPVbqzWXGM.png" alt="image-20230129163350998.png" /></p>
</li>
<li>
<p>请求消息头中包括了很多客户端要告诉服务器的信息</p>
<p>作用：通过具体的参数对本次请求进行详细的说明</p>
<p>格式：键值对，键和值之间使用冒号隔开</p>
<p>相对比较重要的请求消息头：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Host</td>
<td>服务器的主机地址</td>
</tr>
<tr>
<td>Accept</td>
<td>声明当前请求能够接受的『媒体类型』</td>
</tr>
<tr>
<td>Referer</td>
<td>当前请求来源页面的地址</td>
</tr>
<tr>
<td>Content-Length</td>
<td>请求体内容的长度</td>
</tr>
<tr>
<td>Content-Type</td>
<td>请求体的内容类型，这一项的具体值是媒体类型中的某一种</td>
</tr>
<tr>
<td>Cookie</td>
<td>浏览器访问服务器时携带的Cookie数据</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/fPUegR1ZdYtJhmH.png" alt="image-20230129163408046.png" /></p>
</li>
<li>
<p>请求体，三种情况</p>
<p>get方式，没有请求体，但是有一个querystring</p>
<p>post方式，有请求体，form data</p>
<p>json格式，有请求体，request payload</p>
</li>
</ul>
</li>
<li>
<p>响应：响应行，响应头，响应体</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/KoybgQN2dYSreTG.png" alt="image-20230129163742437.png" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/FGKqzX2U9VhtHRW.png" alt="image-20230129163803935.png" /></p>
<ul>
<li>响应行：包含三个信息：1.协议 2.状态响应码(200) 3.响应状态(OK)</li>
<li>响应头：包含了服务器的信息，服务器发送给浏览器的信息（内容的媒体类型，编码，内容长度等）</li>
<li>响应体：响应的实际的内容</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="session会话"><a class="markdownIt-Anchor" href="#session会话"></a> Session会话</h2>
<ol>
<li>
<p>Http是无状态的</p>
<ul>
<li>Http无状态：如果有两个请求发送过来，服务器无法区分这两个请求是否是同一个用户发送过来的</li>
<li>通过会话跟踪技术来解决这个问题，给这个会话一个标识，通过这个标识来判断是否是同一个用户</li>
</ul>
</li>
<li>
<p>会话跟踪技术</p>
<ul>
<li>客户端第一次发请求给服务器，服务器获取session，获取不到，则创建新的，然后响应给客户端</li>
<li>下次客户端给服务器法请求的时候，会把sessionID带给服务器，服务器通过sessionID判断这次会话和那一次的是同一个用户</li>
<li>常用API：
<ul>
<li>request.getSession -&gt; 获取当前会话，没有则创建一个新的会话</li>
<li>request.getSession(true) -&gt; 作用和上面的一样</li>
<li>request.getSession(false) -&gt; 获取当前会话，没有则返回null</li>
<li>session.getId()   -&gt; 获取sessionID</li>
<li>session.isNew()   -&gt; 判断当前session是否是第一次访问</li>
<li>session.getMaxInactiveInterval() -&gt; session的非激活间隔时长，默认1800秒</li>
<li>session.setMaxInactiveInterval()</li>
<li>session.invalidate() -&gt; 强制性会话立即失效</li>
</ul>
</li>
</ul>
</li>
<li>
<p>session保存作用域</p>
<ul>
<li>
<p>session保存作用域是和具体的某一个session对应的, 作用域就是本session内部</p>
</li>
<li>
<p>常用的API</p>
<p>session.setAttribute(k, v)</p>
<p>session.getAttribute(k)</p>
<p>session.removeAttribute(k)</p>
</li>
</ul>
</li>
</ol>
<h2 id="服务器内部转发以及客户端重定向"><a class="markdownIt-Anchor" href="#服务器内部转发以及客户端重定向"></a> 服务器内部转发以及客户端重定向</h2>
<p>服务器内部转发：request.getRequestDispatcher(&quot;…&quot;).forward(request,response);</p>
<ul>
<li>当浏览器向服务器请求的时候，服务器内部的servlet1 直接跳转到servlet2中执行，最终浏览器请求接受的是servlet1，但实际处理的确实servlet2</li>
<li>一次请求相应的过程，对于客户端而言，内部经过了多少次的转发，客户端并不知晓</li>
<li>地址栏的URL并不会改变</li>
</ul>
<p>客户端重定向： response.sendRedirect(&quot;…&quot;)</p>
<ul>
<li>当浏览器向服务器发送请求的时候，服务器内部的servlet1 返回给浏览器，让浏览器去请求servlet02，然后浏览器在从新请求servlet2</li>
<li>多次请求相应的过程，对于客户端而言，知道url变化了几次</li>
<li>地址栏的URL会发生改变</li>
</ul>
<h2 id="thymeleaf-视图模板技术"><a class="markdownIt-Anchor" href="#thymeleaf-视图模板技术"></a> Thymeleaf-视图模板技术</h2>
<ol>
<li>
<p>添加thymeleaf的jar包</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/QovE2cjslmMi1gn.png" alt="image-20230129220255245.png" /></p>
</li>
<li>
<p>新建一个Servlet类ViewBaseServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hgu.myssm.myspringmvc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.TemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.context.WebContext;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templatemode.TemplateMode;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templateresolver.ServletContextTemplateResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewBaseServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TemplateEngine templateEngine;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建Thymeleaf解析器对象</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(servletContext);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.给解析器对象设置参数</span></span><br><span class="line">        <span class="comment">// ①HTML是默认模式，明确设置是为了代码更容易理解</span></span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ②设置前缀</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">viewPrefix</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;view-prefix&quot;</span>);</span><br><span class="line"></span><br><span class="line">        templateResolver.setPrefix(viewPrefix);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ③设置后缀</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">viewSuffix</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;view-suffix&quot;</span>);</span><br><span class="line"></span><br><span class="line">        templateResolver.setSuffix(viewSuffix);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ④设置缓存过期时间（毫秒）</span></span><br><span class="line">        templateResolver.setCacheTTLMs(<span class="number">60000L</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ⑤设置是否缓存</span></span><br><span class="line">        templateResolver.setCacheable(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ⑥设置服务器端编码方式</span></span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.创建模板引擎对象</span></span><br><span class="line">        templateEngine = <span class="keyword">new</span> <span class="title class_">TemplateEngine</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.给模板引擎对象设置模板解析器</span></span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">processTemplate</span><span class="params">(String templateName, HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.设置响应体内容类型和字符集</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建WebContext对象</span></span><br><span class="line">        <span class="type">WebContext</span> <span class="variable">webContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebContext</span>(req, resp, getServletContext());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.处理模板数据</span></span><br><span class="line">        templateEngine.process(templateName, webContext, resp.getWriter());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在web.xml文件中添加配置</p>
<ul>
<li>前缀：view-prefix</li>
<li>后缀：view-suffix</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在上下文参数中配置视图前缀和视图后缀 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>view-prefix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>/WEB-INF/view/<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>view-suffix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>.html<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>使我们的Servlet继承ViewBaseServlet</p>
</li>
</ol>
<h3 id="th名称空间"><a class="markdownIt-Anchor" href="#th名称空间"></a> TH名称空间</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/O8URQ6Vuwh9DXxt.png" alt="img011.f6f1e569.png" /></p>
<h3 id="表达式语法"><a class="markdownIt-Anchor" href="#表达式语法"></a> 表达式语法</h3>
<h4 id="修改标签文本值"><a class="markdownIt-Anchor" href="#修改标签文本值"></a> 修改标签文本值</h4>
<p>代码示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;标签体新值&quot;</span>&gt;</span>标签体原始值<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="thtext作用"><a class="markdownIt-Anchor" href="#thtext作用"></a> th:text作用</h5>
<ul>
<li>不经过服务器解析，直接用浏览器打开HTML文件，看到的是『标签体原始值』</li>
<li>经过服务器解析，Thymeleaf引擎根据th:text属性指定的『标签体新值』去<strong>替换</strong>『标签体原始值』</li>
</ul>
<h5 id="字面量"><a class="markdownIt-Anchor" href="#字面量"></a> 字面量</h5>
<p>『字面量』是一个经常会遇到的概念，我们可以对照『变量』来理解它的含义。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a是变量，100是字面量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;a = &quot;</span> + a);</span><br></pre></td></tr></table></figure>
<ul>
<li>变量：变量名字符串本身不是它的值，它指向的才是它的值</li>
<li>字面量：它就是字面上的含义，我们从『字面』上看到的直接就是它的值</li>
</ul>
<p>现在我们在th:text属性中使用的就是『字面量』，它<strong>不指代任何其他值</strong>。</p>
<h4 id="修改指定属性值"><a class="markdownIt-Anchor" href="#修改指定属性值"></a> 修改指定属性值</h4>
<p>代码示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;文本框新值&quot;</span> <span class="attr">value</span>=<span class="string">&quot;文本框旧值&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>语法：任何HTML标签原有的属性，前面加上『th:』就都可以通过Thymeleaf来设定新值。</p>
<h4 id="解析url地址"><a class="markdownIt-Anchor" href="#解析url地址"></a> 解析URL地址</h4>
<h5 id="基本语法"><a class="markdownIt-Anchor" href="#基本语法"></a> 基本语法</h5>
<p>代码示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;@&#123;/aaa/bbb/ccc&#125;&quot;</span>&gt;</span>标签体原始值<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>1</p>
<p>经过解析后得到：</p>
<blockquote>
<p>/view/aaa/bbb/ccc</p>
</blockquote>
<p>所以@{}的作用是<strong>在字符串前附加『上下文路径』</strong></p>
<blockquote>
<p>这个语法的好处是：实际开发过程中，项目在不同环境部署时，Web应用的名字有可能发生变化。所以上下文路径不能写死。而通过@{}动态获取上下文路径后，不管怎么变都不怕啦！</p>
</blockquote>
<h5 id="首页使用url地址解析"><a class="markdownIt-Anchor" href="#首页使用url地址解析"></a> 首页使用URL地址解析</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/65rxHCWM2FRecZq.png" alt="img018.3954c282.png" /></p>
<p>如果我们直接访问index.html本身，那么index.html是不需要通过Servlet，当然也不经过模板引擎，所以index.html上的Thymeleaf的任何表达式都不会被解析。</p>
<p>解决办法：通过Servlet访问index.html，这样就可以让模板引擎渲染页面了：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/51aWVcnG2SPDYdz.png" alt="img019.7663465a.png" /></p>
<blockquote>
<p>进一步的好处：</p>
<p>通过上面的例子我们看到，所有和业务功能相关的请求都能够确保它们通过Servlet来处理，这样就方便我们统一对这些请求进行特定规则的限定。</p>
</blockquote>
<h5 id="给url地址后面附加请求参数"><a class="markdownIt-Anchor" href="#给url地址后面附加请求参数"></a> 给URL地址后面附加请求参数</h5>
<p>参照官方文档说明：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/ILadZMU2x71JXhN.png" alt="img037.78b02342.png" /></p>
<h4 id="直接执行表达式"><a class="markdownIt-Anchor" href="#直接执行表达式"></a> 直接执行表达式</h4>
<p>Servlet代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setAttribute(<span class="string">&quot;reqAttrName&quot;</span>, <span class="string">&quot;&lt;span&gt;hello-value&lt;/span&gt;&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>页面代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>有转义效果：[[$&#123;reqAttrName&#125;]]<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>无转义效果：[($&#123;reqAttrName&#125;)]<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>执行效果：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>有转义效果：<span class="symbol">&amp;lt;</span>span<span class="symbol">&amp;gt;</span>hello-value<span class="symbol">&amp;lt;</span>/span<span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>无转义效果：<span class="tag">&lt;<span class="name">span</span>&gt;</span>hello-value<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="基本语法访问域对象"><a class="markdownIt-Anchor" href="#基本语法访问域对象"></a> 基本语法：访问域对象</h3>
<h4 id="域对象"><a class="markdownIt-Anchor" href="#域对象"></a> 域对象</h4>
<h5 id="请求域"><a class="markdownIt-Anchor" href="#请求域"></a> 请求域</h5>
<p>在请求转发的场景下，我们可以借助HttpServletRequest对象内部给我们提供的存储空间，帮助我们携带数据，把数据发送给转发的目标资源。</p>
<p>请求域：HttpServletRequest对象内部给我们提供的存储空间</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/zbeCOc5wdAFltRM.png" alt="img012.8cffceee.png" /></p>
<h5 id="会话域"><a class="markdownIt-Anchor" href="#会话域"></a> 会话域</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/pcnbY3DqtvXjwC1.png" alt="img013.0fde173c.png" /></p>
<h5 id="应用域"><a class="markdownIt-Anchor" href="#应用域"></a> 应用域</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/NIXOYLl2PymSjJ7.png" alt="./images" /></p>
<blockquote>
<p>PS：在我们使用的视图是JSP的时候，域对象有4个</p>
<ul>
<li>pageContext</li>
<li>request：请求域</li>
<li>session：会话域</li>
<li>application：应用域</li>
</ul>
<p>所以在JSP的使用背景下，我们可以说域对象有4个，现在使用Thymeleaf了，没有pageContext。</p>
</blockquote>
<h4 id="在servlet中将数据存入属性域"><a class="markdownIt-Anchor" href="#在servlet中将数据存入属性域"></a> 在Servlet中将数据存入属性域</h4>
<h5 id="操作请求域"><a class="markdownIt-Anchor" href="#操作请求域"></a> 操作请求域</h5>
<p>Servlet中代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">requestAttrName</span> <span class="operator">=</span> <span class="string">&quot;helloRequestAttr&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">requestAttrValue</span> <span class="operator">=</span> <span class="string">&quot;helloRequestAttr-VALUE&quot;</span>;</span><br><span class="line"></span><br><span class="line">request.setAttribute(requestAttrName, requestAttrValue);</span><br></pre></td></tr></table></figure>
<p>Thymeleaf表达式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;helloRequestAttr&#125;&quot;</span>&gt;</span>request field value<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="操作会话域"><a class="markdownIt-Anchor" href="#操作会话域"></a> 操作会话域</h5>
<p>Servlet中代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ①通过request对象获取session对象</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ②存入数据</span></span><br><span class="line">session.setAttribute(<span class="string">&quot;helloSessionAttr&quot;</span>, <span class="string">&quot;helloSessionAttr-VALUE&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>Thymeleaf表达式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.helloSessionAttr&#125;&quot;</span>&gt;</span>这里显示会话域数据<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="操作应用域"><a class="markdownIt-Anchor" href="#操作应用域"></a> 操作应用域</h5>
<p>Servlet中代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ①通过调用父类的方法获取ServletContext对象</span></span><br><span class="line"><span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ②存入数据</span></span><br><span class="line">servletContext.setAttribute(<span class="string">&quot;helloAppAttr&quot;</span>, <span class="string">&quot;helloAppAttr-VALUE&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>Thymeleaf表达式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;application.helloAppAttr&#125;&quot;</span>&gt;</span>这里显示应用域数据<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="获取请求参数"><a class="markdownIt-Anchor" href="#获取请求参数"></a> 获取请求参数</h3>
<p>具体来说，我们这里探讨的是在页面上（模板页面）获取请求参数。底层机制是：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/GbfqctD64pNPn9V.png" alt="./images" /></p>
<h4 id="一个名字一个值"><a class="markdownIt-Anchor" href="#一个名字一个值"></a> 一个名字一个值</h4>
<p>页面代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;param.username&#125;&quot;</span>&gt;</span>这里替换为请求参数的值<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>页面显示效果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/JbcGpefVu6qMCyd.png" alt="image-20230129223833990" /></p>
<h4 id="一个名字多个值"><a class="markdownIt-Anchor" href="#一个名字多个值"></a> 一个名字多个值</h4>
<p>页面代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;param.team&#125;&quot;</span>&gt;</span>这里替换为请求参数的值<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>页面显示效果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/NwAMfmkgx1YZq3B.png" alt="image-20230129223821591" /></p>
<p>如果想要精确获取某一个值，可以使用数组下标。页面代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;param.team[0]&#125;&quot;</span>&gt;</span>这里替换为请求参数的值<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;param.team[1]&#125;&quot;</span>&gt;</span>这里替换为请求参数的值<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>页面显示效果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/PF3IZX1GYyQTKni.png" alt="image-20230129223848312" /></p>
<h3 id="分支与迭代"><a class="markdownIt-Anchor" href="#分支与迭代"></a> 分支与迭代</h3>
<h4 id="分支"><a class="markdownIt-Anchor" href="#分支"></a> 分支</h4>
<h5 id="if和unless"><a class="markdownIt-Anchor" href="#if和unless"></a> if和unless</h5>
<p>让标记了th:if、th:unless的标签根据条件决定是否显示。</p>
<p>示例的实体类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer empId;</span><br><span class="line">    <span class="keyword">private</span> String empName;</span><br><span class="line">    <span class="keyword">private</span> Double empSalary;</span><br></pre></td></tr></table></figure>
<p>示例的Servlet代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.创建ArrayList对象并填充</span></span><br><span class="line">    List&lt;Employee&gt; employeeList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    employeeList.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1</span>, <span class="string">&quot;tom&quot;</span>, <span class="number">500.00</span>));</span><br><span class="line">    employeeList.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">2</span>, <span class="string">&quot;jerry&quot;</span>, <span class="number">600.00</span>));</span><br><span class="line">    employeeList.add(<span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">3</span>, <span class="string">&quot;harry&quot;</span>, <span class="number">700.00</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.将集合数据存入请求域</span></span><br><span class="line">    request.setAttribute(<span class="string">&quot;employeeList&quot;</span>, employeeList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.调用父类方法渲染视图</span></span><br><span class="line">    <span class="built_in">super</span>.processTemplate(<span class="string">&quot;list&quot;</span>, request, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例的HTML代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工编号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工工资<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;#lists.isEmpty(employeeList)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span>&gt;</span>抱歉！没有查询到你搜索的数据！<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;not #lists.isEmpty(employeeList)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span>&gt;</span>有数据！<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:unless</span>=<span class="string">&quot;$&#123;#lists.isEmpty(employeeList)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span>&gt;</span>有数据！<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>if配合not关键词和unless配合原表达式效果是一样的，看自己的喜好。</p>
<h5 id="switch"><a class="markdownIt-Anchor" href="#switch"></a> switch</h5>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>测试switch<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:switch</span>=<span class="string">&quot;$&#123;user.memberLevel&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">&quot;level-1&quot;</span>&gt;</span>银牌会员<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">&quot;level-2&quot;</span>&gt;</span>金牌会员<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">&quot;level-3&quot;</span>&gt;</span>白金会员<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">&quot;level-4&quot;</span>&gt;</span>钻石会员<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="迭代"><a class="markdownIt-Anchor" href="#迭代"></a> 迭代</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>测试each<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工编号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工工资<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;#lists.isEmpty(employeeList)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span>&gt;</span>抱歉！没有查询到你搜索的数据！<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;not #lists.isEmpty(employeeList)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 遍历出来的每一个元素的名字 : $&#123;要遍历的集合&#125; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee : $&#123;employeeList&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.empId&#125;&quot;</span>&gt;</span>empId<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.empName&#125;&quot;</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.empSalary&#125;&quot;</span>&gt;</span>empSalary<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在迭代过程中，可以参考下面的说明使用迭代状态：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/VIbOgyGwCYDmL6r.png" alt="./images" /></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>测试each<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工编号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>员工工资<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>迭代状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;#lists.isEmpty(employeeList)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span>&gt;</span>抱歉！没有查询到你搜索的数据！<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;not #lists.isEmpty(employeeList)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 遍历出来的每一个元素的名字 : $&#123;要遍历的集合&#125; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee,empStatus : $&#123;employeeList&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.empId&#125;&quot;</span>&gt;</span>empId<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.empName&#125;&quot;</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.empSalary&#125;&quot;</span>&gt;</span>empSalary<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;empStatus.count&#125;&quot;</span>&gt;</span>count<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="保存作用域"><a class="markdownIt-Anchor" href="#保存作用域"></a> 保存作用域</h2>
<p>远视情况下，保存作用域有四个：page(页面级别，几乎不用)，request(一起请求响应范围), session(一次回话范围)，application(一次应用程序范围)</p>
<ol>
<li>
<p>request,只能保留一次请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">request.setAttribute(<span class="string">&quot;k&quot;</span>,<span class="string">&quot;v&quot;</span>);</span><br><span class="line">request.getAttribute(<span class="string">&quot;k&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>session，可以保留多次请求，但是只局限于同一个Session，换浏览器就不行了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">request.getSession().setAttribute(<span class="string">&quot;k&quot;</span>, <span class="string">&quot;v&quot;</span>);</span><br><span class="line">request.getSession().getAttribute(<span class="string">&quot;k&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>application，可以保留多次请求，贯穿于整个服务器之间，换浏览器也能获取到参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> request.getServletContext();</span><br><span class="line">application.setAttribute(<span class="string">&quot;k&quot;</span>, <span class="string">&quot;v&quot;</span>);</span><br><span class="line">application.getAttribute(<span class="string">&quot;k&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="路径问题"><a class="markdownIt-Anchor" href="#路径问题"></a> 路径问题</h2>
<p>相对路径和绝对路径</p>
<p>绝对路径</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base</span> <span class="attr">herf</span>=<span class="string">&quot;路径&quot;</span> &gt;</span></span><br><span class="line"><span class="comment">&lt;!--这个就是绝对路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/shpping.css&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="servlet优化"><a class="markdownIt-Anchor" href="#servlet优化"></a> Servlet优化</h1>
<h2 id="减少servlet数量"><a class="markdownIt-Anchor" href="#减少servlet数量"></a> 减少Servlet数量</h2>
<div class="tip error"><p>未优化前</p>
</div>
<p>一个客户端对着多个同类的Servlet</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/ikr4px9YDdPQqj5.png" alt="image-20230131153936837" /></p>
<p>客户端对应着的都是fruit相关的Servlet</p>
<p>项目结构：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/isEVajkhQvudgFI.png" alt="image-20230131154043004" /></p>
<div class="tip success"><p>优化后</p>
</div>
<p>客户端只对应着一个同类Servlet</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/DGjwToF4aY1pu3z.png" alt="image-20230131154525718" /></p>
<p>项目结构</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/jVzvpcIP5QCRkMF.png" alt="image-20230131155900579" /></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hgu.servlets;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hgu.fruit.dao.FruitImp;</span><br><span class="line"><span class="keyword">import</span> com.hgu.fruit.dao.inter.FruitDAO;</span><br><span class="line"><span class="keyword">import</span> com.hgu.fruit.pojo.Fruit;</span><br><span class="line"><span class="keyword">import</span> com.hgu.myssm.myspringmvc.ViewBaseServlet;</span><br><span class="line"><span class="keyword">import</span> com.hgu.utils.JDBCUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/fruit.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FruitServlet</span> <span class="keyword">extends</span> <span class="title class_">ViewBaseServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">FruitImp</span> <span class="variable">fruitImp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitImp</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">operator</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;operator&quot;</span>);</span><br><span class="line">        <span class="comment">// 如果是空的话则默认是index</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isEmpty(operator))&#123;</span><br><span class="line">            operator = <span class="string">&quot;search&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 通过反射获取所有方法</span></span><br><span class="line">        Method[] methods = <span class="built_in">this</span>.getClass().getDeclaredMethods();</span><br><span class="line">        <span class="comment">// 判断我们传进来的参数是那个一方法</span></span><br><span class="line">        <span class="keyword">for</span> (Method m : methods) &#123;</span><br><span class="line">            <span class="comment">// 获取参数名</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> m.getName();</span><br><span class="line">            <span class="keyword">if</span>(methodName.equals(operator))&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    m.invoke(<span class="built_in">this</span>, req, resp);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fidStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fid&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">fid</span> <span class="operator">=</span> Integer.parseInt(fidStr);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">fname</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fpriceStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fprice&quot;</span>);</span><br><span class="line">        <span class="type">Double</span> <span class="variable">fprice</span> <span class="operator">=</span> Double.parseDouble(fpriceStr);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">fcountStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fcount&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">fcount</span> <span class="operator">=</span> Integer.parseInt(fcountStr);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">remark</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;remark&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        fruitImp.update(connection, <span class="keyword">new</span> <span class="title class_">Fruit</span>(fid, fname, fprice, fcount, remark));</span><br><span class="line"></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;fruit.do&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">edit</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span>  <span class="variable">fidStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fid&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Fruit</span> <span class="variable">fruit</span> <span class="operator">=</span> fruitImp.getFruitByID(connection, Integer.parseInt(fidStr));</span><br><span class="line"></span><br><span class="line">        req.setAttribute(<span class="string">&quot;fruit&quot;</span>, fruit);</span><br><span class="line">        <span class="built_in">super</span>.processTemplate(<span class="string">&quot;edit&quot;</span>, req, resp);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">fidStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fid&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">fid</span> <span class="operator">=</span> Integer.parseInt(fidStr);</span><br><span class="line"></span><br><span class="line">        fruitImp.deleteByID(connection, fid);</span><br><span class="line"></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;fruit.do&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fname</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fpriceStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fprice&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">fprice</span> <span class="operator">=</span> Integer.parseInt(fpriceStr);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fcountStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fcount&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">fcount</span> <span class="operator">=</span> Integer.parseInt(fcountStr);</span><br><span class="line">        <span class="type">String</span> <span class="variable">remark</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;remark&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">FruitDAO</span> <span class="variable">fruitDAO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitImp</span>();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        fruitDAO.insert(connection, <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="number">1</span>, fname,fprice, fcount, remark));</span><br><span class="line"></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;fruit.do&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">search</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 设置编码</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 判断是查询操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">tag</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;tag&quot;</span>);</span><br><span class="line">        <span class="comment">// 初始化查询参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">kv</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">// 判断是否是查询操作</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isNotEmpty(tag))&#123;</span><br><span class="line">            <span class="comment">// 如果是的话，获取查询参数</span></span><br><span class="line">            kv = req.getParameter(<span class="string">&quot;kv&quot;</span>);</span><br><span class="line">            <span class="comment">// 将查询参数添加到Session中</span></span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;kv&quot;</span>,kv);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断上一次查询参数是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isEmpty((String) req.getSession().getAttribute(<span class="string">&quot;kv&quot;</span>)))&#123;</span><br><span class="line">            <span class="comment">// 如果是空的话，则设置成“” 防止出现null问题</span></span><br><span class="line">            kv = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 如果不是空的话，则获取</span></span><br><span class="line">            kv = (String) req.getSession().getAttribute(<span class="string">&quot;kv&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化分页为第一页</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pageNumber</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 获取是第几页</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">pageNumberStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pageNumber&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断前端是否传过来pageNumber</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isNotEmpty(pageNumberStr))&#123;</span><br><span class="line">            <span class="comment">// 如果传过来了pageNumber的话，则将参数化为整形</span></span><br><span class="line">            pageNumber = Integer.parseInt(pageNumberStr);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 如果前端没有传过来pageNumber的话，表明是第一次访问，则计算一下总页数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> fruitImp.getKeyValueCount(connection, kv);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;pageEndNumber&quot;</span>, count/<span class="number">5</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将pageNumber放到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;pageNumber&quot;</span>, pageNumber);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取fruitList</span></span><br><span class="line">        ArrayList&lt;Fruit&gt; fruitList = fruitImp.getKeyValueFruit(connection, kv, pageNumber);</span><br><span class="line">        <span class="comment">// 将fruitList放置到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;fruitList&quot;</span>,fruitList);</span><br><span class="line">        <span class="comment">// 通过Th渲染到index页面</span></span><br><span class="line">        <span class="built_in">super</span>.processTemplate(<span class="string">&quot;search&quot;</span>, req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="添加dispatcherservlet"><a class="markdownIt-Anchor" href="#添加dispatcherservlet"></a> 添加DispatcherServlet</h2>
<p>我们在执行项目的时候需要些很多的Servlet，例如上面的Fruit，User，Shopping等等，但是这又出现一个问题，我们在访问的时候需要访问不同的Servlet，这时候我们可以创建一个控制器，让网页中<span class='p red'>所有</span>的Servlet请求都经过这个控制器，然后通过这个控制器，来分析请求的网址，并对应上各自的Servlet</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/arSextZJwEYGmpM.png" alt="image-20230131174432342" /></p>
<p>所以我们需要实现Dispatcher类</p>
<div class="tip error"><p>这里有个坑：我们在使用完中央控制器之后，原本的Servlet类里面的父类中的init便不会被调用，因为我们删掉了原本Servlet类的注册信息，所以不会再执行Servlet中的init方法，需要我们手动给他执行</p>
</div>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.myssm.myspringmvc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.utils.JDBCUtils;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Document;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Element;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Node;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.NodeList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilder;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilderFactory;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;*.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DispatcherServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="comment">// 创建存储访问对象和Servlet的map</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; beanMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DispatcherServlet</span><span class="params">()</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">// 加载XML关联文件</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> getClass().getClassLoader().getResourceAsStream(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义工厂API，使应用程序能够获得从XML文档生成DOM对象树的解析器。</span></span><br><span class="line">        <span class="type">DocumentBuilderFactory</span> <span class="variable">documentBuilderFactory</span> <span class="operator">=</span> DocumentBuilderFactory.newInstance();</span><br><span class="line">        <span class="comment">// 传感DocumentBuilder对象</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">DocumentBuilder</span> <span class="variable">documentBuilder</span> <span class="operator">=</span> documentBuilderFactory.newDocumentBuilder();</span><br><span class="line">            <span class="comment">// 创建Document对象，获取XML对象</span></span><br><span class="line">            <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> documentBuilder.parse(is);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取XML中所有的bean节点</span></span><br><span class="line">            <span class="type">NodeList</span> <span class="variable">beans</span> <span class="operator">=</span> document.getElementsByTagName(<span class="string">&quot;bean&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; beans.getLength(); i++) &#123;</span><br><span class="line">                <span class="comment">// 获取bean对象</span></span><br><span class="line">                <span class="type">Node</span> <span class="variable">item</span> <span class="operator">=</span> beans.item(i);</span><br><span class="line">                <span class="comment">// 如果该节点等于元素节点的话</span></span><br><span class="line">                <span class="keyword">if</span>(item.getNodeType() == Node.ELEMENT_NODE)&#123;</span><br><span class="line">                    <span class="comment">//将对象强转为元素，我们需要其中的一些方法</span></span><br><span class="line">                    <span class="type">Element</span> <span class="variable">beanElement</span> <span class="operator">=</span> (Element)item;</span><br><span class="line">                    <span class="comment">// 获取XML中bean元素的中属性名为id的值</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> beanElement.getAttribute(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                    <span class="comment">// 获取XML中bean元素中属性名为class的值</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">aClass</span> <span class="operator">=</span> beanElement.getAttribute(<span class="string">&quot;class&quot;</span>);</span><br><span class="line">                    <span class="type">Class</span> <span class="variable">controllerBeanClass</span> <span class="operator">=</span> Class.forName(aClass);</span><br><span class="line">                    <span class="comment">// 创建class对应的对象</span></span><br><span class="line">                    <span class="type">Object</span> <span class="variable">beanObj</span> <span class="operator">=</span> controllerBeanClass.newInstance();</span><br><span class="line">                    <span class="comment">// 获取到ServletContext</span></span><br><span class="line">                    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">                    <span class="comment">// 通过反射手动调用Servlet的init方法</span></span><br><span class="line">                    <span class="type">Method</span> <span class="variable">setServletContext</span> <span class="operator">=</span> controllerBeanClass.getDeclaredMethod(<span class="string">&quot;setServletContext&quot;</span>,ServletContext.class);</span><br><span class="line">                    setServletContext.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                    setServletContext.invoke(beanObj,servletContext);</span><br><span class="line"></span><br><span class="line">                    beanMap.put(id,beanObj);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重写服务方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 设置编码</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取访问的网址</span></span><br><span class="line">        <span class="comment">// localhost:8080/fruit/fruit.do</span></span><br><span class="line">        <span class="comment">// servletPath就是上面的/fruit.do</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> req.getServletPath();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 从网址中提取出fruit</span></span><br><span class="line">        <span class="comment">// 第一步先提取出 fruit.do</span></span><br><span class="line">        servletPath = servletPath.substring(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 获取.do最后出现的索引位置</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> servletPath.lastIndexOf(<span class="string">&quot;.do&quot;</span>);</span><br><span class="line">        <span class="comment">// 切分字符串 获取fruit</span></span><br><span class="line">        servletPath = servletPath.substring(<span class="number">0</span>, i);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 通过XML文件将fruit 和 FruitServlet 联系起来</span></span><br><span class="line">        <span class="comment">// 通过beanMap中的属性，我们可以获取到对应网址的Servlet对象</span></span><br><span class="line">        <span class="comment">// fruit -&gt; FruitServlet对象</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">controllerBeanObj</span> <span class="operator">=</span> beanMap.get(servletPath);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取这个类中的所有方法并匹配</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">operate</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;operate&quot;</span>);</span><br><span class="line">        <span class="comment">// 判断是否为空如果为空的话则赋予默认值</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isEmpty(operate))&#123;</span><br><span class="line">            operate=<span class="string">&quot;search&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取当前类中的所有方法</span></span><br><span class="line">        Method[] declaredMethods = controllerBeanObj.getClass().getDeclaredMethods();</span><br><span class="line">        <span class="comment">// 依次遍历，判断是否是这次请求的方法</span></span><br><span class="line">        <span class="keyword">for</span> (Method declaredMethod : declaredMethods) &#123;</span><br><span class="line">            <span class="comment">// 获取方法名</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> declaredMethod.getName();</span><br><span class="line">            <span class="comment">// 判断是否和这次请求的方法名相同</span></span><br><span class="line">            <span class="keyword">if</span>(name.equals(operate))&#123;</span><br><span class="line">                <span class="comment">// 如果相同的话，通过反射调用这个方法即可</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    declaredMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                    declaredMethod.invoke(controllerBeanObj, req, resp);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>FruitServlet 中改动的地方</p>
<p>添加一个调用父类的init方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setServletContext</span><span class="params">(ServletContext servletContext)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    <span class="comment">// 手动调用init方法</span></span><br><span class="line">    <span class="built_in">super</span>.init(servletContext);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ViewBaseServlet中改动的地方</p>
<p>将Init改成带参数的了，将processTemplate里面的getServletContext()方法改成了参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.myssm.myspringmvc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.TemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.context.WebContext;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templatemode.TemplateMode;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templateresolver.ServletContextTemplateResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewBaseServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> ServletContext servletContext;</span><br><span class="line">    <span class="keyword">private</span> TemplateEngine templateEngine;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletContext servletContext)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取ServletContext对象</span></span><br><span class="line">        <span class="built_in">this</span>.servletContext = servletContext;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建Thymeleaf解析器对象</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(servletContext);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.给解析器对象设置参数</span></span><br><span class="line">        <span class="comment">// ①HTML是默认模式，明确设置是为了代码更容易理解</span></span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ②设置前缀</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">viewPrefix</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;view-prefix&quot;</span>);</span><br><span class="line"></span><br><span class="line">        templateResolver.setPrefix(viewPrefix);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ③设置后缀</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">viewSuffix</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;view-suffix&quot;</span>);</span><br><span class="line"></span><br><span class="line">        templateResolver.setSuffix(viewSuffix);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ④设置缓存过期时间（毫秒）</span></span><br><span class="line">        templateResolver.setCacheTTLMs(<span class="number">60000L</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ⑤设置是否缓存</span></span><br><span class="line">        templateResolver.setCacheable(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ⑥设置服务器端编码方式</span></span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.创建模板引擎对象</span></span><br><span class="line">        templateEngine = <span class="keyword">new</span> <span class="title class_">TemplateEngine</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.给模板引擎对象设置模板解析器</span></span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">processTemplate</span><span class="params">(String templateName, HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.设置响应体内容类型和字符集</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建WebContext对象</span></span><br><span class="line">        <span class="type">WebContext</span> <span class="variable">webContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebContext</span>(req, resp, <span class="built_in">this</span>.servletContext);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.处理模板数据</span></span><br><span class="line">        templateEngine.process(templateName, webContext, resp.getWriter());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="减少controller里面的相同代码"><a class="markdownIt-Anchor" href="#减少controller里面的相同代码"></a> 减少Controller里面的相同代码</h2>
<h3 id="减少跳转代码"><a class="markdownIt-Anchor" href="#减少跳转代码"></a> 减少跳转代码</h3>
<p>我们发现FruitController里面每一个方法都需要跳转或者重定向到其他方法或页面中，我们可以把这一部分提取出来,放到中央控制器中来进行统一的跳转，通过返回值来确定跳转的地方</p>
<p>FruitController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">search</span><span class="params">(HttpServletRequest req)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 设置编码</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 判断是查询操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">tag</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;tag&quot;</span>);</span><br><span class="line">        <span class="comment">// 初始化查询参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">kv</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">// 判断是否是查询操作</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isNotEmpty(tag))&#123;</span><br><span class="line">            <span class="comment">// 如果是的话，获取查询参数</span></span><br><span class="line">            kv = req.getParameter(<span class="string">&quot;kv&quot;</span>);</span><br><span class="line">            <span class="comment">// 将查询参数添加到Session中</span></span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;kv&quot;</span>,kv);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断上一次查询参数是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isEmpty((String) req.getSession().getAttribute(<span class="string">&quot;kv&quot;</span>)))&#123;</span><br><span class="line">            <span class="comment">// 如果是空的话，则设置成“” 防止出现null问题</span></span><br><span class="line">            kv = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 如果不是空的话，则获取</span></span><br><span class="line">            kv = (String) req.getSession().getAttribute(<span class="string">&quot;kv&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化分页为第一页</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pageNumber</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 获取是第几页</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">pageNumberStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pageNumber&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断前端是否传过来pageNumber</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isNotEmpty(pageNumberStr))&#123;</span><br><span class="line">            <span class="comment">// 如果传过来了pageNumber的话，则将参数化为整形</span></span><br><span class="line">            pageNumber = Integer.parseInt(pageNumberStr);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 如果前端没有传过来pageNumber的话，表明是第一次访问，则计算一下总页数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> fruitImp.getKeyValueCount(connection, kv);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;pageEndNumber&quot;</span>, count/<span class="number">5</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将pageNumber放到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;pageNumber&quot;</span>, pageNumber);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取fruitList</span></span><br><span class="line">        ArrayList&lt;Fruit&gt; fruitList = fruitImp.getKeyValueFruit(connection, kv, pageNumber);</span><br><span class="line">        <span class="comment">// 将fruitList放置到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;fruitList&quot;</span>,fruitList);</span><br><span class="line">        <span class="comment">// 通过Th渲染到index页面</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;search&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>DispatcherServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.myssm.myspringmvc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.utils.JDBCUtils;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Document;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Element;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Node;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.NodeList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilder;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilderFactory;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;*.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DispatcherServlet</span> <span class="keyword">extends</span> <span class="title class_">ViewBaseServlet</span> &#123;</span><br><span class="line">    <span class="comment">// 创建存储访问对象和Servlet的map</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; beanMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DispatcherServlet</span><span class="params">()</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">// 这里一定要调用一下父类方法，父类init里面初始化templateResolver</span></span><br><span class="line">        <span class="built_in">super</span>.init();</span><br><span class="line">        <span class="comment">// 加载XML关联文件</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> getClass().getClassLoader().getResourceAsStream(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义工厂API，使应用程序能够获得从XML文档生成DOM对象树的解析器。</span></span><br><span class="line">        <span class="type">DocumentBuilderFactory</span> <span class="variable">documentBuilderFactory</span> <span class="operator">=</span> DocumentBuilderFactory.newInstance();</span><br><span class="line">        <span class="comment">// 传感DocumentBuilder对象</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">DocumentBuilder</span> <span class="variable">documentBuilder</span> <span class="operator">=</span> documentBuilderFactory.newDocumentBuilder();</span><br><span class="line">            <span class="comment">// 创建Document对象，获取XML对象</span></span><br><span class="line">            <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> documentBuilder.parse(is);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取XML中所有的bean节点</span></span><br><span class="line">            <span class="type">NodeList</span> <span class="variable">beans</span> <span class="operator">=</span> document.getElementsByTagName(<span class="string">&quot;bean&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; beans.getLength(); i++) &#123;</span><br><span class="line">                <span class="comment">// 获取bean对象</span></span><br><span class="line">                <span class="type">Node</span> <span class="variable">item</span> <span class="operator">=</span> beans.item(i);</span><br><span class="line">                <span class="comment">// 如果该节点等于元素节点的话</span></span><br><span class="line">                <span class="keyword">if</span>(item.getNodeType() == Node.ELEMENT_NODE)&#123;</span><br><span class="line">                    <span class="comment">//将对象强转为元素，我们需要其中的一些方法</span></span><br><span class="line">                    <span class="type">Element</span> <span class="variable">beanElement</span> <span class="operator">=</span> (Element)item;</span><br><span class="line">                    <span class="comment">// 获取XML中bean元素的中属性名为id的值</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> beanElement.getAttribute(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                    <span class="comment">// 获取XML中bean元素中属性名为class的值</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">aClass</span> <span class="operator">=</span> beanElement.getAttribute(<span class="string">&quot;class&quot;</span>);</span><br><span class="line">                    <span class="type">Class</span> <span class="variable">controllerBeanClass</span> <span class="operator">=</span> Class.forName(aClass);</span><br><span class="line">                    <span class="comment">// 创建class对应的对象</span></span><br><span class="line">                    <span class="type">Object</span> <span class="variable">beanObj</span> <span class="operator">=</span> controllerBeanClass.newInstance();</span><br><span class="line"></span><br><span class="line">                    beanMap.put(id,beanObj);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重写服务方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 设置编码</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取访问的网址</span></span><br><span class="line">        <span class="comment">// localhost:8080/fruit/fruit.do</span></span><br><span class="line">        <span class="comment">// servletPath就是上面的/fruit.do</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> req.getServletPath();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 从网址中提取出fruit</span></span><br><span class="line">        <span class="comment">// 第一步先提取出 fruit.do</span></span><br><span class="line">        servletPath = servletPath.substring(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 获取.do最后出现的索引位置</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> servletPath.lastIndexOf(<span class="string">&quot;.do&quot;</span>);</span><br><span class="line">        <span class="comment">// 切分字符串 获取fruit</span></span><br><span class="line">        servletPath = servletPath.substring(<span class="number">0</span>, i);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 通过XML文件将fruit 和 FruitServlet 联系起来</span></span><br><span class="line">        <span class="comment">// 通过beanMap中的属性，我们可以获取到对应网址的Servlet对象</span></span><br><span class="line">        <span class="comment">// fruit -&gt; FruitServlet对象</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">controllerBeanObj</span> <span class="operator">=</span> beanMap.get(servletPath);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取这个类中的所有方法并匹配</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">operate</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;operate&quot;</span>);</span><br><span class="line">        <span class="comment">// 判断是否为空如果为空的话则赋予默认值</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isEmpty(operate))&#123;</span><br><span class="line">            operate=<span class="string">&quot;search&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取当前类中的所有方法</span></span><br><span class="line">        Method[] declaredMethods = controllerBeanObj.getClass().getDeclaredMethods();</span><br><span class="line">        <span class="comment">// 依次遍历，判断是否是这次请求的方法</span></span><br><span class="line">        <span class="keyword">for</span> (Method declaredMethod : declaredMethods) &#123;</span><br><span class="line">            <span class="comment">// 获取方法名</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> declaredMethod.getName();</span><br><span class="line">            <span class="comment">// 判断是否和这次请求的方法名相同</span></span><br><span class="line">            <span class="keyword">if</span>(name.equals(operate))&#123;</span><br><span class="line">                <span class="comment">// 如果相同的话，通过反射调用这个方法即可</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    declaredMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                    <span class="comment">// 执行我们特定的方法</span></span><br><span class="line">                    <span class="comment">//  通过返回值来判断该方法需要跳转的方式</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">methodReturnStr</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">methodReturn</span> <span class="operator">=</span> declaredMethod.invoke(controllerBeanObj, req);</span><br><span class="line">                    <span class="keyword">if</span>(methodReturn != <span class="literal">null</span>)&#123;</span><br><span class="line">                        methodReturnStr = (String) methodReturn;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// 如果返回值是以redirect开头的话</span></span><br><span class="line">                    <span class="keyword">if</span>(methodReturnStr.startsWith(<span class="string">&quot;redirect&quot;</span>))&#123; <span class="comment">// redirect:edit</span></span><br><span class="line">                        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> methodReturnStr.substring(<span class="string">&quot;redirect&quot;</span>.length()); <span class="comment">// edit;</span></span><br><span class="line">                        resp.sendRedirect(method);</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">super</span>.processTemplate(methodReturnStr,req, resp);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="减少参数代码"><a class="markdownIt-Anchor" href="#减少参数代码"></a> 减少参数代码</h3>
<div class="tip error"><p>这里有个前提是我们需要使用JDK 8.0以上的JAVA版本</p>
</div>
<p>因为JDK 8.0有一个新特性，就是我们在通过反射获取对应类中的参数名的时候，不再显示arg0， arg1，具体设置方法：</p>
<p>IEAD：</p>
<p>添加-parameters参数即可</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/dF3oYCSflTcLBNO.png" alt="image-20230208230128796" /></p>
<p>MAVEN</p>
<p>在bulid中设置compilerArgument参数</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>QQZone<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>QQZone Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>QQZone<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">compilerArgument</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">compilerArgument</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.9<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.9<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>FruitController</p>
<p>将FruitController中所有的getParameter,都去掉，换成参数传进去</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FruitController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">FruitImp</span> <span class="variable">fruitImp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitImp</span>();</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">update</span><span class="params">(Integer fid, String fname, Double fprice, Integer fcount, String remark)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        fruitImp.update(connection, <span class="keyword">new</span> <span class="title class_">Fruit</span>(fid, fname, fprice, fcount, remark));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:fruit.do&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">edit</span><span class="params">(Integer fid, HttpServletRequest req)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Fruit</span> <span class="variable">fruit</span> <span class="operator">=</span> fruitImp.getFruitByID(connection, fid);</span><br><span class="line"></span><br><span class="line">        req.setAttribute(<span class="string">&quot;fruit&quot;</span>, fruit);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;edit&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">del</span><span class="params">(Integer fid)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fruitImp.deleteByID(connection, fid);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:fruit.do&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String  <span class="title function_">add</span><span class="params">(String fname, Double fprice, Integer fcount, String remark)</span>&#123;</span><br><span class="line">        <span class="type">FruitDAO</span> <span class="variable">fruitDAO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitImp</span>();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        fruitDAO.insert(connection, <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="number">1</span>, fname,fprice, fcount, remark));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:fruit.do&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">search</span><span class="params">(String tag, String kv, HttpSession session, Integer pageNumber)</span> &#123;</span><br><span class="line">        <span class="comment">// 初始化查询参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">keyValue</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">// 判断是否是查询操作</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isNotEmpty(tag))&#123;</span><br><span class="line">            <span class="comment">// 如果是的话，获取查询参数</span></span><br><span class="line">            keyValue = kv;</span><br><span class="line">            <span class="comment">// 将查询参数添加到Session中</span></span><br><span class="line">            session.setAttribute(<span class="string">&quot;kv&quot;</span>,keyValue);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断上一次查询参数是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isEmpty((String) session.getAttribute(<span class="string">&quot;kv&quot;</span>)))&#123;</span><br><span class="line">            <span class="comment">// 如果是空的话，则设置成“” 防止出现null问题</span></span><br><span class="line">            keyValue = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 如果不是空的话，则获取</span></span><br><span class="line">            keyValue = (String) session.getAttribute(<span class="string">&quot;kv&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断前端是否传过来pageNumber</span></span><br><span class="line">        <span class="keyword">if</span>(pageNumber == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果前端没有传过来pageNumber的话，表明是第一次访问，则计算一下总页数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> fruitImp.getKeyValueCount(connection, keyValue);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;pageEndNumber&quot;</span>, count / <span class="number">5</span> + <span class="number">1</span>);</span><br><span class="line">            pageNumber = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将pageNumber放到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;pageNumber&quot;</span>, pageNumber);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取fruitList</span></span><br><span class="line">        ArrayList&lt;Fruit&gt; fruitList = fruitImp.getKeyValueFruit(connection, keyValue, pageNumber);</span><br><span class="line">        <span class="comment">// 将fruitList放置到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;fruitList&quot;</span>,fruitList);</span><br><span class="line">        <span class="comment">// 通过Th渲染到index页面</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;search&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>DispatcherServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">// 设置编码</span></span><br><span class="line">       req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">       <span class="comment">// 获取访问的网址</span></span><br><span class="line">       <span class="comment">// localhost:8080/fruit/fruit.do</span></span><br><span class="line">       <span class="comment">// servletPath就是上面的/fruit.do</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> req.getServletPath();</span><br><span class="line">       </span><br><span class="line">       <span class="comment">// 从网址中提取出fruit</span></span><br><span class="line">       <span class="comment">// 第一步先提取出 fruit.do</span></span><br><span class="line">       servletPath = servletPath.substring(<span class="number">1</span>);</span><br><span class="line">       <span class="comment">// 获取.do最后出现的索引位置</span></span><br><span class="line">       <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> servletPath.lastIndexOf(<span class="string">&quot;.do&quot;</span>);</span><br><span class="line">       <span class="comment">// 切分字符串 获取fruit</span></span><br><span class="line">       servletPath = servletPath.substring(<span class="number">0</span>, i);</span><br><span class="line">       </span><br><span class="line">       <span class="comment">// 通过XML文件将fruit 和 FruitServlet 联系起来</span></span><br><span class="line">       <span class="comment">// 通过beanMap中的属性，我们可以获取到对应网址的Servlet对象</span></span><br><span class="line">       <span class="comment">// fruit -&gt; FruitServlet对象</span></span><br><span class="line">       <span class="type">Object</span> <span class="variable">controllerBeanObj</span> <span class="operator">=</span> beanMap.get(servletPath);</span><br><span class="line">       </span><br><span class="line">       <span class="comment">// 获取这个类中的所有方法并匹配</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">operator</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;operator&quot;</span>);</span><br><span class="line">       <span class="comment">// 判断是否为空如果为空的话则赋予默认值</span></span><br><span class="line">       <span class="keyword">if</span>(JDBCUtils.isEmpty(operator))&#123;</span><br><span class="line">           operator=<span class="string">&quot;search&quot;</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       <span class="comment">// 获取当前类中的所有方法</span></span><br><span class="line">       Method[] declaredMethods = controllerBeanObj.getClass().getDeclaredMethods();</span><br><span class="line">       <span class="comment">// 依次遍历，判断是否是这次请求的方法</span></span><br><span class="line">       <span class="keyword">for</span> (Method declaredMethod : declaredMethods) &#123;</span><br><span class="line">           <span class="comment">// 获取方法名</span></span><br><span class="line">           <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> declaredMethod.getName();</span><br><span class="line">           <span class="comment">// 判断是否和这次请求的方法名相同</span></span><br><span class="line">           <span class="keyword">if</span>(name.equals(operator))&#123;</span><br><span class="line">               <span class="comment">// 如果相同的话，通过反射调用这个方法即可</span></span><br><span class="line">               <span class="comment">// 通过反射获取其中所有参数</span></span><br><span class="line">               Parameter[] parameters = declaredMethod.getParameters();</span><br><span class="line">               <span class="comment">// 创建实际参数列表</span></span><br><span class="line">               Object[] parametersActual = <span class="keyword">new</span> <span class="title class_">Object</span>[parameters.length];</span><br><span class="line">               <span class="type">String</span> <span class="variable">parameterName</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">               <span class="comment">// 遍历整个参数</span></span><br><span class="line">               <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; parameters.length; j++) &#123;</span><br><span class="line">                   <span class="comment">// 获取参数名</span></span><br><span class="line">                   parameterName = parameters[j].getName();</span><br><span class="line">                   <span class="comment">// 判断特殊情况</span></span><br><span class="line">                   <span class="keyword">if</span>(<span class="string">&quot;req&quot;</span>.equals(parameterName))&#123;</span><br><span class="line">                       parametersActual[j] = req;</span><br><span class="line">                   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;resp&quot;</span>.equals(parameterName)) &#123;</span><br><span class="line">                       parametersActual[j] = resp;</span><br><span class="line">                   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;session&quot;</span>.equals(parameterName)) &#123;</span><br><span class="line">                       parametersActual[j] = req.getSession();</span><br><span class="line">                   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                       <span class="comment">// 参数类型转换</span></span><br><span class="line">                       type = parameters[j].getType().toString();</span><br><span class="line">                       <span class="type">String</span> <span class="variable">parameter</span> <span class="operator">=</span> req.getParameter(parameterName);</span><br><span class="line">                       <span class="keyword">if</span>(JDBCUtils.isNotEmpty(parameter))&#123;</span><br><span class="line">                           <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">                               <span class="keyword">case</span> <span class="string">&quot;class java.lang.String&quot;</span> -&gt; parametersActual[j] = parameter;</span><br><span class="line">                               <span class="keyword">case</span> <span class="string">&quot;class java.lang.Integer&quot;</span> -&gt; parametersActual[j] = Integer.parseInt(parameter);</span><br><span class="line">                               <span class="keyword">case</span> <span class="string">&quot;class java.lang.Double&quot;</span> -&gt; parametersActual[j] = Double.parseDouble(parameter);</span><br><span class="line">                           &#125;</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   declaredMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                   <span class="comment">// 执行我们特定的方法</span></span><br><span class="line">                   <span class="comment">//  通过返回值来判断该方法需要跳转的方式</span></span><br><span class="line">                   <span class="type">String</span> <span class="variable">methodReturnStr</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                   <span class="type">Object</span> <span class="variable">methodReturn</span> <span class="operator">=</span> declaredMethod.invoke(controllerBeanObj, parametersActual);</span><br><span class="line">                   <span class="keyword">if</span>(methodReturn != <span class="literal">null</span>)&#123;</span><br><span class="line">                       methodReturnStr = (String) methodReturn;</span><br><span class="line">                   &#125;</span><br><span class="line">                   </span><br><span class="line">                   <span class="comment">// 如果返回值是以redirect开头的话</span></span><br><span class="line">                   <span class="keyword">if</span>(methodReturnStr.startsWith(<span class="string">&quot;redirect:&quot;</span>))&#123; <span class="comment">// redirect:edit</span></span><br><span class="line">                       <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> methodReturnStr.substring(<span class="string">&quot;redirect:&quot;</span>.length()); <span class="comment">// edit;</span></span><br><span class="line">                       resp.sendRedirect(method);</span><br><span class="line">                   &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                       <span class="built_in">super</span>.processTemplate(methodReturnStr,req, resp);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                   <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">               &#125; </span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="review"><a class="markdownIt-Anchor" href="#review"></a> Review</h2>
<ol>
<li>
<p>最初的做法是：同类的请求对应着不同的Servlet，那么如果类多了起来的话，那么Servlet将会特别多</p>
</li>
<li>
<p>我们将同类的Servlet合并到一个Servlet中，例如关于Fruit的增删改查都放到FruitServlet中，通过operate来获取我们要执行的那个方法</p>
</li>
<li>
<p>我们在通过operator获取需要执行的的函数的时候，需要通过switch case 来进行依次匹配，那么如果我们需要增加方法的话，switch case 的代码还需要更改，这时候就很不方便</p>
</li>
<li>
<p>我们通过反射来获取对应的Servlet中的所有方法，通过反射调用对应的operate的方法，前提是operate需要和方法名相同</p>
</li>
<li>
<p>再进一步，我们发现如果有很多不同的类，例如fruit，user，shopping，等等我们每一个类都需要进行反射来获取对应的方法，并通过反射调用，这时候未免显得有些代码冗余</p>
</li>
<li>
<p>我们通过中央控制器DispatcherServlet来统一调用反射，DispatcherServlet主要需要实现两部分功能</p>
<ol>
<li>
<p>通过我们访问的网址，获取对应的Controller类</p>
<ol>
<li>
<p>从URL中提取到我们需要访问的Servlet类的别名例如从这个网址中http://localhost:8080/fruit/fruit.do 获取到fruit</p>
</li>
<li>
<p>将fruit和FruitController对应起来，通过applicationContext.xml,通过DOM技术获取到bean里面的对应关系</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--通过设置这个标签将fruit和FruitServlet类联系起来--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;fruit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.fruit.controller.FruitController&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">XML文件包含三个部分</span></span><br><span class="line"><span class="comment">1. XML声明（必须有，且在第一行）&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></span><br><span class="line"><span class="comment">2. DTO文档类型定义</span></span><br><span class="line"><span class="comment">3. XML正文</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>调用Controller组件的方法</p>
<ol>
<li>
<p>获取参数</p>
<p>通过method.getParameters()获取到该方法中的所有参数</p>
<p>通过method.getName() 获取到所有的参数名称</p>
<p>通过method.getType()获取到所有的参数类型 用来强转</p>
</li>
<li>
<p>执行方法</p>
<p>Object returnObj = method.invoke(controllerBean, paramerValues);</p>
</li>
<li>
<p>视图处理</p>
<p>通过返回来来确定，该网页需要跳转到哪一步</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(methodReturnStr.startsWith(<span class="string">&quot;redirect:&quot;</span>))&#123; <span class="comment">// redirect:edit</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> methodReturnStr.substring(<span class="string">&quot;redirect:&quot;</span>.length()); <span class="comment">// edit;</span></span><br><span class="line">    resp.sendRedirect(method);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.processTemplate(methodReturnStr,req, resp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h1 id="servlet-ioc实现"><a class="markdownIt-Anchor" href="#servlet-ioc实现"></a> Servlet IOC实现</h1>
<h2 id="servletapi"><a class="markdownIt-Anchor" href="#servletapi"></a> ServletAPI</h2>
<div class="tip "><p>Servlet初始化方法</p>
</div>
<ol>
<li>
<p>Servlet生命周期：实例化，初始化，服务，销毁</p>
</li>
<li>
<p>Servlet中初始化方法有两个：init(), init(ServletConfig config)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    <span class="built_in">this</span>.config = config;</span><br><span class="line">    <span class="built_in">this</span>.init();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果想要在Servlet初始化的时候进行一些操作，我们可以重写空参的Init方法</p>
</li>
<li>
<p>我们可以在配置Servlet的时候配置初始化参数</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.fruit.controller.Demo01Servlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>word<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>也可以通过注解的方式进行配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/demo01&quot;&#125;,</span></span><br><span class="line"><span class="meta">    initParams = &#123;</span></span><br><span class="line"><span class="meta">        @WebInitParam(name=&quot;hello&quot;,value=&quot;word&quot;),</span></span><br><span class="line"><span class="meta">        @WebInitParam(name=&quot;uname&quot;, value=&quot;zjh&quot;)</span></span><br><span class="line"><span class="meta">    &#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> getServletConfig();</span><br><span class="line">        <span class="type">String</span> <span class="variable">hello</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(hello);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>可以通过以下方法获取初始化参数</p>
<ul>
<li>获取config对象：ServletConfig config = getServletConfig();</li>
<li>获取初始化参数值：config.getInitParameter(key);</li>
</ul>
</li>
</ol>
<div class="tip "><p>学习Servlet中的ServletContext和&lt; context - param &gt;</p>
</div>
<p>获取ServletContext的方法</p>
<ol>
<li>在初始化方法中：ServletContext servletContext = getServletContext();</li>
<li>在服务方法中：ServletContext servletContext = req.getServletContext();  ServletContext servletContext = req.getSession().getServletContext();</li>
</ol>
<p>获取初始化值</p>
<pre><code>1. servletContext.getInitParameter(key);
</code></pre>
<p>设置初始化值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>view-prefix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>/<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>view-suffix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>.html<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="service"><a class="markdownIt-Anchor" href="#service"></a> Service</h2>
<div class="tip "><p>什么是业务层Service</p>
</div>
<ol>
<li>
<p>Model和Model2</p>
<p>MVC：Model（模型）， View(视图)，Controller（控制器）</p>
<p>视图层：用于做数据展示和用户交互的一个界面</p>
<p>控制层：用于接受客户端请求，具体的业务功能还是借助模型来实现的</p>
<p>模型层：模型分为很多种；有比较简单的pojo/vo(value object)，有业务层组件，有数据访问组件</p>
<ol>
<li>pojo/vo：值对象，对应数据库里面一中类</li>
<li>DAO：数据访问对象</li>
<li>BO：业务对象</li>
</ol>
</li>
<li>
<p>区别业务对象和数据访问对象</p>
<ol>
<li>
<p>DAO中的方法称之为单精度方法或称之为细粒度方法。什么是单精度方法？一个方法只考虑一个操作，比如添加，就是Insert</p>
</li>
<li>
<p>BO中的方法属于业务方法，实际的业务比较复杂，因此业务方法比较粗</p>
<p>例如注册功能：注册功能属于业务功能，也就是说注册这个方法属于业务方法</p>
<p>这个业务方法中包括了多个DAO方法，需要多个DAO方法组合来完成注册功能</p>
</li>
</ol>
<p>注册：</p>
<ol>
<li>检查用户名是否已经被注册 — DAO中的Select操作</li>
<li>向用户表添加一条记录 — DAO中的 Insert操作</li>
<li>向用户积分表添加一条记录：  —DAO中的insert操作</li>
<li>…</li>
</ol>
</li>
<li>
<p>在库存系统中添加业务层组件</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/tXy8E6F4TOKDHUZ.png" alt="image-20230201172206657" /></p>
<p>实现Service</p>
<p>FruitService 接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fruit.biz.inter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fruit.pojo.Fruit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">FruitService</span> &#123;</span><br><span class="line">    <span class="comment">// 获取指定页面的库存信息</span></span><br><span class="line">    ArrayList&lt;Fruit&gt; <span class="title function_">getFruitList</span><span class="params">(String keyValue, Integer pageNumber)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 添加库存记录信息</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addFruit</span><span class="params">(Fruit fruit)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 根据ID查看指定库存记录</span></span><br><span class="line">    Fruit <span class="title function_">getFruitByID</span><span class="params">(Integer id)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 删除特定库存记录</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delFruitByID</span><span class="params">(Integer id)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取总页数</span></span><br><span class="line">    Integer <span class="title function_">getAllPageCount</span><span class="params">(String keyValue)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 更新库存记录</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Fruit fruit)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>FruitService 实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fruit.biz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fruit.biz.inter.FruitService;</span><br><span class="line"><span class="keyword">import</span> com.fruit.dao.FruitDAOImp;</span><br><span class="line"><span class="keyword">import</span> com.fruit.pojo.Fruit;</span><br><span class="line"><span class="keyword">import</span> com.utils.JDBCUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FruitServiceImp</span> <span class="keyword">implements</span> <span class="title class_">FruitService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">FruitDAOImp</span> <span class="variable">fruitDAOImp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitDAOImp</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;Fruit&gt; <span class="title function_">getFruitList</span><span class="params">(String keyValue, Integer pageNumber)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtils.getConnection();</span><br><span class="line">        <span class="keyword">return</span> fruitDAOImp.getKeyValueFruit(connection, keyValue, pageNumber);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFruit</span><span class="params">(Fruit fruit)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtils.getConnection();</span><br><span class="line">        fruitDAOImp.insert(connection,fruit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Fruit <span class="title function_">getFruitByID</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtils.getConnection();</span><br><span class="line">        <span class="keyword">return</span> fruitDAOImp.getFruitByID(connection,id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delFruitByID</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtils.getConnection();</span><br><span class="line">        fruitDAOImp.deleteByID(connection,id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAllPageCount</span><span class="params">(String keyValue)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtils.getConnection();</span><br><span class="line">        <span class="type">int</span> <span class="variable">keyValueCount</span> <span class="operator">=</span> fruitDAOImp.getKeyValueCount(connection, keyValue);</span><br><span class="line">        <span class="keyword">return</span> keyValueCount/<span class="number">5</span> +<span class="number">1</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Fruit fruit)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtils.getConnection();</span><br><span class="line">        fruitDAOImp.update(connection,fruit);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>FruitController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fruit.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fruit.biz.FruitServiceImp;</span><br><span class="line"><span class="keyword">import</span> com.fruit.dao.FruitDAOImp;</span><br><span class="line"><span class="keyword">import</span> com.fruit.dao.inter.FruitDAO;</span><br><span class="line"><span class="keyword">import</span> com.fruit.pojo.Fruit;</span><br><span class="line"><span class="keyword">import</span> com.utils.JDBCUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FruitController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">FruitServiceImp</span> <span class="variable">fruitServiceImp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitServiceImp</span>();</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">update</span><span class="params">(Integer fid, String fname, Double fprice, Integer fcount, String remark)</span> &#123;</span><br><span class="line">        fruitServiceImp.update(<span class="keyword">new</span> <span class="title class_">Fruit</span>(fid, fname, fprice, fcount, remark));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:fruit.do&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">edit</span><span class="params">(Integer fid, HttpServletRequest req)</span>&#123;</span><br><span class="line">        <span class="type">Fruit</span> <span class="variable">fruit</span> <span class="operator">=</span> fruitServiceImp.getFruitByID(fid);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;fruit&quot;</span>, fruit);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;edit&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">del</span><span class="params">(Integer fid)</span> &#123;</span><br><span class="line">        fruitServiceImp.delFruitByID(fid);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:fruit.do&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String  <span class="title function_">add</span><span class="params">(String fname, Double fprice, Integer fcount, String remark)</span>&#123;</span><br><span class="line">        fruitServiceImp.addFruit(<span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="number">1</span>, fname,fprice, fcount, remark));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:fruit.do&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">search</span><span class="params">(String tag, String kv, HttpSession session, Integer pageNumber)</span> &#123;</span><br><span class="line">        <span class="comment">// 初始化查询参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">keyValue</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">// 判断是否是查询操作</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isNotEmpty(tag))&#123;</span><br><span class="line">            <span class="comment">// 如果是的话，获取查询参数</span></span><br><span class="line">            keyValue = kv;</span><br><span class="line">            <span class="comment">// 将查询参数添加到Session中</span></span><br><span class="line">            session.setAttribute(<span class="string">&quot;kv&quot;</span>,keyValue);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断上一次查询参数是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(JDBCUtils.isEmpty((String) session.getAttribute(<span class="string">&quot;kv&quot;</span>)))&#123;</span><br><span class="line">            <span class="comment">// 如果是空的话，则设置成“” 防止出现null问题</span></span><br><span class="line">            keyValue = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 如果不是空的话，则获取</span></span><br><span class="line">            keyValue = (String) session.getAttribute(<span class="string">&quot;kv&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 判断前端是否传过来pageNumber</span></span><br><span class="line">        <span class="keyword">if</span>(pageNumber == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果前端没有传过来pageNumber的话，表明是第一次访问，则计算一下总页数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> fruitServiceImp.getAllPageCount(keyValue);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;pageEndNumber&quot;</span>, count);</span><br><span class="line">            pageNumber = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将pageNumber放到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;pageNumber&quot;</span>, pageNumber);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取fruitList</span></span><br><span class="line">        ArrayList&lt;Fruit&gt; fruitList = fruitServiceImp.getFruitList(keyValue, pageNumber);</span><br><span class="line">        <span class="comment">// 将fruitList放置到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;fruitList&quot;</span>,fruitList);</span><br><span class="line">        <span class="comment">// 通过Th渲染到index页面</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;search&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ioc实现"><a class="markdownIt-Anchor" href="#ioc实现"></a> IOC实现</h2>
<ol>
<li>
<p>耦合/依赖</p>
<p>指的是一个类依靠另一个类，即：一个类中有另一个类的实例，如果另一个类消失的话，那么这个类也就不能使用</p>
<p>在软件系统中，层与层之间是存在依赖的，我们也称为耦合</p>
<p>在系统架构或者是设计的一个原则是：高内聚，低耦合</p>
<p>层内部的组成应该是高度聚合的，而层与层之间的关系应该是低耦合的，最理想的情况是0耦合</p>
<p>我们想要做到的：当下层删除之后上层不会报错，例如FruitService 删除之后FruitController不会报错</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/tXy8E6F4TOKDHUZ.png" alt="image-20230201172206657" /></p>
</li>
<li>
<p>实现方法：</p>
<ol>
<li>
<p>为什么下一层删除之后上一层会报错？</p>
<p>因为FruitController里面有这样一条代码，它的成功编译就是依赖于FruitServiceImp是存在的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">FruitService</span> <span class="variable">fruitServiceImp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitServiceImp</span>();</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>解决问题1：我们将代码改成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">FruitService</span> <span class="variable">fruitServiceImp</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<p>这样FruitServiceImp删除之后FruitController就不会报错，但是者会出现一个新的问题：</p>
<p>我们下面代码在使用fruitServiceImp这个属性的时候会报错，我们还需要给他赋值</p>
</li>
<li>
<p>赋值方法</p>
<div class="tip success"><p>我们可以创建一个容器，将上面所需要的类都放在容器里面，需要的时候直接取出来即可，我么可以通过XML文件创建一个Bean容器</p>
</div>
<p>通过读取XML文件赋值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--通过设置这个标签将fruit和FruitServlet类联系起来--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;fruit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgu.fruit.controller.FruitController&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;fruitDAO&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgu.fruit.dao.FruitDAOImp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;fruitService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgu.fruit.service.FruitServiceImp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">XML文件包含三个部分</span></span><br><span class="line"><span class="comment">1. XML声明（必须有，且在第一行）&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></span><br><span class="line"><span class="comment">2. DTO文档类型定义</span></span><br><span class="line"><span class="comment">3. XML正文</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们先创建一个BeanFactory接口，写入getBean方法</p>
<p>在创建它的实现类ClassPathXmlApplicationContext实现这个方法</p>
<p>通过Map获取这个类的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassPathXmlApplicationContext</span> <span class="keyword">implements</span> <span class="title class_">BeanFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; beanMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ClassPathXmlApplicationContext</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 加载XML关联文件</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> getClass().getClassLoader().getResourceAsStream(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义工厂API，使应用程序能够获得从XML文档生成DOM对象树的解析器。</span></span><br><span class="line">        <span class="type">DocumentBuilderFactory</span> <span class="variable">documentBuilderFactory</span> <span class="operator">=</span> DocumentBuilderFactory.newInstance();</span><br><span class="line">        <span class="comment">// 传感DocumentBuilder对象</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">DocumentBuilder</span> <span class="variable">documentBuilder</span> <span class="operator">=</span> documentBuilderFactory.newDocumentBuilder();</span><br><span class="line">            <span class="comment">// 创建Document对象，获取XML对象</span></span><br><span class="line">            <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> documentBuilder.parse(is);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取XML中所有的bean节点的实例</span></span><br><span class="line">            <span class="type">NodeList</span> <span class="variable">beans</span> <span class="operator">=</span> document.getElementsByTagName(<span class="string">&quot;bean&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; beans.getLength(); i++) &#123;</span><br><span class="line">                <span class="comment">// 获取bean对象</span></span><br><span class="line">                <span class="type">Node</span> <span class="variable">item</span> <span class="operator">=</span> beans.item(i);</span><br><span class="line">                <span class="comment">// 如果该节点等于元素节点的话</span></span><br><span class="line">                <span class="keyword">if</span>(item.getNodeType() == Node.ELEMENT_NODE)&#123;</span><br><span class="line">                    <span class="comment">//将对象强转为元素，我们需要其中的一些方法</span></span><br><span class="line">                    <span class="type">Element</span> <span class="variable">beanElement</span> <span class="operator">=</span> (Element)item;</span><br><span class="line">                    <span class="comment">// 获取XML中bean元素的中属性名为id的值</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> beanElement.getAttribute(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                    <span class="comment">// 获取XML中bean元素中属性名为class的值</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">aClass</span> <span class="operator">=</span> beanElement.getAttribute(<span class="string">&quot;class&quot;</span>);</span><br><span class="line">                    <span class="type">Class</span> <span class="variable">beanClass</span> <span class="operator">=</span> Class.forName(aClass);</span><br><span class="line">                    <span class="comment">// 创建class对应的对象</span></span><br><span class="line">                    <span class="type">Object</span> <span class="variable">beanObj</span> <span class="operator">=</span> beanClass.newInstance();</span><br><span class="line">                    beanMap.put(id,beanObj);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getBean</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> beanMap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>现在我们已经拥有了我们所需要的Object对象的bean容器，那么现在我们如何给我们上面所设置的null的属性赋值那？</p>
<p>还是通过XML指明赋值对象</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--通过设置这个标签将fruit和FruitServlet类联系起来--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;fruit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgu.fruit.controller.FruitController&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;fruitServiceImp&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;fruitService&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;fruitDAO&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgu.fruit.dao.FruitDAOImp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;fruitService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgu.fruit.service.FruitServiceImp&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--fruitServiceImp中需要给fruitDAOImp赋值--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 其中name表示FruitServiceImp中的属性值，ref表示给这个属性赋值的bean容器里面的对象 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;fruitDAOImp&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;fruitDAO&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">XML文件包含三个部分</span></span><br><span class="line"><span class="comment">1. XML声明（必须有，且在第一行）&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></span><br><span class="line"><span class="comment">2. DTO文档类型定义</span></span><br><span class="line"><span class="comment">3. XML正文</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>实现通过代码实现他们之间的关联</p>
<p>XML文件本身就是一个节点，其中还包括 空节点，元素节点，文本节点</p>
<p>我门在上面已经获取到了所有的Bean节点中的类的实例，现在我们要做的就是将他们之间的关系依照XML文件中所述的将他们关联起来</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; childNodes.getLength(); j++) &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">childItem</span> <span class="operator">=</span> childNodes.item(j);</span><br><span class="line">    <span class="comment">// 判断子节点的类型是不是ELEMENT类型的，因为子节点中可能含有多种类型的节点，例如空节点，文本类型节点</span></span><br><span class="line">    <span class="keyword">if</span>(childItem.getNodeType() == Node.ELEMENT_NODE &amp;&amp; <span class="string">&quot;property&quot;</span>.equals(childItem.getNodeName()))&#123;</span><br><span class="line">        <span class="type">Element</span> <span class="variable">childBeanItem</span> <span class="operator">=</span> (Element) childItem;</span><br><span class="line">        <span class="comment">// 获取property标签里面的元素</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> childBeanItem.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">ref</span> <span class="operator">=</span> childBeanItem.getAttribute(<span class="string">&quot;ref&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取ref对应的实例</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">refObj</span> <span class="operator">=</span> beanMap.get(ref);</span><br><span class="line">        <span class="comment">// 获取我们需要赋值的元素的属性</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> beanObj.getClass().getDeclaredField(name);</span><br><span class="line">        field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        field.set(beanObj, refObj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>控制反转 和 依赖注入</p>
<ol>
<li>
<p>控制反转</p>
<ol>
<li>在之前Servlet中，我们创建Servlet对象的时候，在Servlet内部有一个成员变量是 FruitService fruitService = new FruitServiceImp();,如果这行代码出现在方法内部的话，那么这个fruitService的作用域（生命周期）就是这个方法级，如果出现在Servlet类中，那么fruitService的作用域就是Servlet实例级别</li>
<li>我们在applicationContext.xml中定义了fruitService。然后通过解析xml，产生fruitService，存放在beanMap，这个beanMap存在于BeanFactory中，因此我们改变了之前的Service实例，dao实例等等，他们的生命周期，存放到了beanMap中，控制权从程序员转换到了BeanFactory中，这个BeanFactory被称为IOC容器</li>
</ol>
</li>
<li>
<p>依赖注入</p>
<ol>
<li>
<p>之前控制层出现代码：FruitService fruitService = new FruitServiceImp();这行代码表明控制层和Service层存在耦合</p>
</li>
<li>
<p>之后我们将代码改成FruitService fruitService = null;</p>
<p>然后在配置文件中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;fruit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;FruitController&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;fruitService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;fruitService&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h1 id="filter-过滤器"><a class="markdownIt-Anchor" href="#filter-过滤器"></a> Filter 过滤器</h1>
<p>从客户端发来的请求，都要经过过滤器的处理，然后才能到达Servlet层，过滤器中必须有放行，否则过滤器会一直拿着请求，不穿送给Servlet层，等Servlet处理完请求要返回的时候，还是需要经过过滤器，然后才能到达客户端</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/7hsXExJaSHAVQBZ.png" alt="image-20230203100201087" /></p>
<p>实现方法：</p>
<p>Servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo01.co&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo01.service&quot;</span>);</span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;demo01.html&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Filter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01Filter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.init(filterConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">// 请求过来的时候需要执行的代码</span></span><br><span class="line">        System.out.println(<span class="string">&quot;HelloA&quot;</span>);</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">        <span class="comment">// 请求回去的时候执行的代码</span></span><br><span class="line">        System.out.println(<span class="string">&quot;HelloA1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.destroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>XML配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Demo01Filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.hug.filters.Demo01Filter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Demo01Filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>&quot;/demo01.do&quot;<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<div class="tip success"><p>Filter</p>
</div>
<ol>
<li>Filter也属于Servlet规范</li>
<li>Filter开发步骤：新建类实现Filter接口，然后实现其中三个方法：init,doFilter,destory,配置Filter，可以使用注解@WebFilter，也可以使用XML文件&lt; filter &gt;&lt; filter-mapping &gt;</li>
<li>Filter在配置的时候和Servlet一样，也可以使用通配符，例如@WebFilter(&quot;*.do&quot;)表示拦截所有以.do结尾的请求</li>
<li>过滤器链：
<ol>
<li>如果采用的是注解的方式进行配置，那么过滤器拦截的先后顺序是按照全类名的先后顺序来排序的</li>
<li>如果采用的是XML的方式进行配置，那么按照配置的先后顺序进行排序</li>
</ol>
</li>
</ol>
<h1 id="事务"><a class="markdownIt-Anchor" href="#事务"></a> 事务</h1>
<p>事务的本质就是：将多个DAO事件绑到一起，要么同时成功，要么同时回滚，我们需要设置自动提交为false，让我们手动的给他提交</p>
<p>方式一：在DAO层设置事务</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/89jrxhdYW2PXM3q.png" alt="image-20230203123921696" /></p>
<p>但是这样出现的情况会出现，DAO01 成功， DAO02失败， DAO03成功，那么这样我们无法确定Service是否成功进行，所以我们不能再DAO层设置事务，我们需要在Service层设置，将多个DAO绑定在一起，要么同时成功，要么同时回滚</p>
<p>方式二：在Service层使用事务</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/ZyXTPCsGcdbpawr.png" alt="image-20230203124528282" /></p>
<p>方式三：在过滤器层使用</p>
<p>我们需要使用同一个Connection才能够将service层中的DAO对象绑定到一起</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/RgjphHu714LczKG.png" alt="image-20230203205500901" /></p>
<p>实现：</p>
<p>过滤器OpenSessionInViewFilter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(&quot;*.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenSessionInViewFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.init(filterConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            TransactionManager.beginTrans();</span><br><span class="line">            System.out.println(<span class="string">&quot;开启事务&quot;</span>);</span><br><span class="line">            filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">            TransactionManager.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;提交&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TransactionManager.rollback();</span><br><span class="line">                System.out.println(<span class="string">&quot;回滚事务&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.destroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>事务管理：TransactionManager</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hgu.myssm.trans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hgu.myssm.utils.JDBCUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransactionManager</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">beginTrans</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        JDBCUtils.getConnection().setAutoCommit(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        JDBCUtils.getConnection().commit();</span><br><span class="line">        JDBCUtils.closeConnection();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        JDBCUtils.getConnection().rollback();</span><br><span class="line">        JDBCUtils.closeConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>JDBCUtils创建获取连接</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">createConnection</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 通过配置文件来进行获取参数</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> JDBCUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;jdbc.properties&quot;</span>);</span><br><span class="line">        <span class="comment">// 创建一个类来进行分析配置文件</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">pros</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        pros.load(is);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取配置文件中的内容</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driverClass</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;driverClass&quot;</span>);</span><br><span class="line">        <span class="comment">// String user = &quot;root&quot;;</span></span><br><span class="line">        <span class="comment">// String password = &quot;admin&quot;;</span></span><br><span class="line">        <span class="comment">// String url = &quot;jdbc:mysql://localhost:3306/fruit?CharacterEncoding=true&amp;rewriteBatchedStatements=true&quot;;</span></span><br><span class="line">        <span class="comment">// String driverClass = &quot;com.mysql.cj.jdbc.Driver&quot;;</span></span><br><span class="line">        <span class="comment">// 加载驱动</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(driverClass);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url, user, password);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取连接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> threadLocal.get();</span><br><span class="line">    <span class="keyword">if</span>(connection == <span class="literal">null</span>)&#123;</span><br><span class="line">        connection = createConnection();</span><br><span class="line">        threadLocal.set(connection);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> threadLocal.get();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="tip "><p>ThreadLocal</p>
</div>
<ul>
<li>
<p>有两个主要方法：get()， set(obj)</p>
</li>
<li>
<p>ThreadLocal称之为本地线程。我们可以通过set方法在当前线程上存储数据，通过get方法在当前线程上访问数据</p>
</li>
<li>
<p>set源码分析</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(T value)</span> &#123;</span><br><span class="line">    <span class="comment">// 在内部在调用set的重写的方法，并将当前线程当成参数传递进去</span></span><br><span class="line">    set(Thread.currentThread(), value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(Thread t, T value)</span> &#123;</span><br><span class="line">	<span class="comment">// 获取当前线程的Map，每一个线程都有自己的Map，通过不同的参数获取不同的Map</span></span><br><span class="line">    <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">    <span class="comment">// 如果map不支持的话则报错</span></span><br><span class="line">    <span class="keyword">if</span> (map == ThreadLocalMap.NOT_SUPPORTED) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果map不等于空的话</span></span><br><span class="line">    <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 向map中设置键值对</span></span><br><span class="line">        <span class="comment">// key:TrheadLocal</span></span><br><span class="line">        <span class="comment">// value: 我们传进来的参数</span></span><br><span class="line">        <span class="comment">// 为什么使用ThradLocal作为参数？因为一个线程对应着一个Map，但是可能对应着多个ThreadLocal，例如User类的ThreadLocal，Fruit类的ThreadLocal，所以我们需要使用threadLocal作为参数</span></span><br><span class="line">        map.set(<span class="built_in">this</span>, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 如果map不存在的话则创建一个map，并将线程参数和我们穿进去的参数一并传入</span></span><br><span class="line">        createMap(t, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>get源码分析</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> T <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 我们先调用这个方法：将当前线程作为参数传递进去</span></span><br><span class="line">    <span class="keyword">return</span> get(Thread.currentThread());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> T <span class="title function_">get</span><span class="params">(Thread t)</span> &#123;</span><br><span class="line">    <span class="comment">// 获取当前线程维护的map</span></span><br><span class="line">    <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">    <span class="comment">// 如果map不为空的话</span></span><br><span class="line">    <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 如果Map不支持的话，则初始化值</span></span><br><span class="line">        <span class="keyword">if</span> (map == ThreadLocalMap.NOT_SUPPORTED) &#123;</span><br><span class="line">            <span class="keyword">return</span> initialValue();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 通过ThreadLocal 获取当前ThreadLocal对应的模块</span></span><br><span class="line">            ThreadLocalMap.<span class="type">Entry</span> <span class="variable">e</span> <span class="operator">=</span> map.getEntry(<span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                <span class="type">T</span> <span class="variable">result</span> <span class="operator">=</span> (T) e.value;</span><br><span class="line">                <span class="comment">// 返回对应的值</span></span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> setInitialValue(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="监听器"><a class="markdownIt-Anchor" href="#监听器"></a> 监听器</h1>
<p>监听器︰专门用于对其他对象身上发生的事件或状态改变进行监听和相应处理的对象，当被监视的对象发生情况时，立即采取相应的行动。</p>
<p>Servlet监听器:Servlet规范中定义的一种特殊类，它用于监听Web应用程序中的ServletContext，HttpSession和HttpServletRequest等域对象的创建与销毁事件，以及监听这些域对象中的属性发生修改的事件。</p>
<ol>
<li>
<p>ServletContextListener  – 监听ServletContext对象的创建和销毁过程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">contextInitialized(ServletContextEvent sce);</span><br><span class="line">contextDestroyed(ServletContextEvent sce);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>HttpSessionListener —  监听Session对象的创建和销毁过程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sessionInitialized(ServletContextEvent sce);</span><br><span class="line">sessionDestroyed(ServletContextEvent sce);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ServletRequestListener  — 监听ServletRequest对象的创建和销毁过程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">requestInitialized(ServletContextEvent sce);	<span class="comment">// 创建的时候调用</span></span><br><span class="line">requestDestroyed(ServletContextEvent sce);		<span class="comment">// 销毁的时候调用</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ServletContextAttributeListener  — 监听ServletContext中属性的创建，修改和销毁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">attributeAdded(ServletContextAttributeEvent scab);		<span class="comment">// 添加属性的时候调用</span></span><br><span class="line">attributeRemoved(ServletContextAttributeEvent scab); 	<span class="comment">// 移除属性的时候调用</span></span><br><span class="line">attributeReplaced(ServletContextAttributeEvent scab);	<span class="comment">// 属性修改的时候调用</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>HttpSessionAttributeListener  — 监听HttpSession中属性的创建，修改和销毁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sessionAdded(ServletContextAttributeEvent scab);		<span class="comment">// 添加属性的时候调用</span></span><br><span class="line">sessionRemoved(ServletContextAttributeEvent scab); 	<span class="comment">// 移除属性的时候调用</span></span><br><span class="line">sessionReplaced(ServletContextAttributeEvent scab);	<span class="comment">// 属性修改的时候调用</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ServletRequestAttributeListener  — 监听ServletContext中属性的创建，修改和销毁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">requestAdded(ServletContextAttributeEvent scab);		<span class="comment">// 添加属性的时候调用</span></span><br><span class="line">requestRemoved(ServletContextAttributeEvent scab); 	<span class="comment">// 移除属性的时候调用</span></span><br><span class="line">requestReplaced(ServletContextAttributeEvent scab);	<span class="comment">// 属性修改的时候调用</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>HttpSessionBindingListener  — 监听某个对象在Session域中的创建与移除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">valueBound(HttpSessionBindingEvent event);   <span class="comment">// 该实例被放到Session域中时调用</span></span><br><span class="line">valueUnbound(HttpSessionBindingEvent event);  <span class="comment">// 该类实例被从session中移除的时候调用</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>HttpSessionActivationListener   — 监听对象在Session中的序列化与反序列化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sessionWillPassivate(HttpSessionEvent se);		<span class="comment">// 该类实例和Session一起钝化到硬盘的时候调用 </span></span><br><span class="line">sessionDidActivate(HttpSessionEvent se);		<span class="comment">//	该类实例和Session一起活化到内存的时候调用</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>创建：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServletContextListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">        ServletContextListener.<span class="built_in">super</span>.contextInitialized(sce);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">        ServletContextListener.<span class="built_in">super</span>.contextDestroyed(sce);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>配置：</p>
<p>使用标签配置：@WebListener</p>
<p>使用配置文件配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.hug.listener.MyServletContextListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="qqzone"><a class="markdownIt-Anchor" href="#qqzone"></a> QQZone</h1>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line">1.熟悉QQZone业务需求</span><br><span class="line">  1) 用户登录</span><br><span class="line">  2) 登录成功，显示主界面。左侧显示好友列表；上端显示欢迎词。如果不是自己的空间，显示超链接：返回自己的空间；下端显示日志列表</span><br><span class="line">  3) 查看日志详情：</span><br><span class="line">        - 日志本身的信息（作者头像、昵称、日志标题、日志内容、日志的日期）</span><br><span class="line">        - 回复列表（回复者的头像、昵称、回复内容、回复日期）</span><br><span class="line">        - 主人回复信息</span><br><span class="line">  4) 删除日志</span><br><span class="line">  5) 删除特定回复</span><br><span class="line">  6) 删除特定主人回复</span><br><span class="line">  7) 添加日志、添加回复、添加主人回复</span><br><span class="line">  8) 点击左侧好友链接，进入好友的空间</span><br><span class="line">2.数据库设计</span><br><span class="line">  1） 抽取实体 : 用户登录信息、用户详情信息 、 日志 、 回贴  、 主人回复</span><br><span class="line">  2） 分析其中的属性：</span><br><span class="line">    - 用户登录信息：账号、密码、头像、昵称</span><br><span class="line">    - 用户详情信息：真实姓名、星座、血型、邮箱、手机号.....</span><br><span class="line">    - 日志：标题、内容、日期、作者</span><br><span class="line">    - 回复：内容、日期、作者、日志</span><br><span class="line">    - 主人回复：内容、日期、作者、回复</span><br><span class="line">  3） 分析实体之间的关系</span><br><span class="line">    - 用户登录信息 ： 用户详情信息      1：1 PK</span><br><span class="line">    - 用户 ： 日志                   1：N</span><br><span class="line">    - 日志 ： 回复                   1：N</span><br><span class="line">    - 回复 ： 主人回复                1：1 UK</span><br><span class="line">    - 用户 ： 好友                   M ： N</span><br><span class="line">3.数据库的范式：</span><br><span class="line">  1） 第一范式：列不可再分</span><br><span class="line">  2） 第二范式：一张表只表达一层含义（只描述一件事情）</span><br><span class="line">  3） 第三范式：表中的每一列和主键都是直接依赖关系，而不是间接依赖</span><br><span class="line">4.数据库设计的范式和数据库的查询性能很多时候是相悖的，我们需要根据实际的业务情况做一个选择：</span><br><span class="line">  - 查询频次不高的情况下，我们更倾向于提高数据库的设计范式，从而提高存储效率</span><br><span class="line">  - 查询频次较高的情形，我们更倾向于牺牲数据库的规范度，降低数据库设计的范式，允许特定的冗余，从而提高查询的性能</span><br><span class="line"></span><br><span class="line">5.QQZone登录功能实现出现的四个错误：</span><br><span class="line"> 1) URL没修改，用的还是fruitdb</span><br><span class="line"> 2）</span><br><span class="line"> 3）rsmd.getColumnName() 和 rsmd.getColumnLabel()</span><br><span class="line"> 4）Can not set com.atguigu.qqzone.pojo.UserBasic field com.atguigu.qqzone.pojo.Topic.author to java.lang.Integer</span><br><span class="line"> 5) left.html页面没有样式，同时数据也不展示，原因是：我们是直接去请求的静态页面资源，那么并没有执行super.processTemplate()，也就是thymeleaf没有起作用</span><br><span class="line">    (之前的表单也是这个原因)</span><br><span class="line">    解决方法：</span><br><span class="line">    - 新增PageController，添加page方法:</span><br><span class="line">    public String page(String page)&#123;</span><br><span class="line">        return page ;       // frames/left</span><br><span class="line">    &#125;</span><br><span class="line">    目的是执行super.processTemplate()方法，让thymeleaf生效</span><br><span class="line"></span><br><span class="line">昨日内容：</span><br><span class="line">1. top.html页面显示登录者昵称、判断是否是自己的空间</span><br><span class="line">   1)显示登录者昵称： $&#123;session.userBasic.nickName&#125;</span><br><span class="line">   2)判断是否是自己的空间 : $&#123;session.userBasic.id!=session.friend.id&#125;</span><br><span class="line">     如果不是期望的效果，首先考虑将两者的id都显示出来</span><br><span class="line"></span><br><span class="line">2. 点击左侧的好友链接，进入好友空间</span><br><span class="line">   1) 根据id获取指定userBasic信息，查询这个userBasic的topicList，然后覆盖friend对应的value</span><br><span class="line">   2) main页面应该展示friend中的topicList，而不是userBasic中的topicList</span><br><span class="line">   3) 跳转后，在左侧（left）中显示整个index页面</span><br><span class="line">      - 问题：在left页面显示整个index布局</span><br><span class="line">      - 解决：给超链接添加target属性：   target=&quot;_top&quot; 保证在顶层窗口显示整个index页面</span><br><span class="line"></span><br><span class="line">   4) top.html页面需要修改： &quot;欢迎进入$&#123;session.friend&#125;&quot;</span><br><span class="line">      top.html页面的返回自己空间的超链接需要修改：</span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;|/user.do?operate=friend&amp;id=$&#123;session.userBasic.id&#125;|&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_top&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">3. 日志详情页面实现</span><br><span class="line">   1) 已知topic的id，需要根据topic的id获取特定topic</span><br><span class="line">   2) 获取这个topic关联的所有的回复</span><br><span class="line">   3) 如果某个回复有主人回复，需要查询出来</span><br><span class="line">   - 在TopicController中获取指定的topic</span><br><span class="line">   - 具体这个topic中关联多少个Reply，由ReplyService内部实现</span><br><span class="line">   4) 获取到的topic中的author只有id，那么需要在topicService的getTopic方法中封装，在查询topic本身信息时，同时调用userBasicService中的获取userBasic方法，给author属性赋值</span><br><span class="line">   5) 同理，在reply类中也有author，而且这个author也是只有id，那么我们也需要根据id查询得到author，最后设置关联</span><br><span class="line"></span><br><span class="line">4. 添加回复</span><br><span class="line"></span><br><span class="line">5. 删除回复</span><br><span class="line">   1) 如果回复有关联的主人回复，需要先删除主人回复</span><br><span class="line">   2) 删除回复</span><br><span class="line">   Cannot delete or update a parent row: a foreign key constraint fails</span><br><span class="line">   (`qqzonedb`.`t_host_reply`, CONSTRAINT `FK_host_reply` FOREIGN KEY (`reply`) REFERENCES `t_reply` (`id`))</span><br><span class="line">    我们在删除回复表记录时，发现删除失败，原因是：在主人回复表中仍然有记录引用待删除的回复这条记录</span><br><span class="line">    如果需要删除主表数据，需要首先删除子表数据</span><br><span class="line"></span><br><span class="line">6. 删除日志</span><br><span class="line">   1) 删除日志，首先需要考虑是否有关联的回复</span><br><span class="line">   2) 删除回复，首先需要考虑是否有关联的主人回复</span><br><span class="line">   3) 另外，如果不是自己的空间，则不能删除日志</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">今日内容：</span><br><span class="line">1. 日期和字符串之间的格式化</span><br><span class="line">    /*</span><br><span class="line">    // String -&gt; java.util.Date</span><br><span class="line">    String dateStr1 = &quot;2021-12-30 12:59:59&quot;;</span><br><span class="line">    SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span><br><span class="line">    try &#123;</span><br><span class="line">        Date date1 = sdf.parse(dateStr1);</span><br><span class="line">    &#125; catch (ParseException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Date -&gt; String</span><br><span class="line">    Date date2 = new Date();</span><br><span class="line">    String dateStr2 = sdf.format(date2);</span><br><span class="line">    */</span><br><span class="line">2. thymeleaf中使用#dates这个公共的内置对象</span><br><span class="line">   $&#123;#dates.format(topic.topicDate ,&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&#125;</span><br><span class="line"></span><br><span class="line">3. 系统启动时，我们访问的页面是： http://localhost:8080/pro23/page.do?operate=page&amp;page=login</span><br><span class="line">   为什么不是： http://localhost:8080/pro23/login.html  ?</span><br><span class="line">   答： 如果是后者，那么属于直接访问静态页面。那么页面上的thymeleaf表达式（标签）浏览器是不能识别的</span><br><span class="line">       我们访问前者的目的其实就是要执行 ViewBaseServlet中的processTemplete()</span><br><span class="line"></span><br><span class="line">4. http://localhost:8080/pro23/page.do?operate=page&amp;page=login 访问这个URL，执行的过程是什么样的？</span><br><span class="line">   答：</span><br><span class="line">   http://  localhost   :8080   /pro23          /page.do                        ?operate=page&amp;page=login</span><br><span class="line">   协议       ServerIP   port    context root    request.getServletPath()         query string</span><br><span class="line">   1) DispatcherServlet -&gt; urlPattern :  *.do  拦截/page.do</span><br><span class="line">   2) request.getServletPath() -&gt;  /page.do</span><br><span class="line">   3) 解析处理字符串，将/page.do -&gt; page</span><br><span class="line">   4) 拿到page这个字符串，然后去IOC容器（BeanFactory）中寻找id=page的那个bean对象   -&gt; PageController.java</span><br><span class="line">   5) 获取operate的值 -&gt; page    因此得知，应该执行 PageController中的page()方法</span><br><span class="line">   6) PageController中的page方法定义如下：</span><br><span class="line">      public String page(String page)&#123;</span><br><span class="line">        return page ;</span><br><span class="line">      &#125;</span><br><span class="line">   7) 在queryString:   ?operate=page&amp;page=login 中 获取请求参数，参数名是page，参数值是login</span><br><span class="line">      因此page方法的参数page值会被赋上&quot;login&quot;</span><br><span class="line">      然后return &quot;login&quot; , return 给 谁？？</span><br><span class="line">   8) 因为PageController的page方法是DispatcherServlet通过反射调用的</span><br><span class="line">      method.invoke(....) ;</span><br><span class="line">      因此，字符串&quot;login&quot;返回给DispatcherServlet</span><br><span class="line">   9) DispatcherServlet接收到返回值，然后处理视图</span><br><span class="line">      目前处理视图的方式有两种： 1.带前缀redirect:    2.不带前缀</span><br><span class="line">      当前，返回&quot;login&quot;，不带前缀</span><br><span class="line">      那么执行  super.processTemplete(&quot;login&quot;,request,response);</span><br><span class="line">   10) 此时ViewBaseServlet中的processTemplete方法会执行，效果是：</span><br><span class="line">      在&quot;login&quot;这个字符串前面拼接 &quot;/&quot;  (其实就是配置文件中view-prefixe配置的值)</span><br><span class="line">      在&quot;login&quot;这个字符串后面拼接 &quot;.html&quot; (其实就是配置文件中view-suffix配置的值)</span><br><span class="line">      最后进行服务器转发</span><br><span class="line"></span><br><span class="line">5. 目前我们进行javaweb项目开发的“套路”是这样的：</span><br><span class="line">   1. 拷贝 myssm包</span><br><span class="line">   2. 新建配置文件applicationContext.xml或者可以不叫这个名字，在web.xml中指定文件名</span><br><span class="line">   3. 在web.xml文件中配置：</span><br><span class="line">      1) 配置前缀和后缀，这样thymeleaf引擎就可以根据我们返回的字符串进行拼接，再跳转</span><br><span class="line">        <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>view-prefix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>/<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>view-suffix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>.html<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">      2) 配置监听器要读取的参数，目的是加载IOC容器的配置文件（也就是applicationContext.xml）</span><br><span class="line">        <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">   4. 开发具体的业务模块：</span><br><span class="line">      1） 一个具体的业务模块纵向上由几个部分组成：</span><br><span class="line">         - html页面</span><br><span class="line">         - POJO类</span><br><span class="line">         - DAO接口和实现类</span><br><span class="line">         - Service接口和实现类</span><br><span class="line">         - Controller 控制器组件</span><br><span class="line">      2） 如果html页面有thymeleaf表达式，一定不能够直接访问，必须要经过PageController</span><br><span class="line">      3） 在applicationContext.xml中配置 DAO、Service、Controller，以及三者之间的依赖关系</span><br><span class="line">      4） DAO实现类中 ， 继承BaseDAO，然后实现具体的接口, 需要注意，BaseDAO后面的泛型不能写错。</span><br><span class="line">          例如：</span><br><span class="line">          public class UserDAOImpl extends BaseDAO<span class="tag">&lt;<span class="name">User</span>&gt;</span> implements UserDAO&#123;&#125;</span><br><span class="line">      5） Service是业务控制类，这一层我们只需要记住一点：</span><br><span class="line">          - 业务逻辑我们都封装在service这一层，不要分散在Controller层。也不要出现在DAO层（我们需要保证DAO方法的单精度特性）</span><br><span class="line">          - 当某一个业务功能需要使用其他模块的业务功能时，尽量的调用别人的service，而不是深入到其他模块的DAO细节</span><br><span class="line">      6） Controller类的编写规则</span><br><span class="line">          ① 在applicationContext.xml中配置Controller</span><br><span class="line">          <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.qqzone.controllers.UserController&quot;</span> /&gt;</span></span><br><span class="line">          那么，用户在前端发请求时，对应的servletpath就是   /user.do   , 其中的“user”就是对应此处的bean的id值</span><br><span class="line">          ② 在Controller中设计的方法名需要和operate的值一致</span><br><span class="line">          public String login(String loginId , String pwd , HttpSession session)&#123;</span><br><span class="line">            return &quot;index&quot;;</span><br><span class="line">          &#125;</span><br><span class="line">          因此，我们的登录验证的表单如下：</span><br><span class="line">          <span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user.do&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inut</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;operate&quot;</span> <span class="attr">value</span>=<span class="string">&quot;login&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">          ③ 在表单中，组件的name属性和Controller中方法的参数名一致</span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;loginId&quot;</span> /&gt;</span></span><br><span class="line">          public String login(String loginId , String pwd , HttpSession session)&#123;</span><br><span class="line">          ④ 另外，需要注意的是： Controller中的方法中的参数不一定都是通过请求参数获取的</span><br><span class="line">          if(&quot;request&quot;.equals...) else if(&quot;response&quot;.equals....) else if(&quot;session&quot;.equals....)&#123;</span><br><span class="line">            直接赋值</span><br><span class="line">          &#125;else&#123;</span><br><span class="line">            此处才是从request的请求参数中获取</span><br><span class="line">            request.getParameter(&quot;loginId&quot;) .....</span><br><span class="line">          &#125;</span><br><span class="line">      7）  DispatcherServlet中步骤大致分为：</span><br><span class="line">          0. 从application作用域获取IOC容器</span><br><span class="line">          1. 解析servletPath ， 在IOC容器中寻找对应的Controller组件</span><br><span class="line">          2. 准备operate指定的方法所要求的参数</span><br><span class="line">          3. 调用operate指定的方法</span><br><span class="line">          4. 接收到执行operate指定的方法的返回值，对返回值进行处理 - 视图处理</span><br><span class="line">      8) 为什么DispatcherServlet能够从application作用域获取到IOC容器？</span><br><span class="line">         ContextLoaderListener在容器启动时会执行初始化任务，而它的操作就是：</span><br><span class="line">         1. 解析IOC的配置文件，创建一个一个的组件，并完成组件之间依赖关系的注入</span><br><span class="line">         2. 将IOC容器保存到application作用域</span><br><span class="line"></span><br><span class="line">6. 修改BaseDAO，让其支持properties文件以及druid数据源连接池</span><br><span class="line">   讲解了两种方式：</span><br><span class="line">   1) 直接自己配置properties，然后读取，然后加载驱动.....</span><br><span class="line">   2) 使用druid连接池技术，那么properties中的key是有要求的</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>项目源码：</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/fendoub/java-web/blob/master/QQZone.zip">QQZone</a></p>
<h1 id="cookie"><a class="markdownIt-Anchor" href="#cookie"></a> Cookie</h1>
<h2 id="session和cookie的区别与联系"><a class="markdownIt-Anchor" href="#session和cookie的区别与联系"></a> Session和Cookie的区别与联系</h2>
<ol>
<li>
<p>共同之处：<br />
cookie和session都是用来跟踪浏览器用户身份的会话方式。</p>
</li>
<li>
<p>工作原理：</p>
<ol>
<li>
<p>cookie的工作原理：</p>
<ol>
<li>浏览器端第一次发送请求到服务器端</li>
<li>服务器端创建Cookie，该Cookie中包含用户的信息，然后将该Cookie发送到浏览器端</li>
<li>浏览器端再次访问服务器端时会携带服务器端创建的Cookie</li>
<li>服务器端通过Cookie中携带的数据区分不同的用户<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/FlJk6XYNTW3sm4Z.png" alt="cookic" /></li>
</ol>
</li>
<li>
<p>Session的工作原理</p>
<ol>
<li>
<p>浏览器端第一次发送请求到服务器端，服务器端创建一个Session，同时会创建一个特殊的Cookie（name为JSESSIONID的固定值，value为session对象的ID），然后将该Cookie发送至浏览器端</p>
</li>
<li>
<p>浏览器端发送第N（N&gt;1）次请求到服务器端,浏览器端访问服务器端时就会携带该name为JSESSIONID的Cookie对象</p>
</li>
<li>
<p>服务器端根据name为JSESSIONID的Cookie的value(sessionId),去查询Session对象，从而区分不同用户。</p>
<ul>
<li>name为JSESSIONID的Cookie不存在（关闭或更换浏览器），返回1中重新去创建Session与特殊的Cookie</li>
<li>name为JSESSIONID的Cookie存在，根据value中的SessionId去寻找session对象</li>
<li>value为SessionId不存在**（Session对象默认存活30分钟）**，返回1中重新去创建Session与特殊的Cookie</li>
<li>value为SessionId存在，返回session对象</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/ckC79Iiy6VszuPF.png" alt="session" /></p>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>区别：</p>
<p>cookie数据保存在客户端，session数据保存在服务端.</p>
<ol>
<li>
<p>session</p>
<p>简单的说，当你登陆一个网站的时候，如果web服务器端使用的是session，那么所有的数据都保存在服务器上，客户端每次请求服务器的时候会发送当前会话sessionid，服务器根据当前sessionid判断相应的用户数据标志，以确定用户是否登陆或具有某种权限。由于数据是存储在服务器上面，所以你不能伪造。</p>
</li>
<li>
<p>cookie</p>
<p>sessionid是服务器和客户端连接时候随机分配的，如果浏览器使用的是cookie，那么所有数据都保存在浏览器端，比如你登陆以后，服务器设置了cookie用户名，那么当你再次请求服务器的时候，浏览器会将用户名一块发送给服务器，这些变量有一定的特殊标记。服务器会解释为cookie变量，所以只要不关闭浏览器，那么cookie变量一直是有效的，所以能够保证长时间不掉线。</p>
</li>
</ol>
</li>
<li>
<p>区别对比：</p>
<ol>
<li>cookie数据存放在客户的浏览器上，session数据放在服务器上</li>
<li>cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗,如果主要考虑到安全应当使用session</li>
<li>session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，如果主要考虑到减轻服务器性能方面，应当使用COOKIE</li>
<li>单个cookie在客户端的限制是3K，就是说一个站点在客户端存放的COOKIE不能3K。</li>
<li>所以：将登陆信息等重要信息存放为SESSION;其他信息如果需要保留，可以放在COOKIE中</li>
</ol>
</li>
</ol>
<h2 id="cookie创建"><a class="markdownIt-Anchor" href="#cookie创建"></a> Cookie创建</h2>
<ol>
<li>
<p>创建客户端对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(key, value);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在客户端保存Cookie</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.addCookie(cookie);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>设置Cookie有效时长</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cookie.setMaxAge(<span class="number">30</span>); <span class="comment">// 设置cookie有效时长为60秒</span></span><br><span class="line">cookie.setDomain(pattern);</span><br><span class="line">cookie.setPath(uri);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Cookie的应用</p>
<p>记住用户名和密码几天， setMaxAge(60* 60 * 24 * n)</p>
<p>几天免登陆， 当用户访问某个页面的时候，服务器端可以从cookie中获取用户名和密码，并获取用户上一次是否选择了免登陆，如果选择了，则直接登录</p>
</li>
</ol>
<h1 id="验证码kaptcha"><a class="markdownIt-Anchor" href="#验证码kaptcha"></a> 验证码Kaptcha</h1>
<ol>
<li>
<p>引入Kaptcha包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.penggle<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kaptcha<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>配置Servlet</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Kaptcha<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.google.code.kaptcha.servlet.KaptchaServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>kaptcha.border.color<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>red<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>kaptcha.textproducer.char.string<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>abcdefg<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Kaptcha<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/kaptcha.jpg<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在页面上的img标签中引入我们配置的图片</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;kaptcha.jpg&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>验证码中的各个参数属性在Constants中</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/RvzlEYyeIPQmJ4x.png" alt="image-20230214115125006" /></p>
</li>
<li>
<p>KaptchaServlet在生成验证码图片的时候，同时会将验证码信息保存到session中 name = KAPTCHA_SESSION_KEY  ，在上面的Constants类中有写</p>
</li>
</ol>
<h1 id="正则表达式"><a class="markdownIt-Anchor" href="#正则表达式"></a> 正则表达式</h1>
<p>使用三步骤：</p>
<ol>
<li>定义正则表达式对象</li>
<li>定义待校验的字符串</li>
<li>校验</li>
</ol>
<h2 id="创建正则表达式对象"><a class="markdownIt-Anchor" href="#创建正则表达式对象"></a> 创建正则表达式对象</h2>
<ul>
<li>对象形式：<code>var reg = new RegExp(&quot;正则表达式&quot;)</code>当正则表达式中有&quot;/&quot;那么就使用这种</li>
<li>直接量形式：<code>var reg = /正则表达式/</code>一般使用这种声明方式</li>
</ul>
<h2 id="正则表达式入门案例"><a class="markdownIt-Anchor" href="#正则表达式入门案例"></a> 正则表达式入门案例</h2>
<ol>
<li>
<p>模式验证: 校验字符串中是否包含’o’字母</p>
<p>正则对象.test(目标字符串) ===  寻找目标字符串中是否含有正则对象，如果含有的话，返回true，否则返回false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个最简单的正则表达式对象</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/o/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个字符串对象作为目标字符串</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;Hello World!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用正则表达式对象的test()方法验证目标字符串是否满足我们指定的这个模式，返回结果true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;字符串中是否包含&#x27;o&#x27;=&quot;</span>+reg.<span class="title function_">test</span>(str));</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="正则表达式的匹配模式"><a class="markdownIt-Anchor" href="#正则表达式的匹配模式"></a> 正则表达式的匹配模式</h2>
<h3 id="全局查找"><a class="markdownIt-Anchor" href="#全局查找"></a> 全局查找</h3>
<p>匹配读取: 读取字符串中的所有’o’</p>
<p>match方法，获取我们匹配成功的字符串，放到数组中并返回</p>
<p>通过给正则表达式后面添加一个g，来表示全局搜索，g == global</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配读取: 读取一个字符串中的所有&#x27;l&#x27;字母</span></span><br><span class="line"><span class="comment">// g表示全文查找,如果不使用g那么就只能查找到第一个匹配的内容</span></span><br><span class="line"><span class="comment">//1. 编写一个正则表达式</span></span><br><span class="line"><span class="keyword">var</span> reg2 = <span class="regexp">/l/g</span></span><br><span class="line"><span class="comment">//2. 使用正则表达式去读取字符串</span></span><br><span class="line"><span class="keyword">var</span> arr = str.<span class="title function_">match</span>(reg2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br></pre></td></tr></table></figure>
<h3 id="忽略大小写"><a class="markdownIt-Anchor" href="#忽略大小写"></a> 忽略大小写</h3>
<p>在正则表达式后面添加一个i，来表示忽略大小写，i ==== ignore</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//目标字符串</span></span><br><span class="line"><span class="keyword">var</span> targetStr = <span class="string">&#x27;Hello WORLD!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//没有使用忽略大小写的正则表达式</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/o/gi</span>;</span><br><span class="line"><span class="comment">//获取全部匹配</span></span><br><span class="line"><span class="keyword">var</span> resultArr = targetStr.<span class="title function_">match</span>(reg);</span><br><span class="line"><span class="comment">//数组长度为1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;resultArr.length=&quot;</span>+resultArr.<span class="property">length</span>);</span><br><span class="line"><span class="comment">//遍历数组，仅得到&#x27;o&#x27;</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; resultArr.<span class="property">length</span>; i++)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;resultArr[&quot;</span>+i+<span class="string">&quot;]=&quot;</span>+resultArr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="多行查找"><a class="markdownIt-Anchor" href="#多行查找"></a> 多行查找</h3>
<p>不使用多行查找模式，目标字符串中不管有没有换行符都会被当作一行</p>
<p>在正则表达式后面添加一个m，表示多行查找 m ===== many</p>
<p>正则表达式中在最后添加一个$ 表明要查询以此，正则表达式结尾字符串</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ar targetStr01 = <span class="string">&#x27;Hello\nWorld!&#x27;</span>;</span><br><span class="line"><span class="comment">//目标字符串2</span></span><br><span class="line"><span class="keyword">var</span> targetStr02 = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配以&#x27;Hello&#x27;结尾的正则表达式，使用了多行匹配</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/Hello$/m</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(targetStr01));<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(targetStr02));<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h2 id="元字符"><a class="markdownIt-Anchor" href="#元字符"></a> 元字符</h2>
<p>在正则表达式中被赋予特殊含义的字符，不能被直接当做普通字符使用。如果要匹配元字符本身，需要对元字符进行转义，转义的方式是在元字符前面加上“\”，例如：^</p>
<p>常用元字符</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>匹配除换行字符以外的任意字符。</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母或数字或下划线等价于[a-zA-Z0-9_]</td>
</tr>
<tr>
<td>\W</td>
<td>匹配任何非单词字符。等价于[^A-Za-z0-9_]</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意的空白符，包括空格、制表符、换页符等等。等价于[\f\n\r\t\v]。</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任何非空白字符。等价于[^\f\n\r\t\v]。</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字。等价于[0-9]。</td>
</tr>
<tr>
<td>\D</td>
<td>匹配一个非数字字符。等价于[^0-9]</td>
</tr>
<tr>
<td>\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串的开始，但在[]中使用表示取反</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结束</td>
</tr>
</tbody>
</table>
<h3 id="例子一"><a class="markdownIt-Anchor" href="#例子一"></a> 例子一</h3>
<p>\s 匹配任意空白字符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;one two three four&#x27;</span>;</span><br><span class="line"><span class="comment">// 匹配全部空格</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\s/g</span>;</span><br><span class="line"><span class="comment">// 将空格替换为@</span></span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">replace</span>(reg,<span class="string">&#x27;@&#x27;</span>); <span class="comment">// one@two@three@four</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;newStr=&quot;</span>+newStr);</span><br></pre></td></tr></table></figure>
<h3 id="例子二"><a class="markdownIt-Anchor" href="#例子二"></a> 例子二</h3>
<p>\d 表示匹配数组，\d+,表示匹配多个字符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;今年是2014年&#x27;</span>;</span><br><span class="line"><span class="comment">// 匹配至少一个数字</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d+/g</span>;</span><br><span class="line">str = str.<span class="title function_">replace</span>(reg,<span class="string">&#x27;abcd&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;str=&#x27;</span>+str); <span class="comment">// 今年是abcd年</span></span><br></pre></td></tr></table></figure>
<h3 id="例子三"><a class="markdownIt-Anchor" href="#例子三"></a> 例子三</h3>
<p>\ ^ xxx,表示匹配以xxx开头的字符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str01 = <span class="string">&#x27;I love Java&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> str02 = <span class="string">&#x27;Java love me&#x27;</span>;</span><br><span class="line"><span class="comment">// 匹配以Java开头</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^Java/g</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reg.test(str01)=&#x27;</span>+reg.<span class="title function_">test</span>(str01)); <span class="comment">// flase</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;&lt;br /&gt;&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reg.test(str02)=&#x27;</span>+reg.<span class="title function_">test</span>(str02)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="例子四"><a class="markdownIt-Anchor" href="#例子四"></a> 例子四</h3>
<p>xxx$表示匹配以xxx结尾的字符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str01 = <span class="string">&#x27;I love Java&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> str02 = <span class="string">&#x27;Java love me&#x27;</span>;</span><br><span class="line"><span class="comment">// 匹配以Java结尾</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/Java$/g</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reg.test(str01)=&#x27;</span>+reg.<span class="title function_">test</span>(str01)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;&lt;br /&gt;&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reg.test(str02)=&#x27;</span>+reg.<span class="title function_">test</span>(str02)); <span class="comment">// flase</span></span><br></pre></td></tr></table></figure>
<h2 id="字符集合"><a class="markdownIt-Anchor" href="#字符集合"></a> 字符集合</h2>
<table>
<thead>
<tr>
<th>语法格式</th>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>[字符列表]</td>
<td>正则表达式：[abc] 含义：目标字符串包含abc中的任何一个字符 目标字符串：plain 是否匹配：是 原因：plain中的“a”在列表“abc”中</td>
<td>目标字符串中任何一个字符出现在字符列表中就算匹配。</td>
</tr>
<tr>
<td>[^字符列表]</td>
<td>[^abc] 含义：目标字符串包含abc以外的任何一个字符 目标字符串：plain 是否匹配：是 原因：plain中包含“p”、“l”、“i”、“n”</td>
<td>匹配字符列表中未包含的任意字符。</td>
</tr>
<tr>
<td>[字符范围]</td>
<td>正则表达式：[a-z] 含义：所有小写英文字符组成的字符列表 正则表达式：[A-Z] 含义：所有大写英文字符组成的字符列表</td>
<td>匹配指定范围内的任意字符。</td>
</tr>
</tbody>
</table>
<p>正则表达式 - 表示范围， 0-9，表示0至 9</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str01 = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> str02 = <span class="string">&#x27;I am Tom&#x27;</span>;</span><br><span class="line"><span class="comment">//匹配abc中的任何一个</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/[abc]/g</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reg.test(str01)=&#x27;</span>+reg.<span class="title function_">test</span>(str01));<span class="comment">//flase</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reg.test(str02)=&#x27;</span>+reg.<span class="title function_">test</span>(str02));<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h2 id="出现次数"><a class="markdownIt-Anchor" href="#出现次数"></a> 出现次数</h2>
<table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>出现零次或多次</td>
</tr>
<tr>
<td>+</td>
<td>出现一次或多次</td>
</tr>
<tr>
<td>?</td>
<td>出现零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>出现n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>出现n次或多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>出现n到m次</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;/[a]&#123;3&#125;/.test(&#x27;aa&#x27;)=&quot;</span>+<span class="regexp">/[a]&#123;3&#125;/g</span>.<span class="title function_">test</span>(<span class="string">&#x27;aa&#x27;</span>)); <span class="comment">// flase</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;/[a]&#123;3&#125;/.test(&#x27;aaa&#x27;)=&quot;</span>+<span class="regexp">/[a]&#123;3&#125;/g</span>.<span class="title function_">test</span>(<span class="string">&#x27;aaa&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;/[a]&#123;3&#125;/.test(&#x27;aaaa&#x27;)=&quot;</span>+<span class="regexp">/[a]&#123;3&#125;/g</span>.<span class="title function_">test</span>(<span class="string">&#x27;aaaa&#x27;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="在正则表达式中表达或者"><a class="markdownIt-Anchor" href="#在正则表达式中表达或者"></a> 在正则表达式中表达『或者』</h2>
<p>使用符号：|</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 目标字符串</span></span><br><span class="line"><span class="keyword">var</span> str01 = <span class="string">&#x27;Hello World!&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> str02 = <span class="string">&#x27;I love Java&#x27;</span>;</span><br><span class="line"><span class="comment">// 匹配&#x27;World&#x27;或&#x27;Java&#x27;</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/World|Java/g</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;str01.match(reg)[0]=&quot;</span>+str01.<span class="title function_">match</span>(reg)[<span class="number">0</span>]);<span class="comment">//World</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;str02.match(reg)[0]=&quot;</span>+str02.<span class="title function_">match</span>(reg)[<span class="number">0</span>]);<span class="comment">//Java</span></span><br></pre></td></tr></table></figure>
<h1 id="ajax了解"><a class="markdownIt-Anchor" href="#ajax了解"></a> Ajax（了解）</h1>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">第一步： 客户端发送异步请求；并绑定对结果处理的回调函数</span><br><span class="line">1) <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;uname&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;ckUname()&quot;</span>/&gt;</span></span><br><span class="line">2) 定义ckUname方法：</span><br><span class="line">   - 创建XMLHttpRequest对象</span><br><span class="line">   - XMLHttpRequest对象操作步骤：</span><br><span class="line">     - open(url,&quot;GET&quot;,true)</span><br><span class="line">     - onreadyStateChange 设置回调</span><br><span class="line">     - send() 发送请求</span><br><span class="line">   - 在回调函数中需要判断XMLHttpRequest对象的状态:</span><br><span class="line">     readyState(0-4) , status(200)</span><br><span class="line">	0 - （未初始化)还没有调用send ()方法</span><br><span class="line">	1 -（载入)已调用send ()方法，正在发送请求</span><br><span class="line">	2 -（载入完成 ) send ()方法执行完成，已经接收到全部响应内容</span><br><span class="line">	3 -（交互)正在解析响应内容</span><br><span class="line">	4 -（完成）响应内容解析完成，可以在客户端调用了</span><br><span class="line"></span><br><span class="line">第二步：服务器端做校验，然后将校验结果响应给客户端</span><br></pre></td></tr></table></figure>
<p>js代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xmlHttpRequest;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createXMLHttpRequest</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>)&#123;</span><br><span class="line">        xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">ActiveXObject</span>)&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (e)&#123;</span><br><span class="line">            xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Msxm12.XMLHTTP&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ckUname</span>(<span class="params">uname</span>) &#123;</span><br><span class="line">    <span class="title function_">createXMLHttpRequest</span>();</span><br><span class="line">    <span class="keyword">var</span> url=<span class="string">&quot;user.do?operate=ckUname&amp;uname=&quot;</span>+uname;</span><br><span class="line">    xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,url, <span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 设置回调函数</span></span><br><span class="line">    xmlHttpRequest.<span class="property">onreadystatechange</span> = ckUnameCB;</span><br><span class="line">    <span class="comment">// 发送请求</span></span><br><span class="line">    xmlHttpRequest.<span class="title function_">send</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ckUnameCB</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(xmlHttpRequest.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; xmlHttpRequest.<span class="property">status</span> == <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(xmlHttpRequest.<span class="property">responseText</span> === <span class="string">&quot;&#123;&#x27;uname&#x27;:&#x27;1&#x27;&#125;&quot;</span>)&#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;用户名已经被注册了！！！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;用户名可以使用&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>服务器端代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">ckUname</span><span class="params">(String uname)</span>&#123;</span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">aBoolean</span> <span class="operator">=</span> userService.ckUname(uname);</span><br><span class="line">    <span class="keyword">if</span>(aBoolean)&#123;</span><br><span class="line">        <span class="comment">// 用可以注册</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;json:&#123;&#x27;uname&#x27;:&#x27;0&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// 用户不可以注册</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;json:&#123;&#x27;uname&#x27;:&#x27;1&#x27;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="vue了解"><a class="markdownIt-Anchor" href="#vue了解"></a> VUE（了解）</h1>
<h2 id="绑定数据"><a class="markdownIt-Anchor" href="#绑定数据"></a> 绑定数据</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--&#123;&#123;绑定数据&#125;&#125;--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 找到id为div0的标签</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 在div0下面的msg替换为下面数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">msg</span>:<span class="string">&quot;Hello World!!!&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="v-bind绑定数据"><a class="markdownIt-Anchor" href="#v-bind绑定数据"></a> v-bind绑定数据</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 找到id为div0的标签</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 在div0下面的msg替换为下面数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">msg</span>:<span class="string">&quot;Hello World!!!&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">uname</span>:<span class="string">&quot;你好&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--通过&#123;&#123;&#125;&#125;来绑定对应的属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--通过v-bind来绑定对应的属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;uname&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="v-model绑定数据"><a class="markdownIt-Anchor" href="#v-model绑定数据"></a> v-model绑定数据</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 找到id为div0的标签</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 在div0下面的msg替换为下面数据</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">msg</span>:<span class="string">&quot;Hello World!!!&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">uname</span>:<span class="string">&quot;你好&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--通过&#123;&#123;&#125;&#125;来绑定对应的属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--通过v-bind来绑定对应的属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;uname&quot;</span> /&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--通过v-bind可以省略--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;uname&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--通过v-model来绑定对应的属性,如果我们这个标签里面的value值发生变化的话，那么vue对象中的msg也会发生变化--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model:value</span>=<span class="string">&quot;msg&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--:value可以省略--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;msg&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="trim去除首位空标签"><a class="markdownIt-Anchor" href="#trim去除首位空标签"></a> trim去除首位空标签</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/02/18/yMxnkvAFbK62tXm.png" alt="image-20230216100428014" /></p>
<h2 id="v-if-v-else"><a class="markdownIt-Anchor" href="#v-if-v-else"></a> v-if v-else</h2>
<p>使用v-if和v-else来进行标签的显隐</p>
<p>并且v-if和v-else之间不能有其他的节点</p>
<p>如果v-if不成立的话，则该标签就直接删除了</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 找到id为div0的标签</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">msg</span>:<span class="string">&quot;文本标签&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num</span>:<span class="string">&quot;Hello World!!!&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--如果num偶数的话，才显示span标签--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;num%2==0&quot;</span>&gt;</span>if成立<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>=<span class="string">&quot;num%2==0&quot;</span>&gt;</span>if不成立<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="v-show"><a class="markdownIt-Anchor" href="#v-show"></a> v-show</h2>
<p>使用v-show来控制标签的显隐，如果表达式不成立的话，改标签不会消失，而是会加上一个display：none的数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 找到id为div0的标签</span></span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">msg</span>:<span class="string">&quot;文本标签&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num</span>:<span class="string">&quot;Hello World!!!&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-show</span>=<span class="string">&quot;num%2==0&quot;</span>&gt;</span>if成立<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="列表渲染"><a class="markdownIt-Anchor" href="#列表渲染"></a> 列表渲染</h2>
<p>v-for,循环遍历数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">fruitList</span>:[</span></span><br><span class="line"><span class="language-javascript">                        &#123;<span class="attr">fname</span>:<span class="string">&quot;苹果&quot;</span>, <span class="attr">fprice</span>:<span class="number">5</span>, <span class="attr">fcount</span>:<span class="number">100</span>,<span class="attr">remark</span>:<span class="string">&quot;苹果很好吃&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123;<span class="attr">fname</span>:<span class="string">&quot;香蕉&quot;</span>, <span class="attr">fprice</span>:<span class="number">5</span>, <span class="attr">fcount</span>:<span class="number">100</span>,<span class="attr">remark</span>:<span class="string">&quot;香蕉很好吃&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123;<span class="attr">fname</span>:<span class="string">&quot;菠萝&quot;</span>, <span class="attr">fprice</span>:<span class="number">5</span>, <span class="attr">fcount</span>:<span class="number">100</span>,<span class="attr">remark</span>:<span class="string">&quot;菠萝很好吃&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123;<span class="attr">fname</span>:<span class="string">&quot;西瓜&quot;</span>, <span class="attr">fprice</span>:<span class="number">5</span>, <span class="attr">fcount</span>:<span class="number">100</span>,<span class="attr">remark</span>:<span class="string">&quot;西瓜很好吃&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                    ]</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;); </span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>单价<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>库存<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>备注<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;fruit in fruitList&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;fruit.fname&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;fruit.fprice&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;fruit.fcount&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;fruit.remark&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="事件驱动-2"><a class="markdownIt-Anchor" href="#事件驱动-2"></a> 事件驱动</h2>
<p>v-on 标签</p>
<p>v-on:click;</p>
<p>v-on:blur;</p>
<p>v-on:mousemove;</p>
<p>反转字符串</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">msg</span>:<span class="string">&quot;hello world&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">myReverse</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="variable language_">this</span>.<span class="property">msg</span> = <span class="variable language_">this</span>.<span class="property">msg</span>.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;  </span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;); </span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-on 表示绑定点击事件--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-on 可以省略不写，编程@click--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;反转&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;myReverse&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="侦听属性"><a class="markdownIt-Anchor" href="#侦听属性"></a> 侦听属性</h2>
<p>watch，当属性改变的时候触发这个方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num1</span>:<span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num2</span>:<span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num3</span>:<span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">watch</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num1</span>:<span class="keyword">function</span> (<span class="params">newValue</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">num3</span> = <span class="built_in">parseInt</span>(newValue)+<span class="built_in">parseInt</span>(<span class="variable language_">this</span>.<span class="property">num2</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">num2</span>:<span class="keyword">function</span> (<span class="params">newValue</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">num3</span> = <span class="built_in">parseInt</span>(<span class="variable language_">this</span>.<span class="property">num1</span>)+<span class="built_in">parseInt</span>(newValue);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;); </span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;num1&quot;</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">        +</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;num2&quot;</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">        =</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;num3&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="生命周期-2"><a class="markdownIt-Anchor" href="#生命周期-2"></a> 生命周期</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;JavaScript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;JavaScript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">msg</span>:<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">changeMsg</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">msg</span> = <span class="variable language_">this</span>.<span class="property">msg</span> + <span class="number">1</span> ;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">/*vue对象创建之前*/</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">beforeCreate</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeCreate:vue对象创建之前---------------&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;msg:&quot;</span>+<span class="variable language_">this</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">/*vue对象创建之后*/</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">created</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;created:vue对象创建之后---------------&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;msg:&quot;</span>+<span class="variable language_">this</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">/*数据装载之前*/</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">beforeMount</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeMount:数据装载之前---------------&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;span:&quot;</span>+<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;span&quot;</span>).<span class="property">innerText</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">/*数据装载之后*/</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">mounted</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;mounted:数据装载之后---------------&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;span:&quot;</span>+<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;span&quot;</span>).<span class="property">innerText</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">beforeUpdate</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeUpdate:数据更新之前---------------&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;msg:&quot;</span>+<span class="variable language_">this</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;span:&quot;</span>+<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;span&quot;</span>).<span class="property">innerText</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">updated</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Updated:数据更新之后---------------&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;msg:&quot;</span>+<span class="variable language_">this</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;span:&quot;</span>+<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;span&quot;</span>).<span class="property">innerText</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;span&quot;</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;改变msg的值&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeMsg&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="axios"><a class="markdownIt-Anchor" href="#axios"></a> AXIOS</h1>
<p>Axios是一个ajax的框架，简化ajax的操作</p>
<p>Axios操作步骤</p>
<ol>
<li>
<p>添加axios.js文件</p>
</li>
<li>
<p>客户端向服务器异步发送普通参数值</p>
<p>基本格式：axios().then().catch()</p>
<p>示例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">axios01</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">axios</span>(&#123;</span><br><span class="line">        <span class="comment">// 配置参数</span></span><br><span class="line">        <span class="attr">method</span>:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>:<span class="string">&quot;axios01.do&quot;</span>,</span><br><span class="line">        <span class="attr">params</span>:&#123;</span><br><span class="line">            <span class="attr">uname</span>:vue.<span class="property">uname</span>,</span><br><span class="line">            <span class="attr">pwd</span>:vue.<span class="property">pwd</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 成功的情况</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">        <span class="comment">// 失败的情况</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">reason</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="示例1客户端向服务器端异步发送普通参数值"><a class="markdownIt-Anchor" href="#示例1客户端向服务器端异步发送普通参数值"></a> 示例1：客户端向服务器端异步发送普通参数值</h2>
<p>HTML文件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">uname</span>:<span class="string">&quot;Nuyoah&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">pwd</span>:<span class="string">&quot;OK&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">axios01</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">axios</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">method</span>:<span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">url</span>:<span class="string">&quot;axios01.do&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">params</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">uname</span>:vue.<span class="property">uname</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">pwd</span>:vue.<span class="property">pwd</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span></span><br><span class="line"><span class="language-javascript">                        &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">reason</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span></span><br><span class="line"><span class="language-javascript">                        &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;); </span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;uname&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;axios01&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>服务器端文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/axios01.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Axios01Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        writer.print(uname+<span class="string">&quot;_&quot;</span>+pwd);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="示例二客户端向服务器端发送json格式的数据"><a class="markdownIt-Anchor" href="#示例二客户端向服务器端发送json格式的数据"></a> 示例二：客户端向服务器端发送JSON格式的数据</h2>
<p>我们只需要将params改为data即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">uname</span>:<span class="string">&quot;Nuyoah&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">pwd</span>:<span class="string">&quot;OK&quot;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">axios01</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">axios</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">method</span>:<span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">url</span>:<span class="string">&quot;axios02.do&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="attr">uname</span>:vue.<span class="property">uname</span>,</span></span><br><span class="line"><span class="language-javascript">                                    <span class="attr">pwd</span>:vue.<span class="property">pwd</span></span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">var</span> data = value.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                                vue.<span class="property">uname</span> = data.<span class="property">uname</span>;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">console</span>.<span class="title function_">log</span>(vue.<span class="property">uname</span>);</span></span><br><span class="line"><span class="language-javascript">                                vue.<span class="property">pwd</span> = data.<span class="property">pwd</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">reason</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span></span><br><span class="line"><span class="language-javascript">                            &#125;)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;); </span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;uname&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;axios01&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="示例三服务器端接受处理json并返回给客户端json格式的代码"><a class="markdownIt-Anchor" href="#示例三服务器端接受处理json并返回给客户端json格式的代码"></a> 示例三：服务器端接受处理JSON并返回给客户端JSON格式的代码</h2>
<p>服务器端可以通过req.getReader()函数来进行读取客户端传来的JSON格式的代码</p>
<p>服务器端可以通过Gson来将，客户端传来的JSON格式的代码，转换为JAVA对象，也可以将JAVA对象转换成JSON的格式</p>
<p>服务器端代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hgu.axios;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/axios02.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Axios02Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">stringBuffer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> req.getReader();</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>((str = reader.readLine())!= <span class="literal">null</span>)&#123;</span><br><span class="line">            stringBuffer.append(str);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        str = stringBuffer.toString();</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        <span class="comment">// Gson 有两个常用的API</span></span><br><span class="line">        <span class="comment">// 1. fromJson(string, T), 将字符串转换成JAVA Object对象</span></span><br><span class="line">        <span class="comment">// 2. toJson(JavaObject) 将javaObject转换成JSON对象</span></span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> gson.fromJson(str, User.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> gson.toJson(user);</span><br><span class="line"></span><br><span class="line">        resp.getWriter().write(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>客户端代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/vue.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&quot;el&quot;</span>:<span class="string">&quot;#div0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">uname</span>:<span class="string">&quot;Nuyoah&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">pwd</span>:<span class="string">&quot;OK&quot;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">axios01</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">axios</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">method</span>:<span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">url</span>:<span class="string">&quot;axios02.do&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="attr">uname</span>:vue.<span class="property">uname</span>,</span></span><br><span class="line"><span class="language-javascript">                                    <span class="attr">pwd</span>:vue.<span class="property">pwd</span></span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">var</span> data = value.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                                vue.<span class="property">uname</span> = data.<span class="property">uname</span>;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">console</span>.<span class="title function_">log</span>(vue.<span class="property">uname</span>);</span></span><br><span class="line"><span class="language-javascript">                                vue.<span class="property">pwd</span> = data.<span class="property">pwd</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">reason</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span></span><br><span class="line"><span class="language-javascript">                            &#125;)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;); </span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;uname&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;axios01&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="js处理json"><a class="markdownIt-Anchor" href="#js处理json"></a> JS处理JSON</h2>
<p>Object - &gt; String ==== JSON.stringify(object)</p>
<p>String - &gt;  Ojbect ==== JSON.parse(str)</p>
<h1 id="书城"><a class="markdownIt-Anchor" href="#书城"></a> 书城</h1>
<p>第一阶段，未使用vue和Axios渲染的</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/fendoub/java-web/blob/master/Book01.zip">Book01</a></p>
<p>第二阶段：使用vue和Axios渲染的</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/fendoub/java-web/blob/master/Book02.zip">Book02</a></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">Nuyoah</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://262259.xyz/2023/01/22/JavaWeb/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://262259.xyz/2023/01/22/JavaWeb/')">JavaWeb</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://s2.loli.net/2022/08/16/weL31EHsON5ldDU.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/08/16/weL31EHsON5ldDU.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s2.loli.net/2022/08/16/2yRjVx9gFKQaidA.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/08/16/2yRjVx9gFKQaidA.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://262259.xyz/2023/01/22/JavaWeb/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=JavaWeb&amp;url=http://262259.xyz/2023/01/22/JavaWeb/&amp;pic=https://s2.loli.net/2022/11/21/Sm8lFrjtzUkihVy.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://262259.xyz" target="_blank">Nuyoah</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/JAVA/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JAVA<span class="tagsPageCount">5</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/11/19/5yBnV3OzjDICrEb.jpg?_r_=96b232db-41e6-b849-329a-ad769cda2fdd" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/12/31/%E5%9B%BE%E5%BA%8A%E6%96%B9%E6%A1%88/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/10/ZXc3RNuO8oF9kqD.jpg?_r_=af445606-8298-82c4-bfe2-4047d8856b96" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">图床方案</div></div></a></div><div class="next-post pull-right"><a href="/2023/01/31/Javaweb%E5%88%86%E9%A1%B5%E9%97%AE%E9%A2%98/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/10/zdLGpiaFbXMZ8Yg.jpg?_r_=a9da50c1-ce28-b756-f659-9a439c0e00d6" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Javaweb查询分页问题</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2022/12/29/JDBC%E6%95%99%E7%A8%8B/" title="JDBC教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/12/29/oFUefWrVSE1Zi9C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-12-29</div><div class="title">JDBC教程</div></div></a></div><div><a href="/2023/01/31/Javaweb%E5%88%86%E9%A1%B5%E9%97%AE%E9%A2%98/" title="Javaweb查询分页问题"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/10/zdLGpiaFbXMZ8Yg.jpg?_r_=a9da50c1-ce28-b756-f659-9a439c0e00d6" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-31</div><div class="title">Javaweb查询分页问题</div></div></a></div><div><a href="/2022/09/16/Java%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81/" title="Java邮件发送"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/Sm8lFrjtzUkihVy.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-09-16</div><div class="title">Java邮件发送</div></div></a></div><div><a href="/2022/05/16/JAVA%E7%AC%94%E8%AE%B0/" title="JAVA教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/21/Sm8lFrjtzUkihVy.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-05-16</div><div class="title">JAVA教程</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" style="display: none">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Nuyoah</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/zjhinsist" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=2152889763@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#html"><span class="toc-number">1.</span> <span class="toc-text"> HTML</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#frameset-iframe"><span class="toc-number">1.1.</span> <span class="toc-text"> frameset-iframe</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#frameset"><span class="toc-number">1.1.1.</span> <span class="toc-text"> frameset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iframe"><span class="toc-number">1.1.2.</span> <span class="toc-text"> iframe</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#css"><span class="toc-number">2.</span> <span class="toc-text"> CSS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text"> 盒子模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#css-%E5%B8%83%E5%B1%80"><span class="toc-number">2.2.</span> <span class="toc-text"> CSS 布局</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B0%B4%E6%9E%9C%E5%BA%93"><span class="toc-number">2.3.</span> <span class="toc-text"> 水果库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#js"><span class="toc-number">3.</span> <span class="toc-text"> JS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript%E7%9A%84%E8%B5%B7%E6%BA%90"><span class="toc-number">3.1.</span> <span class="toc-text"> JavaScript的起源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">3.2.</span> <span class="toc-text"> JavaScript的特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 脚本语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 基于对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%B1%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.3.</span> <span class="toc-text"> 弱类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8"><span class="toc-number">3.2.4.</span> <span class="toc-text"> 事件驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%B9%B3%E5%8F%B0%E6%80%A7"><span class="toc-number">3.2.5.</span> <span class="toc-text"> 跨平台性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A5%E9%97%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.3.</span> <span class="toc-text"> 入门程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E6%95%88%E6%9E%9C%E5%9B%BE"><span class="toc-number">3.3.1.</span> <span class="toc-text"> 功能效果图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.3.2.</span> <span class="toc-text"> 代码实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.4.</span> <span class="toc-text"> JavaScript的基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#javascript%E7%9A%84%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">3.4.1.</span> <span class="toc-text"> JavaScript的引入方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E8%84%9A%E6%9C%AC%E6%96%B9%E5%BC%8F"><span class="toc-number">3.4.1.1.</span> <span class="toc-text"> 内部脚本方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E8%84%9A%E6%9C%AC%E6%96%B9%E5%BC%8F"><span class="toc-number">3.4.1.2.</span> <span class="toc-text"> 外部脚本方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%92%8C%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-number">3.4.2.</span> <span class="toc-text"> 声明和使用变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#javascript%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.4.2.1.</span> <span class="toc-text"> JavaScript数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">3.4.2.2.</span> <span class="toc-text"> 变量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E9%87%8D%E7%82%B9"><span class="toc-number">3.4.3.</span> <span class="toc-text"> 函数(重点)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.3.1.</span> <span class="toc-text"> 内置函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.3.2.</span> <span class="toc-text"> 声明函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.3.3.</span> <span class="toc-text"> 调用函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E9%87%8D%E7%82%B9"><span class="toc-number">3.4.4.</span> <span class="toc-text"> 对象(重点)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8new%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.4.4.1.</span> <span class="toc-text"> 使用new关键字创建对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%B8%B8%E7%94%A8"><span class="toc-number">3.4.4.2.</span> <span class="toc-text"> 使用{}创建对象(常用)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E5%AF%B9%E8%B1%A1%E8%AE%BE%E7%BD%AE%E5%87%BD%E6%95%B0%E5%B1%9E%E6%80%A7"><span class="toc-number">3.4.4.3.</span> <span class="toc-text"> 给对象设置函数属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#this%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">3.4.4.4.</span> <span class="toc-text"> this关键字</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E9%87%8D%E7%82%B9"><span class="toc-number">3.4.5.</span> <span class="toc-text"> 数组(重点)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8new%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84"><span class="toc-number">3.4.5.1.</span> <span class="toc-text"> 使用new关键字创建数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84%E5%B8%B8%E7%94%A8"><span class="toc-number">3.4.5.2.</span> <span class="toc-text"> 使用[]创建数组(常用)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json%E6%9C%80%E9%87%8D%E7%82%B9"><span class="toc-number">3.4.6.</span> <span class="toc-text"> JSON(最重点)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#json%E6%A0%BC%E5%BC%8F%E7%9A%84%E7%94%A8%E9%80%94"><span class="toc-number">3.4.6.1.</span> <span class="toc-text"> JSON格式的用途</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#json%E6%A0%BC%E5%BC%8F%E7%9A%84%E8%AF%B4%E6%98%8E"><span class="toc-number">3.4.6.2.</span> <span class="toc-text"> JSON格式的说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#json%E5%AF%B9%E8%B1%A1%E5%92%8Cjson%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%BA%92%E8%BD%AC"><span class="toc-number">3.4.6.3.</span> <span class="toc-text"> JSON对象和JSON字符串互转</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript%E7%9A%84dom%E6%9C%80%E9%87%8D%E7%82%B9"><span class="toc-number">3.5.</span> <span class="toc-text"> JavaScript的DOM(最重点)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dom%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">3.5.1.</span> <span class="toc-text"> DOM的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dom%E6%A0%91%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">3.5.2.</span> <span class="toc-text"> DOM树的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E4%B8%AA%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.5.3.</span> <span class="toc-text"> 各个组成部分的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E5%85%B3%E7%B3%BB"><span class="toc-number">3.5.4.</span> <span class="toc-text"> 父子关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E8%BE%88%E5%90%8E%E4%BB%A3%E5%85%B3%E7%B3%BB"><span class="toc-number">3.5.5.</span> <span class="toc-text"> 先辈后代关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dom%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.6.</span> <span class="toc-text"> DOM操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E6%95%B4%E4%B8%AA%E6%96%87%E6%A1%A3%E8%8C%83%E5%9B%B4%E5%86%85%E6%9F%A5%E8%AF%A2%E5%85%83%E7%B4%A0%E8%8A%82%E7%82%B9"><span class="toc-number">3.5.6.1.</span> <span class="toc-text"> 在整个文档范围内查询元素节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%85%B7%E4%BD%93%E5%85%83%E7%B4%A0%E8%8A%82%E7%82%B9%E8%8C%83%E5%9B%B4%E5%86%85%E6%9F%A5%E6%89%BE%E5%AD%90%E8%8A%82%E7%82%B9"><span class="toc-number">3.5.6.2.</span> <span class="toc-text"> 在具体元素节点范围内查找子节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%8C%87%E5%AE%9A%E5%85%83%E7%B4%A0%E8%8A%82%E7%82%B9%E7%9A%84%E7%88%B6%E8%8A%82%E7%82%B9"><span class="toc-number">3.5.6.3.</span> <span class="toc-text"> 查找指定元素节点的父节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%8C%87%E5%AE%9A%E5%85%83%E7%B4%A0%E8%8A%82%E7%82%B9%E7%9A%84%E5%85%84%E5%BC%9F%E8%8A%82%E7%82%B9"><span class="toc-number">3.5.6.4.</span> <span class="toc-text"> 查找指定元素节点的兄弟节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E5%86%85%E5%AE%B9%E6%A0%B9%E6%8D%AE%E9%80%89%E6%8B%A9%E5%99%A8%E6%9F%A5%E6%89%BE%E6%A0%87%E7%AD%BE"><span class="toc-number">3.5.6.5.</span> <span class="toc-text"> 扩展内容(根据选择器查找标签)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.6.5.1.</span> <span class="toc-text"> 属性操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E4%BD%93%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.6.5.2.</span> <span class="toc-text"> 标签体的操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#dom%E5%A2%9E%E5%88%A0%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.6.5.3.</span> <span class="toc-text"> DOM增删改操作</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript%E7%9A%84%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E5%BE%88%E9%87%8D%E8%A6%81"><span class="toc-number">3.6.</span> <span class="toc-text"> JavaScript的事件驱动(很重要)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">3.6.1.</span> <span class="toc-text"> 事件的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.6.2.</span> <span class="toc-text"> 常见事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">3.6.3.</span> <span class="toc-text"> 事件绑定的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">3.6.3.1.</span> <span class="toc-text"> 普通函数方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">3.6.3.2.</span> <span class="toc-text"> 匿名函数方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.6.3.3.</span> <span class="toc-text"> 事件的使用介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">3.6.3.4.</span> <span class="toc-text"> 综合案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B0%B4%E6%9E%9C%E6%91%8A"><span class="toc-number">3.7.</span> <span class="toc-text"> 水果摊</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#web"><span class="toc-number">4.</span> <span class="toc-text"> WEB</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cs%E4%B8%8Ebs%E5%BC%82%E5%90%8C"><span class="toc-number">4.1.</span> <span class="toc-text"> CS与BS异同</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tomcat"><span class="toc-number">4.2.</span> <span class="toc-text"> TOMCAT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">4.3.</span> <span class="toc-text"> 项目执行过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B"><span class="toc-number">4.4.</span> <span class="toc-text"> 模块创建过程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#servlet"><span class="toc-number">5.</span> <span class="toc-text"> Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0"><span class="toc-number">5.1.</span> <span class="toc-text"> 获取参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81"><span class="toc-number">5.2.</span> <span class="toc-text"> 中文乱码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB"><span class="toc-number">5.3.</span> <span class="toc-text"> 继承关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.4.</span> <span class="toc-text"> 生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.5.</span> <span class="toc-text"> HTTP协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#session%E4%BC%9A%E8%AF%9D"><span class="toc-number">5.6.</span> <span class="toc-text"> Session会话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%85%E9%83%A8%E8%BD%AC%E5%8F%91%E4%BB%A5%E5%8F%8A%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">5.7.</span> <span class="toc-text"> 服务器内部转发以及客户端重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#thymeleaf-%E8%A7%86%E5%9B%BE%E6%A8%A1%E6%9D%BF%E6%8A%80%E6%9C%AF"><span class="toc-number">5.8.</span> <span class="toc-text"> Thymeleaf-视图模板技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#th%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4"><span class="toc-number">5.8.1.</span> <span class="toc-text"> TH名称空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95"><span class="toc-number">5.8.2.</span> <span class="toc-text"> 表达式语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%A0%87%E7%AD%BE%E6%96%87%E6%9C%AC%E5%80%BC"><span class="toc-number">5.8.2.1.</span> <span class="toc-text"> 修改标签文本值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#thtext%E4%BD%9C%E7%94%A8"><span class="toc-number">5.8.2.1.1.</span> <span class="toc-text"> th:text作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="toc-number">5.8.2.1.2.</span> <span class="toc-text"> 字面量</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%8C%87%E5%AE%9A%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-number">5.8.2.2.</span> <span class="toc-text"> 修改指定属性值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90url%E5%9C%B0%E5%9D%80"><span class="toc-number">5.8.2.3.</span> <span class="toc-text"> 解析URL地址</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">5.8.2.3.1.</span> <span class="toc-text"> 基本语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E4%BD%BF%E7%94%A8url%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90"><span class="toc-number">5.8.2.3.2.</span> <span class="toc-text"> 首页使用URL地址解析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%99url%E5%9C%B0%E5%9D%80%E5%90%8E%E9%9D%A2%E9%99%84%E5%8A%A0%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">5.8.2.3.3.</span> <span class="toc-text"> 给URL地址后面附加请求参数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E6%89%A7%E8%A1%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.8.2.4.</span> <span class="toc-text"> 直接执行表达式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E8%AE%BF%E9%97%AE%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">5.8.3.</span> <span class="toc-text"> 基本语法：访问域对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">5.8.3.1.</span> <span class="toc-text"> 域对象</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%9F%9F"><span class="toc-number">5.8.3.1.1.</span> <span class="toc-text"> 请求域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%9F%9F"><span class="toc-number">5.8.3.1.2.</span> <span class="toc-text"> 会话域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9F%9F"><span class="toc-number">5.8.3.1.3.</span> <span class="toc-text"> 应用域</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8servlet%E4%B8%AD%E5%B0%86%E6%95%B0%E6%8D%AE%E5%AD%98%E5%85%A5%E5%B1%9E%E6%80%A7%E5%9F%9F"><span class="toc-number">5.8.3.2.</span> <span class="toc-text"> 在Servlet中将数据存入属性域</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E8%AF%B7%E6%B1%82%E5%9F%9F"><span class="toc-number">5.8.3.2.1.</span> <span class="toc-text"> 操作请求域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E4%BC%9A%E8%AF%9D%E5%9F%9F"><span class="toc-number">5.8.3.2.2.</span> <span class="toc-text"> 操作会话域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E5%BA%94%E7%94%A8%E5%9F%9F"><span class="toc-number">5.8.3.2.3.</span> <span class="toc-text"> 操作应用域</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">5.8.4.</span> <span class="toc-text"> 获取请求参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E5%90%8D%E5%AD%97%E4%B8%80%E4%B8%AA%E5%80%BC"><span class="toc-number">5.8.4.1.</span> <span class="toc-text"> 一个名字一个值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E5%90%8D%E5%AD%97%E5%A4%9A%E4%B8%AA%E5%80%BC"><span class="toc-number">5.8.4.2.</span> <span class="toc-text"> 一个名字多个值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%94%AF%E4%B8%8E%E8%BF%AD%E4%BB%A3"><span class="toc-number">5.8.5.</span> <span class="toc-text"> 分支与迭代</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%94%AF"><span class="toc-number">5.8.5.1.</span> <span class="toc-text"> 分支</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#if%E5%92%8Cunless"><span class="toc-number">5.8.5.1.1.</span> <span class="toc-text"> if和unless</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#switch"><span class="toc-number">5.8.5.1.2.</span> <span class="toc-text"> switch</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3"><span class="toc-number">5.8.5.2.</span> <span class="toc-text"> 迭代</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">5.9.</span> <span class="toc-text"> 保存作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">5.10.</span> <span class="toc-text"> 路径问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#servlet%E4%BC%98%E5%8C%96"><span class="toc-number">6.</span> <span class="toc-text"> Servlet优化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%8F%E5%B0%91servlet%E6%95%B0%E9%87%8F"><span class="toc-number">6.1.</span> <span class="toc-text"> 减少Servlet数量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0dispatcherservlet"><span class="toc-number">6.2.</span> <span class="toc-text"> 添加DispatcherServlet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%8F%E5%B0%91controller%E9%87%8C%E9%9D%A2%E7%9A%84%E7%9B%B8%E5%90%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">6.3.</span> <span class="toc-text"> 减少Controller里面的相同代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%8F%E5%B0%91%E8%B7%B3%E8%BD%AC%E4%BB%A3%E7%A0%81"><span class="toc-number">6.3.1.</span> <span class="toc-text"> 减少跳转代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%8F%E5%B0%91%E5%8F%82%E6%95%B0%E4%BB%A3%E7%A0%81"><span class="toc-number">6.3.2.</span> <span class="toc-text"> 减少参数代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#review"><span class="toc-number">6.4.</span> <span class="toc-text"> Review</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#servlet-ioc%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.</span> <span class="toc-text"> Servlet IOC实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#servletapi"><span class="toc-number">7.1.</span> <span class="toc-text"> ServletAPI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#service"><span class="toc-number">7.2.</span> <span class="toc-text"> Service</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ioc%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.3.</span> <span class="toc-text"> IOC实现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#filter-%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">8.</span> <span class="toc-text"> Filter 过滤器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">9.</span> <span class="toc-text"> 事务</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">10.</span> <span class="toc-text"> 监听器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#qqzone"><span class="toc-number">11.</span> <span class="toc-text"> QQZone</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cookie"><span class="toc-number">12.</span> <span class="toc-text"> Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#session%E5%92%8Ccookie%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E8%81%94%E7%B3%BB"><span class="toc-number">12.1.</span> <span class="toc-text"> Session和Cookie的区别与联系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie%E5%88%9B%E5%BB%BA"><span class="toc-number">12.2.</span> <span class="toc-text"> Cookie创建</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81kaptcha"><span class="toc-number">13.</span> <span class="toc-text"> 验证码Kaptcha</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">14.</span> <span class="toc-text"> 正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">14.1.</span> <span class="toc-text"> 创建正则表达式对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">14.2.</span> <span class="toc-text"> 正则表达式入门案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F"><span class="toc-number">14.3.</span> <span class="toc-text"> 正则表达式的匹配模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%9F%A5%E6%89%BE"><span class="toc-number">14.3.1.</span> <span class="toc-text"> 全局查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%BD%E7%95%A5%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-number">14.3.2.</span> <span class="toc-text"> 忽略大小写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E6%9F%A5%E6%89%BE"><span class="toc-number">14.3.3.</span> <span class="toc-text"> 多行查找</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%83%E5%AD%97%E7%AC%A6"><span class="toc-number">14.4.</span> <span class="toc-text"> 元字符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%E4%B8%80"><span class="toc-number">14.4.1.</span> <span class="toc-text"> 例子一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%E4%BA%8C"><span class="toc-number">14.4.2.</span> <span class="toc-text"> 例子二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%E4%B8%89"><span class="toc-number">14.4.3.</span> <span class="toc-text"> 例子三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%E5%9B%9B"><span class="toc-number">14.4.4.</span> <span class="toc-text"> 例子四</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E9%9B%86%E5%90%88"><span class="toc-number">14.5.</span> <span class="toc-text"> 字符集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0"><span class="toc-number">14.6.</span> <span class="toc-text"> 出现次数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%AD%E8%A1%A8%E8%BE%BE%E6%88%96%E8%80%85"><span class="toc-number">14.7.</span> <span class="toc-text"> 在正则表达式中表达『或者』</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ajax%E4%BA%86%E8%A7%A3"><span class="toc-number">15.</span> <span class="toc-text"> Ajax（了解）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue%E4%BA%86%E8%A7%A3"><span class="toc-number">16.</span> <span class="toc-text"> VUE（了解）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E6%95%B0%E6%8D%AE"><span class="toc-number">16.1.</span> <span class="toc-text"> 绑定数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-bind%E7%BB%91%E5%AE%9A%E6%95%B0%E6%8D%AE"><span class="toc-number">16.2.</span> <span class="toc-text"> v-bind绑定数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-model%E7%BB%91%E5%AE%9A%E6%95%B0%E6%8D%AE"><span class="toc-number">16.3.</span> <span class="toc-text"> v-model绑定数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#trim%E5%8E%BB%E9%99%A4%E9%A6%96%E4%BD%8D%E7%A9%BA%E6%A0%87%E7%AD%BE"><span class="toc-number">16.4.</span> <span class="toc-text"> trim去除首位空标签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-if-v-else"><span class="toc-number">16.5.</span> <span class="toc-text"> v-if v-else</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-show"><span class="toc-number">16.6.</span> <span class="toc-text"> v-show</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">16.7.</span> <span class="toc-text"> 列表渲染</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8-2"><span class="toc-number">16.8.</span> <span class="toc-text"> 事件驱动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%A6%E5%90%AC%E5%B1%9E%E6%80%A7"><span class="toc-number">16.9.</span> <span class="toc-text"> 侦听属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-2"><span class="toc-number">16.10.</span> <span class="toc-text"> 生命周期</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#axios"><span class="toc-number">17.</span> <span class="toc-text"> AXIOS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B1%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%BC%82%E6%AD%A5%E5%8F%91%E9%80%81%E6%99%AE%E9%80%9A%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-number">17.1.</span> <span class="toc-text"> 示例1：客户端向服务器端异步发送普通参数值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BA%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%91%E9%80%81json%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">17.2.</span> <span class="toc-text"> 示例二：客户端向服务器端发送JSON格式的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%B8%89%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%8E%A5%E5%8F%97%E5%A4%84%E7%90%86json%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AFjson%E6%A0%BC%E5%BC%8F%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">17.3.</span> <span class="toc-text"> 示例三：服务器端接受处理JSON并返回给客户端JSON格式的代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#js%E5%A4%84%E7%90%86json"><span class="toc-number">17.4.</span> <span class="toc-text"> JS处理JSON</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%A6%E5%9F%8E"><span class="toc-number">18.</span> <span class="toc-text"> 书城</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/09/30/LocalDate%E4%B8%8ELocalTime%E4%B8%8ELocalDateTime%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E8%81%94%E7%B3%BB/" title="LocalDate与LocalTime与LocalDateTime的区别与联系"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/19/5yBnV3OzjDICrEb.jpg?_r_=96b232db-41e6-b849-329a-ad769cda2fdd" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LocalDate与LocalTime与LocalDateTime的区别与联系"/></a><div class="content"><a class="title" href="/2025/09/30/LocalDate%E4%B8%8ELocalTime%E4%B8%8ELocalDateTime%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E8%81%94%E7%B3%BB/" title="LocalDate与LocalTime与LocalDateTime的区别与联系">LocalDate与LocalTime与LocalDateTime的区别与联系</a><time datetime="2025-09-30T14:29:30.000Z" title="发表于 2025-09-30 22:29:30">2025-09-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/17/HttpServletRequest%E4%B8%ADInputStream%E8%AF%BB%E5%8F%96%E9%97%AE%E9%A2%98/" title="HttpServletRequest中InputStream读取问题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/19/j5yB7kgfqsJA2cz.png?_r_=a24bf68b-4e5f-98be-0ec0-ef9530eb5730" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HttpServletRequest中InputStream读取问题"/></a><div class="content"><a class="title" href="/2025/02/17/HttpServletRequest%E4%B8%ADInputStream%E8%AF%BB%E5%8F%96%E9%97%AE%E9%A2%98/" title="HttpServletRequest中InputStream读取问题">HttpServletRequest中InputStream读取问题</a><time datetime="2025-02-17T13:21:05.000Z" title="发表于 2025-02-17 21:21:05">2025-02-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/27/%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD/" title="文件的上传和下载"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/19/vJMKhVAUYNXRQuE.jpg?_r_=0711da31-d723-0d21-05b5-9a5af5a8484d" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="文件的上传和下载"/></a><div class="content"><a class="title" href="/2024/10/27/%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD/" title="文件的上传和下载">文件的上传和下载</a><time datetime="2024-10-27T01:50:10.000Z" title="发表于 2024-10-27 09:50:10">2024-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/15/SpringSecurity%E5%A4%8D%E4%B9%A0/" title="SpringSecurity"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/11/19/uzKysoOXnEAUWvQ.jpg?_r_=6fefa08d-1224-6abd-86ff-3164cf57c91c" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringSecurity"/></a><div class="content"><a class="title" href="/2024/10/15/SpringSecurity%E5%A4%8D%E4%B9%A0/" title="SpringSecurity">SpringSecurity</a><time datetime="2024-10-15T00:39:29.000Z" title="发表于 2024-10-15 08:39:29">2024-10-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/26/SpringBoot%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="SpringBoot响应式编程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s3.bmp.ovh/imgs/2022/11/08/ad62143435c86b71.png?_r_=b7d169f4-1162-2124-acaf-c5be30b6998f" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot响应式编程"/></a><div class="content"><a class="title" href="/2024/09/26/SpringBoot%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="SpringBoot响应式编程">SpringBoot响应式编程</a><time datetime="2024-09-26T13:26:18.000Z" title="发表于 2024-09-26 21:26:18">2024-09-26</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Nuyoah" target="_blank">Nuyoah</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">88</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">14</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://262259.xyz/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" href="https://262259.xyz/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s1.ax1x.com/2022/11/27/zUFla6.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">管理</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://qexo.262259.xyz/" title="博客后端"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://unpkg.com/qexo-static@1.4.0/assets/img/brand/qexo.png" alt="博客后端"/><span class="back-menu-item-text">博客后端</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Gitee/" style="font-size: 0.88rem;">Gitee<sup>1</sup></a><a href="/tags/JAVA/" style="font-size: 0.88rem; font-weight: 500; color: var(--anzhiyu-lighttext)">JAVA<sup>5</sup></a><a href="/tags/JS/" style="font-size: 0.88rem;">JS<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>7</sup></a><a href="/tags/Spring/" style="font-size: 0.88rem;">Spring<sup>2</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>4</sup></a><a href="/tags/win10/" style="font-size: 0.88rem;">win10<sup>1</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/" style="font-size: 0.88rem;">个人日记<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 0.88rem;">人工智能<sup>15</sup></a><a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 0.88rem;">工作<sup>3</sup></a><a href="/tags/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E4%BA%8E%E9%80%BB%E8%BE%91/" style="font-size: 0.88rem;">数字电路于逻辑<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/" style="font-size: 0.88rem;">算法实现<sup>12</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">计算机基础<sup>13</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Nuyoah 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.262259.xyz/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.262259.xyz/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.262259.xyz/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>